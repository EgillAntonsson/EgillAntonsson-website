(self.webpackChunkegill_antonsson_website=self.webpackChunkegill_antonsson_website||[]).push([[179],{6202:(wn,Zt)=>{"use strict";var Ke={update:function(){if(typeof window<"u"&&"function"==typeof window.addEventListener){var Xe=!1,ee=Object.defineProperty({},"passive",{get:function(){Xe=!0}}),ut=function(){};window.addEventListener("testPassiveEventSupport",ut,ee),window.removeEventListener("testPassiveEventSupport",ut,ee),Ke.hasSupport=Xe}}};Ke.update(),Zt.Z=Ke},3105:wn=>{"use strict";var Ke,Zt="object"==typeof Reflect?Reflect:null,$e=Zt&&"function"==typeof Zt.apply?Zt.apply:function(G,Y,q){return Function.prototype.apply.call(G,Y,q)};Ke=Zt&&"function"==typeof Zt.ownKeys?Zt.ownKeys:Object.getOwnPropertySymbols?function(G){return Object.getOwnPropertyNames(G).concat(Object.getOwnPropertySymbols(G))}:function(G){return Object.getOwnPropertyNames(G)};var Xe=Number.isNaN||function(G){return G!=G};function ee(){ee.init.call(this)}wn.exports=ee,wn.exports.once=function Ai(W,G){return new Promise(function(Y,q){function le(M){W.removeListener(G,pe),q(M)}function pe(){"function"==typeof W.removeListener&&W.removeListener("error",le),Y([].slice.call(arguments))}gn(W,G,pe,{once:!0}),"error"!==G&&function on(W,G,Y){"function"==typeof W.on&&gn(W,"error",G,Y)}(W,le,{once:!0})})},ee.EventEmitter=ee,ee.prototype._events=void 0,ee.prototype._eventsCount=0,ee.prototype._maxListeners=void 0;var ut=10;function Ze(W){if("function"!=typeof W)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof W)}function $t(W){return void 0===W._maxListeners?ee.defaultMaxListeners:W._maxListeners}function pi(W,G,Y,q){var le,pe,M;if(Ze(Y),void 0===(pe=W._events)?(pe=W._events=Object.create(null),W._eventsCount=0):(void 0!==pe.newListener&&(W.emit("newListener",G,Y.listener?Y.listener:Y),pe=W._events),M=pe[G]),void 0===M)M=pe[G]=Y,++W._eventsCount;else if("function"==typeof M?M=pe[G]=q?[Y,M]:[M,Y]:q?M.unshift(Y):M.push(Y),(le=$t(W))>0&&M.length>le&&!M.warned){M.warned=!0;var S=new Error("Possible EventEmitter memory leak detected. "+M.length+" "+String(G)+" listeners added. Use emitter.setMaxListeners() to increase limit");S.name="MaxListenersExceededWarning",S.emitter=W,S.type=G,S.count=M.length,function Fe(W){console&&console.warn&&console.warn(W)}(S)}return W}function O(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function H(W,G,Y){var q={fired:!1,wrapFn:void 0,target:W,type:G,listener:Y},le=O.bind(q);return le.listener=Y,q.wrapFn=le,le}function ae(W,G,Y){var q=W._events;if(void 0===q)return[];var le=q[G];return void 0===le?[]:"function"==typeof le?Y?[le.listener||le]:[le]:Y?function Cn(W){for(var G=new Array(W.length),Y=0;Y<G.length;++Y)G[Y]=W[Y].listener||W[Y];return G}(le):zt(le,le.length)}function Ve(W){var G=this._events;if(void 0!==G){var Y=G[W];if("function"==typeof Y)return 1;if(void 0!==Y)return Y.length}return 0}function zt(W,G){for(var Y=new Array(G),q=0;q<G;++q)Y[q]=W[q];return Y}function gn(W,G,Y,q){if("function"==typeof W.on)q.once?W.once(G,Y):W.on(G,Y);else{if("function"!=typeof W.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof W);W.addEventListener(G,function le(pe){q.once&&W.removeEventListener(G,le),Y(pe)})}}Object.defineProperty(ee,"defaultMaxListeners",{enumerable:!0,get:function(){return ut},set:function(W){if("number"!=typeof W||W<0||Xe(W))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+W+".");ut=W}}),ee.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ee.prototype.setMaxListeners=function(G){if("number"!=typeof G||G<0||Xe(G))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+G+".");return this._maxListeners=G,this},ee.prototype.getMaxListeners=function(){return $t(this)},ee.prototype.emit=function(G){for(var Y=[],q=1;q<arguments.length;q++)Y.push(arguments[q]);var le="error"===G,pe=this._events;if(void 0!==pe)le=le&&void 0===pe.error;else if(!le)return!1;if(le){var M;if(Y.length>0&&(M=Y[0]),M instanceof Error)throw M;var S=new Error("Unhandled error."+(M?" ("+M.message+")":""));throw S.context=M,S}var j=pe[G];if(void 0===j)return!1;if("function"==typeof j)$e(j,this,Y);else{var K=j.length,ne=zt(j,K);for(q=0;q<K;++q)$e(ne[q],this,Y)}return!0},ee.prototype.on=ee.prototype.addListener=function(G,Y){return pi(this,G,Y,!1)},ee.prototype.prependListener=function(G,Y){return pi(this,G,Y,!0)},ee.prototype.once=function(G,Y){return Ze(Y),this.on(G,H(this,G,Y)),this},ee.prototype.prependOnceListener=function(G,Y){return Ze(Y),this.prependListener(G,H(this,G,Y)),this},ee.prototype.off=ee.prototype.removeListener=function(G,Y){var q,le,pe,M,S;if(Ze(Y),void 0===(le=this._events))return this;if(void 0===(q=le[G]))return this;if(q===Y||q.listener===Y)0==--this._eventsCount?this._events=Object.create(null):(delete le[G],le.removeListener&&this.emit("removeListener",G,q.listener||Y));else if("function"!=typeof q){for(pe=-1,M=q.length-1;M>=0;M--)if(q[M]===Y||q[M].listener===Y){S=q[M].listener,pe=M;break}if(pe<0)return this;0===pe?q.shift():function Ae(W,G){for(;G+1<W.length;G++)W[G]=W[G+1];W.pop()}(q,pe),1===q.length&&(le[G]=q[0]),void 0!==le.removeListener&&this.emit("removeListener",G,S||Y)}return this},ee.prototype.removeAllListeners=function(G){var Y,q,le;if(void 0===(q=this._events))return this;if(void 0===q.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==q[G]&&(0==--this._eventsCount?this._events=Object.create(null):delete q[G]),this;if(0===arguments.length){var M,pe=Object.keys(q);for(le=0;le<pe.length;++le)"removeListener"!==(M=pe[le])&&this.removeAllListeners(M);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(Y=q[G]))this.removeListener(G,Y);else if(void 0!==Y)for(le=Y.length-1;le>=0;le--)this.removeListener(G,Y[le]);return this},ee.prototype.listeners=function(G){return ae(this,G,!0)},ee.prototype.rawListeners=function(G){return ae(this,G,!1)},ee.listenerCount=function(W,G){return"function"==typeof W.listenerCount?W.listenerCount(G):Ve.call(W,G)},ee.prototype.listenerCount=Ve,ee.prototype.eventNames=function(){return this._eventsCount>0?Ke(this._events):[]}},593:function(wn,Zt){var $e,Fe;$e=function Xe(){"use strict";var ee=typeof self<"u"?self:typeof window<"u"?window:void 0!==ee?ee:{},ut=!ee.document&&!!ee.postMessage,Ze=ut&&/blob:/i.test((ee.location||{}).protocol),$t={},pi=0,O={parse:function(M,S){var j=(S=S||{}).dynamicTyping||!1;if(pe(j)&&(S.dynamicTypingFunction=j,j={}),S.dynamicTyping=j,S.transform=!!pe(S.transform)&&S.transform,S.worker&&O.WORKERS_SUPPORTED){var K=function(){if(!O.WORKERS_SUPPORTED)return!1;var Nt,dt,Se=(Nt=ee.URL||ee.webkitURL||null,dt=Xe.toString(),O.BLOB_URL||(O.BLOB_URL=Nt.createObjectURL(new Blob(["(",dt,")();"],{type:"text/javascript"})))),$=new ee.Worker(Se);return $.onmessage=W,$.id=pi++,$t[$.id]=$}();return K.userStep=S.step,K.userChunk=S.chunk,K.userComplete=S.complete,K.userError=S.error,S.step=pe(S.step),S.chunk=pe(S.chunk),S.complete=pe(S.complete),S.error=pe(S.error),delete S.worker,void K.postMessage({input:M,config:S,workerId:K.id})}var ne=null;return"string"==typeof M?ne=S.download?new Ve(S):new Ae(S):!0===M.readable&&pe(M.read)&&pe(M.on)?ne=new Cn(S):(ee.File&&M instanceof File||M instanceof Object)&&(ne=new zt(S)),ne.stream(M)},unparse:function(M,S){var j=!1,K=!0,ne=",",Se="\r\n",$='"',Nt=$+$,dt=!1,de=null,Pt=!1;!function(){if("object"==typeof S){if("string"!=typeof S.delimiter||O.BAD_DELIMITERS.filter(function(L){return-1!==S.delimiter.indexOf(L)}).length||(ne=S.delimiter),("boolean"==typeof S.quotes||"function"==typeof S.quotes||Array.isArray(S.quotes))&&(j=S.quotes),"boolean"!=typeof S.skipEmptyLines&&"string"!=typeof S.skipEmptyLines||(dt=S.skipEmptyLines),"string"==typeof S.newline&&(Se=S.newline),"string"==typeof S.quoteChar&&($=S.quoteChar),"boolean"==typeof S.header&&(K=S.header),Array.isArray(S.columns)){if(0===S.columns.length)throw new Error("Option columns is empty");de=S.columns}void 0!==S.escapeChar&&(Nt=S.escapeChar+$),"boolean"==typeof S.escapeFormulae&&(Pt=S.escapeFormulae)}}();var P=new RegExp(on($),"g");if("string"==typeof M&&(M=JSON.parse(M)),Array.isArray(M)){if(!M.length||Array.isArray(M[0]))return B(null,M,dt);if("object"==typeof M[0])return B(de||Object.keys(M[0]),M,dt)}else if("object"==typeof M)return"string"==typeof M.data&&(M.data=JSON.parse(M.data)),Array.isArray(M.data)&&(M.fields||(M.fields=M.meta&&M.meta.fields),M.fields||(M.fields=Array.isArray(M.data[0])?M.fields:"object"==typeof M.data[0]?Object.keys(M.data[0]):[]),Array.isArray(M.data[0])||"object"==typeof M.data[0]||(M.data=[M.data])),B(M.fields||[],M.data||[],dt);throw new Error("Unable to serialize unrecognized input");function B(L,ge,xe){var St="";"string"==typeof L&&(L=JSON.parse(L)),"string"==typeof ge&&(ge=JSON.parse(ge));var bt=Array.isArray(L)&&0<L.length,Ft=!Array.isArray(ge[0]);if(bt&&K){for(var Jt=0;Jt<L.length;Jt++)0<Jt&&(St+=ne),St+=J(L[Jt],Jt);0<ge.length&&(St+=Se)}for(var Ce=0;Ce<ge.length;Ce++){var st=bt?L.length:ge[Ce].length,_t=!1,It=bt?0===Object.keys(ge[Ce]).length:0===ge[Ce].length;if(xe&&!bt&&(_t="greedy"===xe?""===ge[Ce].join("").trim():1===ge[Ce].length&&0===ge[Ce][0].length),"greedy"===xe&&bt){for(var tt=[],he=0;he<st;he++)tt.push(ge[Ce][Ft?L[he]:he]);_t=""===tt.join("").trim()}if(!_t){for(var ke=0;ke<st;ke++)0<ke&&!It&&(St+=ne),St+=J(ge[Ce][bt&&Ft?L[ke]:ke],ke);Ce<ge.length-1&&(!xe||0<st&&!It)&&(St+=Se)}}return St}function J(L,ge){if(null==L)return"";if(L.constructor===Date)return JSON.stringify(L).slice(1,25);!0===Pt&&"string"==typeof L&&null!==L.match(/^[=+\-@].*$/)&&(L="'"+L);var xe=L.toString().replace(P,Nt);return"boolean"==typeof j&&j||"function"==typeof j&&j(L,ge)||Array.isArray(j)&&j[ge]||function(bt,Ft){for(var Jt=0;Jt<Ft.length;Jt++)if(-1<bt.indexOf(Ft[Jt]))return!0;return!1}(xe,O.BAD_DELIMITERS)||-1<xe.indexOf(ne)||" "===xe.charAt(0)||" "===xe.charAt(xe.length-1)?$+xe+$:xe}}};if(O.RECORD_SEP=String.fromCharCode(30),O.UNIT_SEP=String.fromCharCode(31),O.BYTE_ORDER_MARK="\ufeff",O.BAD_DELIMITERS=["\r","\n",'"',O.BYTE_ORDER_MARK],O.WORKERS_SUPPORTED=!ut&&!!ee.Worker,O.NODE_STREAM_INPUT=1,O.LocalChunkSize=10485760,O.RemoteChunkSize=5242880,O.DefaultDelimiter=",",O.Parser=gn,O.ParserHandle=Ai,O.NetworkStreamer=Ve,O.FileStreamer=zt,O.StringStreamer=Ae,O.ReadableStreamStreamer=Cn,ee.jQuery){var H=ee.jQuery;H.fn.parse=function(M){var S=M.config||{},j=[];return this.each(function(Se){if("INPUT"!==H(this).prop("tagName").toUpperCase()||"file"!==H(this).attr("type").toLowerCase()||!ee.FileReader||!this.files||0===this.files.length)return!0;for(var $=0;$<this.files.length;$++)j.push({file:this.files[$],inputElem:this,instanceConfig:H.extend({},S)})}),K(),this;function K(){if(0!==j.length){var $,Nt,dt,de=j[0];if(pe(M.before)){var Pt=M.before(de.file,de.inputElem);if("object"==typeof Pt){if("abort"===Pt.action)return"AbortError",$=de.file,Nt=de.inputElem,dt=Pt.reason,void(pe(M.error)&&M.error({name:"AbortError"},$,Nt,dt));if("skip"===Pt.action)return void ne();"object"==typeof Pt.config&&(de.instanceConfig=H.extend(de.instanceConfig,Pt.config))}else if("skip"===Pt)return void ne()}var P=de.instanceConfig.complete;de.instanceConfig.complete=function(B){pe(P)&&P(B,de.file,de.inputElem),ne()},O.parse(de.file,de.instanceConfig)}else pe(M.complete)&&M.complete()}function ne(){j.splice(0,1),K()}}}function ae(M){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(S){var j=q(S);j.chunkSize=parseInt(j.chunkSize),S.step||S.chunk||(j.chunkSize=null),this._handle=new Ai(j),(this._handle.streamer=this)._config=j}.call(this,M),this.parseChunk=function(S,j){if(this.isFirstChunk&&pe(this._config.beforeFirstChunk)){var K=this._config.beforeFirstChunk(S);void 0!==K&&(S=K)}this.isFirstChunk=!1,this._halted=!1;var ne=this._partialLine+S;this._partialLine="";var Se=this._handle.parse(ne,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var $=Se.meta.cursor;this._finished||(this._partialLine=ne.substring($-this._baseIndex),this._baseIndex=$),Se&&Se.data&&(this._rowCount+=Se.data.length);var Nt=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(Ze)ee.postMessage({results:Se,workerId:O.WORKER_ID,finished:Nt});else if(pe(this._config.chunk)&&!j){if(this._config.chunk(Se,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);Se=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(Se.data),this._completeResults.errors=this._completeResults.errors.concat(Se.errors),this._completeResults.meta=Se.meta),this._completed||!Nt||!pe(this._config.complete)||Se&&Se.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),Nt||Se&&Se.meta.paused||this._nextChunk(),Se}this._halted=!0},this._sendError=function(S){pe(this._config.error)?this._config.error(S):Ze&&this._config.error&&ee.postMessage({workerId:O.WORKER_ID,error:S,finished:!1})}}function Ve(M){var S;(M=M||{}).chunkSize||(M.chunkSize=O.RemoteChunkSize),ae.call(this,M),this._nextChunk=ut?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(j){this._input=j,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(S=new XMLHttpRequest,this._config.withCredentials&&(S.withCredentials=this._config.withCredentials),ut||(S.onload=le(this._chunkLoaded,this),S.onerror=le(this._chunkError,this)),S.open(this._config.downloadRequestBody?"POST":"GET",this._input,!ut),this._config.downloadRequestHeaders){var j=this._config.downloadRequestHeaders;for(var K in j)S.setRequestHeader(K,j[K])}this._config.chunkSize&&S.setRequestHeader("Range","bytes="+this._start+"-"+(this._start+this._config.chunkSize-1));try{S.send(this._config.downloadRequestBody)}catch(Se){this._chunkError(Se.message)}ut&&0===S.status&&this._chunkError()}},this._chunkLoaded=function(){var K;4===S.readyState&&(S.status<200||400<=S.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:S.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null===(K=S.getResponseHeader("Content-Range"))?-1:parseInt(K.substring(K.lastIndexOf("/")+1))),this.parseChunk(S.responseText)))},this._chunkError=function(j){this._sendError(new Error(S.statusText||j))}}function zt(M){var S,j;(M=M||{}).chunkSize||(M.chunkSize=O.LocalChunkSize),ae.call(this,M);var K=typeof FileReader<"u";this.stream=function(ne){this._input=ne,j=ne.slice||ne.webkitSlice||ne.mozSlice,K?((S=new FileReader).onload=le(this._chunkLoaded,this),S.onerror=le(this._chunkError,this)):S=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var ne=this._input;if(this._config.chunkSize){var Se=Math.min(this._start+this._config.chunkSize,this._input.size);ne=j.call(ne,this._start,Se)}var $=S.readAsText(ne,this._config.encoding);K||this._chunkLoaded({target:{result:$}})},this._chunkLoaded=function(ne){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(ne.target.result)},this._chunkError=function(){this._sendError(S.error)}}function Ae(M){var S;ae.call(this,M=M||{}),this.stream=function(j){return S=j,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var j,K=this._config.chunkSize;return K?(j=S.substring(0,K),S=S.substring(K)):(j=S,S=""),this._finished=!S,this.parseChunk(j)}}}function Cn(M){ae.call(this,M=M||{});var S=[],j=!0,K=!1;this.pause=function(){ae.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){ae.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(ne){this._input=ne,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){K&&1===S.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),S.length?this.parseChunk(S.shift()):j=!0},this._streamData=le(function(ne){try{S.push("string"==typeof ne?ne:ne.toString(this._config.encoding)),j&&(j=!1,this._checkIsFinished(),this.parseChunk(S.shift()))}catch(Se){this._streamError(Se)}},this),this._streamError=le(function(ne){this._streamCleanUp(),this._sendError(ne)},this),this._streamEnd=le(function(){this._streamCleanUp(),K=!0,this._streamData("")},this),this._streamCleanUp=le(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function Ai(M){var S,j,K,ne=Math.pow(2,53),Se=-ne,$=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Nt=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,dt=this,de=0,Pt=0,P=!1,B=!1,J=[],L={data:[],errors:[],meta:{}};if(pe(M.step)){var ge=M.step;M.step=function(Ce){if(L=Ce,bt())St();else{if(St(),0===L.data.length)return;de+=Ce.data.length,M.preview&&de>M.preview?j.abort():(L.data=L.data[0],ge(L,dt))}}}function xe(Ce){return"greedy"===M.skipEmptyLines?""===Ce.join("").trim():1===Ce.length&&0===Ce[0].length}function St(){if(L&&K&&(Jt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+O.DefaultDelimiter+"'"),K=!1),M.skipEmptyLines)for(var Ce=0;Ce<L.data.length;Ce++)xe(L.data[Ce])&&L.data.splice(Ce--,1);return bt()&&function(){if(L)if(Array.isArray(L.data[0])){for(var _t=0;bt()&&_t<L.data.length;_t++)L.data[_t].forEach(st);L.data.splice(0,1)}else L.data.forEach(st);function st(It,tt){pe(M.transformHeader)&&(It=M.transformHeader(It,tt)),J.push(It)}}(),function(){if(!L||!M.header&&!M.dynamicTyping&&!M.transform)return L;function st(It,tt){var he,At=M.header?{}:[];for(he=0;he<It.length;he++){var ke=he,Wt=It[he];M.header&&(ke=he>=J.length?"__parsed_extra":J[he]),M.transform&&(Wt=M.transform(Wt,ke)),Wt=Ft(ke,Wt),"__parsed_extra"===ke?(At[ke]=At[ke]||[],At[ke].push(Wt)):At[ke]=Wt}return M.header&&(he>J.length?Jt("FieldMismatch","TooManyFields","Too many fields: expected "+J.length+" fields but parsed "+he,Pt+tt):he<J.length&&Jt("FieldMismatch","TooFewFields","Too few fields: expected "+J.length+" fields but parsed "+he,Pt+tt)),At}var _t=1;return!L.data.length||Array.isArray(L.data[0])?(L.data=L.data.map(st),_t=L.data.length):L.data=st(L.data,0),M.header&&L.meta&&(L.meta.fields=J),Pt+=_t,L}()}function bt(){return M.header&&0===J.length}function Ft(Ce,st){return _t=Ce,M.dynamicTypingFunction&&void 0===M.dynamicTyping[_t]&&(M.dynamicTyping[_t]=M.dynamicTypingFunction(_t)),!0===(M.dynamicTyping[_t]||M.dynamicTyping)?"true"===st||"TRUE"===st||"false"!==st&&"FALSE"!==st&&(function(It){if($.test(It)){var tt=parseFloat(It);if(Se<tt&&tt<ne)return!0}return!1}(st)?parseFloat(st):Nt.test(st)?new Date(st):""===st?null:st):st;var _t}function Jt(Ce,st,_t,It){var tt={type:Ce,code:st,message:_t};void 0!==It&&(tt.row=It),L.errors.push(tt)}this.parse=function(Ce,st,_t){if(M.newline||(M.newline=function(At,ke){At=At.substring(0,1048576);var Wt=new RegExp(on(ke)+"([^]*?)"+on(ke),"gm"),gi=(At=At.replace(Wt,"")).split("\r"),mn=At.split("\n");if(1===gi.length||1<mn.length&&mn[0].length<gi[0].length)return"\n";for(var mi=0,Kn=0;Kn<gi.length;Kn++)"\n"===gi[Kn][0]&&mi++;return mi>=gi.length/2?"\r\n":"\r"}(Ce,M.quoteChar||'"')),K=!1,M.delimiter)pe(M.delimiter)&&(M.delimiter=M.delimiter(Ce),L.meta.delimiter=M.delimiter);else{var tt=function(At,ke,Wt,gi,mn){var xt,mi,Kn,Dn;mn=mn||[",","\t","|",";",O.RECORD_SEP,O.UNIT_SEP];for(var Nn=0;Nn<mn.length;Nn++){var Qt=mn[Nn],Ir=0,Yn=0,fc=0;Kn=void 0;for(var as=new gn({comments:gi,delimiter:Qt,newline:ke,preview:10}).parse(At),Ar=0;Ar<as.data.length;Ar++)if(Wt&&xe(as.data[Ar]))fc++;else{var ls=as.data[Ar].length;Yn+=ls,void 0!==Kn?0<ls&&(Ir+=Math.abs(ls-Kn),Kn=ls):Kn=ls}0<as.data.length&&(Yn/=as.data.length-fc),(void 0===mi||Ir<=mi)&&(void 0===Dn||Dn<Yn)&&1.99<Yn&&(mi=Ir,xt=Qt,Dn=Yn)}return{successful:!!(M.delimiter=xt),bestDelimiter:xt}}(Ce,M.newline,M.skipEmptyLines,M.comments,M.delimitersToGuess);tt.successful?M.delimiter=tt.bestDelimiter:(K=!0,M.delimiter=O.DefaultDelimiter),L.meta.delimiter=M.delimiter}var he=q(M);return M.preview&&M.header&&he.preview++,S=Ce,j=new gn(he),L=j.parse(S,st,_t),St(),P?{meta:{paused:!0}}:L||{meta:{paused:!1}}},this.paused=function(){return P},this.pause=function(){P=!0,j.abort(),S=pe(M.chunk)?"":S.substring(j.getCharIndex())},this.resume=function(){dt.streamer._halted?(P=!1,dt.streamer.parseChunk(S,!0)):setTimeout(dt.resume,3)},this.aborted=function(){return B},this.abort=function(){B=!0,j.abort(),L.meta.aborted=!0,pe(M.complete)&&M.complete(L),S=""}}function on(M){return M.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function gn(M){var S,j=(M=M||{}).delimiter,K=M.newline,ne=M.comments,Se=M.step,$=M.preview,Nt=M.fastMode,dt=S=void 0===M.quoteChar?'"':M.quoteChar;if(void 0!==M.escapeChar&&(dt=M.escapeChar),("string"!=typeof j||-1<O.BAD_DELIMITERS.indexOf(j))&&(j=","),ne===j)throw new Error("Comment character same as delimiter");!0===ne?ne="#":("string"!=typeof ne||-1<O.BAD_DELIMITERS.indexOf(ne))&&(ne=!1),"\n"!==K&&"\r"!==K&&"\r\n"!==K&&(K="\n");var de=0,Pt=!1;this.parse=function(P,B,J){if("string"!=typeof P)throw new Error("Input must be a string");var L=P.length,ge=j.length,xe=K.length,St=ne.length,bt=pe(Se),Ft=[],Jt=[],Ce=[],st=de=0;if(!P)return Dn();if(Nt||!1!==Nt&&-1===P.indexOf(S)){for(var _t=P.split(K),It=0;It<_t.length;It++){if(de+=(Ce=_t[It]).length,It!==_t.length-1)de+=K.length;else if(J)return Dn();if(!ne||Ce.substring(0,St)!==ne){if(bt){if(Ft=[],mn(Ce.split(j)),Nn(),Pt)return Dn()}else mn(Ce.split(j));if($&&$<=It)return Ft=Ft.slice(0,$),Dn(!0)}}return Dn()}for(var tt=P.indexOf(j,de),he=P.indexOf(K,de),At=new RegExp(on(dt)+on(S),"g"),ke=P.indexOf(S,de);;)if(P[de]!==S)if(ne&&0===Ce.length&&P.substring(de,de+St)===ne){if(-1===he)return Dn();he=P.indexOf(K,de=he+xe),tt=P.indexOf(j,de)}else if(-1!==tt&&(tt<he||-1===he))Ce.push(P.substring(de,tt)),tt=P.indexOf(j,de=tt+ge);else{if(-1===he)break;if(Ce.push(P.substring(de,he)),Kn(he+xe),bt&&(Nn(),Pt))return Dn();if($&&Ft.length>=$)return Dn(!0)}else for(ke=de,de++;;){if(-1===(ke=P.indexOf(S,ke+1)))return J||Jt.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Ft.length,index:de}),mi();if(ke===L-1)return mi(P.substring(de,ke).replace(At,S));if(S!==dt||P[ke+1]!==dt){if(S===dt||0===ke||P[ke-1]!==dt){-1!==tt&&tt<ke+1&&(tt=P.indexOf(j,ke+1)),-1!==he&&he<ke+1&&(he=P.indexOf(K,ke+1));var Wt=xt(-1===he?tt:Math.min(tt,he));if(P[ke+1+Wt]===j){Ce.push(P.substring(de,ke).replace(At,S)),P[de=ke+1+Wt+ge]!==S&&(ke=P.indexOf(S,de)),tt=P.indexOf(j,de),he=P.indexOf(K,de);break}var gi=xt(he);if(P.substring(ke+1+gi,ke+1+gi+xe)===K){if(Ce.push(P.substring(de,ke).replace(At,S)),Kn(ke+1+gi+xe),tt=P.indexOf(j,de),ke=P.indexOf(S,de),bt&&(Nn(),Pt))return Dn();if($&&Ft.length>=$)return Dn(!0);break}Jt.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Ft.length,index:de}),ke++}}else ke++}return mi();function mn(Qt){Ft.push(Qt),st=de}function xt(Qt){var Ir=0;if(-1!==Qt){var Yn=P.substring(ke+1,Qt);Yn&&""===Yn.trim()&&(Ir=Yn.length)}return Ir}function mi(Qt){return J||(void 0===Qt&&(Qt=P.substring(de)),Ce.push(Qt),de=L,mn(Ce),bt&&Nn()),Dn()}function Kn(Qt){de=Qt,mn(Ce),Ce=[],he=P.indexOf(K,de)}function Dn(Qt){return{data:Ft,errors:Jt,meta:{delimiter:j,linebreak:K,aborted:Pt,truncated:!!Qt,cursor:st+(B||0)}}}function Nn(){Se(Dn()),Ft=[],Jt=[]}},this.abort=function(){Pt=!0},this.getCharIndex=function(){return de}}function W(M){var S=M.data,j=$t[S.workerId],K=!1;if(S.error)j.userError(S.error,S.file);else if(S.results&&S.results.data){var ne={abort:function(){K=!0,G(S.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Y,resume:Y};if(pe(j.userStep)){for(var Se=0;Se<S.results.data.length&&(j.userStep({data:S.results.data[Se],errors:S.results.errors,meta:S.results.meta},ne),!K);Se++);delete S.results}else pe(j.userChunk)&&(j.userChunk(S.results,ne,S.file),delete S.results)}S.finished&&!K&&G(S.workerId,S.results)}function G(M,S){var j=$t[M];pe(j.userComplete)&&j.userComplete(S),j.terminate(),delete $t[M]}function Y(){throw new Error("Not implemented.")}function q(M){if("object"!=typeof M||null===M)return M;var S=Array.isArray(M)?[]:{};for(var j in M)S[j]=q(M[j]);return S}function le(M,S){return function(){M.apply(S,arguments)}}function pe(M){return"function"==typeof M}return Ze&&(ee.onmessage=function(M){var S=M.data;if(void 0===O.WORKER_ID&&S&&(O.WORKER_ID=S.workerId),"string"==typeof S.input)ee.postMessage({workerId:O.WORKER_ID,results:O.parse(S.input,S.config),finished:!0});else if(ee.File&&S.input instanceof File||S.input instanceof Object){var j=O.parse(S.input,S.config);j&&ee.postMessage({workerId:O.WORKER_ID,results:j,finished:!0})}}),(Ve.prototype=Object.create(ae.prototype)).constructor=Ve,(zt.prototype=Object.create(ae.prototype)).constructor=zt,(Ae.prototype=Object.create(Ae.prototype)).constructor=Ae,(Cn.prototype=Object.create(ae.prototype)).constructor=Cn,O},void 0!==(Fe=$e.apply(Zt,[]))&&(wn.exports=Fe)},5217:wn=>{"use strict";var Zt=setTimeout;function $e(){}function Fe(O){if(!(this instanceof Fe))throw new TypeError("Promises must be constructed via new");if("function"!=typeof O)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],pi(O,this)}function Xe(O,H){for(;3===O._state;)O=O._value;0!==O._state?(O._handled=!0,Fe._immediateFn(function(){var ae=1===O._state?H.onFulfilled:H.onRejected;if(null!==ae){var Ve;try{Ve=ae(O._value)}catch(zt){return void ut(H.promise,zt)}ee(H.promise,Ve)}else(1===O._state?ee:ut)(H.promise,O._value)})):O._deferreds.push(H)}function ee(O,H){try{if(H===O)throw new TypeError("A promise cannot be resolved with itself.");if(H&&("object"==typeof H||"function"==typeof H)){var ae=H.then;if(H instanceof Fe)return O._state=3,O._value=H,void Ze(O);if("function"==typeof ae)return void pi(function Ke(O,H){return function(){O.apply(H,arguments)}}(ae,H),O)}O._state=1,O._value=H,Ze(O)}catch(Ve){ut(O,Ve)}}function ut(O,H){O._state=2,O._value=H,Ze(O)}function Ze(O){2===O._state&&0===O._deferreds.length&&Fe._immediateFn(function(){O._handled||Fe._unhandledRejectionFn(O._value)});for(var H=0,ae=O._deferreds.length;H<ae;H++)Xe(O,O._deferreds[H]);O._deferreds=null}function $t(O,H,ae){this.onFulfilled="function"==typeof O?O:null,this.onRejected="function"==typeof H?H:null,this.promise=ae}function pi(O,H){var ae=!1;try{O(function(Ve){ae||(ae=!0,ee(H,Ve))},function(Ve){ae||(ae=!0,ut(H,Ve))})}catch(Ve){if(ae)return;ae=!0,ut(H,Ve)}}Fe.prototype.catch=function(O){return this.then(null,O)},Fe.prototype.then=function(O,H){var ae=new this.constructor($e);return Xe(this,new $t(O,H,ae)),ae},Fe.prototype.finally=function(O){var H=this.constructor;return this.then(function(ae){return H.resolve(O()).then(function(){return ae})},function(ae){return H.resolve(O()).then(function(){return H.reject(ae)})})},Fe.all=function(O){return new Fe(function(H,ae){if(!O||typeof O.length>"u")throw new TypeError("Promise.all accepts an array");var Ve=Array.prototype.slice.call(O);if(0===Ve.length)return H([]);var zt=Ve.length;function Ae(Ai,on){try{if(on&&("object"==typeof on||"function"==typeof on)){var gn=on.then;if("function"==typeof gn)return void gn.call(on,function(W){Ae(Ai,W)},ae)}Ve[Ai]=on,0==--zt&&H(Ve)}catch(W){ae(W)}}for(var Cn=0;Cn<Ve.length;Cn++)Ae(Cn,Ve[Cn])})},Fe.resolve=function(O){return O&&"object"==typeof O&&O.constructor===Fe?O:new Fe(function(H){H(O)})},Fe.reject=function(O){return new Fe(function(H,ae){ae(O)})},Fe.race=function(O){return new Fe(function(H,ae){for(var Ve=0,zt=O.length;Ve<zt;Ve++)O[Ve].then(H,ae)})},Fe._immediateFn="function"==typeof setImmediate&&function(O){setImmediate(O)}||function(O){Zt(O,0)},Fe._unhandledRejectionFn=function(H){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",H)},wn.exports=Fe},4120:(wn,Zt,$e)=>{"use strict";var Ke=global.Promise||$e(5217),Fe=$e(7021),Xe=Object.freeze(["play","pause","toggle","seekTo","setVolume","next","prev","skip"]),ee=Object.freeze(["getVolume","getDuration","getPosition","getSounds","getCurrentSound","getCurrentSoundIndex","isPaused"]),ut=Object.freeze({autoPlay:"auto_play",showArtwork:"show_artwork",showComments:"show_comments",showPlaycount:"show_playcount",showUser:"show_user",startTrack:"start_track"});function Ze(H){this._widget=Fe(H)}function $t(H){return function(){this._widget[H].apply(this._widget,arguments)}}Ze.events=Fe.Events,Ze.prototype.load=function(H,ae){return new Ke(function(Ve){(ae=ae||{}).callback=Ve,function O(H){for(var ae in ut)ut.hasOwnProperty(ae)&&null!=H[ae]&&(H[ut[ae]]=H[ae])}(ae),this._widget.load(H,ae)}.bind(this))},Ze.prototype.on=$t("bind"),Ze.prototype.bind=Ze.prototype.on,Ze.prototype.removeListener=$t("unbind"),Ze.prototype.unbind=Ze.prototype.removeListener,Xe.forEach(function(H){Ze.prototype[H]=$t(H)}),ee.forEach(function(H){Ze.prototype[H]=function pi(H){return function(){return new Ke(function(ae,Ve){this._widget[H](function(zt){ae(zt)})}.bind(this))}}(H)}),wn.exports=Ze},7021:wn=>{var Zt=Zt||{};Zt.Widget=function($e){function Ke(Xe){if(Fe[Xe])return Fe[Xe].exports;var ee=Fe[Xe]={exports:{},id:Xe,loaded:!1};return $e[Xe].call(ee.exports,ee,ee.exports,Ke),ee.loaded=!0,ee.exports}var Fe={};return Ke.m=$e,Ke.c=Fe,Ke.p="",Ke(0)}([function($e,Ke,Fe){function $t(P){var B,J;for(B=0,J=Nt.length;B<J&&!1!==P(Nt[B]);B++);}function O(P){return P.contentWindow?P.contentWindow:P.contentDocument&&"parentWindow"in P.contentDocument?P.contentDocument.parentWindow:null}function H(P){var B,J=[];for(B in P)P.hasOwnProperty(B)&&J.push(P[B]);return J}function ae(P,B,J){J.callbacks[P]=J.callbacks[P]||[],J.callbacks[P].push(B)}function Ve(P,B){var L=!0;return B.callbacks[P]=[],$t(function(ge){if((ge.callbacks[P]||[]).length)return L=!1,!1}),L}function zt(P,B,J){var L,ge,xe=O(J);return!!xe.postMessage&&(L=J.getAttribute("src").split("?")[0],ge=JSON.stringify({method:P,value:B}),"//"===L.substr(0,2)&&(L=window.location.protocol+L),L=L.replace(/http:\/\/(w|wt).soundcloud.com/,"https://$1.soundcloud.com"),void xe.postMessage(ge,L))}function Ae(P){var B;return $t(function(J){if(J.instance===P)return B=J,!1}),B}function Cn(P){var B;return $t(function(J){if(O(J.element)===P)return B=J,!1}),B}function Ai(P,B){return function(J){var L=function ee(P){return!!(P&&P.constructor&&P.call&&P.apply)}(J),ge=Ae(this),xe=!L&&B?J:null,St=L&&!B?J:null;return St&&ae(P,St,ge),zt(P,xe,ge.element),this}}function on(P,B,J){var L,ge,xe;for(L=0,ge=B.length;L<ge;L++)P[xe=B[L]]=Ai(xe,J)}function gn(P,B,J){return P+"?url="+B+"&"+function W(P){var B,J,L=[];for(B in P)P.hasOwnProperty(B)&&(J=P[B],L.push(B+"="+("start_track"===B?parseInt(J,10):J?"true":"false")));return L.join("&")}(J)}function G(P,B,J){var L,ge,xe=P.callbacks[B]||[];for(L=0,ge=xe.length;L<ge;L++)xe[L].apply(P.instance,J);(function Ze(P){var B,J=!1;for(B in j)if(j.hasOwnProperty(B)&&j[B]===P){J=!0;break}return J}(B)||B===ne.READY)&&(P.callbacks[B]=[])}function Y(P){var B,J,L,ge,xe;try{J=JSON.parse(P.data)}catch{return!1}return B=Cn(P.source),L=J.method,ge=J.value,(!B||q(P.origin)===q(B.domain))&&(B?(L===ne.READY&&(B.isReady=!0,G(B,dt),Ve(dt,B)),L!==ne.PLAY||B.playEventFired||(B.playEventFired=!0),L!==ne.PLAY_PROGRESS||B.playEventFired||(B.playEventFired=!0,G(B,ne.PLAY,[ge])),xe=[],void 0!==ge&&xe.push(ge),void G(B,L,xe)):(L===ne.READY&&$.push(P.source),!1))}function q(P){return P.replace(Pt,"")}var le,pe,M,S=Fe(1),j=Fe(2),K=Fe(3),ne=S.api,Se=S.bridge,$=[],Nt=[],dt="__LATE_BINDING__",Pt=/^http(?:s?)/;window.addEventListener?window.addEventListener("message",Y,!1):window.attachEvent("onmessage",Y),$e.exports=M=function(P,B,J){if(function Xe(P){return!!(""===P||P&&P.charCodeAt&&P.substr)}(P)&&(P=document.getElementById(P)),!function ut(P){return!(!P||1!==P.nodeType||"IFRAME"!==P.nodeName.toUpperCase())}(P))throw new Error("SC.Widget function should be given either iframe element or a string specifying id attribute of iframe element.");B&&(P.src=gn("http://wt.soundcloud.dev:9200/",B,J=J||{}));var L,ge,xe=Cn(O(P));return xe&&xe.instance?xe.instance:(L=$.indexOf(O(P))>-1,ge=new le(P),Nt.push(new pe(ge,P,L)),ge)},M.Events=ne,window.SC=window.SC||{},window.SC.Widget=M,pe=function(P,B,J){this.instance=P,this.element=B,this.domain=function pi(P){var B,J,L,ge="";for("//"===P.substr(0,2)&&(P=window.location.protocol+P),B=0,J=(L=P.split("/")).length;B<J&&B<3;B++)ge+=L[B],B<2&&(ge+="/");return ge}(B.getAttribute("src")),this.isReady=!!J,this.callbacks={}},(le=function(){}).prototype={constructor:le,load:function(P,B){if(P){B=B||{};var J=this,L=Ae(this),ge=L.element,xe=ge.src,St=xe.substr(0,xe.indexOf("?"));L.isReady=!1,L.playEventFired=!1,ge.onload=function(){J.bind(ne.READY,function(){var bt,Ft=L.callbacks;for(bt in Ft)Ft.hasOwnProperty(bt)&&bt!==ne.READY&&zt(Se.ADD_LISTENER,bt,L.element);B.callback&&B.callback()})},ge.src=gn(St,P,B)}},bind:function(P,B){var J=this,L=Ae(this);return L&&L.element&&(P===ne.READY&&L.isReady?setTimeout(B,1):L.isReady?(ae(P,B,L),zt(Se.ADD_LISTENER,P,L.element)):ae(dt,function(){J.bind(P,B)},L)),this},unbind:function(P){var B,J=Ae(this);J&&J.element&&(B=Ve(P,J),P!==ne.READY&&B&&zt(Se.REMOVE_LISTENER,P,J.element))}},on(le.prototype,H(j)),on(le.prototype,H(K),!0)},function($e,Ke){Ke.api={LOAD_PROGRESS:"loadProgress",PLAY_PROGRESS:"playProgress",PLAY:"play",PAUSE:"pause",FINISH:"finish",SEEK:"seek",READY:"ready",OPEN_SHARE_PANEL:"sharePanelOpened",CLICK_DOWNLOAD:"downloadClicked",CLICK_BUY:"buyClicked",ERROR:"error"},Ke.bridge={REMOVE_LISTENER:"removeEventListener",ADD_LISTENER:"addEventListener"}},function($e,Ke){$e.exports={GET_VOLUME:"getVolume",GET_DURATION:"getDuration",GET_POSITION:"getPosition",GET_SOUNDS:"getSounds",GET_CURRENT_SOUND:"getCurrentSound",GET_CURRENT_SOUND_INDEX:"getCurrentSoundIndex",IS_PAUSED:"isPaused"}},function($e,Ke){$e.exports={PLAY:"play",PAUSE:"pause",TOGGLE:"toggle",SEEK_TO:"seekTo",SET_VOLUME:"setVolume",NEXT:"next",PREV:"prev",SKIP:"skip"}}]),wn.exports=Zt.Widget},5633:(wn,Zt,$e)=>{"use strict";function Ke(n){return"function"==typeof n}let Fe=!1;const Xe={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else Fe&&console.log("RxJS: Back to a better error behavior. Thank you. <3");Fe=n},get useDeprecatedSynchronousErrorHandling(){return Fe}};function ee(n){setTimeout(()=>{throw n},0)}const ut={closed:!0,next(n){},error(n){if(Xe.useDeprecatedSynchronousErrorHandling)throw n;ee(n)},complete(){}},Ze=Array.isArray||(n=>n&&"number"==typeof n.length);function $t(n){return null!==n&&"object"==typeof n}const O=(()=>{function n(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((t,i)=>`${i+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return n.prototype=Object.create(Error.prototype),n})();class H{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:i,_unsubscribe:r,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof H)t.remove(this);else if(null!==t)for(let o=0;o<t.length;++o)t[o].remove(this);if(Ke(r)){i&&(this._unsubscribe=void 0);try{r.call(this)}catch(o){e=o instanceof O?ae(o.errors):[o]}}if(Ze(s)){let o=-1,a=s.length;for(;++o<a;){const c=s[o];if($t(c))try{c.unsubscribe()}catch(u){e=e||[],u instanceof O?e=e.concat(ae(u.errors)):e.push(u)}}}if(e)throw new O(e)}add(e){let t=e;if(!e)return H.EMPTY;switch(typeof e){case"function":t=new H(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof H)){const s=t;t=new H,t._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:i}=t;if(null===i)t._parentOrParents=this;else if(i instanceof H){if(i===this)return t;t._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return t;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[t]:r.push(t),t}remove(e){const t=this._subscriptions;if(t){const i=t.indexOf(e);-1!==i&&t.splice(i,1)}}}var n;function ae(n){return n.reduce((e,t)=>e.concat(t instanceof O?t.errors:t),[])}H.EMPTY=((n=new H).closed=!0,n);const Ve="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class Ae extends H{constructor(e,t,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=ut;break;case 1:if(!e){this.destination=ut;break}if("object"==typeof e){e instanceof Ae?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new Cn(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new Cn(this,e,t,i)}}[Ve](){return this}static create(e,t,i){const r=new Ae(e,t,i);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class Cn extends Ae{constructor(e,t,i,r){super(),this._parentSubscriber=e;let s,o=this;Ke(t)?s=t:t&&(s=t.next,i=t.error,r=t.complete,t!==ut&&(o=Object.create(t),Ke(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=i,this._complete=r}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;Xe.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:i}=Xe;if(this._error)i&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)i?(t.syncErrorValue=e,t.syncErrorThrown=!0):ee(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;ee(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);Xe.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(i){if(this.unsubscribe(),Xe.useDeprecatedSynchronousErrorHandling)throw i;ee(i)}}__tryOrSetError(e,t,i){if(!Xe.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,i)}catch(r){return Xe.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(ee(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const gn="function"==typeof Symbol&&Symbol.observable||"@@observable";function W(n){return n}function Y(n){return 0===n.length?W:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let q=(()=>{class n{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const{operator:s}=this,o=function on(n,e,t){if(n){if(n instanceof Ae)return n;if(n[Ve])return n[Ve]()}return n||e||t?new Ae(n,e,t):new Ae(ut)}(t,i,r);if(o.add(s?s.call(o,this.source):this.source||Xe.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),Xe.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){Xe.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=i),function Ai(n){for(;n;){const{closed:e,destination:t,isStopped:i}=n;if(e||i)return!1;n=t&&t instanceof Ae?t:null}return!0}(t)?t.error(i):console.warn(i)}}forEach(t,i){return new(i=le(i))((r,s)=>{let o;o=this.subscribe(a=>{try{t(a)}catch(c){s(c),o&&o.unsubscribe()}},s,r)})}_subscribe(t){const{source:i}=this;return i&&i.subscribe(t)}[gn](){return this}pipe(...t){return 0===t.length?this:Y(t)(this)}toPromise(t){return new(t=le(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function le(n){if(n||(n=Xe.Promise||Promise),!n)throw new Error("no Promise impl found");return n}const M=(()=>{function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n})();class S extends H{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const i=t.indexOf(this.subscriber);-1!==i&&t.splice(i,1)}}class j extends Ae{constructor(e){super(e),this.destination=e}}let K=(()=>{class n extends q{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Ve](){return new j(this)}lift(t){const i=new ne(this,this);return i.operator=t,i}next(t){if(this.closed)throw new M;if(!this.isStopped){const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].next(t)}}error(t){if(this.closed)throw new M;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].error(t);this.observers.length=0}complete(){if(this.closed)throw new M;this.isStopped=!0;const{observers:t}=this,i=t.length,r=t.slice();for(let s=0;s<i;s++)r[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new M;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new M;return this.hasError?(t.error(this.thrownError),H.EMPTY):this.isStopped?(t.complete(),H.EMPTY):(this.observers.push(t),new S(this,t))}asObservable(){const t=new q;return t.source=this,t}}return n.create=(e,t)=>new ne(e,t),n})();class ne extends K{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):H.EMPTY}}function Se(n){return n&&"function"==typeof n.schedule}function $(n,e){return function(i){if("function"!=typeof n)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new Nt(n,e))}}class Nt{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new dt(e,this.project,this.thisArg))}}class dt extends Ae{constructor(e,t,i){super(e),this.project=t,this.count=0,this.thisArg=i||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}const de=n=>e=>{for(let t=0,i=n.length;t<i&&!e.closed;t++)e.next(n[t]);e.complete()},B=function P(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),xe=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function St(n){return!!n&&"function"!=typeof n.subscribe&&"function"==typeof n.then}const bt=n=>{if(n&&"function"==typeof n[gn])return(n=>e=>{const t=n[gn]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)})(n);if(xe(n))return de(n);if(St(n))return(n=>e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ee),e))(n);if(n&&"function"==typeof n[B])return(n=>e=>{const t=n[B]();for(;;){let i;try{i=t.next()}catch(r){return e.error(r),e}if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof t.return&&e.add(()=>{t.return&&t.return()}),e})(n);{const t=`You provided ${$t(n)?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(t)}};function Ce(n,e){return new q(t=>{const i=new H;let r=0;return i.add(e.schedule(function(){r!==n.length?(t.next(n[r++]),t.closed||i.add(this.schedule())):t.complete()})),i})}function he(n,e){return e?function tt(n,e){if(null!=n){if(function _t(n){return n&&"function"==typeof n[gn]}(n))return function Ft(n,e){return new q(t=>{const i=new H;return i.add(e.schedule(()=>{const r=n[gn]();i.add(r.subscribe({next(s){i.add(e.schedule(()=>t.next(s)))},error(s){i.add(e.schedule(()=>t.error(s)))},complete(){i.add(e.schedule(()=>t.complete()))}}))})),i})}(n,e);if(St(n))return function Jt(n,e){return new q(t=>{const i=new H;return i.add(e.schedule(()=>n.then(r=>{i.add(e.schedule(()=>{t.next(r),i.add(e.schedule(()=>t.complete()))}))},r=>{i.add(e.schedule(()=>t.error(r)))}))),i})}(n,e);if(xe(n))return Ce(n,e);if(function It(n){return n&&"function"==typeof n[B]}(n)||"string"==typeof n)return function st(n,e){if(!n)throw new Error("Iterable cannot be null");return new q(t=>{const i=new H;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(()=>{r=n[B](),i.add(e.schedule(function(){if(t.closed)return;let s,o;try{const a=r.next();s=a.value,o=a.done}catch(a){return void t.error(a)}o?t.complete():(t.next(s),this.schedule())}))})),i})}(n,e)}throw new TypeError((null!==n&&typeof n||n)+" is not observable")}(n,e):n instanceof q?n:new q(bt(n))}class At extends Ae{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Wt extends Ae{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function mn(n,e){if(e.closed)return;if(n instanceof q)return n.subscribe(e);let t;try{t=bt(n)(e)}catch(i){e.error(i)}return t}function xt(n,e,t=Number.POSITIVE_INFINITY){return"function"==typeof e?i=>i.pipe(xt((r,s)=>he(n(r,s)).pipe($((o,a)=>e(r,o,s,a))),t)):("number"==typeof e&&(t=e),i=>i.lift(new mi(n,t)))}class mi{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new Kn(e,this.project,this.concurrent))}}class Kn extends Wt{constructor(e,t,i=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new At(this),i=this.destination;i.add(t);const r=mn(e,t);r!==t&&i.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Nn(n=Number.POSITIVE_INFINITY){return xt(W,n)}function Qt(n,e){return e?Ce(n,e):new q(de(n))}function Yn(){return function(e){return e.lift(new fc(e))}}class fc{constructor(e){this.connectable=e}call(e,t){const{connectable:i}=this;i._refCount++;const r=new as(e,i),s=t.subscribe(r);return r.closed||(r.connection=i.connect()),s}}class as extends Ae{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:i}=this,r=e._connection;this.connection=null,r&&(!i||r===i)&&r.unsubscribe()}}class Ar extends q{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new H,e.add(this.source.subscribe(new iM(this.getSubject(),this))),e.closed&&(this._connection=null,e=H.EMPTY)),e}refCount(){return Yn()(this)}}const ls=(()=>{const n=Ar.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}}})();class iM extends j{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}class oM{constructor(e,t){this.subjectFactory=e,this.selector=t}call(e,t){const{selector:i}=this,r=this.subjectFactory(),s=i(r).subscribe(e);return s.add(t.subscribe(r)),s}}function aM(){return new K}function pt(n){for(let e in n)if(n[e]===pt)return e;throw Error("Could not find renamed property on target object.")}function Kd(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function gt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(gt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Yd(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const cM=pt({__forward_ref__:pt});function ht(n){return n.__forward_ref__=ht,n.toString=function(){return gt(this())},n}function Ee(n){return Zd(n)?n():n}function Zd(n){return"function"==typeof n&&n.hasOwnProperty(cM)&&n.__forward_ref__===ht}function Jd(n){return n&&!!n.\u0275providers}const pc="https://g.co/ng/security#xss";class z extends Error{constructor(e,t){super(function gc(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function Oe(n){return"string"==typeof n?n:null==n?"":String(n)}function mc(n,e){throw new z(-201,!1)}function ni(n,e){null==n&&function at(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function X(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function an(n){return{providers:n.providers||[],imports:n.imports||[]}}function vc(n){return Bm(n,yc)||Bm(n,Gm)}function Bm(n,e){return n.hasOwnProperty(e)?n[e]:null}function jm(n){return n&&(n.hasOwnProperty(Qd)||n.hasOwnProperty(yM))?n[Qd]:null}const yc=pt({\u0275prov:pt}),Qd=pt({\u0275inj:pt}),Gm=pt({ngInjectableDef:pt}),yM=pt({ngInjectorDef:pt});var Me=(()=>((Me=Me||{})[Me.Default=0]="Default",Me[Me.Host=1]="Host",Me[Me.Self=2]="Self",Me[Me.SkipSelf=4]="SkipSelf",Me[Me.Optional=8]="Optional",Me))();let Xd;function vi(n){const e=Xd;return Xd=n,e}function $m(n,e,t){const i=vc(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Me.Optional?null:void 0!==e?e:void mc(gt(n))}const wt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ta={},eh="__NG_DI_FLAG__",bc="ngTempTokenPath",wM=/\n/gm,zm="__source";let na;function Bs(n){const e=na;return na=n,e}function DM(n,e=Me.Default){if(void 0===na)throw new z(-203,!1);return null===na?$m(n,void 0,e):na.get(n,e&Me.Optional?null:void 0,e)}function U(n,e=Me.Default){return(function bM(){return Xd}()||DM)(Ee(n),e)}function Ye(n,e=Me.Default){return U(n,_c(e))}function _c(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function th(n){const e=[];for(let t=0;t<n.length;t++){const i=Ee(n[t]);if(Array.isArray(i)){if(0===i.length)throw new z(900,!1);let r,s=Me.Default;for(let o=0;o<i.length;o++){const a=i[o],c=EM(a);"number"==typeof c?-1===c?r=a.token:s|=c:r=a}e.push(U(r,s))}else e.push(U(i))}return e}function ia(n,e){return n[eh]=e,n.prototype[eh]=e,n}function EM(n){return n[eh]}function xr(n){return{toString:n}.toString()}var xi=(()=>((xi=xi||{})[xi.OnPush=0]="OnPush",xi[xi.Default=1]="Default",xi))(),$i=(()=>(function(n){n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom"}($i||($i={})),$i))();const sr={},rt=[],wc=pt({\u0275cmp:pt}),nh=pt({\u0275dir:pt}),ih=pt({\u0275pipe:pt}),qm=pt({\u0275mod:pt}),or=pt({\u0275fac:pt}),ra=pt({__NG_ELEMENT_ID__:pt});let SM=0;function kt(n){return xr(()=>{const t=!0===n.standalone,i={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===xi.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||rt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||$i.Emulated,id:"c"+SM++,styles:n.styles||rt,_:null,setInput:null,schemas:n.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},s=n.dependencies,o=n.features;return r.inputs=Zm(n.inputs,i),r.outputs=Zm(n.outputs),o&&o.forEach(a=>a(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(Km).filter(Ym):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(Vn).filter(Ym):null,r})}function Km(n){return lt(n)||In(n)}function Ym(n){return null!==n}function vn(n){return xr(()=>({type:n.type,bootstrap:n.bootstrap||rt,declarations:n.declarations||rt,imports:n.imports||rt,exports:n.exports||rt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Zm(n,e){if(null==n)return sr;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}const ve=kt;function Fn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function lt(n){return n[wc]||null}function In(n){return n[nh]||null}function Vn(n){return n[ih]||null}function ii(n,e){const t=n[qm]||null;if(!t&&!0===e)throw new Error(`Type ${gt(n)} does not have '\u0275mod' property.`);return t}function Zn(n){return Array.isArray(n)&&"object"==typeof n[1]}function Pi(n){return Array.isArray(n)&&!0===n[1]}function oh(n){return 0!=(4&n.flags)}function Mc(n){return n.componentOffset>-1}function Tc(n){return 1==(1&n.flags)}function Oi(n){return null!==n.template}function OM(n){return 0!=(256&n[2])}function fs(n,e){return n.hasOwnProperty(or)?n[or]:null}class NM{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Jn(){return Xm}function Xm(n){return n.type.prototype.ngOnChanges&&(n.setInput=VM),FM}function FM(){const n=tv(this),e=n?.current;if(e){const t=n.previous;if(t===sr)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function VM(n,e,t,i){const r=this.declaredInputs[t],s=tv(n)||function UM(n,e){return n[ev]=e}(n,{previous:sr,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[r];o[r]=new NM(c&&c.currentValue,e,a===sr),n[i]=e}Jn.ngInherit=!0;const ev="__ngSimpleChanges__";function tv(n){return n[ev]||null}function ln(n){for(;Array.isArray(n);)n=n[0];return n}function Sc(n,e){return ln(e[n])}function si(n,e){return ln(e[n.index])}function dh(n,e){return n.data[e]}function Ws(n,e){return n[e]}function oi(n,e){const t=e[n];return Zn(t)?t:t[0]}function Ic(n){return 64==(64&n[2])}function kr(n,e){return null==e?null:n[e]}function nv(n){n[18]=0}function hh(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const Pe={lFrame:hv(null),bindingsEnabled:!0};function rv(){return Pe.bindingsEnabled}function V(){return Pe.lFrame.lView}function Je(){return Pe.lFrame.tView}function Pr(n){return Pe.lFrame.contextLView=n,n[8]}function Or(n){return Pe.lFrame.contextLView=null,n}function En(){let n=sv();for(;null!==n&&64===n.type;)n=n.parent;return n}function sv(){return Pe.lFrame.currentTNode}function zi(n,e){const t=Pe.lFrame;t.currentTNode=n,t.isParent=e}function fh(){return Pe.lFrame.isParent}function ph(){Pe.lFrame.isParent=!1}function Un(){const n=Pe.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function qs(){return Pe.lFrame.bindingIndex++}function lr(n){const e=Pe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function eT(n,e){const t=Pe.lFrame;t.bindingIndex=t.bindingRootIndex=n,gh(e)}function gh(n){Pe.lFrame.currentDirectiveIndex=n}function cv(){return Pe.lFrame.currentQueryIndex}function vh(n){Pe.lFrame.currentQueryIndex=n}function nT(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function uv(n,e,t){if(t&Me.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&Me.Host||(r=nT(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,n=s}const i=Pe.lFrame=dv();return i.currentTNode=e,i.lView=n,!0}function yh(n){const e=dv(),t=n[1];Pe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function dv(){const n=Pe.lFrame,e=null===n?null:n.child;return null===e?hv(n):e}function hv(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function fv(){const n=Pe.lFrame;return Pe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const pv=fv;function bh(){const n=fv();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Hn(){return Pe.lFrame.selectedIndex}function ps(n){Pe.lFrame.selectedIndex=n}function Vt(){const n=Pe.lFrame;return dh(n.tView,n.selectedIndex)}function Ac(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:f}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),c&&(n.viewHooks||(n.viewHooks=[])).push(-t,c),u&&((n.viewHooks||(n.viewHooks=[])).push(t,u),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,u)),null!=f&&(n.destroyHooks||(n.destroyHooks=[])).push(t,f)}}function xc(n,e,t){gv(n,e,3,t)}function kc(n,e,t,i){(3&n[2])===t&&gv(n,e,t,i)}function _h(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function gv(n,e,t,i){const s=i??-1,o=e.length-1;let a=0;for(let c=void 0!==i?65535&n[18]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(n[18]+=65536),(a<s||-1==s)&&(dT(n,t,e,c),n[18]=(4294901760&n[18])+c+2),c++}function dT(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class ua{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function Ch(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{const s=r,o=t[++i];vv(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function mv(n){return 3===n||4===n||6===n}function vv(n){return 64===n.charCodeAt(0)}function ha(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||yv(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function yv(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function bv(n){return-1!==n}function Ks(n){return 32767&n}function Ys(n,e){let t=function mT(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let Dh=!0;function Pc(n){const e=Dh;return Dh=n,e}let vT=0;const Wi={};function Oc(n,e){const t=Mh(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,Eh(i.data,n),Eh(e,null),Eh(i.blueprint,null));const r=Rc(n,e),s=n.injectorIndex;if(bv(r)){const o=Ks(r),a=Ys(r,e),c=a[1].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=r,s}function Eh(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Mh(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Rc(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=Iv(r),null===i)return-1;if(t++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function Th(n,e,t){!function yT(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(ra)&&(i=t[ra]),null==i&&(i=t[ra]=vT++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function Cv(n,e,t){if(t&Me.Optional||void 0!==n)return n;mc()}function Dv(n,e,t,i){if(t&Me.Optional&&void 0===i&&(i=null),0==(t&(Me.Self|Me.Host))){const r=n[9],s=vi(void 0);try{return r?r.get(e,i,t&Me.Optional):$m(e,i,t&Me.Optional)}finally{vi(s)}}return Cv(i,0,t)}function Ev(n,e,t,i=Me.Default,r){if(null!==n){if(1024&e[2]){const o=function DT(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=Mv(s,o,t,i|Me.Self,Wi);if(a!==Wi)return a;let c=s.parent;if(!c){const u=o[21];if(u){const f=u.get(t,Wi,i);if(f!==Wi)return f}c=Iv(o),o=o[15]}s=c}return r}(n,e,t,i,Wi);if(o!==Wi)return o}const s=Mv(n,e,t,i,Wi);if(s!==Wi)return s}return Dv(e,t,i,r)}function Mv(n,e,t,i,r){const s=function wT(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(ra)?n[ra]:void 0;return"number"==typeof e?e>=0?255&e:CT:e}(t);if("function"==typeof s){if(!uv(e,n,i))return i&Me.Host?Cv(r,0,i):Dv(e,t,i,r);try{const o=s(i);if(null!=o||i&Me.Optional)return o;mc()}finally{pv()}}else if("number"==typeof s){let o=null,a=Mh(n,e),c=-1,u=i&Me.Host?e[16][6]:null;for((-1===a||i&Me.SkipSelf)&&(c=-1===a?Rc(n,e):e[a+8],-1!==c&&Sv(i,!1)?(o=e[1],a=Ks(c),e=Ys(c,e)):a=-1);-1!==a;){const f=e[1];if(Tv(s,a,f.data)){const p=_T(a,e,t,o,i,u);if(p!==Wi)return p}c=e[a+8],-1!==c&&Sv(i,e[1].data[a+8]===u)&&Tv(s,a,e)?(o=f,a=Ks(c),e=Ys(c,e)):a=-1}}return r}function _T(n,e,t,i,r,s){const o=e[1],a=o.data[n+8],f=Lc(a,o,t,null==i?Mc(a)&&Dh:i!=o&&0!=(3&a.type),r&Me.Host&&s===a);return null!==f?Zs(e,o,f,a):Wi}function Lc(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,f=s>>20,g=r?a+f:n.directiveEnd;for(let v=i?a:a+f;v<g;v++){const y=o[v];if(v<c&&t===y||v>=c&&y.type===t)return v}if(r){const v=o[c];if(v&&Oi(v)&&v.type===t)return c}return null}function Zs(n,e,t,i){let r=n[t];const s=e.data;if(function hT(n){return n instanceof ua}(r)){const o=r;o.resolving&&function uM(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new z(-200,`Circular dependency in DI detected for ${n}${t}`)}(function ot(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Oe(n)}(s[t]));const a=Pc(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?vi(o.injectImpl):null;uv(n,i,Me.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function uT(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=Xm(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==c&&vi(c),Pc(a),o.resolving=!1,pv()}}return r}function Tv(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function Sv(n,e){return!(n&Me.Self||n&Me.Host&&e)}class Js{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return Ev(this._tNode,this._lView,e,_c(i),t)}}function CT(){return new Js(En(),V())}function ft(n){return xr(()=>{const e=n.prototype.constructor,t=e[or]||Sh(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[or]||Sh(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Sh(n){return Zd(n)?()=>{const e=Sh(Ee(n));return e&&e()}:fs(n)}function Iv(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}const Xs="__parameters__";function to(n,e,t){return xr(()=>{const i=function Ih(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(c,u,f){const p=c.hasOwnProperty(Xs)?c[Xs]:Object.defineProperty(c,Xs,{value:[]})[Xs];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(o),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class Q{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=X({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ai(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(e===n&&(e=n.slice(0,t)),ai(i,e)):e!==n&&e.push(i)}return e}function gs(n,e){n.forEach(t=>Array.isArray(t)?gs(t,e):e(t))}function xv(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Nc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function li(n,e,t){let i=no(n,e);return i>=0?n[1|i]=t:(i=~i,function ST(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function xh(n,e){const t=no(n,e);if(t>=0)return n[1|t]}function no(n,e){return function Ov(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const va=ia(to("Optional"),8),ya=ia(to("SkipSelf"),4);var Qn=(()=>((Qn=Qn||{})[Qn.Important=1]="Important",Qn[Qn.DashCase=2]="DashCase",Qn))();const Nh=new Map;let ZT=0;const Vh="__ngContext__";function kn(n,e){Zn(e)?(n[Vh]=e[20],function QT(n){Nh.set(n[20],n)}(e)):n[Vh]=e}function Hh(n,e){return undefined(n,e)}function Ca(n){const e=n[3];return Pi(e)?e[3]:e}function Bh(n){return ey(n[13])}function jh(n){return ey(n[4])}function ey(n){for(;null!==n&&!Pi(n);)n=n[4];return n}function ro(n,e,t,i,r){if(null!=i){let s,o=!1;Pi(i)?s=i:Zn(i)&&(o=!0,i=i[0]);const a=ln(i);0===n&&null!==t?null==r?oy(e,t,a):ms(e,t,a,r||null,!0):1===n&&null!==t?ms(e,t,a,r||null,!0):2===n?function Yh(n,e,t){const i=Hc(n,e);i&&function bS(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function CS(n,e,t,i,r){const s=t[7];s!==ln(t)&&ro(e,n,i,s,r);for(let a=10;a<t.length;a++){const c=t[a];Da(c[1],c,n,e,i,s)}}(e,n,s,t,r)}}function $h(n,e,t){return n.createElement(e,t)}function ny(n,e){const t=n[9],i=t.indexOf(e),r=e[3];512&e[2]&&(e[2]&=-513,hh(r,-1)),t.splice(i,1)}function zh(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[17];null!==r&&r!==n&&ny(r,i),e>0&&(n[t-1][4]=i[4]);const s=Nc(n,10+e);!function dS(n,e){Da(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-65}return i}function iy(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&Da(n,e,t,3,null,null),function pS(n){let e=n[13];if(!e)return Wh(n[1],n);for(;e;){let t=null;if(Zn(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)Zn(e)&&Wh(e[1],e),e=e[3];null===e&&(e=n),Zn(e)&&Wh(e[1],e),t=e&&e[4]}e=t}}(e)}}function Wh(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function yS(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof ua)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],c=s[o+1];try{c.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,e),function vS(n,e){const t=n.cleanup,i=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?i[r=o]():i[r=-o].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)(0,i[s])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&Pi(e[3])){t!==e[3]&&ny(t,e);const i=e[19];null!==i&&i.detachView(n)}!function XT(n){Nh.delete(n[20])}(e)}}function ry(n,e,t){return function sy(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=n.data[i.directiveStart+r];if(s===$i.None||s===$i.Emulated)return null}return si(i,t)}}(n,e.parent,t)}function ms(n,e,t,i,r){n.insertBefore(e,t,i,r)}function oy(n,e,t){n.appendChild(e,t)}function ay(n,e,t,i,r){null!==i?ms(n,e,t,i,r):oy(n,e,t)}function Hc(n,e){return n.parentNode(e)}let Gc,Qh,$c,uy=function cy(n,e,t){return 40&n.type?si(n,t):null};function Bc(n,e,t,i){const r=ry(n,i,e),s=e[11],a=function ly(n,e,t){return uy(n,e,t)}(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(t))for(let c=0;c<t.length;c++)ay(s,r,t[c],a,!1);else ay(s,r,t,a,!1)}function jc(n,e){if(null!==e){const t=e.type;if(3&t)return si(e,n);if(4&t)return Kh(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return jc(n,i);{const r=n[e.index];return Pi(r)?Kh(-1,r):ln(r)}}if(32&t)return Hh(e,n)()||ln(n[e.index]);{const i=hy(n,e);return null!==i?Array.isArray(i)?i[0]:jc(Ca(n[16]),i):jc(n,e.next)}}return null}function hy(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Kh(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return jc(i,r)}return e[7]}function Zh(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],c=t.type;if(o&&0===e&&(a&&kn(ln(a),i),t.flags|=2),32!=(32&t.flags))if(8&c)Zh(n,e,t.child,i,r,s,!1),ro(e,n,r,a,s);else if(32&c){const u=Hh(t,i);let f;for(;f=u();)ro(e,n,r,f,s);ro(e,n,r,a,s)}else 16&c?fy(n,e,i,t,r,s):ro(e,n,r,a,s);t=o?t.projectionNext:t.next}}function Da(n,e,t,i,r,s){Zh(t,i,n.firstChild,e,r,s,!1)}function fy(n,e,t,i,r,s){const o=t[16],c=o[6].projection[i.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)ro(e,n,r,c[u],s);else Zh(n,e,c,o[3],r,s,!0)}function py(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function gy(n,e,t){const{mergedAttrs:i,classes:r,styles:s}=t;null!==i&&Ch(n,e,i),null!==r&&py(n,e,r),null!==s&&function ES(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function vs(n){return function Jh(){if(void 0===Gc&&(Gc=null,wt.trustedTypes))try{Gc=wt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Gc}()?.createHTML(n)||n}function Xh(){if(void 0===$c&&($c=null,wt.trustedTypes))try{$c=wt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return $c}function vy(n){return Xh()?.createHTML(n)||n}function by(n){return Xh()?.createScriptURL(n)||n}class ys{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${pc})`}}class AS extends ys{getTypeName(){return"HTML"}}class xS extends ys{getTypeName(){return"Style"}}class kS extends ys{getTypeName(){return"Script"}}class PS extends ys{getTypeName(){return"URL"}}class OS extends ys{getTypeName(){return"ResourceURL"}}function ci(n){return n instanceof ys?n.changingThisBreaksApplicationSecurity:n}function qi(n,e){const t=function RS(n){return n instanceof ys&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${pc})`)}return t===e}class HS{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(vs(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class BS{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const i=this.inertDocument.createElement("body");t.appendChild(i)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=vs(e),t;const i=this.inertDocument.createElement("body");return i.innerHTML=vs(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const o=t.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let i=e.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const GS=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function zc(n){return(n=String(n)).match(GS)?n:"unsafe:"+n}function cr(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Ea(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const wy=cr("area,br,col,hr,img,wbr"),Cy=cr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Dy=cr("rp,rt"),ef=Ea(wy,Ea(Cy,cr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ea(Dy,cr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ea(Dy,Cy)),tf=cr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ey=Ea(tf,cr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),cr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),$S=cr("script,style,template");class zS{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!ef.hasOwnProperty(t))return this.sanitizedSomething=!0,!$S.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!Ey.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;tf[a]&&(c=zc(c)),this.buf.push(" ",o,'="',My(c),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();ef.hasOwnProperty(t)&&!wy.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(My(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const WS=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,qS=/([^\#-~ |!])/g;function My(n){return n.replace(/&/g,"&amp;").replace(WS,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(qS,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Wc;function Ty(n,e){let t=null;try{Wc=Wc||function _y(n){const e=new BS(n);return function jS(){try{return!!(new window.DOMParser).parseFromString(vs(""),"text/html")}catch{return!1}}()?new HS(e):e}(n);let i=e?String(e):"";t=Wc.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=Wc.getInertBodyElement(i)}while(i!==s);return vs((new zS).sanitizeChildren(nf(t)||t))}finally{if(t){const i=nf(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function nf(n){return"content"in n&&function KS(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var mt=(()=>((mt=mt||{})[mt.NONE=0]="NONE",mt[mt.HTML=1]="HTML",mt[mt.STYLE=2]="STYLE",mt[mt.SCRIPT=3]="SCRIPT",mt[mt.URL=4]="URL",mt[mt.RESOURCE_URL=5]="RESOURCE_URL",mt))();function ye(n){const e=Ma();return e?vy(e.sanitize(mt.HTML,n)||""):qi(n,"HTML")?vy(ci(n)):Ty(function my(){return void 0!==Qh?Qh:typeof document<"u"?document:void 0}(),Oe(n))}function Lr(n){const e=Ma();return e?e.sanitize(mt.URL,n)||"":qi(n,"URL")?ci(n):zc(Oe(n))}function Sy(n){const e=Ma();if(e)return by(e.sanitize(mt.RESOURCE_URL,n)||"");if(qi(n,"ResourceURL"))return by(ci(n));throw new z(904,!1)}function Ma(){const n=V();return n&&n[12]}const qc=new Q("ENVIRONMENT_INITIALIZER"),Ay=new Q("INJECTOR",-1),xy=new Q("INJECTOR_DEF_TYPES");class ky{get(e,t=ta){if(t===ta){const i=new Error(`NullInjectorError: No provider for ${gt(e)}!`);throw i.name="NullInjectorError",i}return t}}function tI(...n){return{\u0275providers:Py(0,n),\u0275fromNgModule:!0}}function Py(n,...e){const t=[],i=new Set;let r;return gs(e,s=>{const o=s;rf(o,t,[],i)&&(r||(r=[]),r.push(o))}),void 0!==r&&Oy(r,t),t}function Oy(n,e){for(let t=0;t<n.length;t++){const{providers:r}=n[t];sf(r,s=>{e.push(s)})}}function rf(n,e,t,i){if(!(n=Ee(n)))return!1;let r=null,s=jm(n);const o=!s&&lt(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const c=n.ngModule;if(s=jm(c),!s)return!1;r=c}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const u of c)rf(u,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let u;i.add(r);try{gs(s.imports,f=>{rf(f,e,t,i)&&(u||(u=[]),u.push(f))})}finally{}void 0!==u&&Oy(u,e)}if(!a){const u=fs(r)||(()=>new r);e.push({provide:r,useFactory:u,deps:rt},{provide:xy,useValue:r,multi:!0},{provide:qc,useValue:()=>U(r),multi:!0})}const c=s.providers;null==c||a||sf(c,f=>{e.push(f)})}}return r!==n&&void 0!==n.providers}function sf(n,e){for(let t of n)Jd(t)&&(t=t.\u0275providers),Array.isArray(t)?sf(t,e):e(t)}const nI=pt({provide:String,useValue:pt});function af(n){return null!==n&&"object"==typeof n&&nI in n}function bs(n){return"function"==typeof n}const lf=new Q("Set Injector scope."),Kc={},rI={};let cf;function Yc(){return void 0===cf&&(cf=new ky),cf}class ur{}class Ny extends ur{constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,df(e,o=>this.processProvider(o)),this.records.set(Ay,so(void 0,this)),r.has("environment")&&this.records.set(ur,so(void 0,this));const s=this.records.get(lf);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(xy.multi,rt,Me.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=Bs(this),i=vi(void 0);try{return e()}finally{Bs(t),vi(i)}}get(e,t=ta,i=Me.Default){this.assertNotDestroyed(),i=_c(i);const r=Bs(this),s=vi(void 0);try{if(!(i&Me.SkipSelf)){let a=this.records.get(e);if(void 0===a){const c=function cI(n){return"function"==typeof n||"object"==typeof n&&n instanceof Q}(e)&&vc(e);a=c&&this.injectableDefInScope(c)?so(uf(e),Kc):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&Me.Self?Yc():this.parent).get(e,t=i&Me.Optional&&t===ta?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[bc]=o[bc]||[]).unshift(gt(e)),r)throw o;return function MM(n,e,t,i){const r=n[bc];throw e[zm]&&r.unshift(e[zm]),n.message=function TM(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=gt(e);if(Array.isArray(e))r=e.map(gt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):gt(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(wM,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[bc]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{vi(s),Bs(r)}}resolveInjectorInitializers(){const e=Bs(this),t=vi(void 0);try{const i=this.get(qc.multi,rt,Me.Self);for(const r of i)r()}finally{Bs(e),vi(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(gt(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new z(205,!1)}processProvider(e){let t=bs(e=Ee(e))?e:Ee(e&&e.provide);const i=function oI(n){return af(n)?so(void 0,n.useValue):so(Fy(n),Kc)}(e);if(bs(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=so(void 0,Kc,!0),r.factory=()=>th(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===Kc&&(t.value=rI,t.value=t.factory()),"object"==typeof t.value&&t.value&&function lI(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ee(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function uf(n){const e=vc(n),t=null!==e?e.factory:fs(n);if(null!==t)return t;if(n instanceof Q)throw new z(204,!1);if(n instanceof Function)return function sI(n){const e=n.length;if(e>0)throw function ma(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}(e,"?"),new z(204,!1);const t=function mM(n){const e=n&&(n[yc]||n[Gm]);if(e){const t=function vM(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new z(204,!1)}function Fy(n,e,t){let i;if(bs(n)){const r=Ee(n);return fs(r)||uf(r)}if(af(n))i=()=>Ee(n.useValue);else if(function Ly(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...th(n.deps||[]));else if(function Ry(n){return!(!n||!n.useExisting)}(n))i=()=>U(Ee(n.useExisting));else{const r=Ee(n&&(n.useClass||n.provide));if(!function aI(n){return!!n.deps}(n))return fs(r)||uf(r);i=()=>new r(...th(n.deps))}return i}function so(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function df(n,e){for(const t of n)Array.isArray(t)?df(t,e):t&&Jd(t)?df(t.\u0275providers,e):e(t)}class uI{}class Vy{}class hI{resolveComponentFactory(e){throw function dI(n){const e=Error(`No component factory found for ${gt(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Ta=(()=>{class n{}return n.NULL=new hI,n})();function fI(){return oo(En(),V())}function oo(n,e){return new jt(si(n,e))}let jt=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=fI,n})();function pI(n){return n instanceof jt?n.nativeElement:n}class Hy{}let Xn=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function gI(){const n=V(),t=oi(En().index,n);return(Zn(t)?t:n)[11]}(),n})(),mI=(()=>{class n{}return n.\u0275prov=X({token:n,providedIn:"root",factory:()=>null}),n})();class _s{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const vI=new _s("15.0.1"),hf={};function pf(n){return n.ngOriginalError}class ao{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&pf(e);for(;t&&pf(t);)t=pf(t);return t||null}}function gf(n){return n.ownerDocument.defaultView}function dr(n){return n instanceof Function?n():n}function jy(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const Gy="ng-template";function SI(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==jy(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function $y(n){return 4===n.type&&n.value!==Gy}function II(n,e,t){return e===(4!==n.type||t?n.value:Gy)}function AI(n,e,t){let i=4;const r=n.attrs||[],s=function PI(n){for(let e=0;e<n.length;e++)if(mv(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&i){if(i=2|1&i,""!==c&&!II(n,c,t)||""===c&&1===e.length){if(Ri(i))return!1;o=!0}}else{const u=8&i?c:e[++a];if(8&i&&null!==n.attrs){if(!SI(n.attrs,u,t)){if(Ri(i))return!1;o=!0}continue}const p=xI(8&i?"class":c,r,$y(n),t);if(-1===p){if(Ri(i))return!1;o=!0;continue}if(""!==u){let g;g=p>s?"":r[p+1].toLowerCase();const v=8&i?g:null;if(v&&-1!==jy(v,u,0)||2&i&&u!==g){if(Ri(i))return!1;o=!0}}}}else{if(!o&&!Ri(i)&&!Ri(c))return!1;if(o&&Ri(c))continue;o=!1,i=c|1&i}}return Ri(i)||o}function Ri(n){return 0==(1&n)}function xI(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function OI(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function zy(n,e,t=!1){for(let i=0;i<e.length;i++)if(AI(n,e[i],t))return!0;return!1}function Wy(n,e){return n?":not("+e.trim()+")":e}function LI(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!Ri(o)&&(e+=Wy(s,r),r=""),i=o,s=s||!Ri(i);t++}return""!==r&&(e+=Wy(s,r)),e}const Re={};function C(n){qy(Je(),V(),Hn()+n,!1)}function qy(n,e,t,i){if(!i)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&xc(e,s,t)}else{const s=n.preOrderHooks;null!==s&&kc(e,s,0,t)}ps(t)}function Jy(n,e=null,t=null,i){const r=Qy(n,e,t,i);return r.resolveInjectorInitializers(),r}function Qy(n,e=null,t=null,i,r=new Set){const s=[t||rt,tI(n)];return i=i||("object"==typeof n?void 0:gt(n)),new Ny(s,e||Yc(),i||null,r)}let ui=(()=>{class n{static create(t,i){if(Array.isArray(t))return Jy({name:""},i,t,"");{const r=t.name??"";return Jy({name:r},t.parent,t.providers,r)}}}return n.THROW_IF_NOT_FOUND=ta,n.NULL=new ky,n.\u0275prov=X({token:n,providedIn:"any",factory:()=>U(Ay)}),n.__NG_ELEMENT_ID__=-1,n})();function x(n,e=Me.Default){const t=V();return null===t?U(n,e):Ev(En(),t,Ee(n),e)}function _f(){throw new Error("invalid")}function Jc(n,e){return n<<17|e<<2}function Li(n){return n>>17&32767}function wf(n){return 2|n}function hr(n){return(131068&n)>>2}function Cf(n,e){return-131069&n|e<<2}function Df(n){return 1|n}function gb(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i],s=t[i+1];if(-1!==s){const o=n.data[s];vh(r),o.contentQueries(2,e[s],s)}}}function eu(n,e,t,i,r,s,o,a,c,u,f){const p=e.blueprint.slice();return p[0]=r,p[2]=76|i,(null!==f||n&&1024&n[2])&&(p[2]|=1024),nv(p),p[3]=p[15]=n,p[8]=t,p[10]=o||n&&n[10],p[11]=a||n&&n[11],p[12]=c||n&&n[12]||null,p[9]=u||n&&n[9]||null,p[6]=s,p[20]=function JT(){return ZT++}(),p[21]=f,p[16]=2==e.type?n[16]:p,p}function uo(n,e,t,i,r){let s=n.data[e];if(null===s)s=function kf(n,e,t,i,r){const s=sv(),o=fh(),c=n.data[e]=function v2(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c)),c}(n,e,t,i,r),function XM(){return Pe.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function ca(){const n=Pe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return zi(s,!0),s}function Sa(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function Pf(n,e,t){yh(e);try{const i=n.viewQuery;null!==i&&jf(1,i,t);const r=n.template;null!==r&&mb(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&gb(n,e),n.staticViewQueries&&jf(2,n.viewQuery,t);const s=n.components;null!==s&&function p2(n,e){for(let t=0;t<e.length;t++)N2(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,bh()}}function tu(n,e,t,i){const r=e[2];if(128!=(128&r)){yh(e);try{nv(e),function av(n){return Pe.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&mb(n,e,t,2,i);const o=3==(3&r);if(o){const u=n.preOrderCheckHooks;null!==u&&xc(e,u,null)}else{const u=n.preOrderHooks;null!==u&&kc(e,u,0,null),_h(e,0)}if(function R2(n){for(let e=Bh(n);null!==e;e=jh(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const r=t[i],s=r[3];0==(512&r[2])&&hh(s,1),r[2]|=512}}}(e),function O2(n){for(let e=Bh(n);null!==e;e=jh(e))for(let t=10;t<e.length;t++){const i=e[t],r=i[1];Ic(i)&&tu(r,i,r.template,i[8])}}(e),null!==n.contentQueries&&gb(n,e),o){const u=n.contentCheckHooks;null!==u&&xc(e,u)}else{const u=n.contentHooks;null!==u&&kc(e,u,1),_h(e,1)}!function h2(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)ps(~r);else{const s=r,o=t[++i],a=t[++i];eT(o,s),a(2,e[s])}}}finally{ps(-1)}}(n,e);const a=n.components;null!==a&&function f2(n,e){for(let t=0;t<e.length;t++)L2(n,e[t])}(e,a);const c=n.viewQuery;if(null!==c&&jf(2,c,i),o){const u=n.viewCheckHooks;null!==u&&xc(e,u)}else{const u=n.viewHooks;null!==u&&kc(e,u,2),_h(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,hh(e[3],-1))}finally{bh()}}}function mb(n,e,t,i,r){const s=Hn(),o=2&i;try{ps(-1),o&&e.length>22&&qy(n,e,22,!1),t(i,r)}finally{ps(s)}}function Of(n,e,t){if(oh(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function Rf(n,e,t){!rv()||(function D2(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||Oc(t,e),kn(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const c=n.data[a],u=Oi(c);u&&x2(e,t,c);const f=Zs(e,n,a,t);kn(f,e),null!==o&&k2(0,a-r,f,c,0,o),u&&(oi(t.index,e)[8]=f)}}(n,e,t,si(t,e)),64==(64&t.flags)&&Db(n,e,t))}function Lf(n,e,t=si){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function vb(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Nf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Nf(n,e,t,i,r,s,o,a,c,u){const f=22+i,p=f+r,g=function g2(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:Re);return t}(f,p),v="function"==typeof u?u():u;return g[1]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:v,incompleteFirstPass:!1}}function yb(n,e,t,i){const r=Mb(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&Tb(n).push(i,r.length-1))}function bb(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const s=n[r];null===i?_b(t,e,r,s):i.hasOwnProperty(r)&&_b(t,e,i[r],s)}return t}function _b(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function di(n,e,t,i,r,s,o,a){const c=si(e,t);let f,u=e.inputs;!a&&null!=u&&(f=u[i])?(Gf(n,t,f,i,r),Mc(e)&&wb(t,e.index)):3&e.type&&(i=function b2(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(c,i,r))}function wb(n,e){const t=oi(e,n);16&t[2]||(t[2]|=32)}function Ff(n,e,t,i){let r=!1;if(rv()){const s=null===i?null:{"":-1},o=function M2(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(zy(e,o.selectors,!1))if(i||(i=[]),Oi(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),Vf(n,e,a.length)}else i.unshift(o),Vf(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(n,t);let a,c;null===o?a=c=null:[a,c]=o,null!==a&&(r=!0,Cb(n,e,t,a,s,c)),s&&function T2(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new z(-301,!1);i.push(e[r],s)}}}(t,i,s)}return t.mergedAttrs=ha(t.mergedAttrs,t.attrs),r}function Cb(n,e,t,i,r,s){for(let u=0;u<i.length;u++)Th(Oc(t,e),n,i[u].type);!function I2(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let u=0;u<i.length;u++){const f=i[u];f.providersResolver&&f.providersResolver(f)}let o=!1,a=!1,c=Sa(n,e,i.length,null);for(let u=0;u<i.length;u++){const f=i[u];t.mergedAttrs=ha(t.mergedAttrs,f.hostAttrs),A2(n,t,e,c,f),S2(c,f,r),null!==f.contentQueries&&(t.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=64);const p=f.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),a=!0),c++}!function y2(n,e,t){const r=e.directiveEnd,s=n.data,o=e.attrs,a=[];let c=null,u=null;for(let f=e.directiveStart;f<r;f++){const p=s[f],g=t?t.get(p):null,y=g?g.outputs:null;c=bb(p.inputs,f,c,g?g.inputs:null),u=bb(p.outputs,f,u,y);const _=null===c||null===o||$y(e)?null:P2(c,f,o);a.push(_)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}(n,t,s)}function Db(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function tT(){return Pe.lFrame.currentDirectiveIndex}();try{ps(s);for(let a=i;a<r;a++){const c=n.data[a],u=e[a];gh(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&E2(c,u)}}finally{ps(-1),gh(o)}}function E2(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Vf(n,e,t){e.componentOffset=t,(n.components||(n.components=[])).push(e.index)}function S2(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Oi(e)&&(t[""]=n)}}function A2(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=fs(r.type)),o=new ua(s,Oi(r),x);n.blueprint[i]=o,t[i]=o,function w2(n,e,t,i,r){const s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function C2(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,i,s)}}(n,e,i,Sa(n,t,r.hostVars,Re),r)}function x2(n,e,t){const i=si(e,n),r=vb(t),s=n[10],o=nu(n,eu(n,r,null,t.onPush?32:16,i,e,s,s.createRenderer(i,t),null,null,null));n[e.index]=o}function Ki(n,e,t,i,r,s){const o=si(n,e);!function Uf(n,e,t,i,r,s,o){if(null==s)n.removeAttribute(e,r,t);else{const a=null==o?Oe(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}(e[11],o,s,n.value,t,i,r)}function k2(n,e,t,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let c=0;c<o.length;){const u=o[c++],f=o[c++],p=o[c++];null!==a?i.setInput(t,p,u,f):t[f]=p}}}function P2(n,e,t){let i=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===i&&(i=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){i.push(s,o[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function Eb(n,e,t,i){return new Array(n,!0,!1,e,null,0,i,t,null,null)}function L2(n,e){const t=oi(e,n);if(Ic(t)){const i=t[1];48&t[2]?tu(i,t,i.template,t[8]):t[5]>0&&Hf(t)}}function Hf(n){for(let i=Bh(n);null!==i;i=jh(i))for(let r=10;r<i.length;r++){const s=i[r];if(Ic(s))if(512&s[2]){const o=s[1];tu(o,s,o.template,s[8])}else s[5]>0&&Hf(s)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const r=oi(t[i],n);Ic(r)&&r[5]>0&&Hf(r)}}function N2(n,e){const t=oi(e,n),i=t[1];(function F2(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),Pf(i,t,t[8])}function nu(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function Bf(n){for(;n;){n[2]|=32;const e=Ca(n);if(OM(n)&&!e)return n;n=e}return null}function iu(n,e,t,i=!0){const r=e[10];r.begin&&r.begin();try{tu(n,e,n.template,t)}catch(o){throw i&&Ib(e,o),o}finally{r.end&&r.end()}}function jf(n,e,t){vh(0),e(n,t)}function Mb(n){return n[7]||(n[7]=[])}function Tb(n){return n.cleanup||(n.cleanup=[])}function Ib(n,e){const t=n[9],i=t?t.get(ao,null):null;i&&i.handleError(e)}function Gf(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],c=e[o],u=n.data[o];null!==u.setInput?u.setInput(c,r,i,a):c[a]=r}}function fr(n,e,t){const i=Sc(e,n);!function ty(n,e,t){n.setValue(e,t)}(n[11],i,t)}function ru(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=Yd(r,a):2==s&&(i=Yd(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function su(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(ln(s)),Pi(s))for(let a=10;a<s.length;a++){const c=s[a],u=c[1].firstChild;null!==u&&su(c[1],c,u,i)}const o=t.type;if(8&o)su(n,e,t.child,i);else if(32&o){const a=Hh(t,e);let c;for(;c=a();)i.push(c)}else if(16&o){const a=hy(e,t);if(Array.isArray(a))i.push(...a);else{const c=Ca(e[16]);su(c[1],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class Ia{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return su(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Pi(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(zh(e,i),Nc(t,i))}this._attachedToViewContainer=!1}iy(this._lView[1],this._lView)}onDestroy(e){yb(this._lView[1],this._lView,null,e)}markForCheck(){Bf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){iu(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function fS(n,e){Da(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new z(902,!1);this._appRef=e}}class V2 extends Ia{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;iu(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class $f extends Ta{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=lt(e);return new Aa(t,this.ngModule)}}function Ab(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class H2{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=_c(i);const r=this.injector.get(e,hf,i);return r!==hf||t===hf?r:this.parentInjector.get(e,t,i)}}class Aa extends Vy{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function NI(n){return n.map(LI).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Ab(this.componentDef.inputs)}get outputs(){return Ab(this.componentDef.outputs)}create(e,t,i,r){let s=(r=r||this.ngModule)instanceof ur?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new H2(e,s):e,a=o.get(Hy,null);if(null===a)throw new z(407,!1);const c=o.get(mI,null),u=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=i?function m2(n,e,t){return n.selectRootElement(e,t===$i.ShadowDom)}(u,i,this.componentDef.encapsulation):$h(u,f,function U2(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(f)),g=this.componentDef.onPush?288:272,v=Nf(0,null,null,1,0,null,null,null,null,null),y=eu(null,v,null,g,null,null,a,u,c,o,null);let _,b;yh(y);try{const w=this.componentDef;let E,D=null;w.findHostDirectiveDefs?(E=[],D=new Map,w.findHostDirectiveDefs(w,E,D),E.push(w)):E=[w];const I=function G2(n,e){const t=n[1];return n[22]=e,uo(t,22,2,"#host",null)}(y,p),k=function $2(n,e,t,i,r,s,o,a){const c=r[1];!function z2(n,e,t,i){for(const r of n)e.mergedAttrs=ha(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(ru(e,e.mergedAttrs,!0),null!==t&&gy(i,t,e))}(i,n,e,o);const u=s.createRenderer(e,t),f=eu(r,vb(t),null,t.onPush?32:16,r[n.index],n,s,u,a||null,null,null);return c.firstCreatePass&&Vf(c,n,i.length-1),nu(r,f),r[n.index]=f}(I,p,w,E,y,a,u);b=dh(v,22),p&&function q2(n,e,t,i){if(i)Ch(n,t,["ng-version",vI.full]);else{const{attrs:r,classes:s}=function FI(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!Ri(r))break;r=s}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&Ch(n,t,r),s&&s.length>0&&py(n,t,s.join(" "))}}(u,w,p,i),void 0!==t&&function K2(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const s=t[r];i.push(null!=s?Array.from(s):null)}}(b,this.ngContentSelectors,t),_=function W2(n,e,t,i,r,s){const o=En(),a=r[1],c=si(o,r);Cb(a,r,o,t,null,i);for(let f=0;f<t.length;f++)kn(Zs(r,a,o.directiveStart+f,o),r);Db(a,r,o),c&&kn(c,r);const u=Zs(r,a,o.directiveStart+o.componentOffset,o);if(n[8]=r[8]=u,null!==s)for(const f of s)f(u,e);return Of(a,o,n),u}(k,w,E,D,y,[Y2]),Pf(v,y,null)}finally{bh()}return new j2(this.componentType,_,oo(b,y),y,b)}}class j2 extends uI{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new V2(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){const s=this._rootLView;Gf(s[1],s,r,e,t),wb(s,this._tNode.index)}}get injector(){return new Js(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function Y2(){const n=En();Ac(V()[1],n)}function He(n){let e=function xb(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(Oi(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new z(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=zf(n.inputs),o.declaredInputs=zf(n.declaredInputs),o.outputs=zf(n.outputs);const a=r.hostBindings;a&&X2(n,a);const c=r.viewQuery,u=r.contentQueries;if(c&&J2(n,c),u&&Q2(n,u),Kd(n.inputs,r.inputs),Kd(n.declaredInputs,r.declaredInputs),Kd(n.outputs,r.outputs),Oi(r)&&r.data.animation){const f=n.data;f.animation=(f.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===He&&(t=!1)}}e=Object.getPrototypeOf(e)}!function Z2(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=ha(r.hostAttrs,t=ha(t,r.hostAttrs))}}(i)}function zf(n){return n===sr?{}:n===rt?[]:n}function J2(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function Q2(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function X2(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}let ou=null;function ws(){if(!ou){const n=wt.Symbol;if(n&&n.iterator)ou=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(ou=i)}}}return ou}function xa(n){return!!Wf(n)&&(Array.isArray(n)||!(n instanceof Map)&&ws()in n)}function Wf(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Yi(n,e,t){return n[e]=t}function Pn(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Cs(n,e,t,i){const r=Pn(n,e,t);return Pn(n,e+1,i)||r}function On(n,e,t,i){const r=V();return Pn(r,qs(),e)&&(Je(),Ki(Vt(),r,n,e,t,i)),On}function fo(n,e,t,i){return Pn(n,qs(),t)?e+Oe(t)+i:Re}function po(n,e,t,i,r,s){const a=Cs(n,function ar(){return Pe.lFrame.bindingIndex}(),t,r);return lr(2),a?e+Oe(t)+i+Oe(r)+s:Re}function Le(n,e,t,i,r,s,o,a){const c=V(),u=Je(),f=n+22,p=u.firstCreatePass?function cA(n,e,t,i,r,s,o,a,c){const u=e.consts,f=uo(e,n,4,o||null,kr(u,a));Ff(e,t,f,kr(u,c)),Ac(e,f);const p=f.tViews=Nf(2,f,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u);return null!==e.queries&&(e.queries.template(e,f),p.queries=e.queries.embeddedTView(f)),f}(f,u,c,e,t,i,r,s,o):u.data[f];zi(p,!1);const g=c[11].createComment("");Bc(u,c,g,p),kn(g,c),nu(c,c[f]=Eb(g,c,g,p)),Tc(p)&&Rf(u,c,p),null!=o&&Lf(c,p,a)}function T(n,e,t){const i=V();return Pn(i,qs(),e)&&di(Je(),Vt(),i,n,e,i[11],t,!1),T}function qf(n,e,t,i,r){const o=r?"class":"style";Gf(n,t,e.inputs[o],o,i)}function d(n,e,t,i){const r=V(),s=Je(),o=22+n,a=r[11],c=r[o]=$h(a,e,function cT(){return Pe.lFrame.currentNamespace}()),u=s.firstCreatePass?function dA(n,e,t,i,r,s,o){const a=e.consts,u=uo(e,n,2,r,kr(a,s));return Ff(e,t,u,kr(a,o)),null!==u.attrs&&ru(u,u.attrs,!1),null!==u.mergedAttrs&&ru(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,r,0,e,t,i):s.data[o];return zi(u,!0),gy(a,c,u),32!=(32&u.flags)&&Bc(s,r,c,u),0===function qM(){return Pe.lFrame.elementDepthCount}()&&kn(c,r),function KM(){Pe.lFrame.elementDepthCount++}(),Tc(u)&&(Rf(s,r,u),Of(s,u,r)),null!==i&&Lf(r,u),d}function h(){let n=En();fh()?ph():(n=n.parent,zi(n,!1));const e=n;!function YM(){Pe.lFrame.elementDepthCount--}();const t=Je();return t.firstCreatePass&&(Ac(t,n),oh(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function pT(n){return 0!=(8&n.flags)}(e)&&qf(t,e,V(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function gT(n){return 0!=(16&n.flags)}(e)&&qf(t,e,V(),e.stylesWithoutHost,!1),h}function m(n,e,t,i){return d(n,e,t,i),h(),m}function Pa(n,e,t){const i=V(),r=Je(),s=n+22,o=r.firstCreatePass?function hA(n,e,t,i,r){const s=e.consts,o=kr(s,i),a=uo(e,n,8,"ng-container",o);return null!==o&&ru(a,o,!0),Ff(e,t,a,kr(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,t):r.data[s];zi(o,!0);const a=i[s]=i[11].createComment("");return Bc(r,i,a,o),kn(a,i),Tc(o)&&(Rf(r,i,o),Of(r,o,i)),null!=t&&Lf(i,o),Pa}function Oa(){let n=En();const e=Je();return fh()?ph():(n=n.parent,zi(n,!1)),e.firstCreatePass&&(Ac(e,n),oh(n)&&e.queries.elementEnd(n)),Oa}function Vr(){return V()}function Ra(n){return!!n&&"function"==typeof n.then}const Kf=function zb(n){return!!n&&"function"==typeof n.subscribe};function ct(n,e,t,i){const r=V(),s=Je(),o=En();return function qb(n,e,t,i,r,s,o){const a=Tc(i),u=n.firstCreatePass&&Tb(n),f=e[8],p=Mb(e);let g=!0;if(3&i.type||o){const _=si(i,e),b=o?o(_):_,w=p.length,E=o?I=>o(ln(I[i.index])):i.index;let D=null;if(!o&&a&&(D=function fA(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[7],c=r[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==D)(D.__ngLastListenerFn__||D).__ngNextListenerFn__=s,D.__ngLastListenerFn__=s,g=!1;else{s=Yb(i,e,f,s,!1);const I=t.listen(b,r,s);p.push(s,I),u&&u.push(r,E,w,w+1)}}else s=Yb(i,e,f,s,!1);const v=i.outputs;let y;if(g&&null!==v&&(y=v[r])){const _=y.length;if(_)for(let b=0;b<_;b+=2){const k=e[y[b]][y[b+1]].subscribe(s),R=p.length;p.push(s,k),u&&u.push(r,i.index,R,-(R+1))}}}(s,r,r[11],o,n,e,i),ct}function Kb(n,e,t,i){try{return!1!==t(i)}catch(r){return Ib(n,r),!1}}function Yb(n,e,t,i,r){return function s(o){if(o===Function)return i;Bf(n.componentOffset>-1?oi(n.index,e):e);let c=Kb(e,0,i,o),u=s.__ngNextListenerFn__;for(;u;)c=Kb(e,0,u,o)&&c,u=u.__ngNextListenerFn__;return r&&!1===c&&(o.preventDefault(),o.returnValue=!1),c}}function Ne(n=1){return function iT(n){return(Pe.lFrame.contextLView=function rT(n,e){for(;n>0;)e=e[15],n--;return e}(n,Pe.lFrame.contextLView))[8]}(n)}function Xt(n,e,t){return La(n,"",e,"",t),Xt}function La(n,e,t,i,r){const s=V(),o=fo(s,e,t,i);return o!==Re&&di(Je(),Vt(),s,n,o,s[11],r,!1),La}function Yf(n,e,t,i,r,s,o){const a=V(),c=po(a,e,t,i,r,s);return c!==Re&&di(Je(),Vt(),a,n,c,a[11],o,!1),Yf}function s_(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?Li(s):hr(s),c=!1;for(;0!==a&&(!1===c||o);){const f=n[a+1];vA(n[a],e)&&(c=!0,n[a+1]=i?Df(f):wf(f)),a=i?Li(f):hr(f)}c&&(n[t+1]=i?wf(s):Df(s))}function vA(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&no(n,e)>=0}function lu(n,e,t){return Ni(n,e,t,!1),lu}function hi(n,e){return Ni(n,e,null,!0),hi}function Ni(n,e,t,i){const r=V(),s=Je(),o=lr(2);s.firstUpdatePass&&function f_(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[Hn()],o=function h_(n,e){return e>=n.expandoStartIndex}(n,t);(function v_(n,e){return 0!=(n.flags&(e?8:16))})(s,i)&&null===e&&!o&&(e=!1),e=function TA(n,e,t,i){const r=function mh(n){const e=Pe.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Na(t=Zf(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=Zf(r,n,e,t,i),null===s){let c=function SA(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==hr(i))return n[Li(i)]}(n,e,i);void 0!==c&&Array.isArray(c)&&(c=Zf(null,n,e,c[1],i),c=Na(c,e.attrs,i),function IA(n,e,t,i){n[Li(t?e.classBindings:e.styleBindings)]=i}(n,e,i,c))}else s=function AA(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=Na(i,n[s].hostAttrs,t);return Na(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function gA(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Li(o),c=hr(o);n[i]=t;let f,u=!1;if(Array.isArray(t)){const p=t;f=p[1],(null===f||no(p,f)>0)&&(u=!0)}else f=t;if(r)if(0!==c){const g=Li(n[a+1]);n[i+1]=Jc(g,a),0!==g&&(n[g+1]=Cf(n[g+1],i)),n[a+1]=function n2(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=Jc(a,0),0!==a&&(n[a+1]=Cf(n[a+1],i)),a=i;else n[i+1]=Jc(c,0),0===a?a=i:n[c+1]=Cf(n[c+1],i),c=i;u&&(n[i+1]=wf(n[i+1])),s_(n,f,i,!0),s_(n,f,i,!1),function mA(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&no(s,e)>=0&&(t[i+1]=Df(t[i+1]))}(e,f,n,i,s),o=Jc(a,c),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}(s,n,o,i),e!==Re&&Pn(r,o,e)&&function g_(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const c=n.data,u=c[a+1];cu(function ab(n){return 1==(1&n)}(u)?m_(c,e,t,r,hr(u),o):void 0)||(cu(s)||function ob(n){return 2==(2&n)}(u)&&(s=m_(c,null,t,r,a,o)),function DS(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:Qn.DashCase;null==r?n.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Qn.Important),n.setStyle(t,i,r,s))}}(i,o,Sc(Hn(),t),r,s))}(s,s.data[Hn()],r,r[11],n,r[o+1]=function PA(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=gt(ci(n)))),n}(e,t),i,o)}function Zf(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=Na(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function Na(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),li(n,o,!!t||e[++s]))}return void 0===n?null:n}function m_(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const c=n[r],u=Array.isArray(c),f=u?c[1]:c,p=null===f;let g=t[r+1];g===Re&&(g=p?rt:void 0);let v=p?xh(g,i):f===i?g:void 0;if(u&&!cu(v)&&(v=xh(c,i)),cu(v)&&(a=v,o))return a;const y=n[r+1];r=o?Li(y):hr(y)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=xh(c,i))}return a}function cu(n){return void 0!==n}function l(n,e=""){const t=V(),i=Je(),r=n+22,s=i.firstCreatePass?uo(i,r,1,e,null):i.data[r],o=t[r]=function Gh(n,e){return n.createText(e)}(t[11],e);Bc(i,t,o,s),zi(s,!1)}function nt(n){return Qe("",n,""),nt}function Qe(n,e,t){const i=V(),r=fo(i,n,e,t);return r!==Re&&fr(i,Hn(),r),Qe}function Fa(n,e,t,i,r){const s=V(),o=po(s,n,e,t,i,r);return o!==Re&&fr(s,Hn(),o),Fa}const Ds=void 0;var QA=["en",[["a","p"],["AM","PM"],Ds],[["AM","PM"],Ds,Ds],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ds,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ds,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ds,"{1} 'at' {0}",Ds],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function JA(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:5}];let Co={};function jn(n){const e=function XA(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=F_(e);if(t)return t;const i=e.split("-")[0];if(t=F_(i),t)return t;if("en"===i)return QA;throw new z(701,!1)}function F_(n){return n in Co||(Co[n]=wt.ng&&wt.ng.common&&wt.ng.common.locales&&wt.ng.common.locales[n]),Co[n]}var ie=(()=>((ie=ie||{})[ie.LocaleId=0]="LocaleId",ie[ie.DayPeriodsFormat=1]="DayPeriodsFormat",ie[ie.DayPeriodsStandalone=2]="DayPeriodsStandalone",ie[ie.DaysFormat=3]="DaysFormat",ie[ie.DaysStandalone=4]="DaysStandalone",ie[ie.MonthsFormat=5]="MonthsFormat",ie[ie.MonthsStandalone=6]="MonthsStandalone",ie[ie.Eras=7]="Eras",ie[ie.FirstDayOfWeek=8]="FirstDayOfWeek",ie[ie.WeekendRange=9]="WeekendRange",ie[ie.DateFormat=10]="DateFormat",ie[ie.TimeFormat=11]="TimeFormat",ie[ie.DateTimeFormat=12]="DateTimeFormat",ie[ie.NumberSymbols=13]="NumberSymbols",ie[ie.NumberFormats=14]="NumberFormats",ie[ie.CurrencyCode=15]="CurrencyCode",ie[ie.CurrencySymbol=16]="CurrencySymbol",ie[ie.CurrencyName=17]="CurrencyName",ie[ie.Currencies=18]="Currencies",ie[ie.Directionality=19]="Directionality",ie[ie.PluralCase=20]="PluralCase",ie[ie.ExtraData=21]="ExtraData",ie))();const Do="en-US";let V_=Do;function Xf(n,e,t,i,r){if(n=Ee(n),Array.isArray(n))for(let s=0;s<n.length;s++)Xf(n[s],e,t,i,r);else{const s=Je(),o=V();let a=bs(n)?n:Ee(n.provide),c=Fy(n);const u=En(),f=1048575&u.providerIndexes,p=u.directiveStart,g=u.providerIndexes>>20;if(bs(n)||!n.multi){const v=new ua(c,r,x),y=tp(a,e,r?f:f+g,p);-1===y?(Th(Oc(u,o),s,a),ep(s,n,e.length),e.push(a),u.directiveStart++,u.directiveEnd++,r&&(u.providerIndexes+=1048576),t.push(v),o.push(v)):(t[y]=v,o[y]=v)}else{const v=tp(a,e,f+g,p),y=tp(a,e,f,f+g),_=v>=0&&t[v],b=y>=0&&t[y];if(r&&!b||!r&&!_){Th(Oc(u,o),s,a);const w=function Zx(n,e,t,i,r){const s=new ua(n,t,x);return s.multi=[],s.index=e,s.componentProviders=0,u1(s,r,i&&!t),s}(r?Yx:Kx,t.length,r,i,c);!r&&b&&(t[y].providerFactory=w),ep(s,n,e.length,0),e.push(a),u.directiveStart++,u.directiveEnd++,r&&(u.providerIndexes+=1048576),t.push(w),o.push(w)}else ep(s,n,v>-1?v:y,u1(t[r?y:v],c,!r&&i));!r&&i&&b&&t[y].componentProviders++}}}function ep(n,e,t,i){const r=bs(e),s=function iI(n){return!!n.useClass}(e);if(r||s){const c=(s?Ee(e.useClass):e).prototype.ngOnDestroy;if(c){const u=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const f=u.indexOf(t);-1===f?u.push(t,[i,c]):u[f+1].push(i,c)}else u.push(t,c)}}}function u1(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function tp(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function Kx(n,e,t,i){return np(this.multi,[])}function Yx(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Zs(t,t[1],this.providerFactory.index,i);s=a.slice(0,o),np(r,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],np(r,s);return s}function np(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function vt(n,e=[]){return t=>{t.providersResolver=(i,r)=>function qx(n,e,t){const i=Je();if(i.firstCreatePass){const r=Oi(n);Xf(t,i.data,i.blueprint,r,!0),Xf(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class Es{}class d1{}class h1 extends Es{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new $f(this);const i=ii(e);this._bootstrapComponents=dr(i.bootstrap),this._r3Injector=Qy(e,t,[{provide:Es,useValue:this},{provide:Ta,useValue:this.componentFactoryResolver}],gt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class ip extends d1{constructor(e){super(),this.moduleType=e}create(e){return new h1(this.moduleType,e)}}class Qx extends Es{constructor(e,t,i){super(),this.componentFactoryResolver=new $f(this),this.instance=null;const r=new Ny([...e,{provide:Es,useValue:this},{provide:Ta,useValue:this.componentFactoryResolver}],t||Yc(),i,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function pu(n,e,t=null){return new Qx(n,e,t).injector}let Xx=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const i=Py(0,t.type),r=i.length>0?pu([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,r)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=X({token:n,providedIn:"environment",factory:()=>new n(U(ur))}),n})();function f1(n){n.getStandaloneInjector=e=>e.get(Xx).getOrCreateStandaloneInjector(n)}function Ur(n,e,t,i){return function w1(n,e,t,i,r,s){const o=e+t;return Pn(n,o,r)?Yi(n,o+1,s?i.call(s,r):i(r)):$a(n,o+1)}(V(),Un(),n,e,t,i)}function Ga(n,e,t,i,r){return C1(V(),Un(),n,e,t,i,r)}function sp(n,e,t,i,r,s){return function D1(n,e,t,i,r,s,o,a){const c=e+t;return function au(n,e,t,i,r){const s=Cs(n,e,t,i);return Pn(n,e+2,r)||s}(n,c,r,s,o)?Yi(n,c+3,a?i.call(a,r,s,o):i(r,s,o)):$a(n,c+3)}(V(),Un(),n,e,t,i,r,s)}function $a(n,e){const t=n[e];return t===Re?void 0:t}function C1(n,e,t,i,r,s,o){const a=e+t;return Cs(n,a,r,s)?Yi(n,a+2,o?i.call(o,r,s):i(r,s)):$a(n,a+2)}function E1(n,e,t,i,r,s,o,a,c){const u=e+t;return function _i(n,e,t,i,r,s){const o=Cs(n,e,t,i);return Cs(n,e+2,r,s)||o}(n,u,r,s,o,a)?Yi(n,u+4,c?i.call(c,r,s,o,a):i(r,s,o,a)):$a(n,u+4)}function Eo(n,e){const t=Je();let i;const r=n+22;t.firstCreatePass?(i=function pk(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=fs(i.type)),o=vi(x);try{const a=Pc(!1),c=s();return Pc(a),function uA(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,V(),r,c),c}finally{vi(o)}}function za(n,e,t,i){const r=n+22,s=V(),o=Ws(s,r);return Wa(s,r)?C1(s,Un(),e,o.transform,t,i,o):o.transform(t,i)}function Wa(n,e){return n[1].data[e].pure}function op(n){return e=>{setTimeout(n,void 0,e)}}const et=class yk extends K{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=op(s),r&&(r=op(r)),o&&(o=op(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof H&&e.add(a),a}};function bk(){return this._results[ws()]()}class ap{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=ws(),i=ap.prototype;i[t]||(i[t]=bk)}get changes(){return this._changes||(this._changes=new et)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=ai(e);(this._changesDetected=!function MT(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let pr=(()=>{class n{}return n.__NG_ELEMENT_ID__=Ck,n})();const _k=pr,wk=class extends _k{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e,t){const i=this._declarationTContainer.tViews,r=eu(this._declarationLView,i,e,16,null,i.declTNode,null,null,null,null,t||null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(i)),Pf(i,r,e),new Ia(r)}};function Ck(){return gu(En(),V())}function gu(n,e){return 4&n.type?new wk(e,n,oo(n,e)):null}let Vi=(()=>{class n{}return n.__NG_ELEMENT_ID__=Dk,n})();function Dk(){return A1(En(),V())}const Ek=Vi,S1=class extends Ek{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return oo(this._hostTNode,this._hostLView)}get injector(){return new Js(this._hostTNode,this._hostLView)}get parentInjector(){const e=Rc(this._hostTNode,this._hostLView);if(bv(e)){const t=Ys(e,this._hostLView),i=Ks(e);return new Js(t[1].data[i+8],t)}return new Js(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=I1(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,r),o}createComponent(e,t,i,r,s){const o=e&&!function ga(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const p=t||{};a=p.index,i=p.injector,r=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}const c=o?e:new Aa(lt(e)),u=i||this.parentInjector;if(!s&&null==c.ngModule){const g=(o?u:this.parentInjector).get(ur,null);g&&(s=g)}const f=c.create(u,r,void 0,s);return this.insert(f.hostView,a),f}insert(e,t){const i=e._lView,r=i[1];if(function WM(n){return Pi(n[3])}(i)){const f=this.indexOf(e);if(-1!==f)this.detach(f);else{const p=i[3],g=new S1(p,p[6],p[3]);g.detach(g.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function gS(n,e,t,i){const r=10+i,s=t.length;i>0&&(t[r-1][4]=e),i<s-10?(e[4]=t[r],xv(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function mS(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=64}(r,i,o,s);const a=Kh(s,o),c=i[11],u=Hc(c,o[7]);return null!==u&&function hS(n,e,t,i,r,s){i[0]=r,i[6]=e,Da(n,i,t,1,r,s)}(r,o[6],c,i,u,a),e.attachToViewContainerRef(),xv(lp(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=I1(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=zh(this._lContainer,t);i&&(Nc(lp(this._lContainer),t),iy(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=zh(this._lContainer,t);return i&&null!=Nc(lp(this._lContainer),t)?new Ia(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function I1(n){return n[8]}function lp(n){return n[8]||(n[8]=[])}function A1(n,e){let t;const i=e[n.index];if(Pi(i))t=i;else{let r;if(8&n.type)r=ln(i);else{const s=e[11];r=s.createComment("");const o=si(n,e);ms(s,Hc(s,o),r,function _S(n,e){return n.nextSibling(e)}(s,o),!1)}e[n.index]=t=Eb(i,e,r,n),nu(e,t)}return new S1(t,n,e)}class cp{constructor(e){this.queryList=e,this.matches=null}clone(){return new cp(this.queryList)}setDirty(){this.queryList.setDirty()}}class up{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new up(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==R1(e,t).matches&&this.queries[t].setDirty()}}class x1{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class dp{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new dp(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class hp{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new hp(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,Sk(t,s)),this.matchTNodeWithReadOption(e,t,Lc(t,e,s,!1,!1))}else i===pr?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Lc(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===jt||r===Vi||r===pr&&4&t.type)this.addMatch(t.index,-2);else{const s=Lc(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function Sk(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function Ak(n,e,t,i){return-1===t?function Ik(n,e){return 11&n.type?oo(n,e):4&n.type?gu(n,e):null}(e,n):-2===t?function xk(n,e,t){return t===jt?oo(e,n):t===pr?gu(e,n):t===Vi?A1(e,n):void 0}(n,e,i):Zs(n,n[1],t,e)}function k1(n,e,t,i){const r=e[19].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let c=0;c<o.length;c+=2){const u=o[c];a.push(u<0?null:Ak(e,s[u],o[c+1],t.metadata.read))}r.matches=a}return r.matches}function fp(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=k1(n,e,r,t);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)i.push(o[a/2]);else{const u=s[a+1],f=e[-c];for(let p=10;p<f.length;p++){const g=f[p];g[17]===g[3]&&fp(g[1],g,u,i)}if(null!==f[9]){const p=f[9];for(let g=0;g<p.length;g++){const v=p[g];fp(v[1],v,u,i)}}}}}return i}function Dt(n){const e=V(),t=Je(),i=cv();vh(i+1);const r=R1(t,i);if(n.dirty&&function zM(n){return 4==(4&n[2])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?fp(t,e,i,[]):k1(t,e,r,i);n.reset(s,pI),n.notifyOnChanges()}return!0}return!1}function Ut(n,e,t){const i=Je();i.firstCreatePass&&(O1(i,new x1(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),P1(i,V(),e)}function mu(n,e,t,i){const r=Je();if(r.firstCreatePass){const s=En();O1(r,new x1(e,t,i),s.index),function Pk(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}P1(r,V(),t)}function Et(){return function kk(n,e){return n[19].queries[e].queryList}(V(),cv())}function P1(n,e,t){const i=new ap(4==(4&t));yb(n,e,i,i.destroy),null===e[19]&&(e[19]=new up),e[19].queries.push(new cp(i))}function O1(n,e,t){null===n.queries&&(n.queries=new dp),n.queries.track(new hp(e,t))}function R1(n,e){return n.queries.getByIndex(e)}function yu(...n){}const bu=new Q("Application Initializer");let _u=(()=>{class n{constructor(t){this.appInits=t,this.resolve=yu,this.reject=yu,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(Ra(s))t.push(s);else if(Kf(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(U(bu,8))},n.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ka=new Q("AppId",{providedIn:"root",factory:function X1(){return`${yp()}${yp()}${yp()}`}});function yp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ew=new Q("Platform Initializer"),Ya=new Q("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),tw=new Q("appBootstrapListener");let eP=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Qi=new Q("LocaleId",{providedIn:"root",factory:()=>Ye(Qi,Me.Optional|Me.SkipSelf)||function tP(){return typeof $localize<"u"&&$localize.locale||Do}()});class iP{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let bp=(()=>{class n{compileModuleSync(t){return new ip(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=dr(ii(t).declarations).reduce((o,a)=>{const c=lt(a);return c&&o.push(new Aa(c)),o},[]);return new iP(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const oP=(()=>Promise.resolve(0))();function _p(n){typeof Zone>"u"?oP.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class yt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new et(!1),this.onMicrotaskEmpty=new et(!1),this.onStable=new et(!1),this.onError=new et(!1),typeof Zone>"u")throw new z(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function aP(){let n=wt.requestAnimationFrame,e=wt.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function uP(n){const e=()=>{!function cP(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(wt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Cp(n),n.isCheckStableRunning=!0,wp(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Cp(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{try{return rw(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),sw(n)}},onInvoke:(t,i,r,s,o,a,c)=>{try{return rw(n),t.invoke(r,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),sw(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,Cp(n),wp(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!yt.isInAngularZone())throw new z(909,!1)}static assertNotInAngularZone(){if(yt.isInAngularZone())throw new z(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,lP,yu,yu);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const lP={};function wp(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Cp(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function rw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function sw(n){n._nesting--,wp(n)}class dP{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new et,this.onMicrotaskEmpty=new et,this.onStable=new et,this.onError=new et}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const ow=new Q(""),wu=new Q("");let Mp,Dp=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Mp||(function hP(n){Mp=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{yt.assertNotInAngularZone(),_p(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())_p(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(U(yt),U(Ep),U(wu))},n.\u0275prov=X({token:n,factory:n.\u0275fac}),n})(),Ep=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return Mp?.findTestabilityInTree(this,t,i)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Hr=null;const aw=new Q("AllowMultipleToken"),Tp=new Q("PlatformDestroyListeners");class lw{constructor(e,t){this.name=e,this.token=t}}function uw(n,e,t=[]){const i=`Platform: ${e}`,r=new Q(i);return(s=[])=>{let o=Sp();if(!o||o.injector.get(aw,!1)){const a=[...t,...s,{provide:r,useValue:!0}];n?n(a):function gP(n){if(Hr&&!Hr.get(aw,!1))throw new z(400,!1);Hr=n;const e=n.get(hw);(function cw(n){const e=n.get(ew,null);e&&e.forEach(t=>t())})(n)}(function dw(n=[],e){return ui.create({name:e,providers:[{provide:lf,useValue:"platform"},{provide:Tp,useValue:new Set([()=>Hr=null])},...n]})}(a,i))}return function vP(n){const e=Sp();if(!e)throw new z(401,!1);return e}()}}function Sp(){return Hr?.get(hw)??null}let hw=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function pw(n,e){let t;return t="noop"===n?new dP:("zone.js"===n?void 0:n)||new yt(e),t}(i?.ngZone,function fw(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(i)),s=[{provide:yt,useValue:r}];return r.run(()=>{const o=ui.create({providers:s,parent:this.injector,name:t.moduleType.name}),a=t.create(o),c=a.injector.get(ao,null);if(!c)throw new z(402,!1);return r.runOutsideAngular(()=>{const u=r.onError.subscribe({next:f=>{c.handleError(f)}});a.onDestroy(()=>{Du(this._modules,a),u.unsubscribe()})}),function gw(n,e,t){try{const i=t();return Ra(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(c,r,()=>{const u=a.injector.get(_u);return u.runInitializers(),u.donePromise.then(()=>(function U_(n){ni(n,"Expected localeId to be defined"),"string"==typeof n&&(V_=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Qi,Do)||Do),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,i=[]){const r=mw({},i);return function fP(n,e,t){const i=new ip(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(Cu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new z(403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new z(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(Tp,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(U(ui))},n.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function mw(n,e){return Array.isArray(e)?e.reduce(mw,n):{...n,...e}}let Cu=(()=>{class n{constructor(t,i,r){this._zone=t,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new q(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new q(a=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{yt.assertNotInAngularZone(),_p(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const u=this._zone.onUnstable.subscribe(()=>{yt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{c.unsubscribe(),u.unsubscribe()}});this.isStable=function Ir(...n){let e=Number.POSITIVE_INFINITY,t=null,i=n[n.length-1];return Se(i)?(t=n.pop(),n.length>1&&"number"==typeof n[n.length-1]&&(e=n.pop())):"number"==typeof i&&(e=n.pop()),null===t&&1===n.length&&n[0]instanceof q?n[0]:Nn(e)(Qt(n,t))}(s,o.pipe(function lM(){return n=>Yn()(function sM(n,e){return function(i){let r;if(r="function"==typeof n?n:function(){return n},"function"==typeof e)return i.lift(new oM(r,e));const s=Object.create(i,ls);return s.source=i,s.subjectFactory=r,s}}(aM)(n))}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof Vy;if(!this._injector.get(_u).done)throw!r&&function js(n){const e=lt(n)||In(n)||Vn(n);return null!==e&&e.standalone}(t),new z(405,false);let o;o=r?t:this._injector.get(Ta).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function pP(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Es),u=o.create(ui.NULL,[],i||o.selector,a),f=u.location.nativeElement,p=u.injector.get(ow,null);return p?.registerApplication(f),u.onDestroy(()=>{this.detachView(u.hostView),Du(this.components,u),p?.unregisterApplication(f)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new z(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;Du(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(tw,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Du(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new z(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(U(yt),U(ur),U(ao))},n.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Du(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let Hi=(()=>{class n{}return n.__NG_ELEMENT_ID__=bP,n})();function bP(n){return function _P(n,e,t){if(Mc(n)&&!t){const i=oi(n.index,e);return new Ia(i,i)}return 47&n.type?new Ia(e[16],e):null}(En(),V(),16==(16&n))}class ww{constructor(){}supports(e){return xa(e)}create(e){return new TP(e)}}const MP=(n,e)=>e;class TP{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||MP}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<Dw(i,r,s)?t:i,a=Dw(o,r,s),c=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const u=a-r,f=c-r;if(u!=f){for(let g=0;g<u;g++){const v=g<s.length?s[g]:s[g]=0,y=v+g;f<=y&&y<u&&(s[g]=v+1)}s[o.previousIndex]=f-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!xa(e))throw new z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function oA(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[ws()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new SP(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Cw),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Cw),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class SP{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class IP{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class Cw{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new IP,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Dw(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class Ew{constructor(){}supports(e){return e instanceof Map||Wf(e)}create(){return new AP}}class AP{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Wf(e)))throw new z(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new xP(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class xP{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Mw(){return new Tu([new ww])}let Tu=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||Mw()),deps:[[n,new ya,new va]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new z(901,!1)}}return n.\u0275prov=X({token:n,providedIn:"root",factory:Mw}),n})();function Tw(){return new Za([new Ew])}let Za=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||Tw()),deps:[[n,new ya,new va]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new z(901,!1)}}return n.\u0275prov=X({token:n,providedIn:"root",factory:Tw}),n})();const OP=uw(null,"core",[]);let RP=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(U(Cu))},n.\u0275mod=vn({type:n}),n.\u0275inj=an({}),n})();function So(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let Su=null;function Xi(){return Su}class FP{}const Rt=new Q("DocumentToken");let Pp=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=X({token:n,factory:function(){return function VP(){return U(Sw)}()},providedIn:"platform"}),n})();const UP=new Q("Location Initialized");let Sw=(()=>{class n extends Pp{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Xi().getBaseHref(this._doc)}onPopState(t){const i=Xi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Xi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){Iw()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){Iw()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(U(Rt))},n.\u0275prov=X({token:n,factory:function(){return function HP(){return new Sw(U(Rt))}()},providedIn:"platform"}),n})();function Iw(){return!!window.history.pushState}function Op(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Aw(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function mr(n){return n&&"?"!==n[0]?"?"+n:n}let Br=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=X({token:n,factory:function(){return Ye(Rp)},providedIn:"root"}),n})();const xw=new Q("appBaseHref");let Rp=(()=>{class n extends Br{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Ye(Rt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Op(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+mr(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+mr(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+mr(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(U(Pp),U(xw,8))},n.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),BP=(()=>{class n extends Br{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=Op(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+mr(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+mr(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(U(Pp),U(xw,8))},n.\u0275prov=X({token:n,factory:n.\u0275fac}),n})(),Ja=(()=>{class n{constructor(t){this._subject=new et,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._baseHref=Aw(kw(i)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+mr(i))}normalize(t){return n.stripTrailingSlash(function GP(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,kw(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+mr(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+mr(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=mr,n.joinWithSlash=Op,n.stripTrailingSlash=Aw,n.\u0275fac=function(t){return new(t||n)(U(Br))},n.\u0275prov=X({token:n,factory:function(){return function jP(){return new Ja(U(Br))}()},providedIn:"root"}),n})();function kw(n){return n.replace(/\/index.html$/,"")}var qt=(()=>((qt=qt||{})[qt.Format=0]="Format",qt[qt.Standalone=1]="Standalone",qt))(),qe=(()=>((qe=qe||{})[qe.Narrow=0]="Narrow",qe[qe.Abbreviated=1]="Abbreviated",qe[qe.Wide=2]="Wide",qe[qe.Short=3]="Short",qe))(),Ht=(()=>((Ht=Ht||{})[Ht.Short=0]="Short",Ht[Ht.Medium=1]="Medium",Ht[Ht.Long=2]="Long",Ht[Ht.Full=3]="Full",Ht))(),De=(()=>((De=De||{})[De.Decimal=0]="Decimal",De[De.Group=1]="Group",De[De.List=2]="List",De[De.PercentSign=3]="PercentSign",De[De.PlusSign=4]="PlusSign",De[De.MinusSign=5]="MinusSign",De[De.Exponential=6]="Exponential",De[De.SuperscriptingExponent=7]="SuperscriptingExponent",De[De.PerMille=8]="PerMille",De[De.Infinity=9]="Infinity",De[De.NaN=10]="NaN",De[De.TimeSeparator=11]="TimeSeparator",De[De.CurrencyDecimal=12]="CurrencyDecimal",De[De.CurrencyGroup=13]="CurrencyGroup",De))();function Iu(n,e){return Ci(jn(n)[ie.DateFormat],e)}function Au(n,e){return Ci(jn(n)[ie.TimeFormat],e)}function xu(n,e){return Ci(jn(n)[ie.DateTimeFormat],e)}function wi(n,e){const t=jn(n),i=t[ie.NumberSymbols][e];if(typeof i>"u"){if(e===De.CurrencyDecimal)return t[ie.NumberSymbols][De.Decimal];if(e===De.CurrencyGroup)return t[ie.NumberSymbols][De.Group]}return i}function Ow(n){if(!n[ie.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[ie.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Ci(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Np(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const nO=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Qa={},iO=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var dn=(()=>((dn=dn||{})[dn.Short=0]="Short",dn[dn.ShortGMT=1]="ShortGMT",dn[dn.Long=2]="Long",dn[dn.Extended=3]="Extended",dn))(),Ie=(()=>((Ie=Ie||{})[Ie.FullYear=0]="FullYear",Ie[Ie.Month=1]="Month",Ie[Ie.Date=2]="Date",Ie[Ie.Hours=3]="Hours",Ie[Ie.Minutes=4]="Minutes",Ie[Ie.Seconds=5]="Seconds",Ie[Ie.FractionalSeconds=6]="FractionalSeconds",Ie[Ie.Day=7]="Day",Ie))(),Ge=(()=>((Ge=Ge||{})[Ge.DayPeriods=0]="DayPeriods",Ge[Ge.Days=1]="Days",Ge[Ge.Months=2]="Months",Ge[Ge.Eras=3]="Eras",Ge))();function rO(n,e,t,i){let r=function fO(n){if(Nw(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[r,s=1,o=1]=n.split("-").map(a=>+a);return ku(r,s-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(nO))return function pO(n){const e=new Date(0);let t=0,i=0;const r=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,a=Number(n[5]||0)-i,c=Number(n[6]||0),u=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,o,a,c,u),e}(i)}const e=new Date(n);if(!Nw(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=vr(t,e)||e;let a,o=[];for(;e;){if(a=iO.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const f=o.pop();if(!f)break;e=f}}let c=r.getTimezoneOffset();i&&(c=Lw(i,c),r=function hO(n,e,t){const i=t?-1:1,r=n.getTimezoneOffset();return function dO(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,i*(Lw(e,r)-r))}(r,i,!0));let u="";return o.forEach(f=>{const p=function uO(n){if(Vp[n])return Vp[n];let e;switch(n){case"G":case"GG":case"GGG":e=Mt(Ge.Eras,qe.Abbreviated);break;case"GGGG":e=Mt(Ge.Eras,qe.Wide);break;case"GGGGG":e=Mt(Ge.Eras,qe.Narrow);break;case"y":e=tn(Ie.FullYear,1,0,!1,!0);break;case"yy":e=tn(Ie.FullYear,2,0,!0,!0);break;case"yyy":e=tn(Ie.FullYear,3,0,!1,!0);break;case"yyyy":e=tn(Ie.FullYear,4,0,!1,!0);break;case"Y":e=Lu(1);break;case"YY":e=Lu(2,!0);break;case"YYY":e=Lu(3);break;case"YYYY":e=Lu(4);break;case"M":case"L":e=tn(Ie.Month,1,1);break;case"MM":case"LL":e=tn(Ie.Month,2,1);break;case"MMM":e=Mt(Ge.Months,qe.Abbreviated);break;case"MMMM":e=Mt(Ge.Months,qe.Wide);break;case"MMMMM":e=Mt(Ge.Months,qe.Narrow);break;case"LLL":e=Mt(Ge.Months,qe.Abbreviated,qt.Standalone);break;case"LLLL":e=Mt(Ge.Months,qe.Wide,qt.Standalone);break;case"LLLLL":e=Mt(Ge.Months,qe.Narrow,qt.Standalone);break;case"w":e=Fp(1);break;case"ww":e=Fp(2);break;case"W":e=Fp(1,!0);break;case"d":e=tn(Ie.Date,1);break;case"dd":e=tn(Ie.Date,2);break;case"c":case"cc":e=tn(Ie.Day,1);break;case"ccc":e=Mt(Ge.Days,qe.Abbreviated,qt.Standalone);break;case"cccc":e=Mt(Ge.Days,qe.Wide,qt.Standalone);break;case"ccccc":e=Mt(Ge.Days,qe.Narrow,qt.Standalone);break;case"cccccc":e=Mt(Ge.Days,qe.Short,qt.Standalone);break;case"E":case"EE":case"EEE":e=Mt(Ge.Days,qe.Abbreviated);break;case"EEEE":e=Mt(Ge.Days,qe.Wide);break;case"EEEEE":e=Mt(Ge.Days,qe.Narrow);break;case"EEEEEE":e=Mt(Ge.Days,qe.Short);break;case"a":case"aa":case"aaa":e=Mt(Ge.DayPeriods,qe.Abbreviated);break;case"aaaa":e=Mt(Ge.DayPeriods,qe.Wide);break;case"aaaaa":e=Mt(Ge.DayPeriods,qe.Narrow);break;case"b":case"bb":case"bbb":e=Mt(Ge.DayPeriods,qe.Abbreviated,qt.Standalone,!0);break;case"bbbb":e=Mt(Ge.DayPeriods,qe.Wide,qt.Standalone,!0);break;case"bbbbb":e=Mt(Ge.DayPeriods,qe.Narrow,qt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Mt(Ge.DayPeriods,qe.Abbreviated,qt.Format,!0);break;case"BBBB":e=Mt(Ge.DayPeriods,qe.Wide,qt.Format,!0);break;case"BBBBB":e=Mt(Ge.DayPeriods,qe.Narrow,qt.Format,!0);break;case"h":e=tn(Ie.Hours,1,-12);break;case"hh":e=tn(Ie.Hours,2,-12);break;case"H":e=tn(Ie.Hours,1);break;case"HH":e=tn(Ie.Hours,2);break;case"m":e=tn(Ie.Minutes,1);break;case"mm":e=tn(Ie.Minutes,2);break;case"s":e=tn(Ie.Seconds,1);break;case"ss":e=tn(Ie.Seconds,2);break;case"S":e=tn(Ie.FractionalSeconds,1);break;case"SS":e=tn(Ie.FractionalSeconds,2);break;case"SSS":e=tn(Ie.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Ou(dn.Short);break;case"ZZZZZ":e=Ou(dn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Ou(dn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Ou(dn.Long);break;default:return null}return Vp[n]=e,e}(f);u+=p?p(r,t,c):"''"===f?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function ku(n,e,t){const i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function vr(n,e){const t=function $P(n){return jn(n)[ie.LocaleId]}(n);if(Qa[t]=Qa[t]||{},Qa[t][e])return Qa[t][e];let i="";switch(e){case"shortDate":i=Iu(n,Ht.Short);break;case"mediumDate":i=Iu(n,Ht.Medium);break;case"longDate":i=Iu(n,Ht.Long);break;case"fullDate":i=Iu(n,Ht.Full);break;case"shortTime":i=Au(n,Ht.Short);break;case"mediumTime":i=Au(n,Ht.Medium);break;case"longTime":i=Au(n,Ht.Long);break;case"fullTime":i=Au(n,Ht.Full);break;case"short":const r=vr(n,"shortTime"),s=vr(n,"shortDate");i=Pu(xu(n,Ht.Short),[r,s]);break;case"medium":const o=vr(n,"mediumTime"),a=vr(n,"mediumDate");i=Pu(xu(n,Ht.Medium),[o,a]);break;case"long":const c=vr(n,"longTime"),u=vr(n,"longDate");i=Pu(xu(n,Ht.Long),[c,u]);break;case"full":const f=vr(n,"fullTime"),p=vr(n,"fullDate");i=Pu(xu(n,Ht.Full),[f,p])}return i&&(Qa[t][e]=i),i}function Pu(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return null!=e&&i in e?e[i]:t})),n}function Bi(n,e,t="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=1-n:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return i&&(o=o.slice(o.length-e)),s+o}function tn(n,e,t=0,i=!1,r=!1){return function(s,o){let a=function oO(n,e){switch(n){case Ie.FullYear:return e.getFullYear();case Ie.Month:return e.getMonth();case Ie.Date:return e.getDate();case Ie.Hours:return e.getHours();case Ie.Minutes:return e.getMinutes();case Ie.Seconds:return e.getSeconds();case Ie.FractionalSeconds:return e.getMilliseconds();case Ie.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||a>-t)&&(a+=t),n===Ie.Hours)0===a&&-12===t&&(a=12);else if(n===Ie.FractionalSeconds)return function sO(n,e){return Bi(n,3).substring(0,e)}(a,e);const c=wi(o,De.MinusSign);return Bi(a,e,c,i,r)}}function Mt(n,e,t=qt.Format,i=!1){return function(r,s){return function aO(n,e,t,i,r,s){switch(t){case Ge.Months:return function qP(n,e,t){const i=jn(n),s=Ci([i[ie.MonthsFormat],i[ie.MonthsStandalone]],e);return Ci(s,t)}(e,r,i)[n.getMonth()];case Ge.Days:return function WP(n,e,t){const i=jn(n),s=Ci([i[ie.DaysFormat],i[ie.DaysStandalone]],e);return Ci(s,t)}(e,r,i)[n.getDay()];case Ge.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(s){const u=function JP(n){const e=jn(n);return Ow(e),(e[ie.ExtraData][2]||[]).map(i=>"string"==typeof i?Np(i):[Np(i[0]),Np(i[1])])}(e),f=function QP(n,e,t){const i=jn(n);Ow(i);const s=Ci([i[ie.ExtraData][0],i[ie.ExtraData][1]],e)||[];return Ci(s,t)||[]}(e,r,i),p=u.findIndex(g=>{if(Array.isArray(g)){const[v,y]=g,_=o>=v.hours&&a>=v.minutes,b=o<y.hours||o===y.hours&&a<y.minutes;if(v.hours<y.hours){if(_&&b)return!0}else if(_||b)return!0}else if(g.hours===o&&g.minutes===a)return!0;return!1});if(-1!==p)return f[p]}return function zP(n,e,t){const i=jn(n),s=Ci([i[ie.DayPeriodsFormat],i[ie.DayPeriodsStandalone]],e);return Ci(s,t)}(e,r,i)[o<12?0:1];case Ge.Eras:return function KP(n,e){return Ci(jn(n)[ie.Eras],e)}(e,i)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(r,s,n,e,t,i)}}function Ou(n){return function(e,t,i){const r=-1*i,s=wi(t,De.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case dn.Short:return(r>=0?"+":"")+Bi(o,2,s)+Bi(Math.abs(r%60),2,s);case dn.ShortGMT:return"GMT"+(r>=0?"+":"")+Bi(o,1,s);case dn.Long:return"GMT"+(r>=0?"+":"")+Bi(o,2,s)+":"+Bi(Math.abs(r%60),2,s);case dn.Extended:return 0===i?"Z":(r>=0?"+":"")+Bi(o,2,s)+":"+Bi(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}function Rw(n){return ku(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function Fp(n,e=!1){return function(t,i){let r;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();r=1+Math.floor((o+s)/7)}else{const s=Rw(t),o=function cO(n){const e=ku(n,0,1).getDay();return ku(n,0,1+(e<=4?4:11)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();r=1+Math.round(a/6048e5)}return Bi(r,n,wi(i,De.MinusSign))}}function Lu(n,e=!1){return function(t,i){return Bi(Rw(t).getFullYear(),n,wi(i,De.MinusSign),e)}}const Vp={};function Lw(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Nw(n){return n instanceof Date&&!isNaN(n.valueOf())}function Hw(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}let el=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(xa(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${gt(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(x(Tu),x(Za),x(jt),x(Xn))},n.\u0275dir=ve({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class SO{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let tl=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new SO(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),Gw(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{Gw(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(x(Vi),x(pr),x(Tu))},n.\u0275dir=ve({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Gw(n,e){n.context.$implicit=e.item}let Mn=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new AO,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){$w("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){$w("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(x(Vi),x(pr))},n.\u0275dir=ve({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class AO{constructor(){this.$implicit=null,this.ngIf=null}}function $w(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${gt(e)}'.`)}let Ww=(()=>{class n{constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[r,s]=t.split("."),o=-1===r.indexOf("-")?void 0:Qn.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(x(jt),x(Za),x(Xn))},n.\u0275dir=ve({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),qw=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=i.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(x(Vi))},n.\u0275dir=ve({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Jn]}),n})();const GO=new Q("DATE_PIPE_DEFAULT_TIMEZONE"),$O=new Q("DATE_PIPE_DEFAULT_OPTIONS");let Wp=(()=>{class n{constructor(t,i,r){this.locale=t,this.defaultTimezone=i,this.defaultOptions=r}transform(t,i,r,s){if(null==t||""===t||t!=t)return null;try{return rO(t,i??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,r??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(o){throw function ji(n,e){return new z(2100,!1)}()}}}return n.\u0275fac=function(t){return new(t||n)(x(Qi,16),x(GO,24),x($O,24))},n.\u0275pipe=Fn({name:"date",type:n,pure:!0,standalone:!0}),n})(),Yw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=an({}),n})();const Zw="browser";function Jw(n){return n===Zw}let rR=(()=>{class n{}return n.\u0275prov=X({token:n,providedIn:"root",factory:()=>new sR(U(Rt),window)}),n})();class sR{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function oR(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Qw(this.window.history)||Qw(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Qw(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Xw{}class OR extends FP{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Jp extends OR{static makeCurrent(){!function NP(n){Su||(Su=n)}(new Jp)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function RR(){return il=il||document.querySelector("base"),il?il.getAttribute("href"):null}();return null==t?null:function LR(n){Vu=Vu||document.createElement("a"),Vu.setAttribute("href",n);const e=Vu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){il=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Hw(document.cookie,e)}}let Vu,il=null;const o0=new Q("TRANSITION_ID"),FR=[{provide:bu,useFactory:function NR(n,e,t){return()=>{t.get(_u).donePromise.then(()=>{const i=Xi(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[o0,Rt,ui],multi:!0}];let UR=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=X({token:n,factory:n.\u0275fac}),n})();const Uu=new Q("EventManagerPlugins");let Hu=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(U(Uu),U(yt))},n.\u0275prov=X({token:n,factory:n.\u0275fac}),n})();class a0{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=Xi().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let l0=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=X({token:n,factory:n.\u0275fac}),n})(),rl=(()=>{class n extends l0{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(c0),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(c0))}}return n.\u0275fac=function(t){return new(t||n)(U(Rt))},n.\u0275prov=X({token:n,factory:n.\u0275fac}),n})();function c0(n){Xi().remove(n)}const Qp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Xp=/%COMP%/g;function Bu(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?Bu(n,r,t):(r=r.replace(Xp,n),t.push(r))}return t}function h0(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let eg=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new tg(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case $i.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new zR(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case $i.ShadowDom:return new WR(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=Bu(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(U(Hu),U(rl),U(Ka))},n.\u0275prov=X({token:n,factory:n.\u0275fac}),n})();class tg{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Qp[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(p0(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(p0(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=Qp[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=Qp[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Qn.DashCase|Qn.Important)?e.style.setProperty(t,i,r&Qn.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Qn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,h0(i)):this.eventManager.addEventListener(e,t,h0(i))}}function p0(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class zR extends tg{constructor(e,t,i,r){super(e),this.component=i;const s=Bu(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function jR(n){return"_ngcontent-%COMP%".replace(Xp,n)}(r+"-"+i.id),this.hostAttr=function GR(n){return"_nghost-%COMP%".replace(Xp,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class WR extends tg{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Bu(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let qR=(()=>{class n extends a0{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(U(Rt))},n.\u0275prov=X({token:n,factory:n.\u0275fac}),n})();const g0=["alt","control","meta","shift"],KR={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},YR={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ZR=(()=>{class n extends a0{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Xi().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),g0.forEach(u=>{const f=i.indexOf(u);f>-1&&(i.splice(f,1),o+=u+".")}),o+=s,0!=i.length||0===s.length)return null;const c={};return c.domEventName=r,c.fullKey=o,c}static matchEventFullKeyCode(t,i){let r=KR[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),g0.forEach(o=>{o!==r&&(0,YR[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(U(Rt))},n.\u0275prov=X({token:n,factory:n.\u0275fac}),n})();const v0=[{provide:Ya,useValue:Zw},{provide:ew,useValue:function JR(){Jp.makeCurrent()},multi:!0},{provide:Rt,useFactory:function XR(){return function IS(n){Qh=n}(document),document},deps:[]}],eL=uw(OP,"browser",v0),y0=new Q(""),b0=[{provide:wu,useClass:class VR{addToWindow(e){wt.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},wt.getAllAngularTestabilities=()=>e.getAllTestabilities(),wt.getAllAngularRootElements=()=>e.getAllRootElements(),wt.frameworkStabilizers||(wt.frameworkStabilizers=[]),wt.frameworkStabilizers.push(i=>{const r=wt.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(c){o=o||c,s--,0==s&&i(o)};r.forEach(function(c){c.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?Xi().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:ow,useClass:Dp,deps:[yt,Ep,wu]},{provide:Dp,useClass:Dp,deps:[yt,Ep,wu]}],_0=[{provide:lf,useValue:"root"},{provide:ao,useFactory:function QR(){return new ao},deps:[]},{provide:Uu,useClass:qR,multi:!0,deps:[Rt,yt,Ya]},{provide:Uu,useClass:ZR,multi:!0,deps:[Rt]},{provide:eg,useClass:eg,deps:[Hu,rl,Ka]},{provide:Hy,useExisting:eg},{provide:l0,useExisting:rl},{provide:rl,useClass:rl,deps:[Rt]},{provide:Hu,useClass:Hu,deps:[Uu,yt]},{provide:Xw,useClass:UR,deps:[]},[]];let tL=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Ka,useValue:t.appId},{provide:o0,useExisting:Ka},FR]}}}return n.\u0275fac=function(t){return new(t||n)(U(y0,12))},n.\u0275mod=vn({type:n}),n.\u0275inj=an({providers:[..._0,...b0],imports:[Yw,RP]}),n})(),w0=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(U(Rt))},n.\u0275prov=X({token:n,factory:function(t){let i=null;return i=t?new t:function iL(){return new w0(U(Rt))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;let E0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=X({token:n,factory:function(t){let i=null;return i=t?new(t||n):U(M0),i},providedIn:"root"}),n})(),M0=(()=>{class n extends E0{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case mt.NONE:return i;case mt.HTML:return qi(i,"HTML")?ci(i):Ty(this._doc,String(i)).toString();case mt.STYLE:return qi(i,"Style")?ci(i):i;case mt.SCRIPT:if(qi(i,"Script"))return ci(i);throw new Error("unsafe value used in a script context");case mt.URL:return qi(i,"URL")?ci(i):zc(String(i));case mt.RESOURCE_URL:if(qi(i,"ResourceURL"))return ci(i);throw new Error(`unsafe value used in a resource URL context (see ${pc})`);default:throw new Error(`Unexpected SecurityContext ${t} (see ${pc})`)}}bypassSecurityTrustHtml(t){return function LS(n){return new AS(n)}(t)}bypassSecurityTrustStyle(t){return function NS(n){return new xS(n)}(t)}bypassSecurityTrustScript(t){return function FS(n){return new kS(n)}(t)}bypassSecurityTrustUrl(t){return function VS(n){return new PS(n)}(t)}bypassSecurityTrustResourceUrl(t){return function US(n){return new OS(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(U(Rt))},n.\u0275prov=X({token:n,factory:function(t){let i=null;return i=t?new t:function uL(n){return new M0(n.get(Rt))}(U(ui)),i},providedIn:"root"}),n})();function me(...n){let e=n[n.length-1];return Se(e)?(n.pop(),Ce(n,e)):Qt(n)}class Rn extends K{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new M;return this._value}next(e){super.next(this._value=e)}}const ju=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();class dL extends Ae{notifyNext(e,t,i,r,s){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class hL extends Ae{constructor(e,t,i){super(),this.parent=e,this.outerValue=t,this.outerIndex=i,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function fL(n,e,t,i,r=new hL(n,t,i)){if(!r.closed)return e instanceof q?e.subscribe(r):bt(e)(r)}const T0={};function rg(...n){let e,t;return Se(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&Ze(n[0])&&(n=n[0]),Qt(n,t).lift(new pL(e))}class pL{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new gL(e,this.resultSelector))}}class gL extends dL{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(T0),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let i=0;i<t;i++)this.add(fL(this,e[i],void 0,i))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,i){const r=this.values,o=this.toRespond?r[i]===T0?--this.toRespond:this.toRespond:0;r[i]=t,0===o&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}function Gu(...n){return function mL(){return Nn(1)}()(me(...n))}const Gr=new q(n=>n.complete());function $u(n){return n?function vL(n){return new q(e=>n.schedule(()=>e.complete()))}(n):Gr}function S0(n){return new q(e=>{let t;try{t=n()}catch(r){return void e.error(r)}return(t?he(t):$u()).subscribe(e)})}function Gi(n,e){return new q(e?t=>e.schedule(yL,0,{error:n,subscriber:t}):t=>t.error(n))}function yL({error:n,subscriber:e}){e.error(n)}function fi(n,e){return"function"==typeof e?t=>t.pipe(fi((i,r)=>he(n(i,r)).pipe($((s,o)=>e(i,s,r,o))))):t=>t.lift(new bL(n))}class bL{constructor(e){this.project=e}call(e,t){return t.subscribe(new _L(e,this.project))}}class _L extends Wt{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const i=new At(this),r=this.destination;r.add(i),this.innerSubscription=mn(e,i),this.innerSubscription!==i&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const I0=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function Ts(n){return e=>0===n?$u():e.lift(new wL(n))}class wL{constructor(e){if(this.total=e,this.total<0)throw new I0}call(e,t){return t.subscribe(new CL(e,this.total))}}class CL extends Ae{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,i=++this.count;i<=t&&(this.destination.next(e),i===t&&(this.destination.complete(),this.unsubscribe()))}}function A0(...n){const e=n[n.length-1];return Se(e)?(n.pop(),t=>Gu(n,t,e)):t=>Gu(n,t)}function $n(n,e){return function(i){return i.lift(new DL(n,e))}}class DL{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new EL(e,this.predicate,this.thisArg))}}class EL extends Ae{constructor(e,t,i){super(e),this.predicate=t,this.thisArg=i,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}t&&this.destination.next(e)}}function zu(n=null){return e=>e.lift(new ML(n))}class ML{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new TL(e,this.defaultValue))}}class TL extends Ae{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function x0(n=AL){return e=>e.lift(new SL(n))}class SL{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new IL(e,this.errorFactory))}}class IL extends Ae{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function AL(){return new ju}function $r(n,e){const t=arguments.length>=2;return i=>i.pipe(n?$n((r,s)=>n(r,s,i)):W,Ts(1),t?zu(e):x0(()=>new ju))}function zr(n,e){return xt(n,e,1)}function Wr(){}function Tt(n,e,t){return function(r){return r.lift(new xL(n,e,t))}}class xL{constructor(e,t,i){this.nextOrObserver=e,this.error=t,this.complete=i}call(e,t){return t.subscribe(new kL(e,this.nextOrObserver,this.error,this.complete))}}class kL extends Ae{constructor(e,t,i,r){super(e),this._tapNext=Wr,this._tapError=Wr,this._tapComplete=Wr,this._tapError=i||Wr,this._tapComplete=r||Wr,Ke(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||Wr,this._tapError=t.error||Wr,this._tapComplete=t.complete||Wr)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}function qr(n){return function(t){const i=new PL(n),r=t.lift(i);return i.caught=r}}class PL{constructor(e){this.selector=e}call(e,t){return t.subscribe(new OL(e,this.selector,this.caught))}}class OL extends Wt{constructor(e,t,i){super(e),this.selector=t,this.caught=i}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(s){return void super.error(s)}this._unsubscribeAndRecycle();const i=new At(this);this.add(i);const r=mn(t,i);r!==i&&this.add(r)}}}function k0(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(r){return r.lift(new RL(n,e,t))}}class RL{constructor(e,t,i=!1){this.accumulator=e,this.seed=t,this.hasSeed=i}call(e,t){return t.subscribe(new LL(e,this.accumulator,this.seed,this.hasSeed))}}class LL extends Ae{constructor(e,t,i,r){super(e),this.accumulator=t,this._seed=i,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let i;try{i=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=i,this.destination.next(i)}}function sg(n){return function(t){return 0===n?$u():t.lift(new NL(n))}}class NL{constructor(e){if(this.total=e,this.total<0)throw new I0}call(e,t){return t.subscribe(new FL(e,this.total))}}class FL extends Ae{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,i=this.total,r=this.count++;t.length<i?t.push(e):t[r%i]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const i=this.count>=this.total?this.total:this.count,r=this.ring;for(let s=0;s<i;s++){const o=t++%i;e.next(r[o])}}e.complete()}}function P0(n,e){const t=arguments.length>=2;return i=>i.pipe(n?$n((r,s)=>n(r,s,i)):W,sg(1),t?zu(e):x0(()=>new ju))}class UL{constructor(e,t){this.predicate=e,this.inclusive=t}call(e,t){return t.subscribe(new HL(e,this.predicate,this.inclusive))}}class HL extends Ae{constructor(e,t,i){super(e),this.predicate=t,this.inclusive=i,this.index=0}_next(e){const t=this.destination;let i;try{i=this.predicate(e,this.index++)}catch(r){return void t.error(r)}this.nextOrComplete(e,i)}nextOrComplete(e,t){const i=this.destination;Boolean(t)?i.next(e):(this.inclusive&&i.next(e),i.complete())}}class jL{constructor(e){this.value=e}call(e,t){return t.subscribe(new GL(e,this.value))}}class GL extends Ae{constructor(e,t){super(e),this.value=t}_next(e){this.destination.next(this.value)}}function og(n){return e=>e.lift(new $L(n))}class $L{constructor(e){this.callback=e}call(e,t){return t.subscribe(new zL(e,this.callback))}}class zL extends Ae{constructor(e,t){super(e),this.add(new H(t))}}const ze="primary",sl=Symbol("RouteTitle");class WL{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Io(n){return new WL(n)}function qL(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function er(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!O0(n[r],e[r]))return!1;return!0}function O0(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function R0(n){return Array.prototype.concat.apply([],n)}function L0(n){return n.length>0?n[n.length-1]:null}function Tn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Kr(n){return Kf(n)?n:Ra(n)?he(Promise.resolve(n)):me(n)}const Wu=!1,YL={exact:function V0(n,e,t){if(!Is(n.segments,e.segments)||!qu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!V0(n.children[i],e.children[i],t))return!1;return!0},subset:U0},N0={exact:function ZL(n,e){return er(n,e)},subset:function JL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>O0(n[t],e[t]))},ignored:()=>!0};function F0(n,e,t){return YL[t.paths](n.root,e.root,t.matrixParams)&&N0[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function U0(n,e,t){return H0(n,e,e.segments,t)}function H0(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!Is(r,t)||e.hasChildren()||!qu(r,t,i))}if(n.segments.length===t.length){if(!Is(n.segments,t)||!qu(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!U0(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Is(n.segments,r)&&qu(n.segments,r,i)&&n.children[ze])&&H0(n.children[ze],e,s,i)}}function qu(n,e,t){return e.every((i,r)=>N0[t](n[r].parameters,i.parameters))}class Ss{constructor(e=new We([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Io(this.queryParams)),this._queryParamMap}toString(){return eN.serialize(this)}}class We{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Tn(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ku(this)}}class ol{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Io(this.parameters)),this._parameterMap}toString(){return $0(this)}}function Is(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let B0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=X({token:n,factory:function(){return new ag},providedIn:"root"}),n})();class ag{parse(e){const t=new cN(e);return new Ss(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${al(e.root,!0)}`,i=function iN(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${Yu(t)}=${Yu(r)}`).join("&"):`${Yu(t)}=${Yu(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),r="string"==typeof e.fragment?`#${function tN(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${i}${r}`}}const eN=new ag;function Ku(n){return n.segments.map(e=>$0(e)).join("/")}function al(n,e){if(!n.hasChildren())return Ku(n);if(e){const t=n.children[ze]?al(n.children[ze],!1):"",i=[];return Tn(n.children,(r,s)=>{s!==ze&&i.push(`${s}:${al(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function XL(n,e){let t=[];return Tn(n.children,(i,r)=>{r===ze&&(t=t.concat(e(i,r)))}),Tn(n.children,(i,r)=>{r!==ze&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===ze?[al(n.children[ze],!1)]:[`${r}:${al(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ze]?`${Ku(n)}/${t[0]}`:`${Ku(n)}/(${t.join("//")})`}}function j0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yu(n){return j0(n).replace(/%3B/gi,";")}function lg(n){return j0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zu(n){return decodeURIComponent(n)}function G0(n){return Zu(n.replace(/\+/g,"%20"))}function $0(n){return`${lg(n.path)}${function nN(n){return Object.keys(n).map(e=>`;${lg(e)}=${lg(n[e])}`).join("")}(n.parameters)}`}const rN=/^[^\/()?;=#]+/;function Ju(n){const e=n.match(rN);return e?e[0]:""}const sN=/^[^=?&#]+/,aN=/^[^&#]+/;class cN{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new We([],{}):new We([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[ze]=new We(e,t)),i}parseSegment(){const e=Ju(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new z(4009,Wu);return this.capture(e),new ol(Zu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ju(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=Ju(this.remaining);r&&(i=r,this.capture(i))}e[Zu(t)]=Zu(i)}parseQueryParam(e){const t=function oN(n){const e=n.match(sN);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function lN(n){const e=n.match(aN);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=G0(t),s=G0(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Ju(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new z(4010,Wu);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ze);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[ze]:new We([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new z(4011,Wu)}}function cg(n){return n.segments.length>0?new We([],{[ze]:n}):n}function Qu(n){const e={};for(const i of Object.keys(n.children)){const s=Qu(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function uN(n){if(1===n.numberOfChildren&&n.children[ze]){const e=n.children[ze];return new We(n.segments.concat(e.segments),e.children)}return n}(new We(n.segments,e))}function As(n){return n instanceof Ss}function fN(n,e,t,i,r){if(0===t.length)return Ao(e.root,e.root,e.root,i,r);const s=function q0(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new W0(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Tn(s.outlets,(c,u)=>{a[u]="string"==typeof c?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new W0(t,e,i)}(t);return s.toRoot()?Ao(e.root,e.root,new We([],{}),i,r):function o(c){const u=function gN(n,e,t,i){if(n.isAbsolute)return new xo(e.root,!0,0);if(-1===i)return new xo(t,t===e.root,0);return function K0(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new z(4005,!1);r=i.segments.length}return new xo(i,!1,r-s)}(t,i+(ll(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,c),f=u.processChildren?ul(u.segmentGroup,u.index,s.commands):dg(u.segmentGroup,u.index,s.commands);return Ao(e.root,u.segmentGroup,f,i,r)}(n.snapshot?._lastPathIndex)}function ll(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function cl(n){return"object"==typeof n&&null!=n&&n.outlets}function Ao(n,e,t,i,r){let o,s={};i&&Tn(i,(c,u)=>{s[u]=Array.isArray(c)?c.map(f=>`${f}`):`${c}`}),o=n===e?t:z0(n,e,t);const a=cg(Qu(o));return new Ss(a,s,r)}function z0(n,e,t){const i={};return Tn(n.children,(r,s)=>{i[s]=r===e?t:z0(r,e,t)}),new We(n.segments,i)}class W0{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&ll(i[0]))throw new z(4003,!1);const r=i.find(cl);if(r&&r!==L0(i))throw new z(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class xo{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function dg(n,e,t){if(n||(n=new We([],{})),0===n.segments.length&&n.hasChildren())return ul(n,e,t);const i=function vN(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(cl(a))break;const c=`${a}`,u=i<t.length-1?t[i+1]:null;if(r>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!Z0(c,u,o))return s;i+=2}else{if(!Z0(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new We(n.segments.slice(0,i.pathIndex),{});return s.children[ze]=new We(n.segments.slice(i.pathIndex),n.children),ul(s,0,r)}return i.match&&0===r.length?new We(n.segments,{}):i.match&&!n.hasChildren()?hg(n,e,t):i.match?ul(n,0,r):hg(n,e,t)}function ul(n,e,t){if(0===t.length)return new We(n.segments,{});{const i=function mN(n){return cl(n[0])?n[0].outlets:{[ze]:n}}(t),r={};return Tn(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=dg(n.children[o],e,s))}),Tn(n.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new We(n.segments,r)}}function hg(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(cl(s)){const c=yN(s.outlets);return new We(i,c)}if(0===r&&ll(t[0])){i.push(new ol(n.segments[e].path,Y0(t[0]))),r++;continue}const o=cl(s)?s.outlets[ze]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&ll(a)?(i.push(new ol(o,Y0(a))),r+=2):(i.push(new ol(o,{})),r++)}return new We(i,{})}function yN(n){const e={};return Tn(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=hg(new We([],{}),0,t))}),e}function Y0(n){const e={};return Tn(n,(t,i)=>e[i]=`${t}`),e}function Z0(n,e,t){return n==t.path&&er(e,t.parameters)}class yr{constructor(e,t){this.id=e,this.url=t}}class fg extends yr{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class br extends yr{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Xu extends yr{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class J0 extends yr{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class bN extends yr{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _N extends yr{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wN extends yr{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class CN extends yr{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class DN extends yr{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class EN{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class MN{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class TN{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class SN{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class IN{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class AN{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Q0{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class X0{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=pg(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=pg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=gg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return gg(e,this._root).map(t=>t.value)}}function pg(n,e){if(n===e.value)return e;for(const t of e.children){const i=pg(n,t);if(i)return i}return null}function gg(n,e){if(n===e.value)return[e];for(const t of e.children){const i=gg(n,t);if(i.length)return i.unshift(e),i}return[]}class _r{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ko(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class eC extends X0{constructor(e,t){super(e),this.snapshot=t,mg(this,e)}toString(){return this.snapshot.toString()}}function tC(n,e){const t=function kN(n,e){const o=new ed([],{},{},"",{},ze,e,null,n.root,-1,{});return new iC("",new _r(o,[]))}(n,e),i=new Rn([new ol("",{})]),r=new Rn({}),s=new Rn({}),o=new Rn({}),a=new Rn(""),c=new Yr(i,r,o,a,s,ze,e,t.root);return c.snapshot=t.root,new eC(new _r(c,[]),t)}class Yr{constructor(e,t,i,r,s,o,a,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe($(u=>u[sl]))??me(void 0),this._futureSnapshot=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe($(e=>Io(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe($(e=>Io(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function nC(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function PN(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class ed{constructor(e,t,i,r,s,o,a,c,u,f,p){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._urlSegment=u,this._lastPathIndex=f,this._resolve=p}get title(){return this.data?.[sl]}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Io(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Io(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class iC extends X0{constructor(e,t){super(t),this.url=e,mg(this,t)}toString(){return rC(this._root)}}function mg(n,e){e.value._routerState=n,e.children.forEach(t=>mg(n,t))}function rC(n){const e=n.children.length>0?` { ${n.children.map(rC).join(", ")} } `:"";return`${n.value}${e}`}function vg(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,er(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),er(e.params,t.params)||n.params.next(t.params),function KL(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!er(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),er(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function yg(n,e){const t=er(n.params,e.params)&&function QL(n,e){return Is(n,e)&&n.every((t,i)=>er(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||yg(n.parent,e.parent))}function dl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function RN(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return dl(n,i,r);return dl(n,i)})}(n,e,t);return new _r(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>dl(n,a)),o}}const i=function LN(n){return new Yr(new Rn(n.url),new Rn(n.params),new Rn(n.queryParams),new Rn(n.fragment),new Rn(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>dl(n,s));return new _r(i,r)}}const bg="ngNavigationCancelingError";function sC(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=As(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=oC(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function oC(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[bg]=!0,i.cancellationCode=e,t&&(i.url=t),i}function aC(n){return lC(n)&&As(n.url)}function lC(n){return n&&n[bg]}class NN{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new hl,this.attachRef=null}}let hl=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new NN,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const td=!1;let nd=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ze,this.activateEvents=new et,this.deactivateEvents=new et,this.attachEvents=new et,this.detachEvents=new et,this.parentContexts=Ye(hl),this.location=Ye(Vi),this.changeDetector=Ye(Hi),this.environmentInjector=Ye(ur)}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new z(4012,td);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new z(4012,td);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new z(4012,td);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new z(4013,td);this._activatedRoute=t;const r=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new FN(t,a,r.injector);if(i&&function VN(n){return!!n.resolveComponentFactory}(i)){const u=i.resolveComponentFactory(o);this.activated=r.createComponent(u,r.length,c)}else this.activated=r.createComponent(o,{index:r.length,injector:c,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ve({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Jn]}),n})();class FN{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Yr?this.route:e===hl?this.childContexts:this.parent.get(e,t)}}let _g=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=kt({type:n,selectors:[["ng-component"]],standalone:!0,features:[f1],decls:1,vars:0,template:function(t,i){1&t&&m(0,"router-outlet")},dependencies:[nd],encapsulation:2}),n})();function cC(n,e){return n.providers&&!n._injector&&(n._injector=pu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Cg(n){const e=n.children&&n.children.map(Cg),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ze&&(t.component=_g),t}function Di(n){return n.outlet||ze}function uC(n,e){const t=n.filter(i=>Di(i)===e);return t.push(...n.filter(i=>Di(i)!==e)),t}function fl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class GN{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),vg(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=ko(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Tn(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=ko(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=ko(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=ko(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new AN(s.value.snapshot))}),e.children.length&&this.forwardEvent(new SN(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(vg(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),vg(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=fl(r.snapshot),c=a?.get(Ta)??null;o.attachRef=null,o.route=r,o.resolver=c,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class dC{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class id{constructor(e,t){this.component=e,this.route=t}}function $N(n,e,t){const i=n._root;return pl(i,e?e._root:null,t,[i.value])}function Po(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function gM(n){return null!==vc(n)}(n)?e.get(n):n:i}function pl(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=ko(e);return n.children.forEach(o=>{(function WN(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function qN(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Is(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Is(n.url,e.url)||!er(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yg(n,e)||!er(n.queryParams,e.queryParams);default:return!yg(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new dC(i)):(s.data=o.data,s._resolvedData=o._resolvedData),pl(n,e,s.component?a?a.children:null:t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new id(a.outlet.component,o))}else o&&gl(e,a,r),r.canActivateChecks.push(new dC(i)),pl(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Tn(s,(o,a)=>gl(o,t.getContext(a),r)),r}function gl(n,e,t){const i=ko(n),r=n.value;Tn(i,(s,o)=>{gl(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new id(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function ml(n){return"function"==typeof n}function Dg(n){return n instanceof ju||"EmptyError"===n?.name}const rd=Symbol("INITIAL_VALUE");function Oo(){return fi(n=>rg(n.map(e=>e.pipe(Ts(1),A0(rd)))).pipe($(e=>{for(const t of e)if(!0!==t){if(t===rd)return rd;if(!1===t||t instanceof Ss)return t}return!0}),$n(e=>e!==rd),Ts(1)))}function hC(n){return function G(...n){return Y(n)}(Tt(e=>{if(As(e))throw sC(0,e)}),$(e=>!0===e))}const Eg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function fC(n,e,t,i,r){const s=Mg(n,e,t);return s.matched?function uF(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?me(r.map(o=>{const a=Po(o,n);return Kr(function XN(n){return n&&ml(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Oo(),hC()):me(!0)}(i=cC(e,i),e,t).pipe($(o=>!0===o?s:{...Eg})):me(s)}function Mg(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Eg}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||qL)(t,n,e);if(!r)return{...Eg};const s={};Tn(r.posParams,(a,c)=>{s[c]=a.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function sd(n,e,t,i){if(t.length>0&&function fF(n,e,t){return t.some(i=>od(n,e,i)&&Di(i)!==ze)}(n,t,i)){const s=new We(e,function hF(n,e,t,i){const r={};r[ze]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Di(s)!==ze){const o=new We([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,r[Di(s)]=o}return r}(n,e,i,new We(t,n.children)));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function pF(n,e,t){return t.some(i=>od(n,e,i))}(n,t,i)){const s=new We(n.segments,function dF(n,e,t,i,r){const s={};for(const o of i)if(od(n,t,o)&&!r[Di(o)]){const a=new We([],{});a._sourceSegment=n,a._segmentIndexShift=e.length,s[Di(o)]=a}return{...r,...s}}(n,e,t,i,n.children));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const r=new We(n.segments,n.children);return r._sourceSegment=n,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:t}}function od(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function pC(n,e,t,i){return!!(Di(n)===i||i!==ze&&od(e,t,n))&&("**"===n.path||Mg(e,n,t).matched)}function gC(n,e,t){return 0===e.length&&!n.children[t]}const ad=!1;class ld{constructor(e){this.segmentGroup=e||null}}class mC{constructor(e){this.urlTree=e}}function vl(n){return Gi(new ld(n))}function vC(n){return Gi(new mC(n))}class yF{constructor(e,t,i,r,s){this.injector=e,this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const e=sd(this.urlTree.root,[],[],this.config).segmentGroup,t=new We(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,ze).pipe($(s=>this.createUrlTree(Qu(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(qr(s=>{if(s instanceof mC)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof ld?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,ze).pipe($(r=>this.createUrlTree(Qu(r),e.queryParams,e.fragment))).pipe(qr(r=>{throw r instanceof ld?this.noMatchError(r):r}))}noMatchError(e){return new z(4002,ad)}createUrlTree(e,t,i){const r=cg(e);return new Ss(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe($(s=>new We([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return he(r).pipe(zr(s=>{const o=i.children[s],a=uC(t,s);return this.expandSegmentGroup(e,a,o,s).pipe($(c=>({segment:c,outlet:s})))}),k0((s,o)=>(s[o.outlet]=o.segment,s),{}),P0())}expandSegment(e,t,i,r,s,o){return he(i).pipe(zr(a=>this.expandSegmentAgainstRoute(e,t,i,a,r,s,o).pipe(qr(u=>{if(u instanceof ld)return me(null);throw u}))),$r(a=>!!a),qr((a,c)=>{if(Dg(a))return gC(t,r,s)?me(new We([],{})):vl(t);throw a}))}expandSegmentAgainstRoute(e,t,i,r,s,o,a){return pC(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o):vl(t):vl(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?vC(s):this.lineralizeSegments(i,s).pipe(xt(o=>{const a=new We(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:c,remainingSegments:u,positionalParamSegments:f}=Mg(t,r,s);if(!a)return vl(t);const p=this.applyRedirectCommands(c,r.redirectTo,f);return r.redirectTo.startsWith("/")?vC(p):this.lineralizeSegments(r,p).pipe(xt(g=>this.expandSegment(e,t,i,g.concat(u),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){return"**"===i.path?(e=cC(i,e),i.loadChildren?(i._loadedRoutes?me({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(e,i)).pipe($(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new We(r,{})))):me(new We(r,{}))):fC(t,i,r,e).pipe(fi(({matched:o,consumedSegments:a,remainingSegments:c})=>o?this.getChildConfig(e=i._injector??e,i,r).pipe(xt(f=>{const p=f.injector??e,g=f.routes,{segmentGroup:v,slicedSegments:y}=sd(t,a,c,g),_=new We(v.segments,v.children);if(0===y.length&&_.hasChildren())return this.expandChildren(p,g,_).pipe($(D=>new We(a,D)));if(0===g.length&&0===y.length)return me(new We(a,{}));const b=Di(i)===s;return this.expandSegment(p,_,g,y,b?ze:s,!0).pipe($(E=>new We(a.concat(E.segments),E.children)))})):vl(t)))}getChildConfig(e,t,i){return t.children?me({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?me({routes:t._loadedRoutes,injector:t._loadedInjector}):function cF(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?me(!0):me(r.map(o=>{const a=Po(o,n);return Kr(function YN(n){return n&&ml(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Oo(),hC())}(e,t,i).pipe(xt(r=>r?this.configLoader.loadChildren(e,t).pipe(Tt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function mF(n){return Gi(oC(ad,3))}())):me({routes:[],injector:e})}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return me(i);if(r.numberOfChildren>1||!r.children[ze])return Gi(new z(4e3,ad));r=r.children[ze]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new Ss(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Tn(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=t[a]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return Tn(t.children,(a,c)=>{o[c]=this.createSegmentGroup(e,a,i,r)}),new We(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new z(4001,ad);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}class _F{}class DF{constructor(e,t,i,r,s,o,a){this.injector=e,this.rootComponentType=t,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a}recognize(){const e=sd(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,ze).pipe($(t=>{if(null===t)return null;const i=new ed([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ze,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new _r(i,t),s=new iC(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,i=nC(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r)}processChildren(e,t,i){return he(Object.keys(i.children)).pipe(zr(r=>{const s=i.children[r],o=uC(t,r);return this.processSegmentGroup(e,o,s,r)}),k0((r,s)=>r&&s?(r.push(...s),r):null),function VL(n,e=!1){return t=>t.lift(new UL(n,e))}(r=>null!==r),zu(null),P0(),$(r=>{if(null===r)return null;const s=bC(r);return function EF(n){n.sort((e,t)=>e.value.outlet===ze?-1:t.value.outlet===ze?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,i,r,s){return he(t).pipe(zr(o=>this.processSegmentAgainstRoute(o._injector??e,o,i,r,s)),$r(o=>!!o),qr(o=>{if(Dg(o))return gC(i,r,s)?me([]):me(null);throw o}))}processSegmentAgainstRoute(e,t,i,r,s){if(t.redirectTo||!pC(t,i,r,s))return me(null);let o;if("**"===t.path){const a=r.length>0?L0(r).parameters:{},c=wC(i)+r.length;o=me({snapshot:new ed(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,CC(t),Di(t),t.component??t._loadedComponent??null,t,_C(i),c,DC(t)),consumedSegments:[],remainingSegments:[]})}else o=fC(i,t,r,e).pipe($(({matched:a,consumedSegments:c,remainingSegments:u,parameters:f})=>{if(!a)return null;const p=wC(i)+c.length;return{snapshot:new ed(c,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,CC(t),Di(t),t.component??t._loadedComponent??null,t,_C(i),p,DC(t)),consumedSegments:c,remainingSegments:u}}));return o.pipe(fi(a=>{if(null===a)return me(null);const{snapshot:c,consumedSegments:u,remainingSegments:f}=a;e=t._injector??e;const p=t._loadedInjector??e,g=function MF(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:v,slicedSegments:y}=sd(i,u,f,g.filter(b=>void 0===b.redirectTo));if(0===y.length&&v.hasChildren())return this.processChildren(p,g,v).pipe($(b=>null===b?null:[new _r(c,b)]));if(0===g.length&&0===y.length)return me([new _r(c,[])]);const _=Di(t)===s;return this.processSegment(p,g,v,y,_?ze:s).pipe($(b=>null===b?null:[new _r(c,b)]))}))}}function TF(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function bC(n){const e=[],t=new Set;for(const i of n){if(!TF(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=bC(i.children);e.push(new _r(i.value,r))}return e.filter(i=>!t.has(i))}function _C(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function wC(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function CC(n){return n.data||{}}function DC(n){return n.resolve||{}}function EC(n){return"string"==typeof n.title||null===n.title}function Tg(n){return fi(e=>{const t=n(e);return t?he(t).pipe($(()=>e)):me(e)})}class RF{constructor(e){this.router=e,this.currentNavigation=null}setupNavigations(e){const t=this.router.events;return e.pipe($n(i=>0!==i.id),$(i=>({...i,extractedUrl:this.router.urlHandlingStrategy.extract(i.rawUrl)})),fi(i=>{let r=!1,s=!1;return me(i).pipe(Tt(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.router.lastSuccessfulNavigation?{...this.router.lastSuccessfulNavigation,previousNavigation:null}:null}}),fi(o=>{const a=this.router.browserUrlTree.toString(),c=!this.router.navigated||o.extractedUrl.toString()!==a||a!==this.router.currentUrlTree.toString();if(("reload"===this.router.onSameUrlNavigation||c)&&this.router.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return TC(o.source)&&(this.router.browserUrlTree=o.extractedUrl),me(o).pipe(fi(f=>{const p=this.router.transitions.getValue();return t.next(new fg(f.id,this.router.serializeUrl(f.extractedUrl),f.source,f.restoredState)),p!==this.router.transitions.getValue()?Gr:Promise.resolve(f)}),function bF(n,e,t,i){return fi(r=>function vF(n,e,t,i,r){return new yF(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe($(s=>({...r,urlAfterRedirects:s}))))}(this.router.ngModule.injector,this.router.configLoader,this.router.urlSerializer,this.router.config),Tt(f=>{this.currentNavigation={...this.currentNavigation,finalUrl:f.urlAfterRedirects},i.urlAfterRedirects=f.urlAfterRedirects}),function IF(n,e,t,i,r){return xt(s=>function CF(n,e,t,i,r,s,o="emptyOnly"){return new DF(n,e,t,i,r,o,s).recognize().pipe(fi(a=>null===a?function wF(n){return new q(e=>e.error(n))}(new _F):me(a)))}(n,e,t,s.urlAfterRedirects,i.serialize(s.urlAfterRedirects),i,r).pipe($(o=>({...s,targetSnapshot:o}))))}(this.router.ngModule.injector,this.router.rootComponentType,this.router.config,this.router.urlSerializer,this.router.paramsInheritanceStrategy),Tt(f=>{if(i.targetSnapshot=f.targetSnapshot,"eager"===this.router.urlUpdateStrategy){if(!f.extras.skipLocationChange){const g=this.router.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl);this.router.setBrowserUrl(g,f)}this.router.browserUrlTree=f.urlAfterRedirects}const p=new bN(f.id,this.router.serializeUrl(f.extractedUrl),this.router.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);t.next(p)}));if(c&&this.router.rawUrlTree&&this.router.urlHandlingStrategy.shouldProcessUrl(this.router.rawUrlTree)){const{id:p,extractedUrl:g,source:v,restoredState:y,extras:_}=o,b=new fg(p,this.router.serializeUrl(g),v,y);t.next(b);const w=tC(g,this.router.rootComponentType).snapshot;return me(i={...o,targetSnapshot:w,urlAfterRedirects:g,extras:{..._,skipLocationChange:!1,replaceUrl:!1}})}return this.router.rawUrlTree=o.rawUrl,o.resolve(null),Gr}),Tt(o=>{const a=new _N(o.id,this.router.serializeUrl(o.extractedUrl),this.router.serializeUrl(o.urlAfterRedirects),o.targetSnapshot);this.router.triggerEvent(a)}),$(o=>i={...o,guards:$N(o.targetSnapshot,o.currentSnapshot,this.router.rootContexts)}),function tF(n,e){return xt(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?me({...t,guardsResult:!0}):function nF(n,e,t,i){return he(n).pipe(xt(r=>function lF(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?me(s.map(a=>{const c=fl(e)??r,u=Po(a,c);return Kr(function QN(n){return n&&ml(n.canDeactivate)}(u)?u.canDeactivate(n,e,t,i):c.runInContext(()=>u(n,e,t,i))).pipe($r())})).pipe(Oo()):me(!0)}(r.component,r.route,t,e,i)),$r(r=>!0!==r,!0))}(o,i,r,n).pipe(xt(a=>a&&function KN(n){return"boolean"==typeof n}(a)?function iF(n,e,t,i){return he(e).pipe(zr(r=>Gu(function sF(n,e){return null!==n&&e&&e(new TN(n)),me(!0)}(r.route.parent,i),function rF(n,e){return null!==n&&e&&e(new IN(n)),me(!0)}(r.route,i),function aF(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function zN(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>S0(()=>me(o.guards.map(c=>{const u=fl(o.node)??t,f=Po(c,u);return Kr(function JN(n){return n&&ml(n.canActivateChild)}(f)?f.canActivateChild(i,n):u.runInContext(()=>f(i,n))).pipe($r())})).pipe(Oo())));return me(s).pipe(Oo())}(n,r.path,t),function oF(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return me(!0);const r=i.map(s=>S0(()=>{const o=fl(e)??t,a=Po(s,o);return Kr(function ZN(n){return n&&ml(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe($r())}));return me(r).pipe(Oo())}(n,r.route,t))),$r(r=>!0!==r,!0))}(i,s,n,e):me(a)),$(a=>({...t,guardsResult:a})))})}(this.router.ngModule.injector,o=>this.router.triggerEvent(o)),Tt(o=>{if(i.guardsResult=o.guardsResult,As(o.guardsResult))throw sC(0,o.guardsResult);const a=new wN(o.id,this.router.serializeUrl(o.extractedUrl),this.router.serializeUrl(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.router.triggerEvent(a)}),$n(o=>!!o.guardsResult||(this.router.restoreHistory(o),this.router.cancelNavigationTransition(o,"",3),!1)),Tg(o=>{if(o.guards.canActivateChecks.length)return me(o).pipe(Tt(a=>{const c=new CN(a.id,this.router.serializeUrl(a.extractedUrl),this.router.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.router.triggerEvent(c)}),fi(a=>{let c=!1;return me(a).pipe(function AF(n,e){return xt(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return me(t);let s=0;return he(r).pipe(zr(o=>function xF(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!EC(r)&&(s[sl]=r.title),function kF(n,e,t,i){const r=function PF(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return me({});const s={};return he(r).pipe(xt(o=>function OF(n,e,t,i){const r=fl(e)??i,s=Po(n,r);return Kr(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[o],e,t,i).pipe($r(),Tt(a=>{s[o]=a}))),sg(1),function BL(n){return e=>e.lift(new jL(n))}(s),qr(o=>Dg(o)?Gr:Gi(o)))}(s,n,e,i).pipe($(o=>(n._resolvedData=o,n.data=nC(n,t).resolve,r&&EC(r)&&(n.data[sl]=r.title),null)))}(o.route,i,n,e)),Tt(()=>s++),sg(1),xt(o=>s===r.length?me(t):Gr))})}(this.router.paramsInheritanceStrategy,this.router.ngModule.injector),Tt({next:()=>c=!0,complete:()=>{c||(this.router.restoreHistory(a),this.router.cancelNavigationTransition(a,"",2))}}))}),Tt(a=>{const c=new DN(a.id,this.router.serializeUrl(a.extractedUrl),this.router.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.router.triggerEvent(c)}))}),Tg(o=>{const a=c=>{const u=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&u.push(this.router.configLoader.loadComponent(c.routeConfig).pipe(Tt(f=>{c.component=f}),$(()=>{})));for(const f of c.children)u.push(...a(f));return u};return rg(a(o.targetSnapshot.root)).pipe(zu(),Ts(1))}),Tg(()=>this.router.afterPreactivation()),$(o=>{const a=function ON(n,e,t){const i=dl(n,e._root,t?t._root:void 0);return new eC(i,e)}(this.router.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return i={...o,targetRouterState:a}}),Tt(o=>{this.router.currentUrlTree=o.urlAfterRedirects,this.router.rawUrlTree=this.router.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),this.router.routerState=o.targetRouterState,"deferred"===this.router.urlUpdateStrategy&&(o.extras.skipLocationChange||this.router.setBrowserUrl(this.router.rawUrlTree,o),this.router.browserUrlTree=o.urlAfterRedirects)}),((n,e,t)=>$(i=>(new GN(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.router.rootContexts,this.router.routeReuseStrategy,o=>this.router.triggerEvent(o)),Tt({next(){r=!0},complete(){r=!0}}),og(()=>{r||s||this.router.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),qr(o=>{if(s=!0,lC(o)){aC(o)||(this.router.navigated=!0,this.router.restoreHistory(i,!0));const a=new Xu(i.id,this.router.serializeUrl(i.extractedUrl),o.message,o.cancellationCode);if(t.next(a),aC(o)){const c=this.router.urlHandlingStrategy.merge(o.url,this.router.rawUrlTree),u={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.router.urlUpdateStrategy||TC(i.source)};this.router.scheduleNavigation(c,"imperative",null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.router.restoreHistory(i,!0);const a=new J0(i.id,this.router.serializeUrl(i.extractedUrl),o,i.targetSnapshot??void 0);t.next(a);try{i.resolve(this.router.errorHandler(o))}catch(c){i.reject(c)}}return Gr}))}))}}function TC(n){return"imperative"!==n}let SC=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===ze);return i}getResolvedTitleForRoute(t){return t.data[sl]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=X({token:n,factory:function(){return Ye(LF)},providedIn:"root"}),n})(),LF=(()=>{class n extends SC{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(t){return new(t||n)(U(w0))},n.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),NF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=X({token:n,factory:function(){return Ye(VF)},providedIn:"root"}),n})();class FF{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let VF=(()=>{class n extends FF{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=ft(n)))(i||n)}}(),n.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const cd=new Q("",{providedIn:"root",factory:()=>({})}),Ro=new Q("ROUTES");let Sg=(()=>{class n{constructor(t,i){this.injector=t,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return me(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=Kr(t.loadComponent()).pipe($(AC),Tt(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),og(()=>{this.componentLoaders.delete(t)})),r=new Ar(i,()=>new K).pipe(Yn());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return me({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe($(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let c,u,f=!1;Array.isArray(a)?u=a:(c=a.create(t).injector,u=R0(c.get(Ro,[],Me.Self|Me.Optional)));return{routes:u.map(Cg),injector:c}}),og(()=>{this.childrenLoaders.delete(i)})),o=new Ar(s,()=>new K).pipe(Yn());return this.childrenLoaders.set(i,o),o}loadModuleFactoryOrRoutes(t){return Kr(t()).pipe($(AC),xt(r=>r instanceof d1||Array.isArray(r)?me(r):he(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(U(ui),U(bp))},n.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function AC(n){return function BF(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let jF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=X({token:n,factory:function(){return Ye(GF)},providedIn:"root"}),n})(),GF=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $F(n){throw n}function zF(n,e,t){return e.parse("/")}const WF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},qF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function kC(){const n=Ye(B0),e=Ye(hl),t=Ye(Ja),i=Ye(ui),r=Ye(bp),s=Ye(Ro,{optional:!0})??[],o=Ye(cd,{optional:!0})??{},a=new bn(null,n,e,t,i,r,R0(s));return function KF(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,a),a}let bn=(()=>{class n{constructor(t,i,r,s,o,a,c){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=c,this.lastSuccessfulNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new K,this.errorHandler=$F,this.malformedUriErrorHandler=zF,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>me(void 0),this.urlHandlingStrategy=Ye(jF),this.routeReuseStrategy=Ye(NF),this.titleStrategy=Ye(SC),this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.canceledNavigationResolution="replace",this.navigationTransitions=new RF(this),this.configLoader=o.get(Sg),this.configLoader.onLoadEndListener=g=>this.triggerEvent(new MN(g)),this.configLoader.onLoadStartListener=g=>this.triggerEvent(new EN(g)),this.ngModule=o.get(Es),this.console=o.get(eP);const p=o.get(yt);this.isNgZoneEnabled=p instanceof yt&&yt.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=new Ss,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=tC(this.currentUrlTree,this.rootComponentType),this.transitions=new Rn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.navigationTransitions.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(t.state){const a={...t.state};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(r.state=a)}const o=this.parseUrl(t.url);this.scheduleNavigation(o,i,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Cg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=i,u=r||this.routerState.root,f=c?this.currentUrlTree.fragment:o;let p=null;switch(a){case"merge":p={...this.currentUrlTree.queryParams,...s};break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}return null!==p&&(p=this.removeEmptyProps(p)),fN(u,this.currentUrlTree,t,p,f??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=As(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function YF(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new z(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...WF}:!1===i?{...qF}:i,As(t))return F0(this.currentUrlTree,t,r);const s=this.parseUrl(t);return F0(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new br(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.getCurrentNavigation(),this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,u;o?(a=o.resolve,c=o.reject,u=o.promise):u=new Promise((g,v)=>{a=g,c=v});const f=++this.navigationId;let p;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),p=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):p=0,this.setTransition({id:f,targetPageId:p,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(g=>Promise.reject(g))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===r?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===r&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i,r){const s=new Xu(t.id,this.serializeUrl(t.extractedUrl),i,r);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){_f()},n.\u0275prov=X({token:n,factory:function(){return kC()},providedIn:"root"}),n})(),ud=(()=>{class n{constructor(t,i,r,s,o,a){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.locationStrategy=a,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new K;const c=o.nativeElement.tagName;this.isAnchorElement="A"===c||"AREA"===c,this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof br&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=So(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=So(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=So(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,i,r,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||i||r||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function Iy(n,e,t){return function XS(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?Sy:Lr}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,i){const r=this.renderer,s=this.el.nativeElement;null!==i?r.setAttribute(s,t,i):r.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(x(bn),x(Yr),function fa(n){return function bT(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(mv(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(En(),n)}("tabindex"),x(Xn),x(jt),x(Br))},n.\u0275dir=ve({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,i){1&t&&ct("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&On("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Jn]}),n})(),PC=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.element=i,this.renderer=r,this.cdr=s,this.link=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new et,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof br&&this.update()})}ngAfterContentInit(){me(this.links.changes,me(null)).pipe(Nn()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=he(t).pipe(Nn()).subscribe(i=>{this.isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){const i=Array.isArray(t)?t:t.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(i=>{t?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const i=function ZF(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&t.isActive(r.urlTree,i)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}}return n.\u0275fac=function(t){return new(t||n)(x(bn),x(jt),x(Xn),x(Hi),x(ud,8))},n.\u0275dir=ve({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,i,r){if(1&t&&mu(r,ud,5),2&t){let s;Dt(s=Et())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Jn]}),n})();class OC{}let JF=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe($n(t=>t instanceof br),zr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=pu(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return he(r).pipe(Nn())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):me(null);const s=r.pipe(xt(o=>null===o?me(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return i.loadComponent&&!i._loadedComponent?he([s,this.loader.loadComponent(i)]).pipe(Nn()):s})}}return n.\u0275fac=function(t){return new(t||n)(U(bn),U(bp),U(ur),U(OC),U(Sg))},n.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ig=new Q("");let RC=(()=>{class n{constructor(t,i,r,s={}){this.router=t,this.viewportScroller=i,this.zone=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof fg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof br&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Q0&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.router.triggerEvent(new Q0(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){_f()},n.\u0275prov=X({token:n,factory:n.\u0275fac}),n})();function No(n,e){return{\u0275kind:n,\u0275providers:e}}function NC(){const n=Ye(ui);return e=>{const t=n.get(Cu);if(e!==t.components[0])return;const i=n.get(bn),r=n.get(FC);1===n.get(xg)&&i.initialNavigation(),n.get(VC,null,Me.Optional)?.setUpPreloading(),n.get(Ig,null,Me.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.unsubscribe())}}const FC=new Q("",{factory:()=>new K}),xg=new Q("",{providedIn:"root",factory:()=>1});const VC=new Q("");function n3(n){return No(0,[{provide:VC,useExisting:JF},{provide:OC,useExisting:n}])}const UC=new Q("ROUTER_FORROOT_GUARD"),r3=[Ja,{provide:B0,useClass:ag},{provide:bn,useFactory:kC},hl,{provide:Yr,useFactory:function LC(n){return n.routerState.root},deps:[bn]},Sg,[]];function s3(){return new lw("Router",bn)}let HC=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[r3,[],{provide:Ro,multi:!0,useValue:t},{provide:UC,useFactory:c3,deps:[[bn,new va,new ya]]},{provide:cd,useValue:i||{}},i?.useHash?{provide:Br,useClass:BP}:{provide:Br,useClass:Rp},{provide:Ig,useFactory:()=>{const n=Ye(bn),e=Ye(rR),t=Ye(yt),i=Ye(cd);return i.scrollOffset&&e.setOffset(i.scrollOffset),new RC(n,e,t,i)}},i?.preloadingStrategy?n3(i.preloadingStrategy).\u0275providers:[],{provide:lw,multi:!0,useFactory:s3},i?.initialNavigation?u3(i):[],[{provide:BC,useFactory:NC},{provide:tw,multi:!0,useExisting:BC}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Ro,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(U(UC,8))},n.\u0275mod=vn({type:n}),n.\u0275inj=an({imports:[_g]}),n})();function c3(n){return"guarded"}function u3(n){return["disabled"===n.initialNavigation?No(3,[{provide:bu,multi:!0,useFactory:()=>{const e=Ye(bn);return()=>{e.setUpLocationChangeListener()}}},{provide:xg,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?No(2,[{provide:xg,useValue:0},{provide:bu,multi:!0,deps:[ui],useFactory:e=>{const t=e.get(UP,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const s=e.get(bn),o=e.get(FC);(function i(r){e.get(bn).events.pipe($n(o=>o instanceof br||o instanceof Xu||o instanceof J0),$(o=>o instanceof br||o instanceof Xu&&(0===o.code||1===o.code)&&null),$n(o=>null!==o),Ts(1)).subscribe(()=>{r()})})(()=>{r(!0)}),s.afterPreactivation=()=>(r(!0),o.closed?me(void 0):o),s.initialNavigation()}))}}]).\u0275providers:[]]}const BC=new Q("");class dd{static#e=this.\u0275fac=function(t){return new(t||dd)};static#t=this.\u0275cmp=kt({type:dd,selectors:[["app-home"]],decls:63,vars:0,consts:[[1,"list","inline"],["href","/music"],["href","/blog"],["href","https://github.com/EgillAntonsson"],["href","/lifting"],["href","https://www.resolutiongames.com"],["href","https://www.linkedin.com/in/egillantonsson"],["src","../assets/images/home/Egill_Antonsson_and_family.jpg","alt","The family: Egill Antonsson, Soff\xeda R\xf3s Egilsd\xf3ttir, Jantra Phosri & Andri Reyr Ragnarsson","title","The family: Egill Antonsson, Soff\xeda R\xf3s Egilsd\xf3ttir, Jantra Phosri & Andri Reyr Ragnarsson",1,"image"],["href","https://rawfury.com"],["href","/music/pesi-year-1974"]],template:function(t,i){1&t&&(d(0,"h1"),l(1,"Egill Antonsson"),h(),d(2,"h2"),l(3,"Software developer, music artist, weightlifter, earthling, stardust"),h(),d(4,"p"),l(5,"\nWelcome to my website, where I share my passions:"),m(6,"br"),h(),d(7,"ul",0)(8,"li")(9,"a",1),l(10,"Music"),h()(),d(11,"li")(12,"a",2),l(13,"Blogging"),h(),l(14," about software development,"),m(15,"br"),l(16," my code projects are on "),d(17,"a",3),l(18,"GitHub"),h()(),d(19,"li")(20,"a",4),l(21,"Weight Lifting"),h()()(),d(22,"p"),l(23,"\nMy profession is Software Development, and I work as a Sound Programmer at "),d(24,"a",5),l(25,"Resolution Games"),h(),m(26,"br"),l(27,"\nMy "),d(28,"a",6),l(29,"LinkedIn profile"),h(),l(30," sums up my work experience.\n"),h(),d(31,"h2"),l(32,"Background & Family"),h(),d(33,"figure"),m(34,"img",7),d(35,"figcaption"),l(36,"\nThe Family, from left to right:"),m(37,"br"),l(38,"\nEgill Antonsson, Soff\xeda R\xf3s Egilsd\xf3ttir, Jantra Phosri & Andri Reyr Ragnarsson\n"),h()(),d(39,"p"),l(40,"\nI was born in 1982 and raised in Reykjavik, Iceland."),m(41,"br"),l(42,"\nSince 2014 I live in Stockholm (Sweden) with my wonderful wife Jantra Phosri and daughter Soff\xeda R\xf3s Egilsd\xf3ttir."),m(43,"br"),l(44,"\nI'm a proud bonus/step dad of Andri Reyr Ragnarsson who lives in Norway."),m(45,"br"),h(),d(46,"p"),l(47,"\nI'm son of Anton Angant\xfdsson (that's what my last name literally means) and Halla Soff\xeda J\xf3nasd\xf3ttir."),m(48,"br"),l(49,"\nMy brother J\xf3nas B. Antonsson and he also lives in Stockholm and he's (un)publishing games at "),d(50,"a",8),l(51,"Raw Fury"),h(),l(52,"."),m(53,"br")(54,"br"),l(55,"\nOur two older brothers and namesakes passed away before I was born."),m(56,"br"),l(57,"\nThey played music and painted pictures and according to family and friends were brilliant boys."),m(58,"br"),l(59,"\nI digitalized their music that they recorded on a cassette in the early 1970s and you can listen to "),d(60,"a",9),l(61,"here"),h(),l(62,".\n"),h())},encapsulation:2})}class Fo{constructor(){const e="TDD-ing Avatar Health in C# and C++";this.series=[{title:e,posts:[new wr("Part 1 - TDD: What, Why, When ?","tdd-health/part1",e,new Date(2021,11,30),new Date(2022,4,14)),new wr("Part 2 - The assignment: The Avatar Health","tdd-health/part2",e,new Date(2021,11,30),new Date(2022,4,14)),new wr("Part 3 - Implementation begins - C#",xs.tddHealthPart3,e,new Date(2021,11,30),new Date(2023,5,8)),new wr("Part 3 - Implementation begins - C++",xs.tddHealthPart3Cpp,e,new Date(2023,5,8)),new wr("Part 4 - Taking Damage","tdd-health/part4",e,new Date(2022,0,4),new Date(2022,4,14)),new wr("Part 5 - The Dying part","tdd-health/part5",e,new Date(2022,1,1),new Date(2022,4,14)),new wr("Part 6 - The Replenishing part","tdd-health/part6",e,new Date(2022,4,9),new Date(2022,4,14)),new wr("Part 7 - The Increasing and Max part","tdd-health/part7",e,new Date(2022,4,14),new Date(2022,7,16)),new wr("Part 8 - Adding the Config","tdd-health/part8",e,new Date(2022,7,16))]}],this.selectedPost=this.series[0].posts[0],this.posts=[];for(let t=0;t<this.series.length;t++)for(let i=0;i<this.series[t].posts.length;i++){const r=this.series[t].posts[i];r.index=i,this.posts.push(r)}}tryGetPostWithRoutPath(e){let t=null;return this.posts.filter(i=>{i.routePath===e&&(t=i)}),t}static#e=this.\u0275fac=function(t){return new(t||Fo)};static#t=this.\u0275prov=X({token:Fo,factory:Fo.\u0275fac,providedIn:"root"})}var xs=(()=>(function(n){n.tddHealthPart3="tdd-health/part3",n.tddHealthPart3Cpp="tdd-health/part3-cpp"}(xs||(xs={})),xs))();class wr{constructor(e,t,i,r,s){this.title=e,this.routePath=t,this.seriesTitle=i,this.publishedDate=r,this.updatedDate=s}}function jC(n,e,t,i,r,s,o){try{var a=n[s](o),c=a.value}catch(u){return void t(u)}a.done?e(c):Promise.resolve(c).then(i,r)}function nn(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(c){jC(s,i,r,o,a,"next",c)}function a(c){jC(s,i,r,o,a,"throw",c)}o(void 0)})}}class Cr{static validateNumberForRange(e,t,i){if(t>=i)throw new Vo(Vo.msgLowerLimitMustBeLowerThanUpperLimit);if(e>i)throw new Vo(Vo.msgNumberMustNotBeHigherThenUpperLimit);if(e<t)throw new Vo(Vo.msgNumberMustNotBeLowerThenLowerLimit);return e}}class Vo{constructor(e){this.name="SoundUtilError",this.message=e}static#e=this.msgLowerLimitMustBeLowerThanUpperLimit="Lower Limit must be lower than Upper  Limit";static#t=this.msgNumberMustNotBeHigherThenUpperLimit="number must not be higher than Upper Limit";static#n=this.msgNumberMustNotBeLowerThenLowerLimit="number must not be lower than Lower Limit"}class h3{constructor(e,t,i,r,s,o,a){this._instanceMuted=!1,this.log=a,this._gainNode=e,this.maxGain=t,this.soundTypeGain=i,this.masterGain=r,this.dynamicRange=s,this.soundType=o,this.value=this.defaultValue,[i,r].forEach(c=>{c.on("GainChange",()=>{this.cancelScheduledValues(0),this.value=this.defaultValue}),c.on("MuteChange",()=>{this.cancelScheduledValues(0),this.value=this.defaultValue})}),this.dynamicRange.on("Change",()=>{this.cancelScheduledValues(0),this.value=this.defaultValue})}get automationRate(){return this._gainNode.gain.automationRate}get defaultValue(){return this._gainNode.gain.defaultValue}get maxValue(){return this._gainNode.gain.maxValue}get minValue(){return this._gainNode.gain.minValue}get value(){return this._gainNode.gain.value}get instanceMuted(){return this._instanceMuted}get muted(){return this.instanceMuted||this.soundTypeGain.muted||this.masterGain.muted}set value(e){this._gainNode.gain.value=this.muted?0:this.calculateGain(Cr.validateNumberForRange(e,0,1))}get gainNode(){return this._gainNode}calculateGain(e){const t=e*this.maxGain*this.soundTypeGain.value*this.masterGain.value;if(0===t)return 0;if("SFX"===this.soundType){const r=this.dynamicRange.getRangeCenter()+(t-.5)*this.dynamicRange.getRange();return this.log("Info",`calculateGain calculatedGain: ${r}`),r}return t}muteInstance(){return this._instanceMuted=!0,this.cancelScheduledValues(0),this.value=this.defaultValue,this}unmuteInstance(e=1){return this._instanceMuted=!1,this.cancelScheduledValues(0),this.value=e,this}setValueAtTime(e,t){return this.muted||this._gainNode.gain.setValueAtTime(this.calculateGain(e),t),this}exponentialRampToValueAtTime(e,t){return this.muted||this._gainNode.gain.exponentialRampToValueAtTime(this.calculateGain(e),t),this}linearRampToValueAtTime(e,t){return this.muted?this._gainNode?.gain:(this._gainNode.gain.linearRampToValueAtTime(this.calculateGain(e),t),this)}setTargetAtTime(e,t,i){return this.muted?this._gainNode.gain:(this._gainNode.gain.setTargetAtTime(this.calculateGain(e),t,i),this)}setValueCurveAtTime(e,t,i){if(this.muted)return this._gainNode.gain;for(let r=0;r<e.length;r++)e[r]=this.calculateGain(e[r]);return this._gainNode.gain.setValueCurveAtTime(e,t,i),this}cancelScheduledValues(e){return this._gainNode.gain.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._gainNode.gain.cancelAndHoldAtTime(e),this}dispose(){[this.soundTypeGain,this.masterGain].forEach(e=>{e.removeAllListeners("GainChange"),e.removeAllListeners("MuteChange")}),this.cancelScheduledValues(0),this._gainNode.disconnect()}}class f3{constructor(e,t,i,r,s){this.audioContext=e,this.sourceNode=t,this.analyzerNode=i,this.gainWrapper=r,this.id=s}}class p3{constructor(e,t,i,r,s,o,a){this.label="Sound",this.instances=new Map,this.id=-1,this._loaded=!1,this.audioCtx=o,this.soundData=e,this.log=a,this.configMaxNrPlayingAtOnce=t,this.maxNrPlayingAtOnceValidated=this.soundData.maxNrPlayingAtOnce?Cr.validateNumberForRange(this.soundData.maxNrPlayingAtOnce,0,t):this.soundData.loop?1:t,this.maxGainValidated=Cr.validateNumberForRange(this.soundData.maxGain,0,1),this.soundTypeGain=i,this.masterGain=r,this.dynamicRange=s,this.firstInstancePromise=this.createSoundInstance(!0)}get loaded(){return this._loaded}get reachedMaxNumberOfPlayingAtOnce(){return this.instances.size>=this.maxNrPlayingAtOnceValidated||this.instances.size>=this.configMaxNrPlayingAtOnce}get isPlaying(){return this.instances.size>0}play(e=!0){var t=this;return nn(function*(){let i;t.reachedMaxNumberOfPlayingAtOnce&&t.log("Warn",`Reached MaxNrPlayingAtOnce for sound with key '${t.soundData.key}'. Will play sound, but client code can check property 'reachedMaxNumberOfPlayingAtOnce'`),t.firstInstancePromise?(t.log("Info",`[${t.label}]`,"play(): awaiting first instance promise"),i=yield t.firstInstancePromise,t.firstInstancePromise=void 0):(t.log("Info",`[${t.label}]`,"play(): createSoundInstance"),i=yield t.createSoundInstance(e)),t.instances.set(t.id,i),t.log("Info",`Added soundInstance with id '${t.id}' to the instances list which now has the size '${t.instances.size}'`);const r=t.createEndedPromise(i);return t.playSoundInstance(i),{instance:i,endedPromise:r}})()}createEndedPromise(e){return new Promise(t=>{this.endedListener=()=>{this.log("Info","endedListener"),this.disposeInstance(e),t(e),this.instances.delete(e.id)||this.log("Warn",`deleting map with instance id '${e.id}' as key failed`),this.log("Info",`endedListener for key '${this.soundData.key}' with instance id '${e.id}, list with new size ${this.instances.size}`)},e.sourceNode.addEventListener("ended",this.endedListener)})}playSoundInstance(e){"suspended"===this.audioCtx.state&&this.audioCtx.resume(),e.sourceNode.start()}createSoundInstance(e){var t=this;return nn(function*(){const i=t.audioCtx.createBufferSource();i.buffer=t.sourceNodeBuffer?t.sourceNodeBuffer:t.sourceNodeBuffer=yield t.loadSound(),i.loop=t.soundData.loop;const r=t.audioCtx.createGain(),s=new h3(r,t.maxGainValidated,t.soundTypeGain,t.masterGain,t.dynamicRange,t.soundData.soundType,t.log),o=t.audioCtx.createAnalyser();return e&&i.connect(s.gainNode).connect(o).connect(t.audioCtx.destination),++t.id,t.log("Info",`Creating sound instance for key '${t.soundData.key}' with id '${t.id}'`),new f3(t.audioCtx,i,o,s,t.id)})()}loadSound(){var e=this;return nn(function*(){e.log("Info",`Loading sound with key '${e.soundData.key}'`);const i=yield(yield fetch(e.soundData.url)).arrayBuffer();return yield e.audioCtx.decodeAudioData(i)})()}stop(){!this.isPlaying||(this.instances.forEach(e=>{this.disposeInstance(e)}),this.instances.clear(),this.id=-1)}disposeInstance(e){return e.sourceNode.removeEventListener("ended",this.endedListener),e.sourceNode.stop(),e.gainWrapper.dispose(),e.sourceNode.disconnect(),e.analyzerNode.disconnect(),e}dispose(){this.instances.forEach(e=>{this.disposeInstance(e)}),this.instances.clear(),this.soundTypeGain.removeAllListeners(),this.masterGain.removeAllListeners(),this.id=-1}}var kg=$e(3105);class g3 extends kg.EventEmitter{constructor(e){super(),this._value=e}get value(){return this._value}set value(e){this._value=e}}class Pg extends g3{constructor(e,t){super(e),this._muted=t}get muted(){return this._muted}set muted(e){this._muted=e}}class m3 extends kg.EventEmitter{constructor(e,t){super(),this._lowValue=0,this._highValue=1,this.lowValue=e,this.highValue=t}get lowValue(){return this._lowValue}set lowValue(e){this._lowValue=e}get highValue(){return this._highValue}set highValue(e){this._highValue=e}getRangeCenter(){return this.lowValue+(this.highValue-this.lowValue)/2}getRange(){return this.highValue-this.lowValue}}class v3{constructor(){this.label="SoundManager",this.sounds=new Map,this.dynamicRange=new m3(0,1),this._musicGain=new Pg(1,!1),this._sfxGain=new Pg(1,!1),this._masterGain=new Pg(1,!1),this._maxNrPlayingAtOncePerSound=24}set musicGain(e){this._musicGain.value=Cr.validateNumberForRange(e,0,1),this._musicGain.emit("GainChange")}set musicMuted(e){this._musicGain.muted=e,this._musicGain.emit("MuteChange")}set sfxGain(e){this._sfxGain.value=Cr.validateNumberForRange(e,0,1),this._sfxGain.emit("GainChange")}set sfxMuted(e){this._sfxGain.muted=e,this._sfxGain.emit("MuteChange")}get masterGain(){return this._masterGain.value}set masterGain(e){this._masterGain.value=Cr.validateNumberForRange(e,0,1),this._masterGain.emit("GainChange")}set masterMuted(e){this._masterGain.muted=e,this._masterGain.emit("MuteChange")}get masterMuted(){return this._masterGain.muted}set maxNrPlayingAtOncePerSound(e){this._maxNrPlayingAtOncePerSound=Cr.validateNumberForRange(e,1,24),this.sounds.forEach(t=>{t.configMaxNrPlayingAtOnce=this._maxNrPlayingAtOncePerSound})}init(e,t){this.log=t,this.audioContext=new(e.AudioContext||e.webkitAudioContext)}setDynamicRange(e,t){e>t&&this.log("Error",`Invalid params for setDynamicRange, lowValue '${e}' must be lower than highValue '${t}', not setting new Dynamic Range`),this.dynamicRange.lowValue=Cr.validateNumberForRange(e,0,1),this.dynamicRange.highValue=Cr.validateNumberForRange(t,0,1),this.dynamicRange.emit("Change",this.dynamicRange)}addSound(e){const t="Music"===e.soundType?this._musicGain:this._sfxGain;this.updateEmitterMaxListeners(this.sounds.size+1);const i=new p3(e,this._maxNrPlayingAtOncePerSound,t,this._masterGain,this.dynamicRange,this.audioContext,this.log);return this.addToList(e.key,i),i}updateEmitterMaxListeners(e){const t=2*e*24;this._masterGain.setMaxListeners(t),this._musicGain.setMaxListeners(t),this._sfxGain.setMaxListeners(t),this.dynamicRange.setMaxListeners(t)}addToList(e,t){this.sounds.has(e)?this.log("Warn",`Sound with the key '${e}' is already in to SoundManager, not adding it again`):this.sounds.set(e,t)}playSound(e){const t=this.sounds.get(e);return t?t.play():(this.log("Warn",`[${this.label}]`,`Cannot play sound with key '${e}', not in SoundManager`),null)}getSound(e){const t=this.sounds.get(e);if(!t)throw new GC(GC.msgSoundNotInManager);return t}hasSound(e){return this.sounds.has(e)}stopSound(e){const t=this.sounds.get(e);t?t.stop():this.log("Info","Cannot stop Sound, not in SoundManager")}pause(){this.audioContext.suspend()}resume(){this.audioContext.resume()}stopMusic(){this.sounds.forEach(e=>{"Music"===e.soundData.soundType&&e.stop()})}stopAllSounds(){this.sounds.forEach(e=>{e.stop()})}purge(){this.sounds.forEach(e=>{e.dispose()}),this.sounds.clear(),this.updateEmitterMaxListeners(0),this.audioContext&&this.audioContext.close()}}class GC{constructor(e){this.name="SoundManagerError",this.message=e}static#e=this.msgSoundNotInManager="Sound Not In Manager"}class Ei{constructor(e,t,i,r,s,o,a,c){this.defaultArtworkFilename="Egill_Antonsson.png",this.source=e,this.name=i,this.artworkPath=r,""===r&&(this.artworkPath=Ei.dir+this.defaultArtworkFilename),this.about=s,this.rootUrl=t,this.soundcloudUrl=o,this.spotifyUrl=a,this.buyUrl=c}static#e=this.dir="../../assets/tracks/"}class zn extends Ei{constructor(e,t,i,r,s="",o="",a="",c="",u=""){super("Local",i,r,s,o,a,c,u),this.soundDatas=e,this.play=t}}class y3 extends Ei{constructor(e,t,i="",r="",s="",o="",a=""){super("RealtimeVisual",e,t,i,r,s,o,a)}}class fd extends Ei{constructor(e,t,i="",r,s="",o="",a="",c="",u=""){super("Youtube",i,r,s,o,a,c,u),this.youtubeId=e,this.displayOnYoutube=t,this.isGraphicsActive=t}}class Be extends Ei{constructor(e,t,i,r="",s="",o="",a=""){super("Soundcloud",t,i,r,s,e,o,a)}}class bl extends zn{constructor(e,t,i,r,s){super(t,i,r,s),this.layeredMusicController=e}}class Uo{constructor(){this._instance=new v3}get instance(){return this._instance}playFromStart(e,t){if(!this.instance.hasSound(e.soundDatas[0].key))for(let i=0;i<e.soundDatas.length;i++)this.instance.addSound(e.soundDatas[i]);e.play()(),e instanceof bl&&(e.layeredMusicController.gainsDisabled=t)}play(){this.instance.resume()}stop(e){this.instance.stopMusic(),e instanceof bl&&e.layeredMusicController&&e.layeredMusicController.stop()}injectMocksForTests(e){this._instance=e}static#e=this.\u0275fac=function(t){return new(t||Uo)};static#t=this.\u0275prov=X({token:Uo,factory:Uo.\u0275fac,providedIn:"root"})}class Mi{static#e=this.IS_ENABLED=!1;log(e,t,...i){if(Mi.IS_ENABLED)switch(e){case"Error":console.error(t,i.join(" "));break;case"Warn":console.warn(t,i.join(" "));break;case"Info":console.log(t,i.join(" "))}}static#t=this.\u0275fac=function(t){return new(t||Mi)};static#n=this.\u0275prov=X({token:Mi,factory:Mi.\u0275fac,providedIn:"root"})}class _l{constructor(e){this.logService=e,this._volume=100,this.isMuted=!1,this._isInitialized=!1,this.loadedUrl="",this.instancePlayedListeners=new Map,this.instanceEndedListeners=new Map}get isInitialized(){return this._isInitialized}init(){if(!0!==this._isInitialized){this._isInitialized=!0;var e=$e(4120);this.widget=new e("scWidget"),this.widget.on(e.events.FINISH,()=>{this.logService.log("Info","soundcloud track finished / ended"),this.instanceEndedListeners.forEach(i=>i(!0))})}}load(e,t){this.logService.log("Info","musicStreamer load with url",e),this.widget.load(e,{auto_play:!1,buying:!1,liking:!1,download:!1,sharing:!1,show_artwork:!1,show_comments:!1,show_playcount:!1,show_user:!1,start_track:0}).then(()=>{this.logService.log("Info","musicStreamer load completed with url",e),this.loadedUrl=e,t&&this.playViaWidget()})}play(){this.logService.log("Info","musicStreamer play"),this.playViaWidget()}playFromStart(e){this.logService.log("Info","musicStreamer playFromStart",e),this.load(e.soundcloudUrl,!0),this.widget.setVolume(this._volume)}playViaWidget(){this.widget.play(),this.instancePlayedListeners.forEach(e=>e())}pause(){this.logService.log("Info","musicStreamer pause"),this.widget.pause()}set volume(e){this.isMuted||(this._volume=e,this.widget.setVolume(this._volume))}set muted(e){this.isMuted=e,this.widget.setVolume(e?0:this._volume)}static#e=this.\u0275fac=function(t){return new(t||_l)(U(Mi))};static#t=this.\u0275prov=X({token:_l,factory:_l.\u0275fac,providedIn:"root"})}class Ho{constructor(){}get nativeWindow(){return function b3(){return window}()}static#e=this.\u0275fac=function(t){return new(t||Ho)};static#t=this.\u0275prov=X({token:Ho,factory:Ho.\u0275fac,providedIn:"root"})}class ks{constructor(){this.subject=new K}sendMessage(e){this.subject.next(e)}onMessage(){return this.subject.asObservable()}static#e=this.\u0275fac=function(t){return new(t||ks)};static#t=this.\u0275prov=X({token:ks,factory:ks.\u0275fac,providedIn:"root"})}class Ps{constructor(){this.elements={}}set(e,t){return this.has(e)?this.elements[e].next(t):this.elements[e]=new Rn(t),this.elements[e]}get(e){return this.has(e)||(this.elements[e]=new Rn(null)),this.elements[e]}delete(e){this.has(e)&&(this.elements[e].next(null),delete this.elements[e])}clear(){for(const e in Object.keys(this.elements))this.elements.hasOwnProperty(e)&&(this.elements[e].next(null),delete this.elements[e]);this.elements={}}has(e){return this.elements[e]instanceof Rn}static#e=this.\u0275fac=function(t){return new(t||Ps)};static#t=this.\u0275prov=X({token:Ps,factory:Ps.\u0275fac,providedIn:"root"})}class wl{constructor(e,t,i,r){this.windowRef=e,this.messageService=t,this.logService=i,this.htmlService=r,this.playWhenReady=!1,this.isFullScreen=!1,this.playerWidth=200,this.playerHeight=200,this.instancePlayedListeners=new Map,this.instanceEndedListeners=new Map}savePlayerElement(e){this.playerElement=e}onWindowInitSize(e,t){this.playerWidth=e}onWindowResize(e,t){this.setPlayerSize(e)}setPlayerSize(e){if(void 0===this.player)return;let t=0;t=e<451?0:e<=703?.1:e<=1053?.2:e<=1403?.3:e<=2e3?.35:.37,this.logService.log("Info","YoutubeService:setPlayerSize: width before",e);let i=e;i=.9*i*(1-2*t),this.playerWidth=i+3,this.playerHeight=.5625*this.playerWidth,this.player.setSize(this.playerWidth,this.playerHeight);let c=this.htmlService.get("headerContainer"),u=this.htmlService.get("headerBackground"),f=57+this.playerHeight;c.value.nativeElement.style.height=f+"px",u.value.nativeElement.style.height=f+"px"}onPlayerReady(e,t,i){this.logService.log("Info","onPlayerReady, width and heigh:",this.playerWidth,this.playerHeight),this.player=e,i&&this.setPlayerSize(this.playerWidth),this.volume=t,this.playWhenReady&&this.play(),e.getIframe().onfullscreenchange=()=>{this.isFullScreen=!this.isFullScreen,this.logService.log("Info","isFullScreen",this.isFullScreen),this.logService.log("Info","playerElement",this.playerElement)};let r=this.player.getIframe().contentWindow;this.windowRef.nativeWindow.addEventListener("message",s=>{if(s.source===r){var o=JSON.parse(s.data);"infoDelivery"===o.event&&o.info&&o.info.volume&&this.messageService.sendMessage({type:"YoutubeVolumeChange"})}})}toFullScreen(){this.player?.getIframe().requestFullscreen()}play(){this.playWhenReady=!1,this.player?.playVideo(),this.instancePlayedListeners.forEach(e=>e())}playFromStart(e){if(this.logService.log("Info","YoutubeService:playFromStart"),void 0===this.player)return void(this.playWhenReady=!0);let t=this.getIdFromVideoUrl(this.player.getVideoUrl());this.logService.log("Info","currentIdInPlayer",t),e.youtubeId!==t?(this.logService.log("Info","loading new youtube id",e.youtubeId),this.player.loadVideoById(e.youtubeId)):this.play()}getIdFromVideoUrl(e){return e?e.split("?v=")[1]:""}pause(){this.logService.log("Info","pause() in YoutubeService"),this.player?.pauseVideo()}get volume(){return void 0===this.player?.getVolume()?0:this.player.getVolume()}set volume(e){this.player?.setVolume(e)}get muted(){return void 0===this.player?.isMuted()||this.player.isMuted()}set muted(e){e?this.player?.mute():this.player?.unMute()}static#e=this.\u0275fac=function(t){return new(t||wl)(U(Ho),U(ks),U(Mi),U(Ps))};static#t=this.\u0275prov=X({token:wl,factory:wl.\u0275fac,providedIn:"root"})}r=function(s,o){for(var a=["webgl","experimental-webgl","webkit-3d","moz-webgl"],c=null,u=0;u<a.length;++u){try{c=s.getContext(a[u],o)}catch{}if(c)break}return c};var r,_3_setupWebGL=function(s,o,a){a=a||function c(f){var p=document.getElementsByTagName("body")[0];if(p){var g=window.WebGLRenderingContext?'It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org">Click here for more information.</a>':'This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>';f&&(g+="<br/><br/>Status: "+f),p.innerHTML=function(s){return'<div style="margin: auto; width:500px;z-index:10000;margin-top:20em;text-align:center;">'+s+"</div>"}(g)}},s.addEventListener&&s.addEventListener("webglcontextcreationerror",function(f){a(f.statusMessage)},!1);var u=r(s,o);return u||(window,a("")),u};window.requestAnimationFrame||(window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n,e){window.setTimeout(n,1e3/60)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.clearTimeout);var Wn=function(){var n=null,e=null,t=!1,i=null,r=0,s=!1,o={},c=function(){null!==i&&((t=!t)?console.log("KDB: Paused"):(console.log("KDB: Unpaused"),u(i)))},u=function(w){i=w;var E=r=.001*performance.now(),D=function(I){if(!isNaN(I)){var k=.001*I,R=k-E;E=k;var ce=Math.max(0,k-r);s&&(console.log("Time: "+ce),s=!1),w(e,ce,R)}t||requestAnimationFrame(D)};D()},y={compile:function(w){var E=document.getElementById(w);if(!E)return console.log("Can't find element "+w),null;if("x-shader/x-fragment"==E.type)y=e.createShader(e.FRAGMENT_SHADER);else{if("x-shader/x-vertex"!=E.type)return console.log("Unsupported shader type: "+E.type),null;y=e.createShader(e.VERTEX_SHADER)}var D=E[null===document.textContent?"textContent":"innerText"].trim();return e.shaderSource(y,D),e.compileShader(y),e.getShaderParameter(y,e.COMPILE_STATUS)?y:(console.log("Can't compile shader "+w,e.getShaderInfoLog(y)),null)},link:function(w,E){var D=e.createProgram();return e.attachShader(D,w),e.attachShader(D,E),e.linkProgram(D),e.getProgramParameter(D,e.LINK_STATUS)?D:(console.log("Can't link program "),null)}},_=function(w,E){this.id=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,buffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(vertices),e.DYNAMIC_DRAW),this.elements=E.length/w,this.stride=w};_.prototype.bind=function(){e.bindBuffer(e.ARRAY_BUFFER,this.id)},_.prototype.update=function(w,E){e.bindBuffer(e.ARRAY_BUFFER,this.id),e.bufferSubData(e.ARRAY_BUFFER,w,new Float32Array(E))};var b=function(w,E){if(this.shaderid=w+E,this.a={},this.u={},void 0!==o[this.shaderid])this.program=o[this.shaderid].program;else{var I=Wn.shader.compile(w),k=Wn.shader.compile(E);this.program=Wn.shader.link(I,k),o[this.shaderid]={program:this.program}}if(null===this.program)throw"Can't create Program<"+w+", "+E+">"};return b.prototype.use=function(){(void 0===window.activeShader||window.activeShader!==this.shaderid)&&e.useProgram(this.program),window.activeShader=this.shaderid},b.prototype.attribute=function(w){this.a[w]=e.getAttribLocation(this.program,w),this.a[w]<0&&console.log("Attribute "+w+" was not found")},b.prototype.uniform=function(w){this.u[w]=e.getUniformLocation(this.program,w),void 0===this.u[w]&&console.log("Uniform "+w+" was not found")},{initialize:function(w,E,D){(n=document.getElementById(w)).width=E,n.height=D,window.addEventListener("keydown",function(I){switch(I.keyCode){case 32:s=!0;break;case 77:document.getElementById("WebAudio").pause();break;case 27:c();var k=document.getElementById("WebAudio");k.paused?k.play():k.pause();break;case 37:r+=2,s=!0;break;case 39:r-=2,s=!0;break;default:console.log(I.keyCode)}});try{return(e=_3_setupWebGL(n)).getExtension("OES_standard_derivatives"),e.viewport(0,0,n.width,n.height),console.log("KDB: viewport ("+E+", "+D+")"),e}catch(I){return console.log("Could not initialize WebGL",I),null}},fullscreen:function(){document},togglePause:c,loop:u,loadImage:function(w,E){var D=new Image;D.onload=function(){var I=document.createElement("canvas");I.width=D.width,I.height=D.height;var k=I.getContext("2d");k.drawImage(D,0,0);var R=k.getImageData(0,0,I.width,I.height);E(D.width,D.height,R)},D.src=w},loadText:function(w){var E=document.createElement("canvas");E.width=400,E.height=40;var D=E.getContext("2d");return D.fillStyle="#00FF00",D.textAlign="center",D.textBaseline="top",D.font="32px monospace",D.fillText(w,E.width/2,0),D.getImageData(0,0,E.width,E.height)},staticBuffer:function(w,E){var D=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,D),e.bufferData(e.ARRAY_BUFFER,new Float32Array(E),e.STATIC_DRAW),D.elements=E.length/w,D.stride=w,D},shader:y,Program:b,Buffer:_}}(),$C_quad=function(t){var i=Wn.staticBuffer(3,[-t,-t,0,t,-t,0,-t,t,0,t,t,0]);return{bind:function(r,s){r.bindBuffer(r.ARRAY_BUFFER,i),r.enableVertexAttribArray(s),r.vertexAttribPointer(s,i.stride,r.FLOAT,!1,0,0)},draw:function(r){r.drawArrays(r.TRIANGLE_STRIP,0,i.elements)}}},$C_cube=function(t){var r=Wn.staticBuffer(3,[t,-t,-t,t,-t,t,-t,-t,-t,-t,-t,t,-t,t,t,t,-t,t,t,t,t,t,t,-t,-t,t,t,-t,t,-t,-t,-t,-t,t,t,-t,t,-t,-t,t,-t,t]);return{bind:function(s,o){s.bindBuffer(s.ARRAY_BUFFER,r),s.enableVertexAttribArray(o),s.vertexAttribPointer(o,r.stride,s.FLOAT,!1,0,0)},draw:function(s){s.drawArrays(s.TRIANGLE_STRIP,0,r.elements)}}},N=function(){var n=1.4166666666666667,e=n/8,t=function(g){return g/n},o=function(g,v,y){var _=t(g);return _<=v?0:_>=v+y?1:(_-v)/y},a=function(g,v,y){return 1-o(g,v,y)};return{init:function(g){n=g},fadein:o,fadeout:a,interval:function(g,v,y,_,b){return o(g,v,y)*a(g,_,b)},unit:function(g,v){return t(g)%v/v},tounit:t,totime:function(g){return g*n},get16partIndex:function(g){return Math.floor(g/e)%16},step:function(g,v){return t(g)>=v?1:0},smoothstep:function p(g,v,y){var _=Math.max(0,Math.min(1,(y-g)/(v-g)));return _*_*(3-2*_)}}}(),Cl=1e-6,Dl=typeof Float32Array<"u"?Float32Array:Array;function tr(){var n=new Dl(16);return Dl!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n}function El(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Bo(n,e,t){var o,a,c,u,f,p,g,v,y,_,b,w,i=t[0],r=t[1],s=t[2];return e===n?(n[12]=e[0]*i+e[4]*r+e[8]*s+e[12],n[13]=e[1]*i+e[5]*r+e[9]*s+e[13],n[14]=e[2]*i+e[6]*r+e[10]*s+e[14],n[15]=e[3]*i+e[7]*r+e[11]*s+e[15]):(a=e[1],c=e[2],u=e[3],f=e[4],p=e[5],g=e[6],v=e[7],y=e[8],_=e[9],b=e[10],w=e[11],n[0]=o=e[0],n[1]=a,n[2]=c,n[3]=u,n[4]=f,n[5]=p,n[6]=g,n[7]=v,n[8]=y,n[9]=_,n[10]=b,n[11]=w,n[12]=o*i+f*r+y*s+e[12],n[13]=a*i+p*r+_*s+e[13],n[14]=c*i+g*r+b*s+e[14],n[15]=u*i+v*r+w*s+e[15]),n}function Og(n,e,t){var i=t[0],r=t[1],s=t[2];return n[0]=e[0]*i,n[1]=e[1]*i,n[2]=e[2]*i,n[3]=e[3]*i,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7]*r,n[8]=e[8]*s,n[9]=e[9]*s,n[10]=e[10]*s,n[11]=e[11]*s,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function C3(n,e,t,i){var c,u,f,p,g,v,y,_,b,w,E,D,I,k,R,ce,re,ue,oe,fe,_e,Te,we,it,r=i[0],s=i[1],o=i[2],a=Math.hypot(r,s,o);return a<Cl?null:(r*=a=1/a,s*=a,o*=a,c=Math.sin(t),u=Math.cos(t),g=e[1],v=e[2],y=e[3],b=e[5],w=e[6],E=e[7],I=e[9],k=e[10],R=e[11],oe=r*s*(f=1-u)-o*c,fe=s*s*f+u,_e=o*s*f+r*c,Te=r*o*f+s*c,we=s*o*f-r*c,it=o*o*f+u,n[0]=(p=e[0])*(ce=r*r*f+u)+(_=e[4])*(re=s*r*f+o*c)+(D=e[8])*(ue=o*r*f-s*c),n[1]=g*ce+b*re+I*ue,n[2]=v*ce+w*re+k*ue,n[3]=y*ce+E*re+R*ue,n[4]=p*oe+_*fe+D*_e,n[5]=g*oe+b*fe+I*_e,n[6]=v*oe+w*fe+k*_e,n[7]=y*oe+E*fe+R*_e,n[8]=p*Te+_*we+D*it,n[9]=g*Te+b*we+I*it,n[10]=v*Te+w*we+k*it,n[11]=y*Te+E*we+R*it,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n)}function Ml(){var n=new Dl(3);return Dl!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}Math,Math,Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)}),Ml();var zC=function(n,e,t){return Math.min(t,Math.max(e,n))},jo_inOut=function(n,e,t,i){return n<0?e:n>i?e+t:(n/=i/2)<1?t/2*n*n*n+e:t/2*((n-=2)*n*n+2)+e},Rg={in:function(n,e,t){return n<=e?0:n>=e+t?1:(n-e)/t},out:function(n,e,t){return 1-Rg.in(n,e,t)}},WC=function(){return function(n){var e=0,t=0,i=0,r=1;0==n.length&&(n=[+new Date]);var s=A3();e=s(" "),t=s(" "),i=s(" ");for(var o=0;o<n.length;o++)(e-=s(n[o]))<0&&(e+=1),(t-=s(n[o]))<0&&(t+=1),(i-=s(n[o]))<0&&(i+=1);s=null;var a=function(){var c=2091639*e+2.3283064365386963e-10*r;return e=t,t=i,i=c-(r=0|c)};return a.uint32=function(){return 4294967296*a()},a.fract53=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.version="Alea 0.9",a.args=n,a}(Array.prototype.slice.call(arguments))};function A3(){var n=4022871197,e=function(t){t=t.toString();for(var i=0;i<t.length;i++){var r=.02519603282416938*(n+=t.charCodeAt(i));r-=n=r>>>0,n=(r*=n)>>>0,n+=4294967296*(r-=n)}return 2.3283064365386963e-10*(n>>>0)};return e.version="Mash 0.9",e}var Zr=function(){var n=tr(),e=tr(),i=(tr(),10),r=10,s=15,o=0,a=0,c=0,p=function(y,_){o=(i=_+10*y)+2,a=r=5,c=10+(s=-10)},g=function(y,_){o=(i=_+5*y)-2,a=r=5,c=(s=15)-10-y};return{initialize:function(y){y.disable(y.CULL_FACE),function M3(n,e,t,i,r){var o,s=1/Math.tan(e/2);n[0]=s/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,null!=r&&r!==1/0?(n[10]=(r+i)*(o=1/(i-r)),n[14]=2*r*i*o):(n[10]=-1,n[14]=-2*i)}(n,90,16/9,.1,1e3)},update:function(y,_,b){var E,D,w=N.tounit(_);if(w<2)i=10*_-300,o=-250,a=r=20,c=150+(s=-50);else if(w<4)E=_-N.totime(2),o=2+(i=10*E-300),a=r=10,c=10+(s=-20);else if(w<6)p(_-N.totime(4),-300);else if(w<12)!function(y,_){o=(i=5*y-220)-2,a=(r=5)-1,c=s=5}(_-N.totime(8));else if(w<16)g(_-N.totime(12),-280);else if(w<20)E=_-N.totime(18),o=(i=2*E-160)-4,a=.5+(r=1),c=s=5;else if(w<24)p(_-N.totime(20),-260);else if(w<28)g(_-N.totime(24),-240);else if(w<32)E=_-N.totime(28),o=(i=2*E-120)-2,a=(r=15)-2,c=s=5;else if(w<72){E=_-N.totime(32);var I=jo_inOut(_-N.totime(54),0,1,N.totime(10));o=-100+jo_inOut(_-N.totime(44),0,24,N.totime(20)),a=1,c=4,D=15+10*N.fadein(E,0,8)-jo_inOut(_-N.totime(62),0,10,N.totime(6));var k=3+.1*jo_inOut(E,0,N.totime(23),N.totime(23));i=o+Math.sin(k)*D+2*I,r=8+16*N.fadein(E,0,8)-4*I,s=c+Math.cos(k)*D-4*I}else E=_-N.totime(72),o=-60,a=1,c=4,D=40+jo_inOut(E,0,30,N.totime(24)),i=o+Math.sin(.25*E)*D,r=15+jo_inOut(E,0,35,N.totime(24)),s=c+Math.cos(.25*E)*D;const R=Ml();R[0]=i,R[1]=r,R[2]=s;const ce=Ml();ce[0]=o,ce[1]=a,ce[2]=c;const re=Ml();re[0]=0,re[1]=1,re[2]=0,function S3(n,e,t,i){var r,s,o,a,c,u,f,p,g,v,y=e[0],_=e[1],b=e[2],w=i[0],E=i[1],D=i[2],I=t[0],k=t[1],R=t[2];Math.abs(y-I)<Cl&&Math.abs(_-k)<Cl&&Math.abs(b-R)<Cl?El(n):(f=y-I,p=_-k,g=b-R,r=E*(g*=v=1/Math.hypot(f,p,g))-D*(p*=v),s=D*(f*=v)-w*g,o=w*p-E*f,(v=Math.hypot(r,s,o))?(r*=v=1/v,s*=v,o*=v):(r=0,s=0,o=0),a=p*o-g*s,c=g*r-f*o,u=f*s-p*r,(v=Math.hypot(a,c,u))?(a*=v=1/v,c*=v,u*=v):(a=0,c=0,u=0),n[0]=r,n[1]=a,n[2]=f,n[3]=0,n[4]=s,n[5]=c,n[6]=p,n[7]=0,n[8]=o,n[9]=u,n[10]=g,n[11]=0,n[12]=-(r*y+s*_+o*b),n[13]=-(a*y+c*_+u*b),n[14]=-(f*y+p*_+g*b),n[15]=1)}(e,R,ce,re)},projection:function(){return n},view:function(){return e}}}(),qC=function(){var n,e,t=tr(),r=[],s=[],o="#...###...###.#.#.###.####...#.....#...#.#.#.#.#..#...##....#...#.#.###.##.#...#.....#...#.#.#.#.#..###.###...###.###.###.###",a=Math.sqrt(2)-1;return{initialize:function(p){p.disable(p.CULL_FACE),n=$C_cube(1),(e=new Wn.Program("v_solid","f_solid")).attribute("vertex"),e.uniform("uProjection"),e.uniform("uView"),e.uniform("uModel"),e.uniform("uColor");var g,v,y,_,b=new WC(1),w=[-250,1,0];for(g=o.length-1;g>=0;g--)if("."!=o.charAt(g)){var E=g%25,D=parseInt(g/25);s.push([v=w[0]+2*E,y=w[1],_=w[2]+2*D])}var k=null,R=null,ce=-1,re=0;for(g=0;g<60;g++){if(ce!=(_=s[g][2])&&(ce=_,k=R,R=[],re=Math.floor(4*b())),re+=1+Math.floor(3*b()),null!==k)for(var ue=0;ue<k.length;ue++)if(s[g][0]-2*re===k[ue]){re++;break}R.push(s[g][0]-2*re),v=s[g][0]-2*re,y=s[g][1],s[g][0]+=150,r.push([v,y,_])}},update:function(p,g,v){var y=g-N.totime(7.5);y+=.1*N.step(g,32);var _=N.step(y,0),w=_*(2*y*60/85%1),E=_*Math.floor(N.tounit(2*y))*2,k=[.5*N.interval(g,4,4,62,2),0,0],R=Zr.projection(),ce=Zr.view();e.use(),n.bind(p,e.a.vertex),p.uniformMatrix4fv(e.u.uProjection,!1,R),p.uniformMatrix4fv(e.u.uView,!1,ce),p.uniform3f(e.u.uColor,k[0],k[1],k[2]),function(p,g){var v=-2*g,y=Math.sin(3.1415*g)*a;El(p),Math;const w=Ml();w[0]=0,w[1]=0,w[2]=1,Bo(p,p,[-v,y,0])}(t,zC(1.2*w,0,1));for(var re=tr(),ue=0;ue<60;ue++){var oe=r[ue];Bo(re,t,s[ue][0]<=oe[0]+E?[(oe=s[ue])[0],oe[1],oe[2]]:[oe[0]+E,oe[1],oe[2]]),p.uniformMatrix4fv(e.u.uModel,!1,re),n.draw(p)}}}}();const x3=.5*(Math.sqrt(3)-1),Tl=(3-Math.sqrt(3))/6,Dr=(Math.sqrt(5),Math.sqrt(5),n=>0|Math.floor(n)),KC=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]);var t,i,YC={initialize:function(o){for(var a=[],c=function O3(n=Math.random){const e=function Ng(n){const t=new Uint8Array(512);for(let i=0;i<256;i++)t[i]=i;for(let i=0;i<255;i++){const r=i+~~(n()*(256-i)),s=t[i];t[i]=t[r],t[r]=s}for(let i=256;i<512;i++)t[i]=t[i-256];return t}(n),t=new Float64Array(e).map(r=>KC[r%12*2]),i=new Float64Array(e).map(r=>KC[r%12*2+1]);return function(s,o){let a=0,c=0,u=0;const f=(s+o)*x3,p=Dr(s+f),g=Dr(o+f),v=(p+g)*Tl,b=s-(p-v),w=o-(g-v);let E,D;b>w?(E=1,D=0):(E=0,D=1);const I=b-E+Tl,k=w-D+Tl,R=b-1+2*Tl,ce=w-1+2*Tl,re=255&p,ue=255&g;let oe=.5-b*b-w*w;if(oe>=0){const Te=re+e[ue];oe*=oe,a=oe*oe*(t[Te]*b+i[Te]*w)}let fe=.5-I*I-k*k;if(fe>=0){const Te=re+E+e[ue+D];fe*=fe,c=fe*fe*(t[Te]*I+i[Te]*k)}let _e=.5-R*R-ce*ce;if(_e>=0){const Te=re+1+e[ue+1];_e*=_e,u=_e*_e*(t[Te]*R+i[Te]*ce)}return 70*(a+c+u)}}(new WC(2)),f=function(I,k){var re=Math.max(0,I*I/6e3-.1)+Math.max(0,k*k/8e4-1);a.push(k),a.push(function(I,k){var R=0;return R+=Math.abs(1*c(.005*I,.005*k)),R+=.5*c(.01*I,.01*k),5*((R+=.25*c(.02*I,.02*k))+.12*c(.04*I,.04*k))}(I,k)*re),a.push(I)},g=0;g<200;g++)for(var v=1&g,y=0;y<100;y++){var b=g,w=8*((v?100-y-1:y)-Math.floor(50)),E=8*(b-Math.floor(100)),D=E+8;g>0&&0==(1&g)&&0===y&&f(w,E),f(w,E),f(w,D),1==(1&g)&&y+1===100&&f(w,E)}t=Wn.staticBuffer(3,a),(i=new Wn.Program("v_solid","f_plasma")).attribute("vertex"),i.uniform("uProjection"),i.uniform("uView"),i.uniform("uModel"),i.uniform("uTime"),i.uniform("uMix")},update:function(o,a,c){var u=Zr.projection(),f=Zr.view(),p=tr(),g=N.interval(a,28,4,84,4),v=N.interval(a,64,2,80,4);i.use(),o.bindBuffer(o.ARRAY_BUFFER,t),o.enableVertexAttribArray(i.a.vertex),o.vertexAttribPointer(i.a.vertex,t.stride,o.FLOAT,!1,0,0),o.uniformMatrix4fv(i.u.uProjection,!1,u),o.uniformMatrix4fv(i.u.uView,!1,f),o.uniformMatrix4fv(i.u.uModel,!1,p),o.uniform1f(i.u.uTime,a),o.uniform2f(i.u.uMix,g,v),o.uniform3f(i.u.uColor,1,0,1),o.drawArrays(o.TRIANGLE_STRIP,0,t.elements)}},Fg=function(){var r,s,n=new R3(20),e="GIOMJL0AMOIG0IGMO0COMGI0OMGILJ0CBN0OMGIUS0AMGIO0GHN0GHTS0AMIKO0BN0MGHNHIO0MGIO0GIOMG0SGIOM0UIGMO0MGI0IGJLOM0BNO0GMOI0GJNLI0GMNHNOI0GOKMI0GMOIUS0GIMO0GIOMG0IO0GILJMO0GILJLOM0GJLIO0IGJLOM0IGMOLJ0IHKLFDMO0CBQR0ABQP0IEGJR0GEILP0".split(0),i=function(p){var g=function(p){var w,E,g=0,v=[],y=0,_=function(re,ue){var fe=1*(re+y);v.push(fe),v.push(1*-ue),v.push(0),fe>g&&(g=fe)},b=function(re,ue){_(re%3,Math.floor(re/3)),_(ue%3,Math.floor(ue/3))};for(w=0;w<p.length;w++){var D=p.charCodeAt(w)-65;"0"==p[w]&&(D=26),"1"==p[w]&&(D=27),"2"==p[w]&&(D=28),"3"==p[w]&&(D=29),"4"==p[w]&&(D=30),"5"==p[w]&&(D=31),"6"==p[w]&&(D=32),"@"==p[w]&&(D=33),"["==p[w]&&(D=34),"]"==p[w]&&(D=35),"<"==p[w]&&(D=36),">"==p[w]&&(D=37);var I=e[D];if(I){for(E=1;E<I.length;E++)b(I.charCodeAt(E-1)-65,I.charCodeAt(E)-65);("I"===p[w]||"J"===p[w])&&b(3,4),("F"===p[w]||"T"===p[w])&&b(3,5)}"-"===p[w]&&b(9,11),":"===p[w]&&(b(4,7),b(10,13)),"="===p[w]&&(b(6,8),b(9,11)),"+"===p[w]&&(b(7,13),b(9,11)),","===p[w]&&b(13,16),"."===p[w]&&(b(12,13),b(13,16),b(15,16),b(12,15)),y+=3}var re,ue,oe,R=v.length/6;for(w=0;w<v.length;w+=6){var ce=6*Math.floor(n()*R);for(E=0;E<6;E++)void 0,oe=v[re=w+E],v[re]=v[ue=ce+E],v[ue]=oe}return[v,g]}(p),y=g[1],_=Wn.staticBuffer(3,g[0]);return{bind:function(b,w){b.bindBuffer(b.ARRAY_BUFFER,_),b.enableVertexAttribArray(w),b.vertexAttribPointer(w,_.stride,b.FLOAT,!1,0,0)},draw:function(b){b.drawArrays(b.LINES,0,_.elements)},drawPartially:function(b,w){var E=Math.floor(zC(w,0,1)*_.elements);b.drawArrays(b.LINES,0,E)},biggestXPos:y}},u=tr();return{create:i,initialize:function(p){var g=["GEOMETRY","SOLID","OBJECT","CONFORMITY","SQUARE","SINGULAR","6 FACES","CUBE","VERTEX","REGULAR","HEXAHEDRON","PLATONIC","CUBOID","STRAIGHT","PRISM","TRIGONAL","SYMMETRY","ORDER","PERPENDICULAR","OCTAHEDRON","CUBICAL","LINE","FACETS","EQUILATERAL"];s=[];for(var v=0;v<g.length;v++)s.push(i(g[v]));(r=new Wn.Program("v_solid","f_text")).attribute("vertex"),r.uniform("uProjection"),r.uniform("uView"),r.uniform("uModel"),r.uniform("uColor")},update:function(p,g,v){p.lineWidth(3);var y=Zr.projection(),_=Zr.view();r.use(),p.uniformMatrix4fv(r.u.uProjection,!1,y),p.uniformMatrix4fv(r.u.uView,!1,_);var b=N.interval(g,64,2,80,4),w=.3*N.tounit(20*g),E=.4*(1-b)+b*(.5*Math.sin(w+0)+.5),D=.4*(1-b)+b*(.5*Math.sin(w+2)+.5),I=.4*(1-b)+b*(.5*Math.sin(w+4)+.5);p.uniform3f(r.u.uColor,E,D,I);for(var k=s.length,R=0;R<k;R++){var ce=R/k,ue=0,fe=0;El(u),R>k/2?(ue=800*(4*(ce-.5)-1),fe=250):(ue=800*(4*ce-1),fe=-250),Bo(u,u,[ue,60,fe]),Og(u,u,[3,3,3]),R>k/2&&C3(u,u,Math.PI,[0,1,0]),p.uniformMatrix4fv(r.u.uModel,!1,u);var _e=s[R];_e.bind(p,r.a.vertex),_e.draw(p)}}}}();function R3(){return function(n){var e=0,t=0,i=0,r=1;0==n.length&&(n=[+new Date]);var s=L3();e=s(" "),t=s(" "),i=s(" ");for(var o=0;o<n.length;o++)(e-=s(n[o]))<0&&(e+=1),(t-=s(n[o]))<0&&(t+=1),(i-=s(n[o]))<0&&(i+=1);s=null;var a=function(){var c=2091639*e+2.3283064365386963e-10*r;return e=t,t=i,i=c-(r=0|c)};return a.uint32=function(){return 4294967296*a()},a.fract53=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.version="Alea 0.9",a.args=n,a}(Array.prototype.slice.call(arguments))}function L3(){var n=4022871197,e=function(t){t=t.toString();for(var i=0;i<t.length;i++){var r=.02519603282416938*(n+=t.charCodeAt(i));r-=n=r>>>0,n=(r*=n)>>>0,n+=4294967296*(r-=n)}return 2.3283064365386963e-10*(n>>>0)};return e.version="Mash 0.9",e}var ZC=function(){var n,e;return{initialize:function(r){n=$C_quad(1),(e=new Wn.Program("v_background","f_background")).attribute("vertex"),e.uniform("uColor"),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA)},update:function(r,s,o){var a=1-N.interval(s,0,1,95,1);e.use(),n.bind(r),r.uniform4f(e.u.uColor,1,1,1,a),r.enable(r.BLEND),n.draw(r),r.disable(r.BLEND)}}}(),JC=function(){var n,e,t=tr(),i=tr(),r=tr(),o=0,a=0,u=function(p,g,v){var y=e[v];if(!(void 0===y||g<y.start||y.stop<g)){var b=y.message,w=y.scale||.02;El(r),Bo(r,r,[-.98,.5475,-1]),Og(r,r,[w,w,w]),p.uniformMatrix4fv(n.u.uModel,!1,r),p.uniform3f(n.u.uColor,y.color[0],y.color[1],y.color[2]);var k=y.fadeTime||N.totime(1),R=Rg.in(g,y.start,k)*Rg.out(g,y.stop-k,k);b.bind(p,n.a.vertex),b.drawPartially(p,R)}};return{initialize:function(p){e=[{text:"WARNING! THINKING OUTSIDE THE BOX MAY CAUSE PERMANENT BRAIN DAMAGE. SIDE EFFECTS MAY INCLUDE, BUT IS NOT LIMITED TO: ANXIETY, CONFUSION, NERVOUSNESS AND INSOMNIA",start:0,stop:N.totime(8),x:[1,-6],y:[-.5,-.5],scale:.01,color:[.8,.2,.2]},{text:"KLOVMAN: CODE",start:N.totime(2),stop:N.totime(3.75),fadeTime:N.totime(.25),color:[1,1,1]},{text:"VULKANOMAN: MUSIC + CODE",start:N.totime(4),stop:N.totime(5.75),fadeTime:N.totime(.25),color:[1,1,1]},{text:"             LE CUBE",start:N.totime(6),stop:N.totime(8),fadeTime:N.totime(.25),color:[1,1,1]},{text:"RELEASED IN 2014",start:N.totime(9),stop:N.totime(11),fadeTime:N.totime(.25),color:[1,1,1]},{text:"NOW WITH UPDATED MUSIC",start:N.totime(12),stop:N.totime(14),fadeTime:N.totime(.25),color:[1,1,1]},{text:"SPHERES ARE BORING",start:N.totime(16),stop:N.totime(19),fadeTime:N.totime(.25),color:[1,1,1]},{text:"LINES ARE TOO THIN",start:N.totime(20),stop:N.totime(23),fadeTime:N.totime(.25),color:[1,1,1]},{text:"CUBE IS THE NEW BLACK",start:N.totime(24),stop:N.totime(27),fadeTime:N.totime(.25),color:[1,1,1]},{text:"WE ARE CUBING",start:N.totime(72),stop:N.totime(74),fadeTime:N.totime(.25),color:[1,1,1]},{text:"PANDA DESIGN",start:N.totime(74),stop:N.totime(75),fadeTime:N.totime(.25),color:[1,1,1]},{text:"ZWORP",start:N.totime(75),stop:N.totime(76),fadeTime:N.totime(.25),color:[1,1,1]},{text:"DERIL",start:N.totime(76),stop:N.totime(77),fadeTime:N.totime(.25),color:[1,1,1]},{text:"PILGRIM",start:N.totime(77),stop:N.totime(78),fadeTime:N.totime(.25),color:[1,1,1]},{text:"JONAS + DAVID",start:N.totime(78),stop:N.totime(79),fadeTime:N.totime(.25),color:[1,1,1]},{text:"ORREBORRE",start:N.totime(79),stop:N.totime(80),fadeTime:N.totime(.25),color:[1,1,1]},{text:"BAN",start:N.totime(80),stop:N.totime(81),fadeTime:N.totime(.25),color:[1,1,1]},{text:"ELIN",start:N.totime(81),stop:N.totime(82),fadeTime:N.totime(.25),color:[1,1,1]},{text:"SASQ",start:N.totime(82),stop:N.totime(83),fadeTime:N.totime(.25),color:[1,1,1]},{text:"IRIDON",start:N.totime(83),stop:N.totime(84),fadeTime:N.totime(.25),color:[1,1,1]},{text:"PIXELJUICE",start:N.totime(84),stop:N.totime(85),fadeTime:N.totime(.25),color:[1,1,1]},{text:"XOOMIE",start:N.totime(85),stop:N.totime(86),fadeTime:N.totime(.25),color:[1,1,1]},{text:"TANIS",start:N.totime(86),stop:N.totime(87),fadeTime:N.totime(.25),color:[1,1,1]},{text:"GEEZER",start:N.totime(87),stop:N.totime(88),fadeTime:N.totime(.25),color:[1,1,1]},{text:"MATHMAN",start:N.totime(88),stop:N.totime(89),fadeTime:N.totime(.25),color:[1,1,1]},{text:"YOU",start:N.totime(89),stop:N.totime(91),fadeTime:N.totime(.5),color:[1,1,1]}];for(var g=0;g<e.length;g++)e[g].message=Fg.create(e[g].text);(n=new Wn.Program("v_solid","f_text")).attribute("vertex"),n.uniform("uProjection"),n.uniform("uView"),n.uniform("uModel"),n.uniform("uColor"),p.lineWidth(3),function T3(n,e,t,i,r,s,o){var a=1/(e-t),c=1/(i-r),u=1/(s-o);n[0]=-2*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*c,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*u,n[11]=0,n[12]=(e+t)*a,n[13]=(r+i)*c,n[14]=(o+s)*u,n[15]=1}(t,-1,1,-9/16,9/16,.1,100)},update:function(p,g,v){n.use(),p.uniformMatrix4fv(n.u.uProjection,!1,t),p.uniformMatrix4fv(n.u.uView,!1,i),p.lineWidth(2),N.tounit(g)<88&&function(p,g,v,y){var _=e[0];if(!(g<_.start||_.stop<g)){var b=(g-_.start)/(_.stop-_.start),w=_.x[0]+b*(_.x[1]-_.x[0]),E=_.y[0]+b*(_.y[1]-_.y[0]),I=_.scale||.02;El(r),Bo(r,r,[w,E,-1]),Og(r,r,[I,I,I]),p.uniformMatrix4fv(n.u.uModel,!1,r),p.uniform3f(n.u.uColor,_.color[0],_.color[1],_.color[2]);var k=_.message;k.bind(p,n.a.vertex);var R=N.interval(y,64,4,80,4);k.drawPartially(p,1-R*a),y>=o&&(o=y+.1,a=Math.random())}}(p,(g-N.totime(8))%N.totime(8),0,g),u(p,g,1),u(p,g,2),u(p,g,3),u(p,g,4),u(p,g,5),u(p,g,6),u(p,g,7),u(p,g,8),u(p,g,9),u(p,g,10),u(p,g,11),u(p,g,12),u(p,g,13),u(p,g,14),u(p,g,15),u(p,g,16),u(p,g,17),u(p,g,18),u(p,g,19),u(p,g,20),u(p,g,21),u(p,g,22),u(p,g,23),u(p,g,24)}}}();class Sl{constructor(e){this.document=e}init(){this.play()}play(){var e=Math.max(window.innerWidth,document.body.clientWidth),t=Math.max(window.innerHeight,document.body.clientHeight);e<16*t/9?t=Math.floor(9*e/16):e=Math.floor(16*t/9);var i=Wn.initialize("WebGLCanvas",e,t);null===i?alert("Could not initialize WebGL"):(N.init(85/60),this.initialize(i,e,t))}initialize(e,t,i){e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),Zr.initialize(e),qC.initialize(e),YC.initialize(e),Fg.initialize(e),ZC.initialize(e),JC.initialize(e),this.document.getElementById("music")?.play(),Wn.loop(this.main)}main(e,t,i){var s=N.unit(t,2),o=.1*(Math.sin(3.1415*s)+1);t>=136&&(o=1),e.clearColor(o,o,o,1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),t>=136?Wn.togglePause():(Zr.update(e,t,i),YC.update(e,t,i),qC.update(e,t,i),Fg.update(e,t,i),JC.update(e,t,i),ZC.update(e,t,i))}static#e=this.\u0275fac=function(t){return new(t||Sl)(U(Rt))};static#t=this.\u0275prov=X({token:Sl,factory:Sl.\u0275fac,providedIn:"root"})}class be{constructor(e,t,i,r,s,o=1){this.key=e,this.url=t,this.maxGain=i,this.soundType=r,this.loop=s,this.maxNrPlayingAtOnce=o}static music(e,t,i=1){return new be(e,t,i,"Music",!1,1)}static musicLoop(e,t,i=1){return new be(e,t,i,"Music",!0,1)}static sfx(e,t,i){return new be(e,t,i,"SFX",!1,1)}static sfxLoop(e,t,i){return new be(e,t,i,"SFX",!0,1)}}class QC{constructor(e,t,i=3,r=30,s=20,o=!0,a=0,c=0){this.instanceEndedListeners=e,this.log=t,this.startLayerIndexToBeDecremented=i,this.timeIntervalSec=r,this.fadeDurationSec=s,this.lastLayerFadesOutAndStops=o,this.startCurrentLayerValue=a,this.maxLayerValue=c,this.hasStarted=!1,this.fadeOutTimeouts=new Map,this.fadeInTimeouts=new Map,this.layerIndexToBeDecremented=i,this.currentLayerValue=a}get layerSoundInstances(){return this._layerSoundInstances}set gainsDisabled(e){this._gainsDisabled=e}start(e){this._layerSoundInstances=e,this.layerIndexToBeDecremented=this.startLayerIndexToBeDecremented,this.currentLayerValue=this.startCurrentLayerValue;for(let t=this.layerIndexToBeDecremented+1;t<this._layerSoundInstances.length;t++)this._layerSoundInstances[t].gainWrapper.muteInstance();this.setLayerMusicTimer(),this.hasStarted=!0}setLayerMusicTimer(){this.layerMusicTimer=setInterval(()=>{if(this.log("Info","on timer: currentLayerValue",this.currentLayerValue),0<this.currentLayerValue)return--this.currentLayerValue,void this.log("Info","decremented to value",this.currentLayerValue);if(this.lastLayerFadesOutAndStops||0<this.layerIndexToBeDecremented){this.log("Info","fading out index",this.layerIndexToBeDecremented),this.setGainsDisabledValue(!0);const e=this._layerSoundInstances[this.layerIndexToBeDecremented];e.gainWrapper.cancelScheduledValues(0).linearRampToValueAtTime(0,e.audioContext.currentTime+this.fadeDurationSec),this.setFadeTimeout(this.fadeOutTimeouts,this.layerIndexToBeDecremented,e),--this.layerIndexToBeDecremented,this.currentLayerValue=this.maxLayerValue/2}},1e3*this.timeIntervalSec)}setGainsDisabledValue(e){e&&!this._gainsDisabled.value&&(this._gainsDisabled.value=e,this._gainsDisabled.emit("Change",e))}setFadeTimeout(e,t,i){e.set(t,setTimeout(()=>{this.log("Info","onFadeTimeout"),i&&i.gainWrapper.muteInstance(),e.delete(t),0===e.size&&this.setGainsDisabledValue(!1),this.lastLayerFadesOutAndStops&&0===t&&this.instanceEndedListeners.forEach(r=>r(!0))},1e3*this.fadeDurationSec))}incrementLayerValue(){if(this.hasStarted){if(this.currentLayerValue<this.maxLayerValue)return++this.currentLayerValue,void this.log("Info","incremented by 1 to value",this.currentLayerValue);if(this.log("Info","clearing timer"),clearInterval(this.layerMusicTimer),this.setLayerMusicTimer(),this.layerIndexToBeDecremented<this._layerSoundInstances.length-1){++this.layerIndexToBeDecremented,this.log("Info","fading in index",this.layerIndexToBeDecremented);const e=this.fadeOutTimeouts.get(this.layerIndexToBeDecremented);e&&clearTimeout(e),this.setGainsDisabledValue(!0);const t=this._layerSoundInstances[this.layerIndexToBeDecremented];t.gainWrapper.unmuteInstance(t.gainWrapper.value).cancelScheduledValues(0).linearRampToValueAtTime(1,t.audioContext.currentTime+this.fadeDurationSec),this.setFadeTimeout(this.fadeInTimeouts,this.layerIndexToBeDecremented),this.currentLayerValue=this.maxLayerValue/2}}}stop(){clearInterval(this.layerMusicTimer),this.fadeOutTimeouts.forEach(e=>{clearTimeout(e)}),this.fadeInTimeouts.forEach(e=>{clearTimeout(e)}),this.fadeOutTimeouts.clear(),this.fadeInTimeouts.clear(),this.setGainsDisabledValue(!1)}}class Il{constructor(e,t){this.soundManager=e,this.logService=t,this.pathRoot="../../assets/audio",this.pathGame=`${this.pathRoot}/game`,this.pathKuai=`${this.pathRoot}/kuai`,this.pathBrothers=`${this.pathRoot}/braedraminning`,this._isInitialized=!1,this._instancePlayedListeners=new Map,this.instanceEndedListeners=new Map}get isInitialized(){return this._isInitialized}get byTracks(){return this._byTracks}get flatTracks(){return this._flatTracks}getTrackByRootUrl(e){return this._tracksByRootUrl.get(e)}get instancePlayedListeners(){return this._instancePlayedListeners}get timeout(){return this._timeout}set timeout(e){this._timeout=e}init(){this._isInitialized||(this._byTracks=[{name:"Egill Antonsson",tracks:[this.lecube(),this.votThemeSong(),this.harmoniesOfShadeAndLight(),this.weWillMeetAgain(),this.magmaMerryGoRound(),this.justInTime(),this.icelandSocksIntro(),this.fortidin(),this.toddlerTune(),this.oddTimesInSpace()],about:this.aboutEgillAntonsson},{name:"Kanez Kane",tracks:[this.winterQueen(),this.komaKoma(),this.strawberryCityLights()],about:this.aboutKanezKane},{name:"KUAI",tracks:[this.pirringur(),this.apollo(),this.andsetinn(),this.hamskipti(),this.rover(),this.andefni(),this.agndofa(),this.ofurte(),this.lesblindaI(),this.lesblindaII()],about:this.aboutKuai},{name:"Tribe Of Oranges",tracks:[this.introduction(),this.routine(),this.hhiCommercial()],about:this.aboutTribeOfOranges},{name:"Game Music - Layered",tracks:[this.godsruleLayered(),this.votLayered()],about:""},{name:"Game Music",tracks:[this.cakePopParty(),this.symbol6(),this.softFreakFiesta(),this.habitarium(),this.tinyPlaces(),this.jol2008(),this.jol2009(),this.whosYourFriend(),this.knowYourFriend(),this.stackem(),this.glowbulleville(),this.godsrule(),this.vot(),this.crisisGame()],about:""},{name:"Br\xe6\xf0raminning",tracks:[this.pesi2002(),this.mouse2002(),this.rubber2002(),this.solos2002(),this.takeCare2002(),this.beLikeYou2002(),this.story2002(),this.frumlag2002(),this.world2002(),this.withoutThem2002(),this.myDearOldBrothers(),this.pesi1974(),this.mouse1975(),this.rubber1975(),this.solos1975(),this.takeCare1976(),this.beLikeYou1976(),this.story1976(),this.frumlag1977(),this.world1977(),this.withoutThem1977()],about:this.aboutBraedraminning}],this.flattenTracks(),this._isInitialized=!0)}get aboutEgillAntonsson(){return'I started playing the piano around the age of 7. In my teenage years I added guitar (inspired by <a href="https://www.slashonline.com/">Slash</a> and others), electric bass (because all in the band can\'t be guitarists) and singing, and from time to time beating the drums. Note that the tracks published under my name sometimes involved collaborations with others (mentioned in the "About" section).'}get pathToDirEgillAntonsson(){return Ei.dir+"egillantonsson/"}get aboutKanezKane(){return"A partnership with my friend Sindri Bergmann Thorarinsson. We have done lots of music through the decades but currently only released to the world a small part of it. We decided to changed that so stay tuned :)"}get aboutBraedraminning(){return"My parents kept a cassette with the recordings of the songs my older brothers made. To make sure the songs survived that old cassette, I published the album Br\xe6\xf0raminning, which also includes my takes on their songs."}get pathToDirKanez(){return Ei.dir+"kanez/"}get pathToDirBraedraminning(){return Ei.dir+"braedraminning/"}get aboutTribeOfOranges(){return"A partnership with my friend Sindri Bergmann Thorarinsson.<We coined the name when we needed to which can be shortened to TOO. Me and Sindri have done a lot together and some are under TOO."}get pathToDirTribeOfOranges(){return Ei.dir+"too/"}get aboutKuai(){return""}get braedraminningArtworkPath(){return`${this.pathToDirBraedraminning}braedraminning.jpeg`}get aboutBraedraminningTake2002(){return"My take on this song, recorded and mixed in 2001-2002. Sindri Bergmann Thorarinsson mastered it as far as could be done in 2022.\n\t"}get pathToDirKuai(){return Ei.dir+"kuai/"}flattenTracks(){this._tracksByRootUrl=new Map,this._flatTracks=[];let e=0;for(let t=0;t<this._byTracks.length;t++)for(let i=0;i<this._byTracks[t].tracks.length;i++){const r=this._byTracks[t].tracks[i];r.index=e++;const s=this._byTracks[t];r.artistName=s.name,r.artistAbout=s.about,this._flatTracks.push(r),this._tracksByRootUrl.set(r.rootUrl,r)}}lecube(){const e="lecube";return new y3(e,"Lecube",`${this.pathToDirEgillAntonsson}${e}.jpg`,"About LeCube")}winterQueen(){const e="winter-queen";return new fd("gNL39MCw8Jw",!1,e,"Winter Queen",`${this.pathToDirKanez}${e}.jpg`,"This is the third released song (early 2023). Created in the first Stockholm session when Sindri visited me. Fittingly the weather both in Sweden and Iceland was quite chilling during the production to the release","","https://open.spotify.com/track/56X0rSJh8MRO2aJTZfSgpF?si=ec263723abbf4f29")}komaKoma(){const e="koma-koma";return new fd("Ww4w8prWBxM",!1,e,"Koma Koma",`${this.pathToDirKanez}${e}.jpg`,"This is the second released song (early 2023). Jump on and join the Revolution!","","https://open.spotify.com/track/0Hbv3lJZvM3Bb9vhEcAAhi?si=c9036966188848a9","https://www.qobuz.com/album/koma-koma-kanez-kane/vmzznxtf4kyna")}strawberryCityLights(){const e="strawberry-city-lights";return new fd("DTmPz-vSTFI",!1,e,"Strawberry City Lights",`${this.pathToDirKanez}${e}.jpg`,"This is the first released song (late 2022). The artwork is computer generated from using the title as input.","","https://open.spotify.com/track/0lRUvYevsLK5pBrTYfl3be?si=04526be015af456e","https://www.qobuz.com/album/strawberry-city-lights-kanez-kane/b31j9xshkikja")}pesi2002(){return new Be("https://soundcloud.com/egill-antonsson/pesi-year-2002?in=egill-antonsson/sets/braedraminning","pesi-year-2002","P\xe9si (year 2002)",this.braedraminningArtworkPath,this.aboutBraedraminningTake2002,"https://open.spotify.com/track/6viU3JhxNEKkY2paBuOEaP","https://www.qobuz.com/album/braeraminning-in-memory-of-the-brothers-egill-antonsson/pa3y1de6ejnqb")}mouse2002(){return new Be("https://soundcloud.com/egill-antonsson/mouse-year-2002?in=egill-antonsson/sets/braedraminning","mouse-year-2002","Mouse (year 2002)",this.braedraminningArtworkPath,this.aboutBraedraminningTake2002+"<br>\nI did my take on the lyrics, thus differing to some extent.\n","https://open.spotify.com/track/1f2eGiZiCMOMZZbKc52IIH","https://www.qobuz.com/album/braeraminning-in-memory-of-the-brothers-egill-antonsson/pa3y1de6ejnqb")}rubber2002(){return new Be("https://soundcloud.com/egill-antonsson/rubber-year-2002?in=egill-antonsson/sets/braedraminning","rubber-year-2002","Rubber (year 2002)",this.braedraminningArtworkPath,this.aboutBraedraminningTake2002,"https://open.spotify.com/track/23kZ3ftMMyigpXU49Rq35Q","https://www.qobuz.com/album/braeraminning-in-memory-of-the-brothers-egill-antonsson/pa3y1de6ejnqb")}solos2002(){return new Be("https://soundcloud.com/egill-antonsson/solos-year-2002?in=egill-antonsson/sets/braedraminning","solos-year-2002","Solos (year 2002)",this.braedraminningArtworkPath,this.aboutBraedraminningTake2002,"https://open.spotify.com/track/5J8kU1mdqcqKZ0Wb3sxrqj","https://www.qobuz.com/album/braeraminning-in-memory-of-the-brothers-egill-antonsson/pa3y1de6ejnqb")}takeCare2002(){return new Be("https://soundcloud.com/egill-antonsson/take-care-year-2002?in=egill-antonsson/sets/braedraminning","take-care-year-2002","Take Care (year 2002)",this.braedraminningArtworkPath,this.aboutBraedraminningTake2002,"https://open.spotify.com/track/6xiCd9HFh0SaJEngXtgldj","https://www.qobuz.com/album/braeraminning-in-memory-of-the-brothers-egill-antonsson/pa3y1de6ejnqb")}beLikeYou2002(){return new Be("https://soundcloud.com/egill-antonsson/be-like-you-year-2002?in=egill-antonsson/sets/braedraminning","be-like-you-year-2002","Be Like You (year 2002)",this.braedraminningArtworkPath,this.aboutBraedraminningTake2002,"https://open.spotify.com/track/4zcgAvMsU46YVTKGmS8vJA","https://www.qobuz.com/album/braeraminning-in-memory-of-the-brothers-egill-antonsson/pa3y1de6ejnqb")}story2002(){return new Be("https://soundcloud.com/egill-antonsson/story-year-2002?in=egill-antonsson/sets/braedraminning","story-year-2002","Story (year 2002)",this.braedraminningArtworkPath,this.aboutBraedraminningTake2002+"<br>\nI 'upped the drama' in the lyrics by knocking the headmaster OUT, instead of down.<br>\nI don't remember if it was intentional or not.\n","https://open.spotify.com/track/0zcnfEWqzmaCfp7hsbcA9Z","https://www.qobuz.com/album/braeraminning-in-memory-of-the-brothers-egill-antonsson/pa3y1de6ejnqb")}frumlag2002(){return new Be("https://soundcloud.com/egill-antonsson/frumlag-year-2002?in=egill-antonsson/sets/braedraminning","frumlag-year-2002","Frumlag (year 2002)",this.braedraminningArtworkPath,this.aboutBraedraminningTake2002,"https://open.spotify.com/track/5fFuGjJMqLS0iPMmiZ3SBc","https://www.qobuz.com/album/braeraminning-in-memory-of-the-brothers-egill-antonsson/pa3y1de6ejnqb")}world2002(){return new Be("https://soundcloud.com/egill-antonsson/world-year-2002?in=egill-antonsson/sets/braedraminning","world-year-2002","World (year 2002)",this.braedraminningArtworkPath,this.aboutBraedraminningTake2002+"<br>\nI think I 'upped the drama' in the lyrics with 'The world is nothing except hate'<br>\nas it could be that Egill sung 'The world is nothing I say \"Hey\"'.<br>\nI also added lyrics where missing, etc.<br>\n","https://open.spotify.com/track/5EFT7M2r9kiJqPn2EtXNoz","https://www.qobuz.com/album/braeraminning-in-memory-of-the-brothers-egill-antonsson/pa3y1de6ejnqb")}withoutThem2002(){return new Be("https://soundcloud.com/egill-antonsson/without-them-year-2002?in=egill-antonsson/sets/braedraminning","without-them-year-2002","Without them (year 2002)",this.braedraminningArtworkPath,this.aboutBraedraminningTake2002+"<br>\nI kept with the 'no no no' like in the original (probably the lyrics were not ready)<br>\nand in fact went all in on 'no no no' and other sounds :)\n","https://open.spotify.com/track/5cfstB4Y5eIFI79e4KBAk8","https://www.qobuz.com/album/braeraminning-in-memory-of-the-brothers-egill-antonsson/pa3y1de6ejnqb")}myDearOldBrothers(){return new Be("https://soundcloud.com/egill-antonsson/my-dear-old-brothers?in=egill-antonsson/sets/braedraminning","my-dear-old-brothers","My Dear Old Brothers",this.braedraminningArtworkPath,"I saw a chord progression with the title 'Lady Lobo' written in a note book that belonged to the brothers.<br>\nI thought this might be an original song and thus wanted to bring it to life for the album.<br>\nI added details and shaped the song (making some changes)<br>\nand wrote the lyrics (changing the title with it).\n","https://open.spotify.com/track/6mnJyUYVPeoEx8oKUBu4Zw","https://www.qobuz.com/album/braeraminning-in-memory-of-the-brothers-egill-antonsson/pa3y1de6ejnqb")}pesi1974(){return new Be("https://soundcloud.com/egill-antonsson/pesi-year-1974?in=egill-antonsson/sets/braedraminning","pesi-year-1974","P\xe9si (year 1974)",this.braedraminningArtworkPath,"J\xf3nas wrote this song for Egill to play on the wurlitzer piano.<br>\nRecorded with their band playing that was either Lazarus or Fl\xf3 (not sure which one).<br>\nEgill - wurlitzer<br>\nJ\xf3nas - guitar<br>\n(I will list the band mates later when I have my notes)\n","https://open.spotify.com/track/5wmAzE3Mc0uWjhjxRf95OQ","https://www.qobuz.com/album/braeraminning-in-memory-of-the-brothers-egill-antonsson/pa3y1de6ejnqb")}mouse1975(){return new Be("https://soundcloud.com/egill-antonsson/mouse-year-1975?in=egill-antonsson/sets/braedraminning","mouse-year-1975","Mouse (year 1975)",this.braedraminningArtworkPath,"Recorded with their band that was either Lazarus or Fl\xf3 (not sure which one).<br>\nEgill - wurlitzer and vocals<br>\nJ\xf3nas - guitar<br>\n(I will list the band mates later when I have my notes)\n","https://open.spotify.com/track/3qtGfywTgrjxBMQcCdN1xo","https://www.qobuz.com/album/braeraminning-in-memory-of-the-brothers-egill-antonsson/pa3y1de6ejnqb")}rubber1975(){return new Be("https://soundcloud.com/egill-antonsson/rubber-year-1975?in=egill-antonsson/sets/braedraminning","rubber-year-1975","Rubber (year 1975)",this.braedraminningArtworkPath,"Recorded with their band that was either Lazarus or Fl\xf3 (not sure which one).<br>\nEgill - wurlitzer and vocals<br>\nJ\xf3nas - guitar<br>\n(I will list the band mates later when I have my notes)\n","https://open.spotify.com/track/700fVJsCrH4BBpsMW7B60t","https://www.qobuz.com/album/braeraminning-in-memory-of-the-brothers-egill-antonsson/pa3y1de6ejnqb")}solos1975(){return new Be("https://soundcloud.com/egill-antonsson/solos-year-1975?in=egill-antonsson/sets/braedraminning","solos-year-1975","Solos (year 1975)",this.braedraminningArtworkPath,"Recorded with their band that was either Lazarus or Fl\xf3 (not sure which one).<br>\nEgill - organ<br>\nJ\xf3nas - guitar<br>\n(I will list the band mates later when I have my notes)\n","https://open.spotify.com/track/3X7wZlcTxFwkLs7rvEkkWZ","https://www.qobuz.com/album/braeraminning-in-memory-of-the-brothers-egill-antonsson/pa3y1de6ejnqb")}takeCare1976(){return new Be("https://soundcloud.com/egill-antonsson/take-care-year-1976?in=egill-antonsson/sets/braedraminning","take-care-year-1976","Take Care (year 1976)",this.braedraminningArtworkPath,"Egill playing by himself.<br>\nI think this is shortly after J\xf3nas is gone but I'm not sure,<br>\nthus I'm guessing a bit the year of this recording (and for the others as well).\n","https://open.spotify.com/track/2V0X8p2Tefcg5MTrnuuplo","https://www.qobuz.com/album/braeraminning-in-memory-of-the-brothers-egill-antonsson/pa3y1de6ejnqb")}beLikeYou1976(){return new Be("https://soundcloud.com/egill-antonsson/be-like-you-year-1976?in=egill-antonsson/sets/braedraminning","be-like-you-year-1976","Be Like You (year 1976)",this.braedraminningArtworkPath,"Egill playing by himself.<br>\nI think this is not long after J\xf3nas is gone but I'm not sure,<br>\nthus I'm guessing a bit the year of this recording (and for the others as well).\n","https://open.spotify.com/track/23YxXCBVwziMTdJnIGqLZx","https://www.qobuz.com/album/braeraminning-in-memory-of-the-brothers-egill-antonsson/pa3y1de6ejnqb")}story1976(){return new Be("https://soundcloud.com/egill-antonsson/story-year-1976?in=egill-antonsson/sets/braedraminning","story-year-1976","Story (year 1976)",this.braedraminningArtworkPath,"Egill playing by himself.<br>\nI think this is not long after J\xf3nas is gone but I'm not sure,<br>\nthus I'm guessing a bit the year of this recording (and for the others as well).\n","https://open.spotify.com/track/47Tf6lPTTaibh0LFGi6ULh","https://www.qobuz.com/album/braeraminning-in-memory-of-the-brothers-egill-antonsson/pa3y1de6ejnqb")}frumlag1977(){return new Be("https://soundcloud.com/egill-antonsson/frumlag-year-1977?in=egill-antonsson/sets/braedraminning","frumlag-year-1977","Frumlag (year 1977)",this.braedraminningArtworkPath,"Egill playing with his band mates from either Lazarus or Fl\xf3 (not sure which one).<br>\nEgill - organ<br>\n(I will list the band mates later when I have my notes)\n","https://open.spotify.com/track/1TV6QGFbW0mdtO8GqXCfay","https://www.qobuz.com/album/braeraminning-in-memory-of-the-brothers-egill-antonsson/pa3y1de6ejnqb")}world1977(){return new Be("https://soundcloud.com/egill-antonsson/world-year-1977?in=egill-antonsson/sets/braedraminning","world-year-1977","World (year 1977)",this.braedraminningArtworkPath,"Egill playing with his band mates from either Lazarus or Fl\xf3 (not sure which one).<br>\nEgill - vocals (and maybe guitar)<br>\n(I will list the band mates later when I have my notes)\n","https://open.spotify.com/track/6dI0WypRxmbUK7Rw9TaHpT","https://www.qobuz.com/album/braeraminning-in-memory-of-the-brothers-egill-antonsson/pa3y1de6ejnqb")}withoutThem1977(){return new Be("https://soundcloud.com/egill-antonsson/without-them-year-1977?in=egill-antonsson/sets/braedraminning","without-them-year-1977","Without them (year 1977)",this.braedraminningArtworkPath,"Egill playing with his band mates from either Lazarus or Fl\xf3 (not sure which one).<br>\nEgill - vocals (and maybe guitar)<br>\n(I will list the band mates later when I have my notes)\n","https://open.spotify.com/track/0rcIAwxbRtRhYbKX0bq142","https://www.qobuz.com/album/braeraminning-in-memory-of-the-brothers-egill-antonsson/pa3y1de6ejnqb")}votThemeSong(){const e="vikings-of-thule-theme-song";return new fd("EiiR4cwjNwY",!0,e,"Vikings of Thule Theme Song",`${this.pathToDirEgillAntonsson}${e}.jpg`,"The song for the Vikings of Thule video teaser. VoT was a game made by the company Gogogic. Lyrics by Jonas B. Antonsson, composed by Jonas and me, performed by me and mixed and produced by Julius Jonasson.","https://soundcloud.com/egill-antonsson/vikings-of-thule-theme-song","https://open.spotify.com/track/35LOjco7IykC60Pqq3DjuU?si=7245ec4caae24d82","https://www.qobuz.com/album/vikings-of-thule-theme-song-with-jonas-antonsson-julius-jonasson-egill-antonsson/k6jzobz1suzjb")}harmoniesOfShadeAndLight(){const e="harmonies-of-shade-and-light";return new Be("https://soundcloud.com/egill-antonsson/harmonies-of-shade-and-light",e,"Harmonies of Shade and Light",`${this.pathToDirEgillAntonsson}${e}.jpg`,'I got the idea of this song when I was with the family in Thailand at the beginning of 2017.<br>\nI borrowed a guitar with missing strings and created a harmony pattern and sung a melody over it.<br>\nIn circa 2019 I recorded the guitars and arranged the percussions from <a href="https://www.thelooploft.com/collections/drum-loops" target="_blank">The Loop Loft</a>.<br>\nIn the spring of 2021 my friend and music partner Sindri Bergmann Thorarinsson<br>\nhelped me structure the song and write the lyrics,<br>\nand he recorded my vocals in his studio in Reykjavik.<br>\nIn April 2022 I recorded the rest of the instruments, processed and mixed the song.',"https://open.spotify.com/track/1xHXUKERh3a6elM9VdPIUW","https://www.qobuz.com/album/harmonies-of-shade-and-light-egill-antonsson/y84mz2hhlrtbc")}weWillMeetAgain(){const e="we-will-meet-again";return new Be("https://soundcloud.com/egill-antonsson/we-will-meet-again",e,"We Will Meet Again",`${this.pathToDirEgillAntonsson}${e}.jpg`,"In the spring of 2021 my friend and music partner Sindri Bergmann Thorarinsson<br> asked me to collaborate with him to make a pop song.<br>\nAlthough we've played some pop over the years, we have not focused on creating one per se.<br>\nSo our goal now was to focus on the 'formula of what makes a good (modern) pop song',<br>\nand also speed up our workflow to complete the song in couple of days (from start to finish).<br>\nWe created the song and lyrics together, I sang in the lyrics and Sindri mixed, processed and polished the whole song.<br>\nWe put the song under artist Egill Antonsson (for convenience) although it's truly a collaboration.","https://open.spotify.com/track/27t1JaFQlOX6hhkVC6d59Z","https://www.qobuz.com/album/we-will-meet-again-egill-antonsson/hytrd9qqfadib")}magmaMerryGoRound(){const e="magma-merrygoround";return new Be("https://soundcloud.com/egill-antonsson/magma-merrygoround",e,"Magma MerryGoRound",`${this.pathToDirEgillAntonsson}${e}.jpg`,'Released at the <a href="https://edisonparty.com">Edison demo-party</a> in 2021 under my new handle/pseudonym Vulkanoman.<br>\nMy original title for the tune was \'Tivoli Chase Cop 27/16\' but I renamed<br>\nas I got more and more inspired by my recent trip to the then ongoing volcano eruption in <a href="https://en.wikipedia.org/wiki/Fagradalsfjall">Fagradallsfjall in Iceland</a>',"https://open.spotify.com/track/06bQmD7bI6N1qGDeIVsGYR","https://www.qobuz.com/album/magma-merrygoround-egill-antonsson/bqp8z0xr9lqja")}justInTime(){return new Be("https://soundcloud.com/egill-antonsson/just-in-time","just-in-time","Just in Time")}icelandSocksIntro(){const e="iceland-socks-intro";return new Be("https://soundcloud.com/egill-antonsson/iceland-socks-intro",e,"Iceland Socks: Intro",`${this.pathToDirEgillAntonsson}${e}.jpg`,'Sindri Bergman Thorarinsson and me made this for an Icelandic travel industry campaign that the company Gogogic created in 2008. The talented Gogogic employees were the puppeteers and you can watch the Iceland Socks Outtakes on <a href="https://youtu.be/6n3_NF0g2dg" target="_blank">YouTube</a>')}fortidin(){const e="fortidin";return new Be("https://soundcloud.com/egill-antonsson/fortidin",e,"Fort\xed\xf0in",`${this.pathToDirEgillAntonsson}${e}.jpg`)}toddlerTune(){const e="toddlers-tune";return new Be("https://soundcloud.com/egill-antonsson/toddler-tune",e,"Toddlers Tune",`${this.pathToDirEgillAntonsson}${e}.jpg`)}oddTimesInSpace(){return new Be("https://soundcloud.com/egill-antonsson/odd-times-in-space","odd-times-in-space","Odd Times in Space")}introduction(){const e="introduction";return new Be("https://soundcloud.com/egill-antonsson/introduction",e,"Introduction",`${this.pathToDirTribeOfOranges}${e}.jpg`,"Sindri Bergmann Thorarinsson and me made this for a theatre play,<br>\nand it was played at the start of it, and thus it's named Introduction.<br>\nFor the artwork I chose the 'the indian head', which is a valuable family artifact.")}routine(){return new Be("https://soundcloud.com/egill-antonsson/routine","routine","Routine",`${this.pathToDirTribeOfOranges}tribe-of-oranges.jpg`)}hhiCommercial(){return new Be("https://soundcloud.com/egill-antonsson/song-for-hhi-commercial","song-for-hhi-commercial","Song for HHI commercial",`${this.pathToDirTribeOfOranges}tribe-of-oranges.jpg`)}get artworkKuai(){return`${this.pathToDirKuai}KUAI.jpg`}pirringur(){return new Be("https://soundcloud.com/egill-antonsson/pirringur","pirringur","Pirringur",this.artworkKuai)}apollo(){return new Be("https://soundcloud.com/egill-antonsson/apollo","apollo","Apollo",this.artworkKuai)}andsetinn(){return new Be("https://soundcloud.com/egill-antonsson/andsetinn","andsetinn","Andsetinn",this.artworkKuai)}hamskipti(){return new Be("https://soundcloud.com/egill-antonsson/hamskipti","hamskipti","Hamskipti",this.artworkKuai)}rover(){return new Be("https://soundcloud.com/egill-antonsson/rover","rover","Rover",this.artworkKuai)}andefni(){return new Be("https://soundcloud.com/egill-antonsson/andefni","andefni","Andefni",this.artworkKuai)}agndofa(){return new Be("https://soundcloud.com/egill-antonsson/agndofa","agndofa","Agndofa",this.artworkKuai)}ofurte(){return new Be("https://soundcloud.com/egill-antonsson/ofurte","ofurte","Ofurte",this.artworkKuai)}lesblindaI(){return new Be("https://soundcloud.com/egill-antonsson/lesblinda-i","lesblinda-i","lesblinda I",this.artworkKuai)}lesblindaII(){return new Be("https://soundcloud.com/egill-antonsson/lesblinda-ii","lesblinda-ii","lesblinda II",this.artworkKuai)}godsruleLayered(){var e=this;const r=new bl(new QC(this.instanceEndedListeners,this.logService.log),[be.musicLoop("godsruleEnvironmentLayer",`${this.pathGame}/loton_MusicVillageEnvironmentLayer.ogg`,.075),be.musicLoop("godsruleStringLayer",`${this.pathGame}/loton_MusicVillageStringLayer.ogg`,.55),be.musicLoop("godsruleHarpLayer",`${this.pathGame}/loton_MusicVillageHarpLayer.ogg`,.4),be.musicLoop("godsrulePianoLayer",`${this.pathGame}/loton_MusicVillagePianoLayer.ogg`,.35)],()=>nn(function*(){const s=[e.soundManager.instance.getSound(r.soundDatas[0].key),e.soundManager.instance.getSound(r.soundDatas[1].key),e.soundManager.instance.getSound(r.soundDatas[2].key),e.soundManager.instance.getSound(r.soundDatas[3].key)],o=[];for(let a=0;a<s.length;a++){const c=s[a],{instance:u}=yield c.play();o.push(u),e.instancePlayedListeners.forEach(f=>f(u))}r.layeredMusicController.start(o)}),"godsrule-village","Godsrule: Village");return r}votLayered(){var e=this;const r=new bl(new QC(this.instanceEndedListeners,this.logService.log),[be.musicLoop("votWindLayer",`${this.pathGame}/VOT_InterfaceMusic_0.mp3`),be.musicLoop("votChoirLayer",`${this.pathGame}/VOT_InterfaceMusic_3.ogg`),be.musicLoop("votHarpLayer",`${this.pathGame}/VOT_InterfaceMusic_2.ogg`),be.musicLoop("votMelodyLayer",`${this.pathGame}/VOT_InterfaceMusic_1.ogg`)],()=>nn(function*(){const s=[e.soundManager.instance.getSound(r.soundDatas[0].key),e.soundManager.instance.getSound(r.soundDatas[1].key),e.soundManager.instance.getSound(r.soundDatas[2].key),e.soundManager.instance.getSound(r.soundDatas[3].key)],o=[];for(let a=0;a<s.length;a++){const c=s[a],{instance:u}=yield c.play();o.push(u),e.instancePlayedListeners.forEach(f=>f(u))}r.layeredMusicController.start(o)}),"vikings-of-thule-map","Vikings of Thule: Map");return r}cakePopParty(){var e=this;const r=new zn([be.music("cppMusicIntro",`${this.pathGame}/CPP_workMusicIntroScreen.ogg`,.7),be.music("cppMusicScaleBeat",`${this.pathGame}/CPP_musicTransitionBeatFade.ogg`,.6),be.music("cppMusicMakePop",`${this.pathGame}/CPP_workMusicMakePopLoop.ogg`,.7)],()=>nn(function*(){const s=e.soundManager.instance.getSound(r.soundDatas[0].key),o=e.soundManager.instance.getSound(r.soundDatas[1].key),a=e.soundManager.instance.getSound(r.soundDatas[2].key);let c,u=2;do{c=yield s.play(),e.instancePlayedListeners.forEach(f=>f(c.instance)),yield c.endedPromise,e.instanceEndedListeners.forEach(f=>f()),c=yield s.play(),e.instancePlayedListeners.forEach(f=>f(c.instance)),yield c.endedPromise,e.instanceEndedListeners.forEach(f=>f()),c=yield o.play(),e.instancePlayedListeners.forEach(f=>f(c.instance)),yield c.endedPromise,e.instanceEndedListeners.forEach(f=>f()),c=yield a.play(),e.instancePlayedListeners.forEach(f=>f(c.instance)),yield c.endedPromise,e.instanceEndedListeners.forEach(f=>f(1===u)),u--}while(u>0)}),"cake-pop-party","Cake Pop Party");return r}symbol6(){var e=this;const r=new zn([be.music("ssixMenu",`${this.pathGame}/SSIX_menu.ogg`),be.music("ssixGame",`${this.pathGame}/SSIX_game.ogg`),be.music("ssixHexago",`${this.pathGame}/SSIX_HexagoTune.ogg`)],()=>nn(function*(){const s=e.soundManager.instance.getSound(r.soundDatas[0].key),o=e.soundManager.instance.getSound(r.soundDatas[1].key),a=e.soundManager.instance.getSound(r.soundDatas[2].key);let c,u=2;do{c=yield s.play(),e.instancePlayedListeners.forEach(f=>f(c.instance)),yield c.endedPromise,e.instanceEndedListeners.forEach(f=>f()),c=yield o.play(),e.instancePlayedListeners.forEach(f=>f(c.instance)),yield c.endedPromise,e.instanceEndedListeners.forEach(f=>f()),c=yield a.play(),e.instancePlayedListeners.forEach(f=>f(c.instance)),yield c.endedPromise,e.instanceEndedListeners.forEach(f=>f(1===u)),u--}while(u>0)}),"symbol-6","Symbol 6");return r}softFreakFiesta(){var e=this;const r=new zn([be.music("sffIntroMenuMusic",`${this.pathGame}/SFF_IntroMenuMusic.ogg`,.9),be.music("sffMenuMusic",`${this.pathGame}/SFF_MenuMusic.ogg`,.9),be.music("sffLevelMusicNoEnv",`${this.pathGame}/SFF_LevelMusic_noEnv.ogg`),be.music("sffLevelMusicBubbling",`${this.pathGame}/SFF_LevelMusic_bubbling.ogg`),be.music("sffLoseJingle",`${this.pathGame}/SFF_LoseJingle.ogg`,.9),be.music("sffWinJingle",`${this.pathGame}/SFF_WinJingle.ogg`,.9)],()=>nn(function*(){const s=e.soundManager.instance.getSound(r.soundDatas[0].key),o=e.soundManager.instance.getSound(r.soundDatas[1].key),a=e.soundManager.instance.getSound(r.soundDatas[2].key),c=e.soundManager.instance.getSound(r.soundDatas[3].key),u=e.soundManager.instance.getSound(r.soundDatas[4].key),f=e.soundManager.instance.getSound(r.soundDatas[5].key);let g,p=!0;g=yield s.play(),e.instancePlayedListeners.forEach(y=>y(g.instance)),yield g.endedPromise,e.instanceEndedListeners.forEach(y=>y());let v=2;do{g=yield o.play(),e.instancePlayedListeners.forEach(y=>y(g.instance)),yield g.endedPromise,e.instanceEndedListeners.forEach(y=>y()),g=yield a.play(),e.instancePlayedListeners.forEach(y=>y(g.instance)),yield g.endedPromise,e.instanceEndedListeners.forEach(y=>y()),g=yield c.play(),e.instancePlayedListeners.forEach(y=>y(g.instance)),yield g.endedPromise,e.instanceEndedListeners.forEach(y=>y()),g=p?yield u.play():yield f.play(),p=!p,e.instancePlayedListeners.forEach(y=>y(g.instance)),yield g.endedPromise,e.instanceEndedListeners.forEach(y=>y(1===v)),--v}while(v>0)}),"soft-freak-fiesta","Soft Freak Fiesta");return r}habitarium(){var e=this;const r=new zn([be.music("habitariumMainTheme",`${this.pathGame}/Habitarium_main_theme.ogg`,.9),be.music("habitariumInGameLoop",`${this.pathGame}/Habitarium_InGameLoop.ogg`,.8)],()=>nn(function*(){const s=e.soundManager.instance.getSound(r.soundDatas[0].key),o=e.soundManager.instance.getSound(r.soundDatas[1].key);let a,c=2;do{a=yield s.play(),e.instancePlayedListeners.forEach(u=>u(a.instance)),yield a.endedPromise,e.instanceEndedListeners.forEach(u=>u()),a=yield o.play(),e.instancePlayedListeners.forEach(u=>u(a.instance)),yield a.endedPromise,e.instanceEndedListeners.forEach(u=>u(1===c)),c--}while(c>0)}),"habitarium","Habitarium");return r}tinyPlaces(){var e=this;const t="tiny-places",r=`${Ei.dir}game/${t}.png`,s=new zn([be.music("tpMainThemeIntro",`${this.pathGame}/TP_mainThemeIntro.ogg`,.8),be.music("tpMainThemeBridge",`${this.pathGame}/TP_mainThemeBridge.ogg`,.8),be.music("tpSpaceWorld",`${this.pathGame}/TP_spaceWorld.ogg`,.8),be.music("tpTomb",`${this.pathGame}/TP_tomb.ogg`,.8),be.music("tpLazyStyle",`${this.pathGame}/TP_lazyStyle.ogg`,.8),be.music("tpCutScene",`${this.pathGame}/TP_cutScene.ogg`,.8),be.music("tpInGame",`${this.pathGame}/TP_inGame.ogg`,.8),be.music("tpOutOfTime",`${this.pathGame}/TP_outoftime.ogg`,.8)],()=>nn(function*(){const o=e.soundManager.instance.getSound(s.soundDatas[0].key),a=e.soundManager.instance.getSound(s.soundDatas[1].key),c=e.soundManager.instance.getSound(s.soundDatas[2].key),u=e.soundManager.instance.getSound(s.soundDatas[3].key),f=e.soundManager.instance.getSound(s.soundDatas[4].key),p=e.soundManager.instance.getSound(s.soundDatas[5].key),g=e.soundManager.instance.getSound(s.soundDatas[6].key),v=e.soundManager.instance.getSound(s.soundDatas[7].key);let y;y=yield o.play(),e.instancePlayedListeners.forEach(b=>b(y.instance));const _=o.audioCtx.currentTime;y.instance.gainWrapper.setValueAtTime(.4,_).exponentialRampToValueAtTime(.8,_+.3),yield y.endedPromise,e.instanceEndedListeners.forEach(b=>b()),y=yield a.play(),e.instancePlayedListeners.forEach(b=>b(y.instance)),yield y.endedPromise,e.instanceEndedListeners.forEach(b=>b()),y=yield c.play(),e.instancePlayedListeners.forEach(b=>b(y.instance)),yield y.endedPromise,e.instanceEndedListeners.forEach(b=>b()),y=yield c.play(),e.instancePlayedListeners.forEach(b=>b(y.instance)),yield y.endedPromise,e.instanceEndedListeners.forEach(b=>b()),y=yield u.play(),e.instancePlayedListeners.forEach(b=>b(y.instance)),yield y.endedPromise,e.instanceEndedListeners.forEach(b=>b()),y=yield u.play(),e.instancePlayedListeners.forEach(b=>b(y.instance)),yield y.endedPromise,e.instanceEndedListeners.forEach(b=>b()),y=yield f.play(),e.instancePlayedListeners.forEach(b=>b(y.instance)),yield y.endedPromise,e.instanceEndedListeners.forEach(b=>b()),y=yield f.play(),e.instancePlayedListeners.forEach(b=>b(y.instance)),yield y.endedPromise,e.instanceEndedListeners.forEach(b=>b()),y=yield p.play(),e.instancePlayedListeners.forEach(b=>b(y.instance)),yield y.endedPromise,e.instanceEndedListeners.forEach(b=>b()),y=yield g.play(),e.instancePlayedListeners.forEach(b=>b(y.instance)),yield y.endedPromise,e.instanceEndedListeners.forEach(b=>b()),y=yield v.play(),e.instancePlayedListeners.forEach(b=>b(y.instance)),yield y.endedPromise,e.instanceEndedListeners.forEach(b=>b(!0))}),t,"Tiny Places",r);return s}jol2008(){var e=this;const r=new zn([be.music("jol2008mainMusic",`${this.pathGame}/jolagogo2008_main_music.ogg`),be.music("jol2008gameOver",`${this.pathGame}/jolagogo2008_game_over.ogg`)],()=>nn(function*(){const s=e.soundManager.instance.getSound(r.soundDatas[0].key),o=e.soundManager.instance.getSound(r.soundDatas[1].key);let a;a=yield s.play(),e.instancePlayedListeners.forEach(c=>c(a.instance)),yield a.endedPromise,e.instanceEndedListeners.forEach(c=>c()),a=yield s.play(),e.instancePlayedListeners.forEach(c=>c(a.instance)),yield a.endedPromise,e.instanceEndedListeners.forEach(c=>c()),a=yield o.play(),e.instancePlayedListeners.forEach(c=>c(a.instance)),yield a.endedPromise,e.instanceEndedListeners.forEach(c=>c(!0))}),"christmas-game-2008","Christmas Game 2008");return r}jol2009(){var e=this;const r=new zn([be.music("jol2009bridge",`${this.pathGame}/jolagogo2009_Bridge.ogg`),be.music("jol2009chorus",`${this.pathGame}/jolagogo2009_Chorus.ogg`)],()=>nn(function*(){const s=e.soundManager.instance.getSound(r.soundDatas[0].key),o=e.soundManager.instance.getSound(r.soundDatas[1].key);let a,c=2;do{if(a=yield s.play(),e.instancePlayedListeners.forEach(u=>u(a.instance)),2===c){const u=s.audioCtx.currentTime;a.instance.gainWrapper.setValueAtTime(.1,u).exponentialRampToValueAtTime(1,u+.25)}yield a.endedPromise,e.instanceEndedListeners.forEach(u=>u()),a=yield o.play(),e.instancePlayedListeners.forEach(u=>u(a.instance)),yield a.endedPromise,e.instanceEndedListeners.forEach(u=>u(1===c)),c--}while(c>0)}),"christmas-game-2009","Christmas Game 2009");return r}whosYourFriend(){var e=this;const r=new zn([be.music("wyf",`${this.pathGame}/WYF_ThemeSong.ogg`)],()=>nn(function*(){const s=e.soundManager.instance.getSound(r.soundDatas[0].key),{instance:o,endedPromise:a}=yield s.play();e.instancePlayedListeners.forEach(c=>c(o)),yield a,e.instanceEndedListeners.forEach(c=>c(!0))}),"whos-your-friend","Who's Your Friend");return r}knowYourFriend(){var e=this;const r=new zn([be.music("kyfIntroMusic",`${this.pathGame}/KYF_IntroMusic_WithAudience.ogg`),be.music("kyf90secMusic",`${this.pathGame}/KYF_90secondsMusic.ogg`)],()=>nn(function*(){const s=e.soundManager.instance.getSound(r.soundDatas[0].key),o=e.soundManager.instance.getSound(r.soundDatas[1].key);let a;a=yield o.play(),e.instancePlayedListeners.forEach(c=>c(a.instance)),yield a.endedPromise,e.instanceEndedListeners.forEach(c=>c()),a=yield s.play(),e.instancePlayedListeners.forEach(c=>c(a.instance)),yield a.endedPromise,e.instanceEndedListeners.forEach(c=>c()),a=yield s.play(),e.instancePlayedListeners.forEach(c=>c(a.instance)),yield a.endedPromise,e.instanceEndedListeners.forEach(c=>c()),a=yield o.play(),e.instancePlayedListeners.forEach(c=>c(a.instance)),yield a.endedPromise,e.instanceEndedListeners.forEach(c=>c(!0))}),"know-your-friend","Know Your Friend");return r}stackem(){var e=this;const r=new zn([be.music("stackem",`${this.pathGame}/Stackem_Tune_loop.ogg`,.9)],()=>nn(function*(){const s=e.soundManager.instance.getSound(r.soundDatas[0].key);let o=2;do{const{instance:a,endedPromise:c}=yield s.play();e.instancePlayedListeners.forEach(u=>u(a)),yield c,e.instanceEndedListeners.forEach(u=>u()),o--}while(o>0)}),"stack-em","Stack'em");return r}glowbulleville(){var e=this;const r=new zn([be.music("glowMainMusic",`${this.pathGame}/GLOB_main_music.mp3`,.8),be.music("glowVillageMusic",`${this.pathGame}/GLOB_village_music.mp3`),be.music("glowWack",`${this.pathGame}/GLOB_wack_a_mole.mp3`,.8)],()=>nn(function*(){const s=e.soundManager.instance.getSound(r.soundDatas[0].key),o=e.soundManager.instance.getSound(r.soundDatas[1].key),a=e.soundManager.instance.getSound(r.soundDatas[2].key);let c,u=2;do{c=yield s.play(),e.instancePlayedListeners.forEach(f=>f(c.instance)),yield c.endedPromise,e.instanceEndedListeners.forEach(f=>f()),c=yield s.play(),e.instancePlayedListeners.forEach(f=>f(c.instance)),yield c.endedPromise,e.instanceEndedListeners.forEach(f=>f()),c=yield o.play(),e.instancePlayedListeners.forEach(f=>f(c.instance)),yield c.endedPromise,e.instanceEndedListeners.forEach(f=>f()),c=yield o.play(),e.instancePlayedListeners.forEach(f=>f(c.instance)),yield c.endedPromise,e.instanceEndedListeners.forEach(f=>f()),c=yield a.play(),e.instancePlayedListeners.forEach(f=>f(c.instance)),yield c.endedPromise,e.instanceEndedListeners.forEach(f=>f(1===u)),u--}while(u>0)}),"glowbulleville","Glowbulleville");return r}godsrule(){var e=this;const r=new zn([be.music("godsruleBattle",`${this.pathGame}/LOTON_BattleBaseLayer.ogg`),be.music("godsruleDefeat",`${this.pathGame}/LOTON_CombatDefeatMusic.ogg`),be.music("godsruleVictory",`${this.pathGame}/LOTON_CombatVictory.ogg`)],()=>nn(function*(){const s=e.soundManager.instance.getSound(r.soundDatas[0].key),o=e.soundManager.instance.getSound(r.soundDatas[1].key),a=e.soundManager.instance.getSound(r.soundDatas[2].key);let c,u=2;do{c=yield s.play(),e.instancePlayedListeners.forEach(g=>g(c.instance)),yield c.endedPromise,e.instanceEndedListeners.forEach(g=>g()),c=yield o.play(),e.instancePlayedListeners.forEach(g=>g(c.instance)),yield c.endedPromise,e.instanceEndedListeners.forEach(g=>g()),c=yield a.play(),e.instancePlayedListeners.forEach(g=>g(c.instance)),yield c.endedPromise,e.instanceEndedListeners.forEach(g=>g()),u--}while(u>0);c=yield s.play(),e.instancePlayedListeners.forEach(g=>g(c.instance));const p=c.instance.sourceNode.buffer?.duration||10;c.instance.gainWrapper.setTargetAtTime(0,s.audioCtx.currentTime+p/2,p/6),yield c.endedPromise,e.instanceEndedListeners.forEach(g=>g(!0))}),"godsrule-battle","Godsrule: Battle");return r}vot(){var e=this;const r=new zn([be.music("votFeudDrums",`${this.pathGame}/VOT_FeudMusic_drums.ogg`),be.music("votFeud",`${this.pathGame}/VOT_FeudMusic.ogg`),be.music("votFeudEnding",`${this.pathGame}/VOT_FeudEnding.ogg`)],()=>nn(function*(){const s=e.soundManager.instance.getSound(r.soundDatas[0].key),o=e.soundManager.instance.getSound(r.soundDatas[1].key),a=e.soundManager.instance.getSound(r.soundDatas[2].key);let c;c=yield s.play(),e.instancePlayedListeners.forEach(g=>g(c.instance)),yield c.endedPromise,e.instanceEndedListeners.forEach(g=>g()),c=yield o.play(),e.instancePlayedListeners.forEach(g=>g(c.instance)),yield c.endedPromise,e.instanceEndedListeners.forEach(g=>g()),c=yield o.play(),e.instancePlayedListeners.forEach(g=>g(c.instance)),c.instance.gainWrapper.setTargetAtTime(0,o.audioCtx.currentTime+(c.instance.sourceNode.buffer?.duration||10)-.799,1);const p=function(){var g=nn(function*(){e.instanceEndedListeners.forEach(v=>v()),c=yield a.play(),e.instancePlayedListeners.forEach(v=>v(c.instance)),yield c.endedPromise,e.instanceEndedListeners.forEach(v=>v(!0))});return function(){return g.apply(this,arguments)}}();e.timeout=setTimeout(()=>{p()},1e3*(c.instance.sourceNode.buffer?.duration||10)-799)}),"vikings-of-thule-fued","Vikings of Thule: Feud");return r}crisisGame(){var e=this;const r=new zn([be.music("crisisEnd",`${this.pathGame}/Krepp_Endir.ogg`,.9)],()=>nn(function*(){const s=e.soundManager.instance.getSound(r.soundDatas[0].key);let o;o=yield s.play(),e.instancePlayedListeners.forEach(a=>a(o.instance)),yield o.endedPromise,e.instanceEndedListeners.forEach(a=>a(!0))}),"the-crisis-game","The Crisis Game");return r}static#e=this.\u0275fac=function(t){return new(t||Il)(U(Uo),U(Mi))};static#t=this.\u0275prov=X({token:Il,factory:Il.\u0275fac,providedIn:"root"})}class XC{}class Al{constructor(){this.highestUniqueBorder=1,this.uniqueNumberTracking=!1,this.uniqueNumbers=new Map}generateRandomNumber(e){return Math.floor(e*Math.random())}startUniqueNumberTracking(e){if(e<=0)throw new eD(eD.msgNumberMustBeHigherThanZero);this.uniqueNumberTracking=!0,this.highestUniqueBorder=e,this.uniqueNumbers.clear()}stopUniqueNumberTracking(){this.uniqueNumberTracking=!1,this.uniqueNumbers.clear()}generateUniqueRandomNumber(){if(!this.uniqueNumberTracking)return-1;this.uniqueNumbers.size===this.highestUniqueBorder&&this.uniqueNumbers.clear();let e=0;if(this.uniqueNumbers.size===this.highestUniqueBorder-1){for(let t=0;t<=this.uniqueNumbers.size;t++)if(!this.uniqueNumbers.has(t)){e=t;break}}else do{e=this.generateRandomNumber(this.highestUniqueBorder)}while(this.uniqueNumbers.has(e));return this.uniqueNumbers.set(e,!0),e}static#e=this.\u0275fac=function(t){return new(t||Al)};static#t=this.\u0275prov=X({token:Al,factory:Al.\u0275fac,providedIn:"root"})}class eD{constructor(e){this.name="RandomNumberError",this.message=e}static#e=this.msgNumberMustBeHigherThanZero="Number must be > 0"}class Os{constructor(e,t,i,r,s,o,a,c,u,f){this.soundManager=e,this.musicStreamer=t,this.youtubeService=i,this.realtimeVisualService=r,this.windowRef=s,this.myTracks=o,this.randomNumber=a,this.messageService=c,this.htmlService=u,this.logService=f,this.label="MusicService",this.urlPathRoot="music/",this.windowWidth=300,this._playState="Stopped",this._playStateChangeListener=()=>{},this._isShuffle=!1,this.setupInstanceListeners(),this.soundManager.instance.init(this.windowRef.nativeWindow,f.log),this.myTracks.init(),this._byTracks=o.byTracks,this.tracks=o.flatTracks,this._isShuffle?(a.startUniqueNumberTracking(this.tracks.length),this.nextSelectedTrack=this.tracks[a.generateUniqueRandomNumber()]):this.nextSelectedTrack=this.tracks[0],this._selectedTrack=this.nextSelectedTrack,this.subscription=this.messageService.onMessage().subscribe(p=>{"YoutubeVolumeChange"===p.type&&this.setVolumeAndMutedFromYoutubePlayer()})}get selectedTrack(){return this._selectedTrack}get byTracks(){return this._byTracks}setSelectTrackByRootUrl(e){let t=this.myTracks.getTrackByRootUrl(e);void 0===t&&(this.logService.log("Error",`could not get track by rootUrl ${e}, returning first track`),t=this.tracks[0]),this._selectedTrack=this.nextSelectedTrack=t,this._isShuffle=!1,this.isSelectedTrackWithActiveYoutubeVisuals?this.youtubeService.onWindowInitSize(this.windowWidth,0):this.setHeaderContainerHeightForMyPlayer()}get playState(){return this._playState}get isShuffle(){return this._isShuffle}ngOnDestroy(){this.subscription instanceof H&&this.subscription.unsubscribe()}sendYoutubePlayerElement(e){this.youtubeService.savePlayerElement(e)}onWindowInitSize(e,t){this.youtubeService.onWindowInitSize(e,t),this.windowWidth=e}onWindowResize(e,t){this.isSelectedTrackWithActiveYoutubeVisuals?this.youtubeService.onWindowResize(e,t):this.setHeaderContainerHeightForMyPlayer(),this.windowWidth=e}get isSelectedTrackWithActiveYoutubeVisuals(){return"Youtube"==this._selectedTrack.source&&!0===this._selectedTrack.isGraphicsActive}setHeaderContainerHeightForMyPlayer(){let e=this.htmlService.get("headerContainer"),t=this.htmlService.get("headerBackground");e.value.nativeElement.style.height="98px",t.value.nativeElement.style.height="98px"}onYoutubePlayerReady(e){this.youtubeService.onPlayerReady(e,100*this.masterGain,this.isSelectedTrackWithActiveYoutubeVisuals)}OnYoutubePlayerStateChange(e){e===YT.PlayerState.PAUSED&&"Paused"!==this.playState?this.pause():e!==YT.PlayerState.PLAYING&&e!==YT.PlayerState.BUFFERING||"Playing"===this.playState?e===YT.PlayerState.ENDED&&this.NextTrackAndPlayFromStart():this.play()}minimizeMusicPlayer(e){"Youtube"===this.selectedTrack.source&&this.selectedTrack.displayOnYoutube&&(this.selectedTrack.isGraphicsActive=!e,e?this.setHeaderContainerHeightForMyPlayer():this.youtubeService.onWindowResize(this.windowWidth,0))}initStreamers(){this.initSoundCloudStreamer(),this.initRealtimeVisualService()}initSoundCloudStreamer(){if(!this.musicStreamer.isInitialized){this.musicStreamer.init();var e=this.getStreamUrl(this._selectedTrack);""!=e&&this.musicStreamer.load(e,!1)}}initRealtimeVisualService(){this.realtimeVisualService.init()}playerUiInitialized(e){this.playerUiGainsDisabled=e}getStreamUrl(e){return e.soundcloudUrl}toggleShuffle(){this._isShuffle=!this._isShuffle,this._isShuffle&&this.randomNumber.startUniqueNumberTracking(this.tracks.length)}OnUiPlayOrPause(){switch(this.playState){case"Playing":this.pause();break;case"Paused":this.play();break;case"Stopped":this.playFromStart();break;default:return}}onUiNextTrack(){this.nextTrack(),this.playFromStart()}onUiTrackSelected(e){this.nextSelectedTrack=e,this.playFromStart()}play(){switch(this.logService.log("Info","play() in MusicService"),this._selectedTrack.source){case"Youtube":this.youtubeService.play();break;case"Soundcloud":this.musicStreamer.play();break;default:this.playViaSoundManager()}}playViaSoundManager(){this.soundManager.play(),this._playState="Playing"}playFromStart(){switch(this.logService.log("Info","playFromStart() in MusicService"),this.stop(),this._playState="Loading",this._selectedTrack=this.nextSelectedTrack,this._selectedTrack.source){case"Youtube":this.youtubeService.playFromStart(this._selectedTrack),this.isSelectedTrackWithActiveYoutubeVisuals?this.youtubeService.onWindowResize(this.windowWidth,0):this.setHeaderContainerHeightForMyPlayer();break;case"Soundcloud":this.musicStreamer.playFromStart(this._selectedTrack),this.setHeaderContainerHeightForMyPlayer();break;default:this.soundManager.playFromStart(this._selectedTrack,this.playerUiGainsDisabled),this.setHeaderContainerHeightForMyPlayer()}}pause(){switch(this.logService.log("Info","pause() in MusicService"),this._selectedTrack.source){case"Youtube":this.pauseYoutube();break;case"Soundcloud":this.pauseSoundcloud();break;default:this.soundManager.instance.pause(),this._playState="Paused"}}pauseYoutube(){this.youtubeService.pause(),this._playState="Paused"}pauseSoundcloud(){this.musicStreamer.pause(),this._playState="Paused"}stop(){switch(this.logService.log("Info","stop() in MusicService"),this._selectedTrack.source){case"Soundcloud":this.musicStreamer.pause();break;case"Local":this.soundManager.stop(this._selectedTrack),this.myTracks.instanceEndedListeners.forEach(e=>e(!1));break;case"Youtube":this.youtubeService.pause()}this._playState="Stopped"}nextTrack(){let e;e=this._isShuffle?this.randomNumber.generateUniqueRandomNumber():this._selectedTrack.index===this.tracks.length-1?0:this._selectedTrack.index+1,this.logService.log("Info","nextIndex",e),this.nextSelectedTrack=this.tracks[e]}get masterGain(){return this.soundManager.instance.masterGain}set masterGain(e){this.soundManager.instance.masterGain=e,this.musicStreamer.volume=100*e,this.youtubeService.volume=100*e}get masterMuted(){return this.soundManager.instance.masterMuted}set masterMuted(e){this.soundManager.instance.masterMuted=e,this.musicStreamer.muted=e,this.youtubeService.muted=e}setVolumeAndMutedFromYoutubePlayer(){let e=this.youtubeService.volume;this.soundManager.instance.masterGain=e/100,this.musicStreamer.volume=e;let t=this.youtubeService.muted;this.soundManager.instance.masterMuted!==t&&(this.soundManager.instance.masterMuted=t,this.musicStreamer.muted=t)}setupInstanceListeners(){this.addInstancePlayedListener(`${this.label} playedListener`,e=>{this.onPlayed()}),this.addInstanceEndedListener(`${this.label} endedListener`,(e,t)=>{e&&this.NextTrackAndPlayFromStart(),this.myTracks.timeout&&(clearTimeout(this.myTracks.timeout),this.myTracks.timeout=void 0)})}NextTrackAndPlayFromStart(){this.nextTrack(),this.playFromStart()}onPlayed(){this._playState="Playing",this._playStateChangeListener()}addInstancePlayedListener(e,t){this.myTracks.instancePlayedListeners.set(e,t),this.musicStreamer.instancePlayedListeners.set(e,t),this.youtubeService.instancePlayedListeners.set(e,t)}addInstanceEndedListener(e,t){this.myTracks.instanceEndedListeners.set(e,t),this.musicStreamer.instanceEndedListeners.set(e,t),this.youtubeService.instanceEndedListeners.set(e,t)}addPlayStateChangeListener(e){this._playStateChangeListener=e}removeInstancePlayedListener(e){this.myTracks.instancePlayedListeners.delete(e)}removeInstanceEndedListener(e){this.myTracks.instanceEndedListeners.delete(e),this.musicStreamer.instanceEndedListeners.delete(e)}static#e=this.\u0275fac=function(t){return new(t||Os)(U(Uo),U(_l),U(wl),U(Sl),U(Ho),U(Il),U(XC),U(ks),U(Ps),U(Mi))};static#t=this.\u0275prov=X({token:Os,factory:Os.\u0275fac,providedIn:"root"})}const tD=function(n){return{nodeSelected:n}};function N3(n,e){if(1&n){const t=Vr();d(0,"div",9),ct("click",function(){const s=Pr(t).$implicit;return Or(Ne(3).onPostClick(s))}),l(1),h()}if(2&n){const t=e.$implicit,i=Ne(3);T("ngClass",Ur(2,tD,t===i.selectedPost)),C(1),Qe(" ",t.title," ")}}function F3(n,e){if(1&n&&(d(0,"div",7),Le(1,N3,2,4,"div",8),h()),2&n){const t=Ne().$implicit;C(1),T("ngForOf",t.posts)}}const nD=function(n,e){return{branchIcon:!0,branchAnimateClose:n,branchAnimateOpen:e}};function V3(n,e){if(1&n){const t=Vr();d(0,"div")(1,"div",3),ct("click",function(){const s=Pr(t).index;return Or(Ne().onSeriesClick(s))}),d(2,"div",4),m(3,"div",5),h(),d(4,"span"),l(5),h()(),Le(6,F3,2,1,"div",6),h()}if(2&n){const t=e.$implicit,i=e.index,r=Ne();C(3),T("ngClass",Ga(3,nD,r.openedUiSeriesIndex!=i,r.openedUiSeriesIndex===i)),C(2),nt(t.title),C(1),T("ngIf",r.openedUiSeriesIndex===i)}}function U3(n,e){if(1&n){const t=Vr();d(0,"div",9),ct("click",function(){const s=Pr(t).$implicit;return Or(Ne(3).onPostClick(s))}),l(1),h()}if(2&n){const t=e.$implicit,i=Ne(3);T("ngClass",Ur(2,tD,t===i.selectedPost)),C(1),Qe(" ",t.title," ")}}function H3(n,e){if(1&n&&(d(0,"div",7),Le(1,U3,2,4,"div",8),h()),2&n){const t=Ne().$implicit;C(1),T("ngForOf",t.posts)}}function B3(n,e){if(1&n){const t=Vr();d(0,"div")(1,"div",3),ct("click",function(){const s=Pr(t).index;return Or(Ne().onSeriesClick(s))}),d(2,"div",4),m(3,"div",5),h(),d(4,"span"),l(5),h()(),Le(6,H3,2,1,"div",6),h()}if(2&n){const t=e.$implicit,i=e.index,r=Ne();C(3),T("ngClass",Ga(3,nD,r.openedUiSeriesIndex!=i,r.openedUiSeriesIndex===i)),C(2),nt(t.title),C(1),T("ngIf",r.openedUiSeriesIndex===i)}}class gd{constructor(e,t,i,r){this.blogService=e,this.router=t,this.route=i,this.musicService=r,this.openedUiSeriesIndex=0,this.selectedSeriesIndex=0,this.router.events.pipe($n(s=>s instanceof br)).subscribe(s=>{const o=s.urlAfterRedirects;if("/blog"===o)this.blogService.selectedPost=this.blogService.posts[0],this.router.navigate([this.selectedPost.routePath],{relativeTo:this.route});else{const a=this.blogService.tryGetPostWithRoutPath(o);null!==a&&(this.blogService.selectedPost=a)}}),this.musicService.minimizeMusicPlayer(!0)}get blogSeries(){return this.blogService.series}get selectedPost(){return this.blogService.selectedPost}ngOnDestroy(){this.musicService.minimizeMusicPlayer(!1)}onSeriesClick(e){this.openedUiSeriesIndex=e}onPostClick(e){this.selectedSeriesIndex=this.openedUiSeriesIndex,this.blogService.selectedPost=e,this.router.navigate([this.selectedPost.routePath],{relativeTo:this.route}),window.scroll(0,0)}static#e=this.\u0275fac=function(t){return new(t||gd)(x(Fo),x(bn),x(Yr),x(Os))};static#t=this.\u0275cmp=kt({type:gd,selectors:[["app-blog"]],decls:6,vars:2,consts:[[1,"treeContainer","noSelect"],[4,"ngFor","ngForOf"],[1,"treeContainer"],[1,"branchContainer",3,"click"],[1,"branchIconContainer"],[3,"ngClass"],["class","nodeContainer NodeFadeIn",4,"ngIf"],[1,"nodeContainer","NodeFadeIn"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"]],template:function(t,i){1&t&&(d(0,"div",0),Le(1,V3,7,6,"div",1),h(),m(2,"router-outlet")(3,"br"),d(4,"div",2),Le(5,B3,7,6,"div",1),h()),2&t&&(C(1),T("ngForOf",i.blogSeries),C(4),T("ngForOf",i.blogSeries))},dependencies:[nd,el,tl,Mn],styles:[".redFail[_ngcontent-%COMP%]{color:var(--colorRed)}.greenPass[_ngcontent-%COMP%]{color:var(--colorGreenLight)}.greenRefactor[_ngcontent-%COMP%]{color:var(--colorGreenLightMed)}.outOfScope[_ngcontent-%COMP%]{color:var(--colorGrayLight)}.byAndDate[_ngcontent-%COMP%]{text-align:center}.noBulletinPoint[_ngcontent-%COMP%]{list-style:none}"]})}function md(n,e){return new q(t=>{const i=n.length;if(0===i)return void t.complete();const r=new Array(i);let s=0,o=0;for(let a=0;a<i;a++){const c=he(n[a]);let u=!1;t.add(c.subscribe({next:f=>{u||(u=!0,o++),r[a]=f},error:f=>t.error(f),complete:()=>{s++,(s===i||!u)&&(o===i&&t.next(e?e.reduce((f,p,g)=>(f[p]=r[g],f),{}):r),t.complete())}}))}})}let iD=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(x(Xn),x(jt))},n.\u0275dir=ve({type:n}),n})(),Rs=(()=>{class n extends iD{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=ft(n)))(i||n)}}(),n.\u0275dir=ve({type:n,features:[He]}),n})();const Ti=new Q("NgValueAccessor"),$3={provide:Ti,useExisting:ht(()=>xl),multi:!0},W3=new Q("CompositionEventMode");let xl=(()=>{class n extends iD{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function z3(){const n=Xi()?Xi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(x(Xn),x(jt),x(W3,8))},n.\u0275dir=ve({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&ct("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[vt([$3]),He]}),n})();function Jr(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function sD(n){return null!=n&&"number"==typeof n.length}const Ln=new Q("NgValidators"),Qr=new Q("NgAsyncValidators"),K3=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Xr{static min(e){return function oD(n){return e=>{if(Jr(e.value)||Jr(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function aD(n){return e=>{if(Jr(e.value)||Jr(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function lD(n){return Jr(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function cD(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function uD(n){return Jr(n.value)||K3.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function dD(n){return e=>Jr(e.value)||!sD(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return hD(e)}static pattern(e){return function fD(n){if(!n)return vd;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Jr(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return bD(e)}static composeAsync(e){return _D(e)}}function hD(n){return e=>sD(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function vd(n){return null}function pD(n){return null!=n}function gD(n){return Ra(n)?he(n):n}function mD(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function vD(n,e){return e.map(t=>t(n))}function yD(n){return n.map(e=>function Y3(n){return!n.validate}(e)?e:t=>e.validate(t))}function bD(n){if(!n)return null;const e=n.filter(pD);return 0==e.length?null:function(t){return mD(vD(t,e))}}function Vg(n){return null!=n?bD(yD(n)):null}function _D(n){if(!n)return null;const e=n.filter(pD);return 0==e.length?null:function(t){return function j3(...n){if(1===n.length){const e=n[0];if(Ze(e))return md(e,null);if($t(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return md(t.map(i=>e[i]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return md(n=1===n.length&&Ze(n[0])?n[0]:n,null).pipe($(t=>e(...t)))}return md(n,null)}(vD(t,e).map(gD)).pipe($(mD))}}function Ug(n){return null!=n?_D(yD(n)):null}function wD(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function CD(n){return n._rawValidators}function DD(n){return n._rawAsyncValidators}function Hg(n){return n?Array.isArray(n)?n:[n]:[]}function yd(n,e){return Array.isArray(n)?n.includes(e):n===e}function ED(n,e){const t=Hg(e);return Hg(n).forEach(r=>{yd(t,r)||t.push(r)}),t}function MD(n,e){return Hg(e).filter(t=>!yd(n,t))}class TD{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Vg(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ug(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class qn extends TD{get formDirective(){return null}get path(){return null}}class es extends TD{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class SD{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Bg=(()=>{class n extends SD{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(x(es,2))},n.\u0275dir=ve({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&hi("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[He]}),n})(),jg=(()=>{class n extends SD{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(x(qn,10))},n.\u0275dir=ve({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,i){2&t&&hi("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[He]}),n})();const kl="VALID",_d="INVALID",Go="PENDING",Pl="DISABLED";function Wg(n){return(wd(n)?n.validators:n)||null}function qg(n,e){return(wd(e)?e.asyncValidators:n)||null}function wd(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function AD(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new z(1e3,"");if(!i[t])throw new z(1001,"")}function xD(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new z(1002,"")})}class Cd{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===kl}get invalid(){return this.status===_d}get pending(){return this.status==Go}get disabled(){return this.status===Pl}get enabled(){return this.status!==Pl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(ED(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ED(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(MD(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(MD(e,this._rawAsyncValidators))}hasValidator(e){return yd(this._rawValidators,e)}hasAsyncValidator(e){return yd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Go,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Pl,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=kl,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===kl||this.status===Go)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Pl:kl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Go,this._hasOwnPendingAsyncValidator=!0;const t=gD(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new et,this.statusChanges=new et}_calculateStatus(){return this._allControlsDisabled()?Pl:this.errors?_d:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Go)?Go:this._anyControlsHaveStatus(_d)?_d:kl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){wd(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function nV(n){return Array.isArray(n)?Vg(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function iV(n){return Array.isArray(n)?Ug(n):n||null}(this._rawAsyncValidators)}}class Ol extends Cd{constructor(e,t,i){super(Wg(t),qg(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){xD(this,0,e),Object.keys(e).forEach(i=>{AD(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class kD extends Ol{}const Rl=new Q("CallSetDisabledState",{providedIn:"root",factory:()=>Kg}),Kg="always";function Ll(n,e,t=Kg){Yg(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function sV(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&PD(n,e)})}(n,e),function aV(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function oV(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&PD(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function rV(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Ed(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Td(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Md(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Yg(n,e){const t=CD(n);null!==e.validator?n.setValidators(wD(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=DD(n);null!==e.asyncValidator?n.setAsyncValidators(wD(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();Md(e._rawValidators,r),Md(e._rawAsyncValidators,r)}function Td(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=CD(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const r=DD(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}const i=()=>{};return Md(e._rawValidators,i),Md(e._rawAsyncValidators,i),t}function PD(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function LD(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function ND(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Fl=class extends Cd{constructor(e=null,t,i){super(Wg(t),qg(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),wd(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=ND(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){LD(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){LD(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){ND(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let em=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ve({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const mV={provide:Ti,useExisting:ht(()=>tm),multi:!0};let tm=(()=>{class n extends Rs{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=i=>{t(""==i?null:parseFloat(i))}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=ft(n)))(i||n)}}(),n.\u0275dir=ve({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,i){1&t&&ct("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[vt([mV]),He]}),n})(),BD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=an({}),n})();const nm=new Q("NgModelWithFormControlWarning"),wV={provide:qn,useExisting:ht(()=>Vl)};let Vl=(()=>{class n extends qn{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new et,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Td(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return Ll(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){Ed(t.control||null,t,!1),function dV(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,function RD(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(Ed(i||null,t),(n=>n instanceof Fl)(r)&&(Ll(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);(function OD(n,e){Yg(n,e)})(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function lV(n,e){return Td(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Yg(this.form,this),this._oldForm&&Td(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(x(Ln,10),x(Qr,10),x(Rl,8))},n.\u0275dir=ve({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&ct("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[vt([wV]),He,Jn]}),n})();const EV={provide:es,useExisting:ht(()=>Sd)};let Sd=(()=>{class n extends es{constructor(t,i,r,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new et,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function Qg(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===xl?t=s:function uV(n){return Object.getPrototypeOf(n.constructor)===Rs}(s)?i=s:r=s}),r||i||t||null}(0,s)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function Jg(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Dd(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(x(qn,13),x(Ln,10),x(Qr,10),x(Ti,10),x(nm,8))},n.\u0275dir=ve({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[vt([EV]),He,Jn]}),n})();let Ls=(()=>{class n{constructor(){this._validator=vd}ngOnChanges(t){if(this.inputName in t){const i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):vd,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ve({type:n,features:[Jn]}),n})();const FV={provide:Ln,useExisting:ht(()=>Id),multi:!0};let Id=(()=>{class n extends Ls{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>function KD(n){return"number"==typeof n?n:parseInt(n,10)}(t),this.createValidator=t=>hD(t)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=ft(n)))(i||n)}}(),n.\u0275dir=ve({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,i){2&t&&On("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},features:[vt([FV]),He]}),n})(),UV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=an({imports:[BD]}),n})(),lm=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:nm,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Rl,useValue:t.callSetDisabledState??Kg}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=an({imports:[UV]}),n})();class nE extends Cd{constructor(e,t,i){super(Wg(t),qg(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){xD(this,0,e),e.forEach((i,r)=>{AD(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function iE(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let HV=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,i=null){const r=this._reduceControls(t);let s={};return iE(i)?s=i:null!==i&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new Ol(r,s)}record(t,i=null){const r=this._reduceControls(t);return new kD(r,i)}control(t,i,r){let s={};return this.useNonNullable?(iE(i)?s=i:(s.validators=i,s.asyncValidators=r),new Fl(t,{...s,nonNullable:!0})):new Fl(t,i,r)}array(t,i,r){const s=t.map(o=>this._createControl(o));return new nE(s,i,r)}_reduceControls(t){const i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){return t instanceof Fl||t instanceof Cd?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:lm}),n})(),rE=(()=>{class n extends HV{group(t,i=null){return super.group(t,i)}control(t,i,r){return super.control(t,i,r)}array(t,i,r){return super.array(t,i,r)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=ft(n)))(i||n)}}(),n.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:lm}),n})();var BV=$e(593);class Ad{}class cm{}class Er{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Er?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Er;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Er?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class jV{encodeKey(e){return sE(e)}encodeValue(e){return sE(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const $V=/%(\d[a-f0-9])/gi,zV={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function sE(n){return encodeURIComponent(n).replace($V,(e,t)=>zV[t]??e)}function xd(n){return`${n}`}class Mr{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new jV,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function GV(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(xd):[xd(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Mr({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(xd(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(xd(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class WV{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function oE(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function aE(n){return typeof Blob<"u"&&n instanceof Blob}function lE(n){return typeof FormData<"u"&&n instanceof FormData}class Ul{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function qV(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Er),this.context||(this.context=new WV),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Mr,this.urlWithParams=t}serializeBody(){return null===this.body?null:oE(this.body)||aE(this.body)||lE(this.body)||function KV(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Mr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||lE(this.body)?null:aE(this.body)?this.body.type||null:oE(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Mr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,u=e.params||this.params;const f=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((p,g)=>p.set(g,e.setHeaders[g]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((p,g)=>p.set(g,e.setParams[g]),u)),new Ul(t,i,s,{params:u,headers:c,context:f,reportProgress:a,responseType:r,withCredentials:o})}}var rn=(()=>((rn=rn||{})[rn.Sent=0]="Sent",rn[rn.UploadProgress=1]="UploadProgress",rn[rn.ResponseHeader=2]="ResponseHeader",rn[rn.DownloadProgress=3]="DownloadProgress",rn[rn.Response=4]="Response",rn[rn.User=5]="User",rn))();class um{constructor(e,t=200,i="OK"){this.headers=e.headers||new Er,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class dm extends um{constructor(e={}){super(e),this.type=rn.ResponseHeader}clone(e={}){return new dm({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class kd extends um{constructor(e={}){super(e),this.type=rn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new kd({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class cE extends um{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function hm(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let fm=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof Ul)s=t;else{let c,u;c=r.headers instanceof Er?r.headers:new Er(r.headers),r.params&&(u=r.params instanceof Mr?r.params:new Mr({fromObject:r.params})),s=new Ul(t,i,void 0!==r.body?r.body:null,{headers:c,context:r.context,params:u,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=me(s).pipe(zr(c=>this.handler.handle(c)));if(t instanceof Ul||"events"===r.observe)return o;const a=o.pipe($n(c=>c instanceof kd));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe($(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe($(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe($(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe($(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Mr).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,hm(r,i))}post(t,i,r={}){return this.request("POST",t,hm(r,i))}put(t,i,r={}){return this.request("PUT",t,hm(r,i))}}return n.\u0275fac=function(t){return new(t||n)(U(Ad))},n.\u0275prov=X({token:n,factory:n.\u0275fac}),n})();function uE(n,e){return e(n)}function YV(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}const JV=new Q("HTTP_INTERCEPTORS"),Hl=new Q("HTTP_INTERCEPTOR_FNS");function QV(){let n=null;return(e,t)=>(null===n&&(n=(Ye(JV,{optional:!0})??[]).reduceRight(YV,uE)),n(e,t))}let dE=(()=>{class n extends Ad{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=Array.from(new Set(this.injector.get(Hl)));this.chain=i.reduceRight((r,s)=>function ZV(n,e,t){return(i,r)=>t.runInContext(()=>e(i,s=>n(s,r)))}(r,s,this.injector),uE)}return this.chain(t,i=>this.backend.handle(i))}}return n.\u0275fac=function(t){return new(t||n)(U(cm),U(ur))},n.\u0275prov=X({token:n,factory:n.\u0275fac}),n})();const n4=/^\)\]\}',?\n/;let fE=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new q(i=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((v,y)=>r.setRequestHeader(v,y.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const v=t.detectContentTypeHeader();null!==v&&r.setRequestHeader("Content-Type",v)}if(t.responseType){const v=t.responseType.toLowerCase();r.responseType="json"!==v?v:"text"}const s=t.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const v=r.statusText||"OK",y=new Er(r.getAllResponseHeaders()),_=function i4(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||t.url;return o=new dm({headers:y,status:r.status,statusText:v,url:_}),o},c=()=>{let{headers:v,status:y,statusText:_,url:b}=a(),w=null;204!==y&&(w=typeof r.response>"u"?r.responseText:r.response),0===y&&(y=w?200:0);let E=y>=200&&y<300;if("json"===t.responseType&&"string"==typeof w){const D=w;w=w.replace(n4,"");try{w=""!==w?JSON.parse(w):null}catch(I){w=D,E&&(E=!1,w={error:I,text:w})}}E?(i.next(new kd({body:w,headers:v,status:y,statusText:_,url:b||void 0})),i.complete()):i.error(new cE({error:w,headers:v,status:y,statusText:_,url:b||void 0}))},u=v=>{const{url:y}=a(),_=new cE({error:v,status:r.status||0,statusText:r.statusText||"Unknown Error",url:y||void 0});i.error(_)};let f=!1;const p=v=>{f||(i.next(a()),f=!0);let y={type:rn.DownloadProgress,loaded:v.loaded};v.lengthComputable&&(y.total=v.total),"text"===t.responseType&&!!r.responseText&&(y.partialText=r.responseText),i.next(y)},g=v=>{let y={type:rn.UploadProgress,loaded:v.loaded};v.lengthComputable&&(y.total=v.total),i.next(y)};return r.addEventListener("load",c),r.addEventListener("error",u),r.addEventListener("timeout",u),r.addEventListener("abort",u),t.reportProgress&&(r.addEventListener("progress",p),null!==s&&r.upload&&r.upload.addEventListener("progress",g)),r.send(s),i.next({type:rn.Sent}),()=>{r.removeEventListener("error",u),r.removeEventListener("abort",u),r.removeEventListener("load",c),r.removeEventListener("timeout",u),t.reportProgress&&(r.removeEventListener("progress",p),null!==s&&r.upload&&r.upload.removeEventListener("progress",g)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(U(Xw))},n.\u0275prov=X({token:n,factory:n.\u0275fac}),n})();const pm=new Q("XSRF_ENABLED"),pE="XSRF-TOKEN",gE=new Q("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>pE}),mE="X-XSRF-TOKEN",vE=new Q("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>mE});class yE{}let r4=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Hw(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(U(Rt),U(Ya),U(gE))},n.\u0275prov=X({token:n,factory:n.\u0275fac}),n})();function s4(n,e){const t=n.url.toLowerCase();if(!Ye(pm)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const i=Ye(yE).getToken(),r=Ye(vE);return null!=i&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var Kt=(()=>((Kt=Kt||{})[Kt.Interceptors=0]="Interceptors",Kt[Kt.LegacyInterceptors=1]="LegacyInterceptors",Kt[Kt.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Kt[Kt.NoXsrfProtection=3]="NoXsrfProtection",Kt[Kt.JsonpSupport=4]="JsonpSupport",Kt[Kt.RequestsMadeViaParent=5]="RequestsMadeViaParent",Kt))();function $o(n,e){return{\u0275kind:n,\u0275providers:e}}function o4(...n){const e=[fm,fE,dE,{provide:Ad,useExisting:dE},{provide:cm,useExisting:fE},{provide:Hl,useValue:s4,multi:!0},{provide:pm,useValue:!0},{provide:yE,useClass:r4}];for(const t of n)e.push(...t.\u0275providers);return function eI(n){return{\u0275providers:n}}(e)}const bE=new Q("LEGACY_INTERCEPTOR_FN");function l4({cookieName:n,headerName:e}){const t=[];return void 0!==n&&t.push({provide:gE,useValue:n}),void 0!==e&&t.push({provide:vE,useValue:e}),$o(Kt.CustomXsrfConfiguration,t)}let c4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=an({providers:[o4($o(Kt.LegacyInterceptors,[{provide:bE,useFactory:QV},{provide:Hl,useExisting:bE,multi:!0}]),l4({cookieName:pE,headerName:mE}))]}),n})();class Bl{constructor(e,t){this.http=e,this.logService=t,this.creatureList=[],this.hasCalculatedMyStats=!1,this.creatureList=$e(305),this.creatureList.sort((i,r)=>i.kg>r.kg?-1:1)}loadAndCalculateMyLog(e){this.hasCalculatedMyStats&&e(this.myLiftingStats);let t=0;this.http.get("../../assets/data/FitNotes_Export.csv",{responseType:"text"}).subscribe(r=>{const o=BV.parse(r,{header:!0,skipEmptyLines:!0}),a=o.data,c=o.errors;let u;for(let v=c.length-1;v>=0;v--)u=c[v],this.logService.log("Warn",'Removing row "'+u.row+'". '+u.type+". "+u.code+". "+u.message),a.splice(u.row,1);a.forEach(v=>{const y=v["Weight (kgs)"],_=v.Reps;""!==y&&""!==_&&(t+=parseFloat(y)*parseFloat(_))});const f=this.weightInCreatures(t),p=new Date(a[0].Date),g=new Date(a[a.length-1].Date);this.myLiftingStats={totalKgLifted:t,totalCreaturesLifted:f,firstDate:p,lastDate:g},this.hasCalculatedMyStats=!0,e(this.myLiftingStats)})}weightInCreatures(e){let t=e;const i=[];return this.creatureList.forEach(r=>{let s=0;for(;r.kg<=t;)t-=r.kg,s++;s>0&&i.push({count:s,creature:{name:r.name,kg:r.kg,url:r.url}})}),i}static#e=this.\u0275fac=function(t){return new(t||Bl)(U(fm),U(Mi))};static#t=this.\u0275prov=X({token:Bl,factory:Bl.\u0275fac,providedIn:"root"})}class Pd{transform(e,t=0,i="*",r=1){let s;switch(i){case"/":s=e/r;break;case"*":s=e*r;break;default:throw new RangeError('parameter "conversionSign" can only have value "/" or "*"')}let o=t;e===Math.trunc(e)&&(o=0);const a=s.toFixed(o),c=[];let u=a.includes(".")?a.indexOf("."):a.length;if(u<3)return a;let p=!0;for(;u>0;)u-=3,u<=0?c.unshift(a.substr(0,3+u)):p?(c.unshift(a.substr(u)),p=!1):c.unshift(a.substr(u,3));return c.join("'")}static#e=this.\u0275fac=function(t){return new(t||Pd)};static#t=this.\u0275pipe=Fn({name:"mynumber",type:Pd,pure:!0})}function u4(n,e){if(1&n&&(d(0,"li"),l(1),d(2,"a",15),l(3),h(),l(4),Eo(5,"mynumber"),h()),2&n){const t=e.$implicit;C(1),Qe(" ",t.count,"x "),C(1),Xt("href",t.creature.url,Lr),C(1),nt(t.creature.name),C(1),Fa(" (",za(5,5,t.creature.kg,1)," kg",t.count>1?" each":"",") ")}}function d4(n,e){1&n&&(d(0,"div"),l(1," Only numbers are allowed (and ' . ' for fraction) "),h())}function h4(n,e){1&n&&(d(0,"div"),l(1," number is too big, reduce it "),h())}function f4(n,e){1&n&&(d(0,"div"),l(1," number is to small, increase it "),h())}function p4(n,e){if(1&n&&(d(0,"div",16),Le(1,d4,2,0,"div",7),Le(2,h4,2,0,"div",7),Le(3,f4,2,0,"div",7),h()),2&n){const t=Ne();C(1),T("ngIf",null==t.inputKgControl.errors?null:t.inputKgControl.errors.pattern),C(1),T("ngIf",null==t.inputKgControl.errors?null:t.inputKgControl.errors.max),C(1),T("ngIf",null==t.inputKgControl.errors?null:t.inputKgControl.errors.min)}}function g4(n,e){if(1&n&&(d(0,"li"),l(1),d(2,"a",15),l(3),h(),l(4),Eo(5,"mynumber"),h()),2&n){const t=e.$implicit;C(1),Qe(" ",t.count,"x "),C(1),Xt("href",t.creature.url,Lr),C(1),nt(t.creature.name),C(1),Fa(" (",za(5,5,t.creature.kg,1)," kg ",t.count>1?" each":"",") ")}}function m4(n,e){if(1&n&&(d(0,"table")(1,"tr")(2,"th"),l(3,"KGs"),h(),d(4,"th"),l(5,"Creatures"),h()(),d(6,"tr")(7,"td",0),l(8),h(),d(9,"td")(10,"ul"),Le(11,g4,6,8,"li",1),h()()()()),2&n){const t=Ne();C(8),nt(t.convertLastInputSubmit),C(3),T("ngForOf",t.convertResult)}}class Od{constructor(e,t){this.liftingService=e,this.fb=t,this.firstDate=new Date(2016,6,15),this.lastDate=new Date,this.totalKgLifted=0,this.totalCreaturesLifted=[],this.convertLastInputSubmit=0,this.convertResult=[],this.maximumInputAllowed=999999999,this.minimumInputAllowed=.5,e.loadAndCalculateMyLog(r=>{this.totalKgLifted=r.totalKgLifted,this.totalCreaturesLifted=r.totalCreaturesLifted,this.firstDate=r.firstDate,this.lastDate=r.lastDate}),this.convertForm=this.fb.group({inputKg:[120,[Xr.pattern(/^\d+\.*\d*$/),Xr.max(this.maximumInputAllowed),Xr.min(this.minimumInputAllowed)]]}),this.inputKgControl=this.convertForm.controls.inputKg,this.convert(120)}inputEvent(){const e=parseFloat(this.inputKgControl.value);this.inputKgControl.invalid||e===this.convertLastInputSubmit||(this.convertLastInputSubmit=e,this.convert(e))}convert(e){this.convertResult=this.liftingService.weightInCreatures(e)}static#e=this.\u0275fac=function(t){return new(t||Od)(x(Bl),x(rE))};static#t=this.\u0275cmp=kt({type:Od,selectors:[["app-lift"]],decls:103,vars:19,consts:[[1,"center"],[4,"ngFor","ngForOf"],["href","https://play.google.com/store/apps/details?id=com.github.jamesgay.fitnotes&hl=en"],[1,"converter"],["novalidate","",3,"formGroup"],["type","number","formControlName","inputKg",1,"convertInput",3,"maxlength","input"],["class","alert",4,"ngIf"],[4,"ngIf"],["href","http://forgottenrealms.wikia.com/wiki/Metallic_dragon"],["href","https://en.wikipedia.org/wiki/Dinosaur_size"],["href","https://thewebsiteofeverything.com/animals/mammals/adult-weight.html"],["src","../assets/images/lifting/Egill_Antonsson_against_the_dragon_breath.jpg","alt","Egill Antonsson dealing with the the dragon's breath by wearing sunglasses","title","Egill Antonsson dealing with the the dragon's breath",1,"image"],["href","https://en.wikipedia.org/wiki/J\xf3n_P\xe1ll_Sigmarsson"],["href","https://vimeo.com/57172348"],["src","../assets/images/lifting/Jon_Pall_Sigmarsson_and_Egill_Antonsson.jpg","alt","J\xf3n P\xe1ll Sigmarsson and Egill Antonsson circa 1988","title","J\xf3n P\xe1ll Sigmarsson and Egill Antonsson circa 1988",1,"image"],[3,"href"],[1,"alert"]],template:function(t,i){1&t&&(d(0,"div")(1,"h2"),l(2,"Progressing on my path to lift the Platinum Dragon!"),h(),d(3,"p"),l(4),Eo(5,"date"),Eo(6,"date"),h(),d(7,"table")(8,"tr")(9,"th"),l(10,"Tons lifted"),h(),d(11,"th"),l(12,"Creatures lifted"),h()(),d(13,"tr")(14,"td",0),l(15),Eo(16,"mynumber"),h(),d(17,"td")(18,"ul"),Le(19,u4,6,8,"li",1),h()()()(),d(20,"p"),l(21," I use "),d(22,"a",2),l(23,"FitNotes"),h(),l(24," app to log my lifting,"),m(25,"br"),l(26," and export the log from it and use it for the above calculation."),m(27,"br"),l(28," No creatures were hurt during the lifting :)\n"),h()(),d(29,"div")(30,"h1"),l(31,"Kg to Creatures converter"),h(),d(32,"div",3)(33,"form",4)(34,"div")(35,"input",5),ct("input",function(){return i.inputEvent()}),h()(),d(36,"sub"),l(37,"kg number in text field is converts to below:"),h(),m(38,"br"),Le(39,p4,4,3,"div",6),h()(),Le(40,m4,12,2,"table",7),d(41,"p"),l(42," The sources for the creature weight list:"),m(43,"br"),d(44,"a",8),l(45,"Metallic dragons of the Forgotten Realms"),h(),m(46,"br"),d(47,"a",9),l(48,"Dinosaur size"),h(),m(49,"br"),d(50,"a",10),l(51,"Adult mammals weight"),h()()(),d(52,"div")(53,"figure"),m(54,"img",11),d(55,"figcaption"),l(56,"Egill Antonsson dealing with the the dragon's breath"),h()()(),d(57,"div")(58,"h2"),l(59,"The beginning of my strength & hyperthropy journey"),h(),d(60,"h3"),l(61,"The first workout"),h(),d(62,"p"),l(63," I've been lifting weights off and on since I was a 15 year old boy living in Reykjav\xedk, Iceland in 1997."),m(64,"br"),l(65," My first gym workout was with my friend Mummi who was training kick boxing and also hitting the gym to some extend at the time."),m(66,"br"),l(67," I'd like to think that he'd forgotten that this was my first workout ever and told me \"Today we are going to DESTROY the Biceps!\"."),m(68,"br"),l(69,' I replied enthustically "Sounds great!", and then we went on taking many sets to failure with many forced reps.'),m(70,"br"),l(71," Little did I know that this would leave me so sore that even the lightest bump in the arms would be agonisingly painful for a WEEK!"),m(72,"br"),l(73," This was a lesson learned for both me and Mummi in how not to begin your training.\n"),h(),d(74,"h3"),l(75,"The first years"),h(),d(76,"p"),l(77," Although my first workout took weeks to recover from, I was eager to continue training for the next 3 to 4 years."),m(78,"br"),l(79," I frequently worked out in the gym called Gym 80 with my friend and lifting partner Kalli (Mummi was more into kick boxing)."),m(80,"br"),h(),d(81,"p"),l(82," Gym 80 was founded by "),d(83,"a",12),l(84,"J\xf3n P\xe1ll Sigmarsson"),h(),l(85," who was the first man in history to win the World Strongest Man four times."),m(86,"br"),l(87," He is a big inspiration to me as he was the first Icelandic athlete to be the best in the world in a sport, along being charismatic and entertaining."),m(88,"br"),l(89," My parents knew J\xf3n's dad and they took a photo of J\xf3n and me when I was around 6 years old.\nIn 1987 while making a strongman world record Deadlift of 523 kg, J\xf3n shouted "),d(90,"a",13),l(91,'"There is no reason to be alive if you can\'t do deadlift!"'),h(),l(92,","),m(93,"br"),l(94,"\nand as fate would have it he died in 1993, 32 years of age, of cardiac arrest due to an aortic rupture while deadlifting in his gym."),m(95,"br"),l(96,"\nSo 5 years later me and Kalli were Deadlifting, Squatting and Bench Pressing at the very same spot where J\xf3n P\xe1ll Sigmarsson the Legend had died."),m(97,"br"),h()(),d(98,"div")(99,"figure"),m(100,"img",14),d(101,"figcaption"),l(102,"J\xf3n P\xe1ll Sigmarsson and Egill Antonsson circa 1988, both wearing fashionable 80s outfits"),h()()()),2&t&&(C(4),Fa("\nDuring the period ",za(5,8,i.firstDate,"d. MMMM yyyy")," - ",za(6,11,i.lastDate,"d. MMMM yyyy"),":\n"),C(11),nt(function T1(n,e,t,i,r,s){const o=n+22,a=V(),c=Ws(a,o);return Wa(a,o)?E1(a,Un(),e,c.transform,t,i,r,s,c):c.transform(t,i,r,s)}(16,14,i.totalKgLifted,3,"/",1e3)),C(4),T("ngForOf",i.totalCreaturesLifted),C(14),T("formGroup",i.convertForm),C(2),T("maxlength",16),C(4),T("ngIf",i.inputKgControl.invalid),C(1),T("ngIf",i.convertResult.length>0))},dependencies:[tl,Mn,em,xl,tm,Bg,jg,Id,Vl,Sd,Wp,Pd],styles:["ul[_ngcontent-%COMP%]{list-style:none}.converter[_ngcontent-%COMP%], .convertInput[_ngcontent-%COMP%]{text-align:center}"]})}const v4=["trackGraphicContainer"],y4=["canvas0"],b4=["canvas1"],_4=["canvas2"],w4=["canvas3"],C4=["topLine"],_E=function(n){return{nodeSelected:n}};function D4(n,e){if(1&n){const t=Vr();d(0,"div",21),ct("click",function(){const s=Pr(t).$implicit;return Or(Ne(3).onTrackClick(s))}),l(1),h()}if(2&n){const t=e.$implicit,i=Ne(3);T("ngClass",Ur(2,_E,t.name===i.selectedTrack.name)),C(1),Qe(" ",t.name," ")}}function E4(n,e){if(1&n&&(d(0,"div",19),Le(1,D4,2,4,"div",20),h()),2&n){const t=Ne().$implicit;C(1),T("ngForOf",t.tracks)}}const M4=function(n,e){return{branchAnimateClose:n,branchAnimateOpen:e}};function T4(n,e){if(1&n){const t=Vr();d(0,"div")(1,"div",14),ct("click",function(){const s=Pr(t).index;return Or(Ne().onByClick(s))}),d(2,"div",15),m(3,"div",16),h(),d(4,"span",17),l(5),h()(),Le(6,E4,2,1,"div",18),h()}if(2&n){const t=e.$implicit,i=e.index,r=Ne();C(3),T("ngClass",Ga(4,M4,r.openedUiByIndex!=i,r.openedUiByIndex===i)),C(1),T("ngClass",Ur(7,_E,r.selectedTrack.artistName===t.name)),C(1),nt(t.name),C(1),T("ngIf",r.openedUiByIndex===i)}}function S4(n,e){if(1&n&&(d(0,"div")(1,"figure"),m(2,"img",22),h()()),2&n){const t=Ne();C(2),Xt("src",t.selectedTrack.artworkPath,Lr),Yf("alt","Artwork for ",t.selectedTrack.name," by ",t.selectedTrack.artistName,"")("title","Artwork for ",t.selectedTrack.name," by ",t.selectedTrack.artistName,"")}}function I4(n,e){if(1&n&&(d(0,"span",23)(1,"a",24),m(2,"img",25),h()()),2&n){const t=Ne();C(1),Xt("href",t.selectedTrack.soundcloudUrl,Lr),C(1),La("alt","Play ",t.selectedTrack.name," on SoundCloud")("title","Play ",t.selectedTrack.name," on SoundCloud")}}function A4(n,e){if(1&n&&(d(0,"span",23)(1,"a",24),m(2,"img",26),h()()),2&n){const t=Ne();C(1),Xt("href",t.selectedTrack.spotifyUrl,Lr),C(1),La("alt","Play ",t.selectedTrack.name," on Spotify")("title","Play ",t.selectedTrack.name," on Spotify")}}function x4(n,e){if(1&n&&(d(0,"span",23)(1,"a",27),l(2,"Buy"),h()()),2&n){const t=Ne();C(1),Xt("href",t.selectedTrack.buyUrl,Lr)}}function k4(n,e){if(1&n&&(d(0,"div")(1,"h4"),l(2),h(),m(3,"p",28),h()),2&n){const t=Ne();C(2),Qe("About ",t.selectedTrack.name,""),C(1),T("innerHTML",t.selectedTrack.about,ye)}}function P4(n,e){if(1&n&&(d(0,"div")(1,"h4"),l(2),h(),m(3,"p",28),h()),2&n){const t=Ne();C(2),Qe("About ",t.selectedTrack.artistName,""),C(1),T("innerHTML",t.selectedTrack.artistAbout,ye)}}class jl{constructor(e,t,i,r){this.musicService=e,this.logService=t,this.route=i,this.location=r,this.label="MusicPage",this.drawVisuals=[],this.playedListenerName=`${this.label} playedListener`,this.endedListenerName=`${this.label} endedListener`,this.currentCanvasNr=0,this.canvasNrAscending=!1,this.musicGain=1,this.musicMuted=!1,this.sfxGain=1,this.sfxMuted=!1,this.highMaxNrPlaying=24,this.mediumMaxNrPlaying=16,this.lowMaxNrPlaying=8,this.value=0,this.highValue=1,this.range=this.highValue-this.value,this.selectedByIndex=0,this.openedUiByIndex=-1}get byTracks(){return this.musicService.byTracks}get selectedTrack(){return this.musicService.selectedTrack}get selectedTrackAsYoutubeTrack(){return this.musicService.selectedTrack}ngOnInit(){this.route.paramMap.subscribe(e=>{const t=e.get("trackName");null!==t?this.musicService.setSelectTrackByRootUrl(t):this.replaceUrlState()}),this.musicService.addInstancePlayedListener(this.playedListenerName,e=>{const t=this.getNextCanvas(),i=this.tryGetCanvasContext(t);i&&e&&this.visualize(e,t,i,this.drawVisuals),this.replaceUrlState()}),this.musicService.addInstanceEndedListener(this.endedListenerName,()=>{this.clearVisuals()}),this.canvases=[this.canvas0,this.canvas1,this.canvas2,this.canvas3]}replaceUrlState(){this.location.replaceState(`${this.musicService.urlPathRoot}${this.selectedTrack.rootUrl}`)}ngOnDestroy(){this.musicService.removeInstancePlayedListener(this.playedListenerName),this.musicService.removeInstanceEndedListener(this.endedListenerName)}onTrackClick(e){"Loading"!==this.musicService.playState?this.musicService.onUiTrackSelected(e):this.logService.log("Info","MusicPage onTrackClick: is loading, returning without processing")}onByClick(e){this.openedUiByIndex=this.openedUiByIndex===e?-1:e}get layerText(){if(this.musicService.selectedTrack instanceof bl&&this.musicService.selectedTrack.layeredMusicController.layerSoundInstances){const e=this.musicService.selectedTrack.layeredMusicController.layerSoundInstances;if(e[e.length-1].gainWrapper.instanceMuted)return"add layer"}return"keep layer"}getNextCanvas(){return 0===this.currentCanvasNr?(this.currentCanvasNr++,this.canvasNrAscending=!0):3===this.currentCanvasNr?(this.currentCanvasNr--,this.canvasNrAscending=!1):this.canvasNrAscending?this.currentCanvasNr++:this.currentCanvasNr--,this.canvases[this.currentCanvasNr]}tryGetCanvasContext(e){const t=e.nativeElement.getContext("2d");return t||this.logService.log("Error",'"canvasContext" was "null"'),t}visualize(e,t,i,r){const s=e.analyzerNode;s.fftSize=2048;const o=s.fftSize,a=new Uint8Array(o),c=t.nativeElement.width,u=t.nativeElement.height;i.clearRect(0,0,c,u),t.nativeElement.classList.remove("hide");const f=()=>{r.push(requestAnimationFrame(f)),s.getByteTimeDomainData(a),i.fillStyle="#111",i.fillRect(0,0,c,u),i.lineWidth=3,i.strokeStyle="#B9CA4A",i.beginPath();const p=1*c/o;let g=0;for(let v=0;v<o;v++){const _=a[v]/128*u/2;0===v?i.moveTo(g,_):i.lineTo(g,_),g+=p}i.lineTo(c,u/2),i.stroke()};f()}clearVisuals(){this.drawVisuals.forEach(e=>{window.cancelAnimationFrame(e)}),this.drawVisuals=[],this.canvases.forEach(e=>{this.tryGetCanvasContext(e)?.clearRect(0,0,e.nativeElement.width,e.nativeElement.height),e.nativeElement.classList.add("hide")}),this.currentCanvasNr=1,this.canvasNrAscending=!1}static#e=this.\u0275fac=function(t){return new(t||jl)(x(Os),x(Mi),x(Yr),x(Ja))};static#t=this.\u0275cmp=kt({type:jl,selectors:[["app-music-page"]],viewQuery:function(t,i){if(1&t&&(Ut(v4,5),Ut(y4,7),Ut(b4,7),Ut(_4,7),Ut(w4,7),Ut(C4,7)),2&t){let r;Dt(r=Et())&&(i.trackGraphicContainerElement=r.first),Dt(r=Et())&&(i.canvas0=r.first),Dt(r=Et())&&(i.canvas1=r.first),Dt(r=Et())&&(i.canvas2=r.first),Dt(r=Et())&&(i.canvas3=r.first),Dt(r=Et())&&(i.topLine=r.first)}},features:[vt([Ja,{provide:Br,useClass:Rp}])],decls:22,vars:7,consts:[[1,"canvas","hide"],["canvas0",""],["canvas1",""],["canvas2",""],["canvas3",""],[1,"treeContainer","noSelect"],[4,"ngFor","ngForOf"],[1,"trackGraphicContainer"],["trackGraphicContainer",""],[4,"ngIf"],[1,"buttonContainer"],["class","iconButton",4,"ngIf"],[1,"trackRightContainer"],[1,"trackRightInner"],[1,"branchContainer",3,"click"],[1,"branchIconContainer"],[1,"branchIcon",3,"ngClass"],[3,"ngClass"],["class","nodeContainer nodeFadeIn",4,"ngIf"],[1,"nodeContainer","nodeFadeIn"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[1,"image",3,"src","alt","title"],[1,"iconButton"],["target","\u201d_blank\u201d",3,"href"],["src","https://upload.wikimedia.org/wikipedia/commons/7/78/Soundcloud_logo.svg",1,"soundcloudIcon",3,"alt","title"],["src","https://upload.wikimedia.org/wikipedia/commons/2/26/Spotify_logo_with_text.svg ",1,"spotifyIcon",3,"alt","title"],["target","\u201d_blank\u201d",1,"IconLink",3,"href"],[3,"innerHTML"]],template:function(t,i){1&t&&(d(0,"div"),m(1,"canvas",0,1)(3,"canvas",0,2)(5,"canvas",0,3)(7,"canvas",0,4),h(),d(9,"div",5),Le(10,T4,7,9,"div",6),h(),d(11,"div",7,8),Le(13,S4,3,5,"div",9),d(14,"div",10),Le(15,I4,3,3,"span",11),Le(16,A4,3,3,"span",11),Le(17,x4,3,1,"span",11),h()(),d(18,"div",12)(19,"div",13),Le(20,k4,4,2,"div",9),Le(21,P4,4,2,"div",9),h()()),2&t&&(C(10),T("ngForOf",i.byTracks),C(3),T("ngIf",""!==i.selectedTrack.artworkPath),C(2),T("ngIf",""!==i.selectedTrack.soundcloudUrl),C(1),T("ngIf",""!==i.selectedTrack.spotifyUrl),C(1),T("ngIf",""!==i.selectedTrack.buyUrl),C(3),T("ngIf",""!==i.selectedTrack.about),C(1),T("ngIf",""!==i.selectedTrack.artistAbout))},dependencies:[el,tl,Mn],styles:[".canvas[_ngcontent-%COMP%]{width:100%;height:30px;border:1px solid var(--colorGrayLight);border-radius:.3em}.trackGraphicContainer[_ngcontent-%COMP%]{float:left;width:50%}.buttonContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:1em}.trackRightContainer[_ngcontent-%COMP%]{float:right;width:50%}.trackRightInner[_ngcontent-%COMP%]{float:left;margin-left:2%}.iconButton[_ngcontent-%COMP%]{width:100px;height:30px;border:1px solid var(--colorGrayLight);border-radius:1em;text-align:center;padding-top:3px;margin-left:1em;margin-right:1em}.spotifyIcon[_ngcontent-%COMP%]{height:90%;width:80%}.soundcloudIcon[_ngcontent-%COMP%]{height:90%;width:96%}.IconLink[_ngcontent-%COMP%]{vertical-align:middle}@keyframes _ngcontent-%COMP%_lds-ripple{0%{top:36px;left:36px;width:0;height:0;opacity:1}to{top:0;left:0;width:72px;height:72px;opacity:0}}@media screen and (max-width: 451px){.trackGraphicContainer[_ngcontent-%COMP%], .trackRightContainer[_ngcontent-%COMP%]{width:100%}.iconButton[_ngcontent-%COMP%]{margin-left:3px;margin-right:3px}}@media screen and (min-width: 452px) and (max-width: 703px){.canvas[_ngcontent-%COMP%]{margin-left:2%;margin-right:2%;width:96%}.trackGraphicContainer[_ngcontent-%COMP%], .trackRightContainer[_ngcontent-%COMP%]{width:100%}.iconButton[_ngcontent-%COMP%]{margin-left:.5em;margin-right:.5em}}@media screen and (min-width: 704px) and (max-width: 1053px){.trackGraphicContainer[_ngcontent-%COMP%]{width:100%}.canvas[_ngcontent-%COMP%]{margin-left:4%;margin-right:4%;width:92%}.iconButton[_ngcontent-%COMP%]{margin-left:.5em;margin-right:.5em}p[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{margin-left:0%;margin-right:0%}}@media screen and (min-width: 1054px) and (max-width: 1403px){.canvas[_ngcontent-%COMP%]{margin-left:6%;margin-right:6%;width:88%}p[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{margin-left:0%;margin-right:0%}}@media screen and (min-width: 1404px) and (max-width: 2000px){.canvas[_ngcontent-%COMP%]{margin-left:8%;margin-right:8%;width:84%}p[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{margin-left:0%;margin-right:0%}}@media screen and (min-width: 2001px){.canvas[_ngcontent-%COMP%]{margin-left:10%;margin-right:10%;width:80%}p[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{margin-left:0%;margin-right:0%}}"]})}class Rd{static#e=this.\u0275fac=function(t){return new(t||Rd)};static#t=this.\u0275cmp=kt({type:Rd,selectors:[["app-pagenotfound"]],decls:2,vars:0,template:function(t,i){1&t&&(d(0,"h1"),l(1,"Page not found for this url"),h())},encapsulation:2})}class Si{constructor(e){this.blogService=e}get post(){return this.blogService.selectedPost}get publishedDateToString(){return this.dateToString(this.post.publishedDate)}get hasUpdatedDate(){return void 0!==this.post.updatedDate}get updatedDateToString(){return void 0===this.post.updatedDate?"":this.dateToString(this.post.updatedDate)}dateToString(e){const i=new Wp("en-US").transform(e,"YYYY MMM dd");return null===i?"":i}get aboutCodeHtml(){return'<h2>The code</h2>\n<p>\n\tThe code shown below is focused on the current cycle step, thus only showing the relevant lines\t.<br>\n\tThe complete code and the Unity project is on <a href="https://github.com/EgillAntonsson/tdd-avatar-health-in-unity">GitHub</a>.\n</p>'}get completeRequirementListHtml(){return'<sup>The complete requirement list from the user perspective is in <a href="./blog/tdd-health/part2">Part 2</a></sup>'}get rewordRequirement(){return"Let's reword this focusing on the domain model and using its terminology:"}static#e=this.\u0275fac=function(t){return new(t||Si)(x(Fo))};static#t=this.\u0275cmp=kt({type:Si,selectors:[["ng-component"]],decls:2,vars:0,template:function(t,i){1&t&&(d(0,"h1"),l(1,"base class template not used"),h())},encapsulation:2})}function O4(n,e){if(1&n&&(d(0,"small"),l(1),h()),2&n){const t=Ne();C(1),Qe(" updated on ",t.updatedDateToString," ")}}class Gl extends Si{static#e=this.\u0275fac=function(){let e;return function(i){return(e||(e=ft(Gl)))(i||Gl)}}();static#t=this.\u0275cmp=kt({type:Gl,selectors:[["app-post-tdd-1"]],features:[He],decls:374,vars:4,consts:[[1,"byAndDate"],[4,"ngIf"],["href","http://www.jamesshore.com/v2/blog/2005/red-green-refactor"],[1,"list"],[1,"redFail"],[1,"greenPass"],[1,"greenRefactor"],["href","https://pragmaticways.com/31-code-smells-you-must-know/"],["href","https://blog.cleancoder.com/uncle-bob/2014/12/17/TheCyclesOfTDD.html"],["href","https://livebook.manning.com/book/the-art-of-unit-testing-third-edition/chapter-1/v-6/25"],[1,"list","inline"],["href","https://livebook.manning.com/book/the-art-of-unit-testing-third-edition/chapter-1/v-6/193"],["href","https://effectivesoftwaredesign.com/2012/02/05/separation-of-concerns/"],["href","https://en.wikipedia.org/wiki/Coupling_(computer_programming)"],["href","https://medium.com/swlh/the-importance-of-code-encapsulation-ce19efbcfe57"],["href","https://dhh.dk/2014/tdd-is-dead-long-live-testing.html"],["href","https://www.youtube.com/watch?v=z9quxZsLcfo"],["href","https://blog.cleancoder.com/uncle-bob/2014/04/25/MonogamousTDD.html"],["href","https://www.linkedin.com/in/egillantonsson"],["href","http://xunitpatterns.com/Humble%20Object.html"],["href","https://enterprisecraftsmanship.com/posts/what-is-domain-logic/"],["href","https://enterprisecraftsmanship.com/posts/domain-model-isolation/"],["href","https://martinfowler.com/articles/practical-test-pyramid.html"],["href","https://understandlegacycode.com/blog/what-is-legacy-code-is-it-code-without-tests/#code-youre-not-comfortable-changing"],["href","http://xunitpatterns.com/Mocks,%20Fakes,%20Stubs%20and%20Dummies.html"],["href","https://medium.com/aia-sg-techblog/why-singleton-pattern-is-considered-as-anti-design-pattern-c81dd8b7e757"],["href","https://www.goodreads.com/book/show/44919.Working_Effectively_with_Legacy_Code"],["href","https://devon.global/starting-tdd-legacy-code/"],[1,"horizontalLine"]],template:function(t,i){1&t&&(d(0,"h1"),l(1),h(),d(2,"h2"),l(3),h(),d(4,"div",0)(5,"small"),l(6,"by Egill Antonsson"),m(7,"br"),l(8),m(9,"br"),h(),Le(10,O4,2,1,"small",1),h(),d(11,"h2"),l(12,"What is TDD ?"),h(),d(13,"p"),l(14," TDD is an acronym for "),d(15,"i"),l(16,"Test Driven Development"),h(),m(17,"br"),l(18," and is a workflow discipline / approach for developers, focused on "),d(19,"b"),l(20,"when"),h(),l(21," to write unit tests,"),m(22,"br"),l(23," and the heart of it is the "),d(24,"a",2),l(25,"RED / GREEN / REFACTOR cycle:"),h()(),d(26,"ol",3)(27,"li")(28,"span",4),l(29,"RED:"),h(),l(30," Write a test that fails"),h(),d(31,"li")(32,"span",5),l(33,"GREEN:"),h(),l(34," Get the test to pass, with minimal effort"),h(),d(35,"li")(36,"span",6),l(37,"REFACTOR:"),h(),l(38," Evaluate if refactoring is needed, e.g. remove a "),d(39,"a",7),l(40,"code smell"),h()()(),d(41,"p"),l(42,"The cycle should focus is on fulfilling a requirement on the SUT (Subject/Unit Under Test)"),m(43,"br"),l(44," repeating it until you are confident that the SUT has become generic enough to handle all meaningful cases"),m(45,"br"),l(46," (as the tests become more specific)."),m(47,"br"),l(48," At some interval you should stop and evaluate if the design of the overall system is sound, if not then refactor it."),m(49,"br"),l(50," (all tests run and passing as frequently as needed)."),m(51,"br"),l(52," This is my summarization of Uncle Bob's post "),d(53,"a",8),l(54,"The Cycles of TDD"),h(),l(55,"."),m(56,"br"),l(57," (Bob terms additional cycles within and around RED / GREEN / REFACTOR).\n"),h(),d(58,"h2"),l(59,"What is a good Unit Test ?"),h(),d(60,"p"),l(61," A good unit test is focused on a specific SUT requirement,"),m(62,"br"),l(63," of meaningful logic (e.g. don't test simple getter properties on their own)."),m(64,"br"),l(65," The test code should be kept as clean as the production code ("),d(66,"span",6),l(67,"REFACTOR"),h(),l(68," step in TDD applies to both)."),m(69,"br"),l(70," Here are definitions from "),d(71,"b"),l(72,"Roy Osherove"),h(),l(73," in "),d(74,"i"),l(75,"The Art of Unit testing, 3rd edition"),h(),m(76,"br"),l(77," (for him the word 'unit' in unit testing stands for 'unit of work'):\n"),h(),d(78,"h3")(79,"a",9),l(80,"Unit of Work definition"),h()(),d(81,"p"),l(82,"\nA "),d(83,"i"),l(84,"unit of work"),h(),l(85," is the sum of actions that take place between the invocation of an "),d(86,"i"),l(87,"entry point"),h(),m(88,"br"),l(89,"\nup until a noticeable end result through one or more "),d(90,"i"),l(91,"exit points"),h(),l(92,"."),m(93,"br"),l(94,"\nThe "),d(95,"i"),l(96,"entry point"),h(),l(97," is the thing we trigger."),m(98,"br"),l(99,"\nGiven a publicly visible function, for example:\n"),h(),d(100,"ul",10)(101,"li"),l(102,"The function's body is all or part of the "),d(103,"i"),l(104,"unit of work"),h(),l(105,"."),h(),d(106,"li"),l(107,"The function's declaration and signature are the "),d(108,"i"),l(109,"entry point"),h(),l(110," into the body."),h(),d(111,"li"),l(112,"The resulting outputs or behaviors of the function are its "),d(113,"i"),l(114,"exit points"),h(),l(115,"."),h()(),d(116,"h3")(117,"a",11),l(118,"Good Unit Test definition"),h()(),d(119,"p"),l(120,"\nA "),d(121,"i"),l(122,"unit test"),h(),l(123," is an automated piece of code that invokes the "),d(124,"i"),l(125,"unit of work"),h(),m(126,"br"),l(127,"\nthrough an "),d(128,"i"),l(129,"entry point"),h(),l(130,", and then checks one of its "),d(131,"i"),l(132,"exit points"),h(),l(133,"."),m(134,"br"),l(135,"\nIt can be written easily and runs quickly."),m(136,"br"),d(137,"b"),l(138,"It's trustworthy, readable & maintainable."),m(139,"br"),l(140,"\nIt is consistent as long as the production code we control has not changed."),h()(),d(141,"h2"),l(142,"Why do TDD ?"),h(),d(143,"p"),l(144,"Here is a my non-exhaustive list of the benefits of TDD in order of priority:"),h(),d(145,"ol",10)(146,"li"),l(147,"Ensures you'll have passing test suite with high production code coverage"),m(148,"br"),l(149," that runs fast (each case less than 0.1 sec) so you get feedback early,"),m(150,"br"),l(151," thus you can clean the code fast and continuously without fear of breaking it,"),m(152,"br"),l(153," thus have high confidence in the shipped product quality."),m(154,"br"),h(),d(155,"li"),l(156,"It pushes for good production code design and maintainability:"),h(),d(157,"ul")(158,"li")(159,"a",12),l(160,"Separation of Concerns (SoC)"),h()(),d(161,"li"),l(162,"code to be low "),d(163,"a",13),l(164,"coupled"),h(),l(165," / have few dependencies"),h(),d(166,"li"),l(167,"each unit / object has readable and requirement-focused interface"),m(168,"br"),l(169," (internals should be "),d(170,"a",14),l(171,"encapsulated"),h(),l(172,")"),h()(),d(173,"li"),l(174,"The tests are accurate and up-to-date (developer focused) documentation"),m(175,"br"),l(176," of the behavior of the tested units."),h(),d(177,"li"),l(178,"Less time spent in the debugger"),h()(),d(179,"p"),l(180," There are also criticisms on TDD, e.g. the post "),d(181,"a",15),l(182,"TDD is dead. Long live testing"),h(),l(183,","),m(184,"br"),l(185," and discussion about it, e.g. the YouTube series "),d(186,"a",16),l(187,"Is TDD dead ?"),h(),m(188,"br"),l(189," and responses to it, e.g the post "),d(190,"a",17),l(191,"Monogamous TDD"),h(),l(192,".\n"),h(),d(193,"h2"),l(194,"Is TDD suitable for all areas / situations ?"),h(),d(195,"p"),l(196," I have over a decade long "),d(197,"a",18),l(198,"developer work experience"),h(),m(199,"br"),l(200," mainly as front-end game developer, and shared game systems developer."),m(201,"br"),l(202," I've gained some experience in writing good unit tests (being 'not so good' at the start of the journey)."),m(203,"br"),l(204," but I've used TDD to a lesser degree, thus I'm currently not very seasoned in using TDD."),m(205,"br"),l(206," The reason why I haven't used TDD more is mainly two-fold:\n"),h(),d(207,"ul",10)(208,"li"),l(209,"Sometimes when facing many 'hard to influence' deadlines,"),m(210,"br"),l(211," I've chosen the (not ideal) 'get it done in time' approach (Thus writing unit tests later)."),h(),d(212,"li"),l(213,"I'm working in areas / situations where it is not so suited or easy to use TDD."),h()(),d(214,"p"),l(215," Below are areas / situations where it is not so suited or easy to use TDD"),m(216,"br"),l(217," (and some tips how to work TDD more into them).\n"),h(),d(218,"h3"),l(219,"Boundary layers"),h(),d(220,"p"),l(221," A big part of a game is the graphic user interface (GUI) and visual effects, user input and sound,"),m(222,"br"),l(223," should these parts be unit tested ?"),m(224,"br")(225,"br"),l(226," These parts can be described as layers close to the physical output/input boundaries (e.g. screen, speaker)"),m(227,"br"),l(228," The design can be driven to make these boundary layers thin and "),d(229,"a",19),l(230,"humble"),h(),l(231,","),m(232,"br"),l(233," focusing on the responsibility of the boundary (e.g. disable/enable button), and extracting other logic into other modules that can be easily tested."),m(234,"br")(235,"br"),l(236," It's likely that the logic to extract is in fact the "),d(237,"a",20),l(238,"domain logic"),h(),l(239," (a.k.a business logic),"),m(240,"br"),l(241," the code that makes (non-visual) game decisions (business)"),m(242,"br"),l(243," and thus belongs to the "),d(244,"a",21),l(245,"domain model"),h(),l(246," and then should be moved there"),m(247,"br"),l(248," (the domain model should not depend on any boundaries, thus be easily unit testable)."),m(249,"br")(250,"br"),l(251," The edges of the boundary layers can be manually tested, e.g making sure the button displays properly on the screen."),m(252,"br"),l(253," If boundary bugs begin slipping into the production as the project grows,"),m(254,"br"),l(255," then it's time to replace some of the manual testing effort with automated tests (e.g integration and/or UI tests)."),m(256,"br"),l(257," The "),d(258,"a",22),l(259,"Test Pyramid"),h(),l(260," could be a guide for that process.\n"),h(),d(261,"h3"),l(262,"Legacy Code"),h(),d(263,"p"),l(264," Legacy code in a sentence is "),d(265,"a",23),l(266,"valuable code you are afraid to change"),h(),m(267,"br"),l(268," It typically:\n"),h(),d(269,"ul",10)(270,"li"),l(271,"has been developed for some time"),h(),d(272,"li"),l(273,"is already 'working' (for most common scenarios / most of the time)"),h(),d(274,"li"),l(275,"has some bad code design that has crept in with time"),m(276,"br"),l(277," (e.g. high coupling / high dependency)"),h(),d(278,"li"),l(279,"is hard to read and understand and reason about"),h(),d(280,"li"),l(281,"has no or few good unit tests / very low test coverage"),m(282,"br"),l(283," (or many very bad and fragile tests that are hard to read and understand"),h()(),d(284,"p"),l(285," When you need to fix or change legacy code"),m(286,"br"),l(287," it is hard to do and have the confidence that the change did not break something else."),m(288,"br"),l(289," A breakage is discovered late (QA manual testing or live production) which can be very costly"),m(290,"br"),l(291," (and it always takes effort to get again into the context to fix the bug)."),m(292,"br")(293,"br"),l(294," It's possible to prevent bad code design to creep up"),m(295,"br"),l(296," by strictly upholding great design principles, without writing unit tests."),m(297,"br"),l(298," But using TDD complements this prevention very well (see "),d(299,"i"),l(300,"Why do TDD ?"),h(),l(301," section above)"),m(302,"br")(303,"br"),l(304," One of the negative consequence of legacy code is that it's very hard to write unit tests"),m(305,"br"),l(306," They likely need a lot of "),d(307,"a",24),l(308,"Test Doubles"),h(),l(309," to mute dependency interference"),m(310,"br"),l(311," (where static objects and "),d(312,"a",25),l(313,"Singletons"),h(),l(314," become very tricky)."),m(315,"br")(316,"br"),l(317," Legacy code needs to be carefully refactored (ideally first covered with tests) into a better state"),m(318,"br"),l(319," before TDD can be used effortlessly and to it's full potential."),m(320,"br"),l(321," Improving legacy code is a big topic thus I'll leave it here by"),m(322,"br"),l(323," referencing one book: "),d(324,"a",26),l(325,"Working Effectively with Legacy Code"),h(),l(326,","),m(327,"br"),l(328," and one post: "),d(329,"a",27),l(330,"Starting TDD with legacy code"),h(),l(331,".\n"),h(),d(332,"h3"),l(333,"Prototype code"),h(),d(334,"p"),l(335," The focus of prototyping is to get out an idea as fast as possible to get feedback on it."),m(336,"br"),l(337," It should be time boxed and at the end of the period it should be decided if the idea should become a real production project or not,"),m(338,"br"),l(339," and there should be a "),d(340,"b"),l(341,"clear agreement that the prototype code will be thrown away"),h(),l(342,"."),m(343,"br"),l(344," It is fine to not (or sparsely) use TDD in the prototyping phase, if the consensus is it slows things down,"),m(345,"br"),l(346," but TDD should be used when the production project codebase is started from scratch."),m(347,"br"),h(),m(348,"div",28),d(349,"h2"),l(350,"Comments"),h(),d(351,"h4"),l(352,"Fabio Paes Pedro"),h(),d(353,"p"),l(354," I'm no expert but the value TDD provides became clear to me quite fast."),m(355,"br"),l(356," I believe this requires a mindset/process change though,"),m(357,"br"),l(358," a different way of thinking things through that might extend outside of our team, into a company level."),m(359,"br"),l(360," I can't wait to read the rest of this series!\n"),h(),d(361,"h4"),l(362,"My response"),h(),d(363,"p"),l(364," Thank you for your comment Fabio."),m(365,"br"),l(366," I agree that TDD requires a mindset/process change,"),m(367,"br"),l(368," where ideally the whole team and the company are aligned on using TDD to reap its benefits,"),m(369,"br"),l(370," (synced on an approach that recognizes that in some areas / situations the value of TDD can be limited (as the sections above go through)."),m(371,"br"),l(372," I aim to continue writing blog post and complete this series, so stay tuned :)\n"),h(),m(373,"div",28)),2&t&&(C(1),nt(i.post.seriesTitle),C(2),nt(i.post.title),C(5),Qe(" published on ",i.publishedDateToString,""),C(2),T("ngIf",i.hasUpdatedDate))},dependencies:[Mn],styles:[".redFail[_ngcontent-%COMP%]{color:var(--colorRed)}.greenPass[_ngcontent-%COMP%]{color:var(--colorGreenLight)}.greenRefactor[_ngcontent-%COMP%]{color:var(--colorGreenLightMed)}.outOfScope[_ngcontent-%COMP%]{color:var(--colorGrayLight)}.byAndDate[_ngcontent-%COMP%]{text-align:center}.noBulletinPoint[_ngcontent-%COMP%]{list-style:none}"]})}function R4(n,e){if(1&n&&(d(0,"small"),l(1),h()),2&n){const t=Ne();C(1),Qe(" updated on ",t.updatedDateToString," ")}}class $l extends Si{static#e=this.\u0275fac=function(){let e;return function(i){return(e||(e=ft($l)))(i||$l)}}();static#t=this.\u0275cmp=kt({type:$l,selectors:[["app-post-tdd-2"]],features:[He],decls:300,vars:4,consts:[[1,"byAndDate"],[4,"ngIf"],["href","https://www.maginteractive.com"],["href","https://www.youtube.com/watch?v=R1aO4Tmw3zA&list=PLKERDLXpXl_jJQiQOHDLimnulasAK3T5b"],["href","https://zelda.fandom.com/wiki/Life_Gauge"],[1,"list","inline"],["href","https://egill.rocks/blog/tdd-health/part1"],["href","https://en.wikipedia.org/wiki/Live_coding"],["href","https://www.youtube.com/watch?v=_vd2JyX6C1Y&list=PLKERDLXpXl_jJQiQOHDLimnulasAK3T5b&index=8"],["href","https://www.youtube.com/watch?v=LPlH87XaWC8&list=PLKERDLXpXl_jJQiQOHDLimnulasAK3T5b&index=9"],[1,"redFail"],[1,"greenPass"],[1,"greenRefactor"],[1,"outOfScope"],[1,"list"],[1,"noBulletinPoint"],[1,"center"],["href","./blog/tdd-health/part1"]],template:function(t,i){1&t&&(d(0,"h1"),l(1),h(),d(2,"h2"),l(3),h(),d(4,"div",0)(5,"small"),l(6,"by Egill Antonsson"),m(7,"br"),l(8),m(9,"br"),h(),Le(10,R4,2,1,"small",1),h(),d(11,"h2"),l(12,"Preparing the assignment"),h(),d(13,"h3"),l(14,"My workshop"),h(),d(15,"p"),l(16," I recently to do a short workshop about TDD at "),d(17,"a",2),l(18,"work"),h(),m(19,"br"),l(20," and for preparation I browsed the internet looking for a fitting assignment,"),m(21,"br"),l(22," and I came across "),d(23,"a",3),l(24,"TDD in Unity - Part 1"),h(),l(25," by Charles Amat, where he sets up his assignment:"),m(26,"br"),l(27," implementing the "),d(28,"i"),l(29,"Life Gauge"),h(),l(30," from "),d(31,"i"),l(32,"Zelda: Breath of the Wild"),h(),l(33," game."),m(34,"br")(35,"br"),l(36," I thought this assignment was fitting for the workshop,"),m(37,"br"),l(38," thus I read the "),d(39,"a",4),l(40,"Life Gauge page on the Zelda wiki"),h(),l(41," (which was linked in the 'Part 1' post),"),m(42,"br"),l(43," and also played the game a bit, focusing on the "),d(44,"i"),l(45,"Life Gauge"),h(),l(46," behavior."),m(47,"br"),l(48," But I did not go through the 'TDD in Unity' series, as I was running out of preparation time."),m(49,"br")(50,"br"),l(51," My focus and task order in both my preparations and workshop walk-through:"),m(52,"br"),h(),d(53,"ol",5)(54,"li"),l(55,"Write down the "),d(56,"i"),l(57,"Life Gauge"),h(),l(58," behavior from the user perspective"),m(59,"br"),l(60," (based on the wiki, and to a lesser degree my experience, as I'm not so good in "),d(61,"i"),l(62,"Zelda: Breath of the Wild"),h(),l(63,")"),h(),m(64,"br"),d(65,"li"),l(66,"Focus first on the (non visual) domain logic and implement all the requirements it should fulfill,"),m(67,"br"),l(68," as TDD is fully effective and effortless in the domain model"),h(),m(69,"br"),d(70,"li"),l(71,"Afterwards the focus would shift to the visual GUI,"),m(72,"br"),l(73," where the value of TDD likely would dwindle the closer I got to the physical boundary of the screen,"),m(74,"br"),l(75," ending with just manually testing with my eyes."),m(76,"br"),l(77," (Boundary layers section in "),d(78,"a",6),l(79,"Part 1"),h(),l(80," elaborates on 2. and 3.)"),h()(),d(81,"p"),l(82," I only had time prepare the first couple of domain logic requirements,"),m(83,"br"),l(84," and during the workshop we collaboratively completed those together"),m(85,"br"),l(86," (before the time was up)."),m(87,"br"),h(),d(88,"h3"),l(89,"Comparing approaches on the assignment"),h(),d(90,"p"),l(91," After the workshop I was curious how Charles Amat solved it,"),m(92,"br"),l(93," thus I watched on YouTube the whole "),d(94,"a",3),l(95,"TDD in Unity"),h(),l(96," series."),m(97,"br"),l(98," I both enjoyed and learned from watching Charles Amat "),d(99,"a",7),l(100,"live coding"),h(),l(101," and implementing the "),d(102,"i"),l(103,"Life Gauge"),h(),m(104,"br"),l(105," and his end result solution is good and sound, and I thank Charles for his contribution."),m(106,"br"),l(107," but I noticed that his focus and task order quite differed from mine, as he:"),m(108,"br"),h(),d(109,"ol",5)(110,"li"),l(111,"Starts planning how to create the heart container in Unity,"),m(112,"br"),l(113," from a GUI perspective"),h(),m(114,"br"),d(115,"li"),l(116,"Starts TDD-ing logic close to the GUI"),h(),m(117,"br"),d(118,"li"),l(119,"Ends with TDD-ing the domain logic ("),d(120,"a",8),l(121,"Part 7"),h(),l(122," and "),d(123,"a",9),l(124,"Part 8"),h(),l(125,")."),m(126,"br"),l(127," He simplifies the domain requirements from the "),d(128,"i"),l(129,"Breath of the Wild"),h(),m(130,"br"),l(131," as he states in the beginning"),m(132,"br"),d(133,"q"),l(134,"The Heart container depletes when the player takes damage"),m(135,"br"),l(136," and is replenished when the player consumes an item with a health effect. "),h()()(),d(137,"h3"),l(138,"Same assignment, but with a different focus"),h(),d(139,"p"),l(140," This is why I think it's worth doing another series with the same assignment,"),m(141,"br"),l(142," but with my focus, task order, and format."),m(143,"br")(144,"br"),l(145," My format will be blog posts focused on the TDD cycles"),m(146,"br"),l(147," displaying the appropriate code for each step."),m(148,"br"),l(149," I'll demonstrate how the requirements and the cycles"),m(150,"br"),l(151," guide and shape the code and my reasoning,"),m(152,"br"),l(153," that will read like poetry of rhythmic "),d(154,"span",10),l(155,"RED "),h(),d(156,"span",11),l(157,"GREEN "),h(),d(158,"span",12),l(159,"REFACTOR "),h(),l(160," loops,"),m(161,"br"),l(162," at least that's my ambition :)"),m(163,"br"),h(),d(164,"h2"),l(165,"The Life Gauge behavior"),h(),d(166,"p"),l(167,"\nThe below list is user perspective behaviour summary from"),m(168,"br"),l(169,"\nthe "),d(170,"a",4),l(171,"Life Gauge page on the Zelda Wiki"),h(),l(172," for the "),d(173,"i"),l(174,"Breath of the Wild"),h(),l(175," game."),m(176,"br"),l(177,"\nI've simplified some requirements to keep the scope within a sensible limit."),m(178,"br"),l(179,"\nI've also provided more detail where needed by playing and observing the game."),m(180,"br"),d(181,"span",13),l(182,"With real-live gameplay-in-development scenario,"),m(183,"br"),l(184,"\nit's important to get the needed details of the requirements as early as possible,"),m(185,"br"),l(186,"\nideally before starting the code implementation."),h()(),d(187,"ul",14)(188,"li",15)(189,"b"),l(190,"Definition and Start State"),h()(),d(191,"li"),l(192,"The Life Gauge measures Link's (the avatar) current amount of health"),h(),d(193,"li"),l(194,"Health is visually represented in the form of Hearts, and they are in fractions of 4"),h(),d(195,"li"),l(196,"The Life Gauge starts with 3 Hearts"),h(),m(197,"br"),d(198,"li",15)(199,"b"),l(200,"Taking Damage and Dying"),h()(),d(201,"li"),l(202,"Whenever Link takes damage he will lose a certain amount of Heart fractions"),m(203,"br"),l(204," equal to the damage points taken (always losing at least 1 fraction)"),h(),d(205,"li"),l(206,"When Link loses all of his Hearts the game ends"),h(),d(207,"li"),l(208,"Link is protected from any damage that would instantly kill him as long as his Life Gauge is full"),m(209,"br"),l(210," and will instead be left alive with Hearth 1 fraction remaining"),h(),d(211,"ul")(212,"li"),l(213,"However, if the damage is more than 5 Hearts in addition to his full Life Gauge, he will still die"),h()(),m(214,"br"),d(215,"li",15)(216,"b"),l(217,"Replenish and Increase"),h()(),d(218,"li"),l(219,"The Life Gauge can be replenished by consuming certain items"),h(),d(220,"li"),l(221,"The Life Gauge can be increased by 1 Heart at a time"),h(),d(222,"ul")(223,"li"),l(224,"Link's health will become full with the increase"),h()(),d(225,"li"),l(226,"The maximum of Hearts is 30"),h()(),d(227,"h3"),l(228,"Model / View mapping of "),d(229,"i"),l(230,"Life Gauge"),h(),l(231," - "),d(232,"i"),l(233,"SoC"),h()(),d(234,"table")(235,"tr")(236,"th")(237,"b"),l(238,"Domain Model"),h()(),d(239,"th")(240,"b"),l(241,"View / GUI"),h()()(),d(242,"tr")(243,"td",16),l(244," (Avatar) Health "),h(),d(245,"td",16),l(246," Life Gauge "),h()(),d(247,"tr")(248,"td",16)(249,"i"),l(250,"TBD later"),h()(),d(251,"td",16),l(252," Heart (holds 4 Fractions) "),h()(),d(253,"tr")(254,"td",16),l(255," Points "),h(),d(256,"td",16),l(257," Heart Fractions "),h()()(),d(258,"p"),l(259,"\nThis mapping is good to establish early:"),m(260,"br"),l(261,"\nHeart Container (with its Hearts and fractions)"),m(262,"br"),l(263,"\nis a specific view representation of the Avatar Health, the domain model."),m(264,"br"),l(265,"\nThis is a good start of a "),d(266,"i"),l(267,"Separation of Concerns (SoC)"),h(),l(268," which I'll plot further on below."),m(269,"br")(270,"br"),l(271,"\nI'll apply the approach in the "),d(272,"i"),l(273,"Boundary layers"),h(),l(274," section in "),d(275,"a",17),l(276,"Part 1"),h(),l(277,","),m(278,"br"),l(279,"\nmaking sure that the code dependency is minimal and one-way:\n"),h(),d(280,"ul",5)(281,"li"),l(282,"the view can depend in minimal way on the model, but not vice-versa"),h(),d(283,"li"),l(284,"all the domain logic should be in the model"),h(),d(285,"li"),l(286,"the view should be thin and humble"),h()(),d(287,"p"),l(288,"\nThus when future change requests on the GUI arrive (which is likely, in a real-life scenario),"),m(289,"br"),l(290,"\nit will be effortless to handle as:\n"),h(),d(291,"ul",5)(292,"li"),l(293,"The domain and its logic will be unaffected"),h(),d(294,"li"),l(295,"The model naming and terms will be unaffected"),h()(),d(296,"p"),l(297,"\nThis also makes it effortless to display simultaneously more than one GUI representations"),m(298,"br"),l(299,"\nof the same model (which is quite common in game UI).\n"),h()),2&t&&(C(1),nt(i.post.seriesTitle),C(2),nt(i.post.title),C(5),Qe(" published on ",i.publishedDateToString,""),C(2),T("ngIf",i.hasUpdatedDate))},dependencies:[Mn],styles:[".redFail[_ngcontent-%COMP%]{color:var(--colorRed)}.greenPass[_ngcontent-%COMP%]{color:var(--colorGreenLight)}.greenRefactor[_ngcontent-%COMP%]{color:var(--colorGreenLightMed)}.outOfScope[_ngcontent-%COMP%]{color:var(--colorGrayLight)}.byAndDate[_ngcontent-%COMP%]{text-align:center}.noBulletinPoint[_ngcontent-%COMP%]{list-style:none}"]})}class N4{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new F4(e,this.resultSelector))}}class F4 extends Ae{constructor(e,t,i=Object.create(null)){super(e),this.resultSelector=t,this.iterators=[],this.active=0,this.resultSelector="function"==typeof t?t:void 0}_next(e){const t=this.iterators;Ze(e)?t.push(new U4(e)):t.push("function"==typeof e[B]?new V4(e[B]()):new H4(this.destination,this,e))}_complete(){const e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(let i=0;i<t;i++){let r=e[i];r.stillUnsubscribed?this.destination.add(r.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const e=this.iterators,t=e.length,i=this.destination;for(let o=0;o<t;o++){let a=e[o];if("function"==typeof a.hasValue&&!a.hasValue())return}let r=!1;const s=[];for(let o=0;o<t;o++){let a=e[o],c=a.next();if(a.hasCompleted()&&(r=!0),c.done)return void i.complete();s.push(c.value)}this.resultSelector?this._tryresultSelector(s):i.next(s),r&&i.complete()}_tryresultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}class V4{constructor(e){this.iterator=e,this.nextResult=e.next()}hasValue(){return!0}next(){const e=this.nextResult;return this.nextResult=this.iterator.next(),e}hasCompleted(){const e=this.nextResult;return Boolean(e&&e.done)}}class U4{constructor(e){this.array=e,this.index=0,this.length=0,this.length=e.length}[B](){return this}next(e){const t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class H4 extends Wt{constructor(e,t,i){super(e),this.parent=t,this.observable=i,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[B](){return this}next(){const e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(e){this.buffer.push(e),this.parent.checkIterators()}subscribe(){return mn(this.observable,new At(this))}}class B4 extends H{constructor(e,t){super()}schedule(e,t=0){return this}}class gm extends B4{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,i=0){return setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=!!s&&s||new Error(s)}if(i)return this.unsubscribe(),r}_unsubscribe(){const e=this.id,t=this.scheduler,i=t.actions,r=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&i.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}let wE=(()=>{class n{constructor(t,i=n.now){this.SchedulerAction=t,this.now=i}schedule(t,i=0,r){return new this.SchedulerAction(this,t).schedule(r,i)}}return n.now=()=>Date.now(),n})();class ir extends wE{constructor(e,t=wE.now){super(e,()=>ir.delegate&&ir.delegate!==this?ir.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,i){return ir.delegate&&ir.delegate!==this?ir.delegate.schedule(e,t,i):super.schedule(e,t,i)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let i;this.active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const mm=new class G4 extends ir{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let i,r=-1,s=t.length;e=e||t.shift();do{if(i=e.execute(e.state,e.delay))break}while(++r<s&&(e=t.shift()));if(this.active=!1,i){for(;++r<s&&(e=t.shift());)e.unsubscribe();throw i}}}(class j4 extends gm{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}}),Ld=new Q("HIGHLIGHT_OPTIONS");let $4=(()=>{class n{constructor(t,i,r){this.doc=t,this._options=r,this._ready=new Rn(null),this.ready=this._ready.asObservable().pipe($n(s=>!!s),$(s=>s),Ts(1)),Jw(i)&&(t.defaultView.hljs?this._ready.next(t.defaultView.hljs):this._loadLibrary().pipe(fi(s=>this._options&&this._options.lineNumbersLoader?(t.defaultView.hljs=s,this.loadLineNumbers().pipe(Tt(()=>this._ready.next(s)))):(this._ready.next(s),Gr)),qr(s=>(console.error("[HLJS] ",s),Gr))).subscribe(),this._options.themePath&&this.loadTheme(this._options.themePath))}_loadLibrary(){if(this._options){if(this._options.fullLibraryLoader&&this._options.coreLibraryLoader)return Gi("The full library and the core library were imported, only one of them should be imported!");if(this._options.fullLibraryLoader&&this._options.languages)return Gi("The highlighting languages were imported they are not needed!");if(this._options.coreLibraryLoader&&!this._options.languages)return Gi("The highlighting languages were not imported!");if(!this._options.coreLibraryLoader&&this._options.languages)return Gi("The core library was not imported!");if(this._options.fullLibraryLoader)return this.loadFullLibrary();if(this._options.coreLibraryLoader&&this._options.languages&&Object.keys(this._options.languages).length)return this.loadCoreLibrary().pipe(fi(t=>this._loadLanguages(t)))}return Gi("Highlight.js library was not imported!")}_loadLanguages(t){const i=Object.entries(this._options.languages).map(([r,s])=>Nd(s()).pipe(Tt(o=>t.registerLanguage(r,o))));return function L4(...n){const e=n[n.length-1];return"function"==typeof e&&n.pop(),Qt(n,void 0).lift(new N4(e))}(...i).pipe($(()=>t))}loadCoreLibrary(){return Nd(this._options.coreLibraryLoader())}loadFullLibrary(){return Nd(this._options.fullLibraryLoader())}loadLineNumbers(){return Nd(this._options.lineNumbersLoader())}setTheme(t){this._themeLinkElement.href=t}loadTheme(t){this._themeLinkElement=this.doc.createElement("link"),this._themeLinkElement.href=t,this._themeLinkElement.type="text/css",this._themeLinkElement.rel="stylesheet",this._themeLinkElement.media="screen,print",this.doc.head.appendChild(this._themeLinkElement)}}return n.\u0275fac=function(t){return new(t||n)(U(Rt),U(Ya),U(Ld,8))},n.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Nd=n=>he(n).pipe($n(e=>!!e&&!!e.default),$(e=>e.default));let z4=(()=>{class n{constructor(t,i){this._loader=t,this._hljs=null,t.ready.subscribe(r=>{this._hljs=r,i&&i.config&&(r.configure(i.config),r.listLanguages().length<1&&console.error("[HighlightJS]: No languages were registered!"))})}get hljs(){return this._hljs}highlight(t,{language:i,ignoreIllegals:r}){return this._loader.ready.pipe($(s=>s.highlight(t,{language:i,ignoreIllegals:r})))}highlightAuto(t,i){return this._loader.ready.pipe($(r=>r.highlightAuto(t,i)))}highlightElement(t){return this._loader.ready.pipe($(i=>i.highlightElement(t)))}highlightAll(){return this._loader.ready.pipe($(t=>t.highlightAll()))}configure(t){return this._loader.ready.pipe($(i=>i.configure(t)))}registerLanguage(t,i){return this._loader.ready.pipe(Tt(r=>r.registerLanguage(t,i)))}unregisterLanguage(t){return this._loader.ready.pipe(Tt(i=>i.unregisterLanguage(t)))}registerAliases(t,{languageName:i}){return this._loader.ready.pipe(Tt(r=>r.registerAliases(t,{languageName:i})))}listLanguages(){return this._loader.ready.pipe($(t=>t.listLanguages()))}getLanguage(t){return this._loader.ready.pipe($(i=>i.getLanguage(t)))}safeMode(){return this._loader.ready.pipe($(t=>t.safeMode()))}debugMode(){return this._loader.ready.pipe($(t=>t.debugMode()))}lineNumbersBlock(t){return this._loader.ready.pipe($n(i=>!!i.lineNumbersBlock),Tt(i=>i.lineNumbersBlock(t)))}}return n.\u0275fac=function(t){return new(t||n)(U($4),U(Ld,8))},n.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ns=(()=>{class n{constructor(t,i,r,s){this._hljs=i,this._sanitizer=r,this._options=s,this.highlighted=new et,this._nativeElement=t.nativeElement}ngOnChanges(t){this.code&&t?.code?.currentValue&&t.code.currentValue!==t.code.previousValue&&this.highlightElement(this.code,this.languages)}highlightElement(t,i){this.setTextContent(t),this._hljs.highlightAuto(t,i).subscribe(r=>{this.setInnerHTML(r.value||null),this.lineNumbers&&this._options&&this._options.lineNumbersLoader&&this.addLineNumbers(),this.highlighted.emit(r)})}addLineNumbers(){this.destroyLineNumbersObserver(),mm.schedule(()=>{this._hljs.lineNumbersBlock(this._nativeElement).subscribe(),this._lineNumbersObs=new MutationObserver(()=>{this._nativeElement.firstElementChild&&"TABLE"===this._nativeElement.firstElementChild.tagName.toUpperCase()&&this._nativeElement.classList.add("hljs-line-numbers"),this.destroyLineNumbersObserver()}),this._lineNumbersObs.observe(this._nativeElement,{childList:!0})})}destroyLineNumbersObserver(){this._lineNumbersObs&&(this._lineNumbersObs.disconnect(),this._lineNumbersObs=null)}setTextContent(t){mm.schedule(()=>this._nativeElement.textContent=t)}setInnerHTML(t){mm.schedule(()=>this._nativeElement.innerHTML=this._sanitizer.sanitize(mt.HTML,t)||"")}}return n.\u0275fac=function(t){return new(t||n)(x(jt),x(z4),x(E0),x(Ld,8))},n.\u0275dir=ve({type:n,selectors:[["","highlight",""]],hostVars:2,hostBindings:function(t,i){2&t&&hi("hljs",!0)},inputs:{code:["highlight","code"],languages:"languages",lineNumbers:"lineNumbers"},outputs:{highlighted:"highlighted"},features:[Jn]}),n})(),W4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=an({}),n})();function q4(n,e){if(1&n&&(d(0,"small"),l(1),h()),2&n){const t=Ne();C(1),Qe(" updated on ",t.updatedDateToString," ")}}class zo extends Si{get requirements(){return"<h2>The start state requirements</h2>\n<p>Let's recap these requirements from the user perspective</p>\n<ul class=\"list inline\">\n\t<li>The Life Gauge measures Link's (the avatar) current amount of health</li>\n\t<li>Health is visually represented in the form of Hearts, and they are in fractions of 4</li>\n\t<li>The Life Gauge starts with 3 Hearts</li>\n</ul>"+this.completeRequirementListHtml+'<p>Focusing only on the domain logic I filter and reword into one requirement:</p>\n<ul class="list inline">\n\t<li>Avatar Health starts with 12 Health Points (equals to the visual representation of 3 Hearts * 4 Fractions)</li>\n</ul>\n'}redDoesNotCompileStartingValue(){return"<p>The domain model focus will be the <code>Health</code> class (not created yet), thus I create the test file and write the first test and see it fail (as the code does not compile).\n</p>"}codeTestRedDoesNotCompileStartingValue(){return"// HealthTest.cs\nusing NUnit.Framework;\n\npublic class HealthTest\n{\n\tpublic class Constructor\n\t{\n\t\t[Test]\n\t\tpublic void Points_HasStartingValue()\n\t\t{\n\t\t\tvar health = new Health();\n\t\t\tAssert.That(health.points, Is.EqualTo(12));\n\t\t}\n\t}\n}\n"}redAfterDoesNotCompileStartingValue(){return'<p>I create and name a nested class after the <i>entry point</i> of the test (<i>entry point</i> is defined in <i>What is a good Unit Test section</i> in <a href="./blog/tdd-health/part1">Part 1</a>), thus is named <code>Constructor</code> in this case. I got the idea from post <a href="https://daedtech.com/tdd-and-modeling-a-chess-game/">TDD and modeling a chess game</a> (author Erik Dietrich) that references <a href="https://haacked.com/archive/2012/01/02/structuring-unit-tests.aspx/">Structuring Unit Tests</a> (author Phil Haack).</p>\n<p>I\'m using the <a href="https://docs.nunit.org/articles/nunit/writing-tests/assertions/assertions.html#two-models">Constraint Model of Assertions.</a>.</p>'}redStartingValue1(){return"<p>I write the minimal production code for the compiler to compile successfully and then run the test and I want to see it fail to verify that the test is not passing when it should not.</p>"}codeTestRedStartingValue(){return"// Health.cs\npublic class Health\n{\n\tpublic int points;\n}\n"}redStartingValueImgUrl(){return"../assets/images/blog/tdd/part3/TestRunner_first-test-fails.PNG"}redStartingValueImgCaption(){return"The test runner after first test fail"}redStartingValueImg(){return'<figure>\n<img src="'+this.redStartingValueImgUrl()+'"alt="'+this.redStartingValueImgCaption()+'"title="'+this.redStartingValueImgCaption()+'"class="imageSmallText">\n<figcaption>'+this.redStartingValueImgCaption()+"</figcaption>\n</figure>"}redStartingValue2(){return"<p>Going forward I will skip demonstrating both 'red' steps and only demonstrate one and simply call it RED (although I do both steps when coding).\n\t</p>"}greenStartingValue(){return"<p>I make the test pass with this very simple implementation:</p>"}codeImplGreenStartingValue(){return"// Health.cs\npublic class Health\n{\n\tpublic int points = 12;\n}\n"}greenStartingValue1(){return"<p>It comes to mind that it's good to be able to tweak the starting points at compile time for game design balancing, thus I refactor the value to be passed as param into the constructor.</p>"}greenStartingValue2(){return'<p>\n\t\tI rename the member variable and thus the test case to current points. I name the constructor param <span class="code">startingPoints</span>.\n\t\t</p>'}codeTestRefactorStartingValue(){return"// HealthTest.cs\n// inside nested Constructor class.\n[Test]\npublic void CurrentPoints_HasStartingValue()\n{\n\tint startingPoints = 12;\n\tvar health = new Health(startingPoints);\n\tAssert.That(health.CurrentPoints, Is.EqualTo(startingPoints));\n}\n"}greenStartingValue3(){return"<p>I encapsulate current points by providing a 'getter'. I want to <a href=\"https://medium.com/swlh/the-importance-of-code-encapsulation-ce19efbcfe57\">encapsulate</a> the production code so that the only exposure comes from the requirements that the TDD cycles drives (more exposure could be required in certain cases but should be kept to the bare minimum).</p>"}codeImplRefactorStartingValue(){return"// Health.cs\npublic int CurrentPoints { get; private set; }\n\npublic Health(int startingPoints)\n{\n\tCurrentPoints = startingPoints;\n}\n"}invalidStartingPoints(){return"<p>It comes to mind that invalid values can be passed into the constructor, as our avatar should never start with less than 1 points (starting up being dead is a 'no show'). I deem it appropriate that the production code throws an exception when the value is invalid and I write a test that expects this, and it expectedly fails as the throwing has not been implemented.</p>\n<p>Going forward I'll present only the code that's the focus of the current TDD step.</p>\n"}codeTestRedInvalidStartingPoints(){return'// HealthTest.cs\n// inside nested Constructor class.\n[Test]\npublic void ThrowsError_WhenStartingPointsIsInvalid()\n{\n\tvar exception = Assert.Throws(Is.TypeOf<ArgumentOutOfRangeException>(), delegate\n\t\t{\n\t\t\tnew Health(0);\n\t\t});\n\tAssert.That(exception.Message, Does.Match("invalid").IgnoreCase);\n}\n'}redInvalidStartingPoints1(){return'<p>I deem I can use an existing system exception for this case. I choose the value <code>0</code> for the <span class="code">StartingPoints</span> param because it\'s on the edge of the invalidation (as <code>1</code> is valid).</p>'}redInvalidStartingPoints2(){return'<p>I assert that the message contains "invalid" (ignoring the case), intentionally not being more specific so the assert does not fail later because of potential rewording improvements.</p>'}testNamingConvention(){return"<h4>My test naming convention</h4>\n<p>After the <i>entry point</i> has been stated (as I've already done) the rest of the test naming should be one of the following:</p>\n<ul class=\"list\">\n\t<li>[ <i>Exit point</i> ] _ [ will be in state (after 'happy success path') ]</li>\n\t\t<ul><li>e.g. <code>CurrentPoints_HasStartingValue</code></li></ul>\n\t<li>[ <i>Exit point</i> ] _ When [ Scenario (other than 'happy success path') ]</li>\n\t<li>[ Expected behavior of <i>Unit of Work</i> ] _ When [ Scenario ]</li>\n\t<ul><li>e.g. <code>ThrowsEx_WhenStartingPointsIsInvalid</code></li></ul>\n</ul>\n<p><i>Exit point</i> and <i>Unit of Work</i> are defined in <i>What is a good Unit Test section</i> in <a href=\"./blog/tdd-health/part1\">Part 1</a>. Underscores are skipped if not allowed.</p>"}codeImplGreenInvalidStartingPoints(){return'//Health.cs\npublic int CurrentPoints { get;  private set; }\n\npublic Health(int startingPoints)\n{\n\tif (startingPoints < 1)\n\t{\n\t\tthrow new ArgumentOutOfRangeException(nameof(startingPoints), "Invalid value");\n\t}\n\n\tCurrentPoints = startingPoints;\n}\n'}greenInvalidStartingPoints(){return"<p>I'm confident that the implementation of the <code>if</code> conditional handles all potential input values properly. However I just did the bare minimum for the exception message and I will refactor it in the next step:</p>"}codeImplRefactorInvalidStartingPoints(){return'//Health.cs\npublic Health(int startingPoints)\n{\n\tconst int lowestValidValue = 1;\n\tif (startingPoints < lowestValidValue)\n\t{\n\t\tvar message = $"Value {startingPoints} is invalid, it should be equal or higher than {lowestValidValue}";\n\t\tthrow new ArgumentOutOfRangeException(nameof(startingPoints), message);\n\t}\n\n\tCurrentPoints = startingPoints;\n}\n'}refactorInvalidStartingPoints(){return"<p>\n\t\tI define <code>lowestValidValue</code> and use it both in the condition and the message. This makes the message informative and makes sure the conditional and message will always be in sync. I verify the message displays as expected (with debug breakpoint):\n\t<i>Value 0 is invalid, it should be equal or higher than 1.</i></p>"}testingMoreValues(){return"<p>I'm confident that this implementation works for any passed in param value. But I'll test a few more values to verify it and demonstrate how to do it in a maintainable way.</p>"}parameterizedRefactor1(){return"<p>I refactor the tests and add test cases where the value is close to the valid/invalid edge.</p>"}parameterizedRefactor2(){return'<p>To achieve this in a maintainable way I use <a href="https://docs.nunit.org/articles/nunit/technical-notes/usage/Parameterized-Tests.html">Parameterized Tests</a> with inline <a href="https://docs.nunit.org/articles/nunit/writing-tests/attributes/testcase.html">TestCase</a> attribute.</p>'}codeTestRefactorParameterized(){return'// HealthTest.cs\n// inside nested class Constructor\n[TestCase(12)]\n[TestCase(1)]\npublic void CurrentPoints_HasStartingValue(int startingPoints)\n{\n\tvar health = new Health(startingPoints);\n\tAssert.That(health.CurrentPoints, Is.EqualTo(startingPoints));\n}\n\n[TestCase(0)]\n[TestCase(-1)]\npublic void ThrowsError_WhenStartingPointsIsInvalid(int startingPoints)\n{\n\tvar exception = Assert.Throws(Is.TypeOf<ArgumentOutOfRangeException>(),\n\t\tdelegate\n\t\t{\n\t\t\tnew Health(startingPoints);\n\t\t});\n\tAssert.That(exception.Message, Does.Match("invalid").IgnoreCase);\n}\n'}parameterizedRefactor3(){return"<p>Now total 4 test cases are run and the test runner looks like this:</p>"}parameterizedRefactorImgUrl(){return"../assets/images/blog/tdd/part3/TestRunner_after-parameterized-refactor.PNG"}parameterizedRefactorImgCaption(){return"The test runner after parameterized refactor"}parameterizedRefactorImg(){return'<figure>\n<img src="'+this.parameterizedRefactorImgUrl()+'"alt="'+this.parameterizedRefactorImgCaption()+'"title="'+this.parameterizedRefactorImgCaption()+'"class="imageSmallText">\n<figcaption>'+this.parameterizedRefactorImgCaption()+"</figcaption>\n</figure>"}static#e=this.\u0275fac=function(){let e;return function(i){return(e||(e=ft(zo)))(i||zo)}}();static#t=this.\u0275cmp=kt({type:zo,selectors:[["app-post-tdd-3"]],features:[He],decls:168,vars:34,consts:[[1,"byAndDate"],[4,"ngIf"],["href","https://unity.com"],["href","https://nunit.org"],["href","https://github.com/EgillAntonsson/tdd-avatar-health-in-unity"],["href","https://docs.unity3d.com/Packages/com.unity.test-framework@1.1/manual/index.html"],[1,"list","inline"],["href","https://docs.unity3d.com/Manual/Coroutines.html"],["href","./blog/tdd-health/part1"],["href","https://docs.unity3d.com/Packages/com.unity.test-framework@1.1/manual/edit-mode-vs-play-mode-tests.html"],[3,"innerHTML"],[1,"redFail"],[3,"highlight"],[1,"greenPass"],[1,"greenRefactor"],[1,"code"]],template:function(t,i){1&t&&(d(0,"h1"),l(1),h(),d(2,"h2"),l(3),h(),d(4,"div",0)(5,"small"),l(6,"by Egill Antonsson"),m(7,"br"),l(8),m(9,"br"),h(),Le(10,q4,2,1,"small",1),h(),d(11,"h2"),l(12,"Using Unity (.NET)"),h(),d(13,"p"),l(14," I will use "),d(15,"a",2),l(16,"Unity"),h(),l(17," and the "),d(18,"i"),l(19,"Test Framework"),h(),l(20," package (a Unity integration of the "),d(21,"a",3),l(22,"NUnit"),h(),l(23," framework). The whole project is on "),d(24,"a",4),l(25,"GitHub"),h(),l(26," (including the Unity and package versions). Another C# .NET and Test Runner could be used for implementing the domain logic, but I choose Unity because I'm an experienced Unity developer and could effortlessly add the graphic visuals afterwards (but I might stop this blog series without visuals and instead blog about something else).\n"),h(),d(27,"h2"),l(28,"Setup"),h(),d(29,"p"),l(30," I create a new Unity project and the update "),d(31,"i"),l(32,"Test Framework"),h(),l(33," package to latest version. The package "),d(34,"a",5),l(35,"docs"),h(),l(36," detail how to setup tests for a project.\n"),h(),d(37,"p"),l(38," My project structure starts very simple\n"),h(),d(39,"ul",6)(40,"li"),l(41,"The test code is in "),d(42,"i"),l(43,"Scripts/Tests/EditMode/ClassName]Test.cs"),h()(),d(44,"li"),l(45,"The production code is in "),d(46,"i"),l(47,"Scripts/Runtime/[ClassName].cs"),h()()(),d(48,"p"),l(49," As the folder structure implies I'm doing "),d(50,"i"),l(51,"EditMode"),h(),l(52," tests for the production "),d(53,"i"),l(54,"Runtime"),h(),l(55," code. "),d(56,"i"),l(57,"EditMode"),h(),l(58," test have access to both\n"),h(),d(59,"ul",6)(60,"li"),l(61,"the "),d(62,"i"),l(63,"Editor"),h(),l(64," code (e.g. to be able to test production code based on Unity editor code)"),h(),d(65,"li"),l(66,"the "),d(67,"i"),l(68,"Runtime"),h(),l(69," code (of the targeted platforms, e.g. iOS)."),h()(),d(70,"p"),l(71," My main reasons to prefer "),d(72,"i"),l(73,"EditMode"),h(),l(74," over "),d(75,"i"),l(76,"PlayMode"),h(),l(77," tests for "),d(78,"i"),l(79,"Runtime"),h(),l(80," code is that they run faster (as it has no runtime startup cost). Also unit testing the domain logic should not need the "),d(81,"i"),l(82,"PlayMode"),h(),l(83," features i.e. the tests should not need to run as "),d(84,"a",7),l(85,"Coroutine"),h(),l(86," to wait or step through frames. This in line with that good unit tests should run quickly (see the "),d(87,"i"),l(88,"What is a good Unit Test"),h(),l(89," section in "),d(90,"a",8),l(91,"Part 1"),h(),l(92,"). The doc "),d(93,"a",9),l(94,"EditMode vs. PlayMode tests"),h(),l(95," explains the difference further.\n"),h(),m(96,"div",10),d(97,"h2"),l(98,"Health Points starting value"),h(),d(99,"h3")(100,"span",11),l(101,"RED (does not compile)"),h()(),m(102,"div",10),d(103,"pre"),m(104,"code",12),h(),m(105,"div",10),d(106,"h3")(107,"span",11),l(108,"RED (test fails)"),h()(),m(109,"div",10),d(110,"pre"),m(111,"code",12),h(),m(112,"div",10)(113,"div",10),d(114,"h3")(115,"span",13),l(116,"GREEN"),h()(),m(117,"div",10),d(118,"pre"),m(119,"code",12),h(),d(120,"h3")(121,"span",14),l(122,"REFACTOR"),h()(),m(123,"div",10)(124,"div",10),d(125,"pre"),m(126,"code",12),h(),m(127,"div",10),d(128,"pre"),m(129,"code",12),h(),d(130,"h2"),l(131,"Handle invalid "),d(132,"span",15),l(133,"StartingPoints"),h(),l(134," values"),h(),m(135,"div",10),d(136,"h3")(137,"span",11),l(138,"RED"),h()(),m(139,"div",10),d(140,"pre"),m(141,"code",12),h(),m(142,"div",10)(143,"div",10),d(144,"h3")(145,"span",13),l(146,"GREEN"),h()(),d(147,"pre"),m(148,"code",12),h(),m(149,"div",10),d(150,"h3")(151,"span",14),l(152,"REFACTOR"),h()(),d(153,"pre"),m(154,"code",12),h(),m(155,"div",10),d(156,"h2"),l(157,"Testing more values for verification"),h(),m(158,"div",10),d(159,"h3")(160,"span",14),l(161,"REFACTOR"),h()(),m(162,"div",10)(163,"div",10),d(164,"pre"),m(165,"code",12),h(),m(166,"div",10)(167,"div",10)),2&t&&(C(1),nt(i.post.seriesTitle),C(2),nt(i.post.title),C(5),Qe(" published on ",i.publishedDateToString,""),C(2),T("ngIf",i.hasUpdatedDate),C(86),T("innerHTML",i.requirements,ye),C(6),T("innerHTML",i.redDoesNotCompileStartingValue(),ye),C(2),T("highlight",i.codeTestRedDoesNotCompileStartingValue()),C(1),T("innerHTML",i.redAfterDoesNotCompileStartingValue(),ye),C(4),T("innerHTML",i.redStartingValue1(),ye),C(2),T("highlight",i.codeTestRedStartingValue()),C(1),T("innerHTML",i.redStartingValueImg(),ye),C(1),T("innerHTML",i.redStartingValue2(),ye),C(4),T("innerHTML",i.greenStartingValue(),ye),C(2),T("highlight",i.codeImplGreenStartingValue()),C(4),T("innerHTML",i.greenStartingValue1(),ye),C(1),T("innerHTML",i.greenStartingValue2(),ye),C(2),T("highlight",i.codeTestRefactorStartingValue()),C(1),T("innerHTML",i.greenStartingValue3(),ye),C(2),T("highlight",i.codeImplRefactorStartingValue()),C(6),T("innerHTML",i.invalidStartingPoints(),ye),C(4),T("innerHTML",i.redInvalidStartingPoints1(),ye),C(2),T("highlight",i.codeTestRedInvalidStartingPoints()),C(1),T("innerHTML",i.redInvalidStartingPoints2(),ye),C(1),T("innerHTML",i.testNamingConvention(),ye),C(5),T("highlight",i.codeImplGreenInvalidStartingPoints()),C(1),T("innerHTML",i.greenInvalidStartingPoints(),ye),C(5),T("highlight",i.codeImplRefactorInvalidStartingPoints()),C(1),T("innerHTML",i.refactorInvalidStartingPoints(),ye),C(3),T("innerHTML",i.testingMoreValues(),ye),C(4),T("innerHTML",i.parameterizedRefactor1(),ye),C(1),T("innerHTML",i.parameterizedRefactor2(),ye),C(2),T("highlight",i.codeTestRefactorParameterized()),C(1),T("innerHTML",i.parameterizedRefactor3(),ye),C(1),T("innerHTML",i.parameterizedRefactorImg(),ye))},dependencies:[Mn,Ns],styles:[".redFail[_ngcontent-%COMP%]{color:var(--colorRed)}.greenPass[_ngcontent-%COMP%]{color:var(--colorGreenLight)}.greenRefactor[_ngcontent-%COMP%]{color:var(--colorGreenLightMed)}.outOfScope[_ngcontent-%COMP%]{color:var(--colorGrayLight)}.byAndDate[_ngcontent-%COMP%]{text-align:center}.noBulletinPoint[_ngcontent-%COMP%]{list-style:none}"]})}function K4(n,e){if(1&n&&(d(0,"small"),l(1),h()),2&n){const t=Ne();C(1),Qe(" updated on ",t.updatedDateToString," ")}}class zl extends zo{codeTestRedDoesNotCompileStartingValue(){return'// HealthTest.cpp\n#include "pch.h"\n#include "../AvatarHealth/Health.h"\n\nTEST(Constructor, PointsHasStartingValue)\n{\n\tHealth health;\n\tEXPECT_EQ(health.points, 12);\n}\n'}redAfterDoesNotCompileStartingValue(){return'<p>I name the first param in the <a href=http://google.github.io/googletest/reference/testing.html#TEST">TEST</a> macro after the <i>entry point</i> of the test (<i>entry point</i> is defined in <i>What is a good Unit Test section</i> in <a href="./blog/tdd-health/part1">Part 1</a>), thus is named <code>Constructor</code> in this case. The rest of the test case naming goes into the second param (Google Test docs states that it should not contain underscores). You can see how this lays out in the Test Explorer in the screenshots below.</p>'}redStartingValueImgUrl(){let e=super.redStartingValueImgUrl();return e.substring(0,e.length-3)+"jpg"}codeTestRedStartingValue(){return"// Health.h\n#pragma once\n\nclass Health\n{\npublic:\n\tint points;\n};\n"}codeImplGreenStartingValue(){return"// Health.h\nclass Health\n{\npublic:\n\tint points = 12;\n};\n"}codeTestRefactorStartingValue(){return"// HealthTest.cpp\nTEST(Constructor, CurrentPointsHasStartingValue)\n{\n\tauto startingPoints = 12;\n\tHealth health = Health(startingPoints);\n\tEXPECT_EQ(health.GetCurrentPoints(), startingPoints);\n}\n"}codeImplRefactorHeaderStartingValue(){return"// Health.h\n#pragma once\n\nclass Health\n{\npublic:\n\tHealth(int startingPoints);\n\tint GetCurrentPoints();\n\nprivate:\n\tint currentPoints;\n};\n"}codeImplRefactorStartingValue(){return'// Health.cpp\n#include "Health.h"\n\nHealth::Health(int startingPoints)\n{\n\tHealth::currentPoints = startingPoints;\n}\n\nint Health::GetCurrentPoints()\n{\n\treturn currentPoints;\n}\n'}codeTestRedInvalidStartingPoints(){return"// HealthTest.cpp\nTEST(Constructor, ThrowsExWhenStartingPointsIsInvalid)\n{\n\tEXPECT_THROW(\n\t\t{\n\t\t\tHealth health = Health(0);\n\t\t}, std::out_of_range);\n}\n"}codeImplGreenInvalidStartingPoints(){return'//Health.cpp\nHealth::Health(int startingPoints)\n{\n\tif (startingPoints < 1)\n\t{\n\t\tthrow std::out_of_range(std::string("Invalid value"));\n\t}\n\n\tHealth::currentPoints = startingPoints;\n}\n'}codeImplRefactorInvalidStartingPoints(){return'//Health.cpp\n#include <format>\n\nusing namespace std;\n\nHealth::Health(int startingPoints)\n{\n\tauto lowestValidValue = 1;\n\tif (startingPoints < lowestValidValue)\n\t{\n\t\tauto msg = format("Value {} is invalid, it should be equal or higher than {}", startingPoints, lowestValidValue);\n\t\tthrow out_of_range(msg);\n\t}\n\n\tHealth::currentPoints = startingPoints;\n}\n'}parameterizedRefactor2(){return'<p>To achieve this in a maintainable way I use the <a href=http://google.github.io/googletest/reference/testing.html#TEST">TEST_P</a> macro and define the needed structure for it:</p>'}codeTestRefactorParameterized(){return"// HealthTest.cpp\nusing namespace std;\nusing ::testing::TestWithParam;\nusing ::testing::Values;\n\nclass CurrentPointsHasStartingValues : public TestWithParam<int> { };\nINSTANTIATE_TEST_CASE_P(Constructor, CurrentPointsHasStartingValues,\n\tValues(1, 12)\n);\nTEST_P(CurrentPointsHasStartingValues, Value)\n{\n\tauto param = GetParam();\n\tHealth health = Health(param);\n\tEXPECT_EQ(health.GetCurrentPoints(), param);\n}\n\nclass ThrowsExWhenStartingPoints : public TestWithParam<int> { };\nINSTANTIATE_TEST_CASE_P(Constructor, ThrowsExWhenStartingPoints,\n\tValues(0, -1)\n);\nTEST_P(ThrowsExWhenStartingPoints, Value)\n{\n\tEXPECT_THROW(\n\t\t{\n\t\t\tHealth health = Health(GetParam());\n\t\t}, out_of_range);\n}\n"}parameterizedRefactor3(){return"<p>I try to map the naming to follow my naming convention and to display according in the test runner that now runs 4 tests in total:</p>"}parameterizedRefactorImgUrl(){let e=super.parameterizedRefactorImgUrl();return e.substring(0,e.length-3)+"jpg"}static#e=this.\u0275fac=function(){let e;return function(i){return(e||(e=ft(zl)))(i||zl)}}();static#t=this.\u0275cmp=kt({type:zl,selectors:[["app-post-tdd-3-cpp"]],features:[He],decls:165,vars:34,consts:[[1,"byAndDate"],[4,"ngIf"],["href","https://visualstudio.microsoft.com"],["href","https://github.com/EgillAntonsson/tdd-avatar-health-in-unity"],["href","http://google.github.io/googletest/"],["href","https://nunit.org"],["href","https://learn.microsoft.com/en-us/visualstudio/test/writing-unit-tests-for-c-cpp?view=vs-2022#create-a-test-project-in-visual-studio-2022"],["src","../assets/images/blog/tdd/part3/VS-new-project_GoogleTests-config.jpg","alt","Test Runner: first test fail","title","VS new project: Google Test config",1,"imageSmallText"],["href","https://learn.microsoft.com/en-us/visualstudio/test/writing-unit-tests-for-c-cpp?view=vs-2022#link-to-object-or-library-files"],[3,"innerHTML"],[1,"redFail"],[3,"highlight"],[1,"greenPass"],[1,"greenRefactor"],[1,"code"],["src","../assets/images/blog/tdd/part3/TestRunner_before-parameterized-refactor.jpg","alt","Test Runner: before parameterized refactor","title","Test Runner: before parameterized refactor",1,"imageSmallText"]],template:function(t,i){1&t&&(d(0,"h1"),l(1),h(),d(2,"h2"),l(3),h(),d(4,"div",0)(5,"small"),l(6,"by Egill Antonsson"),m(7,"br"),l(8),m(9,"br"),h(),Le(10,K4,2,1,"small",1),h(),d(11,"h2"),l(12,"Using Visual Studio"),h(),d(13,"p"),l(14," I'll use "),d(15,"a",2),l(16,"Visual Studio"),h(),l(17," (VS) and the whole project is on "),d(18,"a",3),l(19,"GitHub"),h(),l(20," (including the VS project files). I'm using the free VS "),d(21,"i"),l(22,"Community"),h(),l(23," edition which is sufficient for this blog series, but it's worth mentioning that the paid "),d(24,"i"),l(25,"Enterprise"),h(),l(26," edition includes the productivity feature "),d(27,"i"),l(28,"Live Unit Testing"),h(),l(29," which provides real-time feedback directly in the editor, which is convenient for the TDD cycles, other test related features e.g. "),d(30,"i"),l(31,"Code Coverage"),h(),l(32,". Using the "),d(33,"i"),l(34,"Community"),h(),l(35," edition I'll need to manually trigger the test run (and Code Coverage will not be the focus of this blog series).\n"),h(),d(36,"h2"),l(37,"Using Google Test"),h(),d(38,"p"),l(39," I'll use "),d(40,"a",4),l(41,"Google Test"),h(),l(42," framework as VS includes and integrates it, and doing a quick web browser comparison and research (not using Google) makes it likely to provide similar features as C# "),d(43,"a",5),l(44,"NUnit"),h(),l(45," framework (I currently have more experience in C# and NUnit and other similar frameworks).\n"),h(),d(46,"h2"),l(47,"Setup"),h(),d(48,"p"),l(49," I create a new (C++) "),d(50,"i"),l(51,"Windows Desktop Application"),h(),l(52," project naming it "),d(53,"code"),l(54,"AvatarHealth"),h(),l(55," and this also creates the solution for the project. For the unit tests I add within the solution a new (C++) "),d(56,"i"),l(57,"Google Test"),h(),l(58," project naming it "),d(59,"code"),l(60,"AvatarHealth-Test"),h(),l(61," (detailed in "),d(62,"a",6),l(63,"VS doc section"),h(),l(64,"), and configure it like the screenshot below:\n"),h(),d(65,"figure"),m(66,"img",7),d(67,"figcaption"),l(68,"VS new project: Google Test config"),h()(),d(69,"p"),l(70," To export the functions that you want to test, add the output .obj or .lib files to the dependencies of the test project detailed in this "),d(71,"a",8),l(72,"VS doc section"),h(),l(73,". "),h(),m(74,"div",9),d(75,"h2"),l(76,"Health Points starting value"),h(),d(77,"h3")(78,"span",10),l(79,"RED (does not compile)"),h()(),m(80,"div",9),d(81,"pre"),m(82,"code",11),h(),m(83,"div",9),d(84,"h3")(85,"span",10),l(86,"RED (test fails)"),h()(),m(87,"div",9),d(88,"pre"),m(89,"code",11),h(),m(90,"div",9)(91,"div",9),d(92,"h3")(93,"span",12),l(94,"GREEN"),h()(),m(95,"div",9),d(96,"pre"),m(97,"code",11),h(),d(98,"h3")(99,"span",13),l(100,"REFACTOR"),h()(),m(101,"div",9)(102,"div",9),d(103,"pre"),m(104,"code",11),h(),d(105,"p"),l(106," I create the "),d(107,"code"),l(108,"Health.cpp"),h(),l(109," file and write the implementation in it, and remove the 'green step' quick implementation (the hardcoded "),d(110,"code"),l(111,"12"),h(),l(112," value) from the "),d(113,"code"),l(114,"Health.h"),h(),l(115," header file. Going forward the header file will only contain definitions (that resolve 'red does not compile' steps) and temporary quick implementations for resolving some 'green' steps, thus the implementation will be in the "),d(116,"code"),l(117,".cpp"),h(),l(118," file.\n"),h(),d(119,"pre"),m(120,"code",11),h(),m(121,"div",9),d(122,"pre"),m(123,"code",11),h(),d(124,"h2"),l(125,"Handle invalid "),d(126,"span",14),l(127,"StartingPoints"),h(),l(128," values"),h(),m(129,"div",9),d(130,"h3")(131,"span",10),l(132,"RED"),h()(),m(133,"div",9),d(134,"pre"),m(135,"code",11),h(),m(136,"div",9),d(137,"h3")(138,"span",12),l(139,"GREEN"),h()(),d(140,"pre"),m(141,"code",11),h(),m(142,"div",9),d(143,"h3")(144,"span",13),l(145,"REFACTOR"),h()(),d(146,"pre"),m(147,"code",11),h(),m(148,"div",9),d(149,"figure"),m(150,"img",15),d(151,"figcaption"),l(152,"Test Runner: before parameterized refactor"),h()(),d(153,"h2"),l(154,"Testing more values for verification"),h(),m(155,"div",9),d(156,"h3")(157,"span",13),l(158,"REFACTOR"),h()(),m(159,"div",9)(160,"div",9),d(161,"pre"),m(162,"code",11),h(),m(163,"div",9)(164,"div",9)),2&t&&(C(1),nt(i.post.seriesTitle),C(2),nt(i.post.title),C(5),Qe(" published on ",i.publishedDateToString,""),C(2),T("ngIf",i.hasUpdatedDate),C(64),T("innerHTML",i.requirements,ye),C(6),T("innerHTML",i.redDoesNotCompileStartingValue(),ye),C(2),T("highlight",i.codeTestRedDoesNotCompileStartingValue()),C(1),T("innerHTML",i.redAfterDoesNotCompileStartingValue(),ye),C(4),T("innerHTML",i.redStartingValue1(),ye),C(2),T("highlight",i.codeTestRedStartingValue()),C(1),T("innerHTML",i.redStartingValueImg(),ye),C(1),T("innerHTML",i.redStartingValue2(),ye),C(4),T("innerHTML",i.greenStartingValue(),ye),C(2),T("highlight",i.codeImplGreenStartingValue()),C(4),T("innerHTML",i.greenStartingValue1(),ye),C(1),T("innerHTML",i.greenStartingValue2(),ye),C(2),T("highlight",i.codeTestRefactorStartingValue()),C(16),T("highlight",i.codeImplRefactorHeaderStartingValue()),C(1),T("innerHTML",i.greenStartingValue3(),ye),C(2),T("highlight",i.codeImplRefactorStartingValue()),C(6),T("innerHTML",i.invalidStartingPoints(),ye),C(4),T("innerHTML",i.redInvalidStartingPoints1(),ye),C(2),T("highlight",i.codeTestRedInvalidStartingPoints()),C(1),T("innerHTML",i.testNamingConvention(),ye),C(5),T("highlight",i.codeImplGreenInvalidStartingPoints()),C(1),T("innerHTML",i.greenInvalidStartingPoints(),ye),C(5),T("highlight",i.codeImplRefactorInvalidStartingPoints()),C(1),T("innerHTML",i.refactorInvalidStartingPoints(),ye),C(7),T("innerHTML",i.testingMoreValues(),ye),C(4),T("innerHTML",i.parameterizedRefactor1(),ye),C(1),T("innerHTML",i.parameterizedRefactor2(),ye),C(2),T("highlight",i.codeTestRefactorParameterized()),C(1),T("innerHTML",i.parameterizedRefactor3(),ye),C(1),T("innerHTML",i.parameterizedRefactorImg(),ye))},dependencies:[Mn,Ns],styles:[".redFail[_ngcontent-%COMP%]{color:var(--colorRed)}.greenPass[_ngcontent-%COMP%]{color:var(--colorGreenLight)}.greenRefactor[_ngcontent-%COMP%]{color:var(--colorGreenLightMed)}.outOfScope[_ngcontent-%COMP%]{color:var(--colorGrayLight)}.byAndDate[_ngcontent-%COMP%]{text-align:center}.noBulletinPoint[_ngcontent-%COMP%]{list-style:none}"]})}function Y4(n,e){if(1&n&&(d(0,"small"),l(1),h()),2&n){const t=Ne();C(1),Qe(" updated on ",t.updatedDateToString," ")}}class Wl extends Si{constructor(){super(...arguments),this.test_1_Red="// HealthTest.cs\n// inside nested class TakeDamage\n[Test]\npublic void CurrentPoints_Decrease()\n{\n\tvar health = new Health(12);\n\thealth.TakeDamage(1);\n\tAssert.That(health.CurrentPoints, Is.EqualTo(11));\n}\n",this.impl_1_Green="// Health.cs\npublic int CurrentPoints { get; private set; }\n\npublic void TakeDamage(int damagePoints)\n{\n\tCurrentPoints -= damagePoints;\n}\n",this.test_2_Red='// HealthTest.cs\n// inside nested class TakeDamage\n[TestCase(0)]\n[TestCase(-1)]\npublic void ThrowsError_WhenDamagePointsIsInvalid(int damagePoints)\n{\n\tvar health = new Health(12);\n\tvar exception = Assert.Throws(Is.TypeOf<ArgumentOutOfRangeException>(),\n\t\tdelegate\n\t\t{\n\t\t\thealth.TakeDamage(damagePoints);\n\t\t});\n\tAssert.That(exception.Message, Does.Match("invalid").IgnoreCase);\n}\n',this.impl_2_Green='// Health.cs\npublic Health(int startingPoints)\n{\n\tconst int lowestValidValue = 1;\n\tif (startingPoints < lowestValidValue)\n\t{\n\t\tvar message = $"Value {startingPoints} is invalid, it should be equal or higher than {lowestValidValue}";\n\t\tthrow new ArgumentOutOfRangeException(nameof(startingPoints), message);\n\t}\n\n\tCurrentPoints = startingPoints;\n}\n\npublic void TakeDamage(int damagePoints)\n{\n\tconst int lowestValidValue = 1;\n\tif (damagePoints < lowestValidValue)\n\t{\n\t\tvar message = $"Value {damagePoints} is invalid, it should be equal or higher than {lowestValidValue}";\n\t\tthrow new ArgumentOutOfRangeException(nameof(damagePoints), message);\n\t}\n\n\tCurrentPoints -= damagePoints;\n}\n',this.impl_2_Refactor='// Health.cs\npublic Health(int startingPoints)\n{\n\tValidatePoints(startingPoints, 1);\n\tCurrentPoints = startingPoints;\n}\n\npublic void TakeDamage(int damagePoints)\n{\n\tValidatePoints(damagePoints, 1);\n\tCurrentPoints -= damagePoints;\n}\n\nprivate static void ValidatePoints(int points, int lowestValidValue)\n{\n\tif (points < lowestValidValue)\n\t{\n\t\tvar message = $"Value {points} is invalid, it should be equal or higher than {lowestValidValue}";\n\t\tthrow new ArgumentOutOfRangeException(nameof(points), message);\n\t}\n}\n'}static#e=this.\u0275fac=function(){let e;return function(i){return(e||(e=ft(Wl)))(i||Wl)}}();static#t=this.\u0275cmp=kt({type:Wl,selectors:[["app-post-tdd-4"]],features:[He],decls:232,vars:12,consts:[[1,"byAndDate"],[4,"ngIf"],[1,"list"],[3,"innerHTML"],[1,"redFail"],["href","./blog/tdd-health/part3"],[3,"highlight"],[1,"greenPass"],[1,"greenRefactor"],["href","https://www.jetbrains.com/resharper/"],["href","https://www.jetbrains.com/help/resharper/2022.1/MemberCanBeMadeStatic.Local.html"],["src","../assets/images/blog/tdd/TestRunner_after-refactoring-ThrowsError-impl.PNG","alt","Unity Test Runner: after refactoring 'ThrowsError' implementation","title","Unity Test Runner: after refactoring 'ThrowsError' implementation",1,"imageSmallText"]],template:function(t,i){1&t&&(d(0,"h1"),l(1),h(),d(2,"h2"),l(3),h(),d(4,"div",0)(5,"small"),l(6,"by Egill Antonsson"),m(7,"br"),l(8),m(9,"br"),h(),Le(10,Y4,2,1,"small",1),h(),d(11,"h2"),l(12,"The first Taking Damage requirement"),h(),d(13,"p"),l(14," Let's recap the first requirement under "),d(15,"i"),l(16,"Taking Damage and Dying"),h(),l(17," from the user perspective:\n"),h(),d(18,"ul",2)(19,"li"),l(20,"Whenever Link takes damage he will lose a certain amount of Heart fractions"),m(21,"br"),l(22," equal to the damage points taken (always losing at least 1 fraction)"),h()(),m(23,"div",3),d(24,"p"),l(25),h(),d(26,"ul",2)(27,"li"),l(28,"Avatar will lose Health "),d(29,"code"),l(30,"CurrentPoints"),h(),l(31," equal to Damage Points taken (always losing at last 1 Health Point)"),h()(),m(32,"div",3),d(33,"h2"),l(34,"Take Damage cycling"),h(),d(35,"h3")(36,"span",4),l(37,"RED"),h()(),d(38,"p"),l(39," I start by writing the test."),m(40,"br"),l(41," The entry point will be a new method named "),d(42,"code"),l(43,"TakeDamage"),h(),l(44,","),m(45,"br"),l(46," thus I write a nested class with same name,"),m(47,"br"),l(48," and within it I write the test case "),d(49,"code"),l(50,"CurrentPointsDecrease"),h(),m(51,"br"),l(52," (according to my naming convention, explained in "),d(53,"a",5),l(54,"Part 3"),h(),l(55,")."),m(56,"br"),h(),d(57,"pre"),m(58,"code",6),h(),d(59,"p"),l(60," The test fails as the "),d(61,"code"),l(62,"TakeDamage"),h(),l(63," method is not defined.\n"),h(),d(64,"h3")(65,"span",7),l(66,"GREEN"),h()(),d(67,"pre"),m(68,"code",6),h(),d(69,"p"),l(70," I'm confident that this effortless implementation"),m(71,"br"),l(72," fulfills the requirement for all valid inputs."),m(73,"br"),l(74," It's clean and thus does not need a "),d(75,"span",8),l(76,"REFACTOR"),h(),l(77," step."),m(78,"br"),l(79," But invalid values can be passed in, so I'll do a cycle for handling those.\n"),h(),d(80,"h2"),l(81,"Handle invalid input values"),h(),d(82,"h3")(83,"span",4),l(84,"RED"),h()(),d(85,"p"),l(86," A minus value for "),d(87,"code"),l(88,"damagePoints"),h(),l(89," is clearly invalid but what about "),d(90,"code"),l(91,"0"),h(),l(92," ?"),m(93,"br"),l(94," I conclude that "),d(95,"code"),l(96,"0"),h(),l(97," is also invalid,"),m(98,"br"),l(99," as an outside 'damage calculator' logic should take care of this earlier"),m(100,"br"),l(101," (thus "),d(102,"code"),l(103,"TakeDamage won't be invoked)"),h(),l(104,"."),m(105,"br"),l(106," This also makes the design streamlined as it ensures that"),m(107,"br"),d(108,"code"),l(109,"CurrentPoints"),h(),l(110," will always decrease on "),d(111,"code"),l(112,"TakeDamage"),h(),l(113," call."),m(114,"br")(115,"br"),l(116," This will be a similar test as the existing "),d(117,"code"),l(118,"ThrowsError_WhenStartingPointsIsInvalid"),h(),m(119,"br"),l(120," but now the "),d(121,"i"),l(122,"entry point"),h(),l(123," is method "),d(124,"code"),l(125,"TakeDamage"),h(),l(126,","),m(127,"br"),l(128," and thus it will be inside the nested class "),d(129,"code"),l(130,"TakeDamage."),h()(),d(131,"pre"),m(132,"code",6),h(),d(133,"p"),l(134," The value I pass into the constructor has no significance to this test,"),m(135,"br"),l(136," and thus is not a "),d(137,"i"),l(138,"TestCase"),h(),l(139," parameter.\n"),h(),d(140,"h3")(141,"span",7),l(142,"GREEN"),h()(),d(143,"p"),l(144,"I make the test pass by"),m(145,"br"),l(146," duplicating the exception throwing code from the constructor,"),m(147,"br"),l(148," and then renaming the parameter to "),d(149,"code"),l(150,"damagePoints"),h(),m(151,"br"),l(152," (knowing that I'll refactor this code smell right away in the next step).\n"),h(),d(153,"pre"),m(154,"code",6),h(),m(155,"br"),d(156,"h3")(157,"span",8),l(158,"REFACTOR"),h()(),d(159,"p"),l(160," I refactor the duplicated code smell away."),m(161,"br"),h(),d(162,"pre"),m(163,"code",6),h(),d(164,"p"),l(165," When exception is thrown,"),m(166,"br"),l(167," the message is followed by the stack trace in the console,"),m(168,"br"),l(169," and therefore it is sufficient that the param name will simply be "),d(170,"i"),l(171,"points"),h(),m(172,"br"),l(173," as you can follow the trace to see which method called "),d(174,"code"),l(175,"ValidatePoints"),h(),l(176,"."),m(177,"br")(178,"br"),l(179," Having "),d(180,"code"),l(181,"lowestValidValue"),h(),l(182," as sent in parameter for method "),d(183,"code"),l(184,"ValidatePoints"),h(),m(185,"br"),l(186," makes the method easy to reuse,"),m(187,"br"),l(188," if another case comes later with different "),d(189,"code"),l(190,"lowestValidValue"),h(),l(191,"."),m(192,"br")(193,"br"),d(194,"a",9),l(195,"ReSharper"),h(),l(196," hints that "),d(197,"code"),l(198,"ValidatePoints"),h(),l(199," method can be made "),d(200,"code"),l(201,"static"),h(),l(202,","),m(203,"br"),l(204," and I agree, as it doesn't hinder testability nor design (it's "),d(205,"code"),l(206,"private"),h(),l(207,")."),m(208,"br"),l(209," Making it "),d(210,"code"),l(211,"static "),h(),d(212,"a",10),l(213,"can yield a small performance benefit"),h(),l(214,"."),m(215,"br")(216,"br"),l(217," I ignore ReSharper's hint to 'invert "),d(218,"code"),l(219,"if"),h(),l(220," statement' as the current format"),m(221,"br"),l(222," is more readable IMO and the nested braces are only one-level deep."),m(223,"br")(224,"br"),l(225," I run all the tests (and also did as needed while refactoring) to verify everything works."),m(226,"br"),l(227," Now the Test Runner looks like this:\n"),h(),d(228,"figure"),m(229,"img",11),d(230,"figcaption"),l(231," Unity Test Runner: after refactoring 'ThrowsError' implementation "),h()()),2&t&&(C(1),nt(i.post.seriesTitle),C(2),nt(i.post.title),C(5),Qe(" published on ",i.publishedDateToString,""),C(2),T("ngIf",i.hasUpdatedDate),C(13),T("innerHTML",i.completeRequirementListHtml,ye),C(2),Qe(" ",i.rewordRequirement,"\n"),C(7),T("innerHTML",i.aboutCodeHtml,ye),C(26),T("highlight",i.test_1_Red),C(10),T("highlight",i.impl_1_Green),C(64),T("highlight",i.test_2_Red),C(22),T("highlight",i.impl_2_Green),C(9),T("highlight",i.impl_2_Refactor))},dependencies:[Mn,Ns],styles:[".redFail[_ngcontent-%COMP%]{color:var(--colorRed)}.greenPass[_ngcontent-%COMP%]{color:var(--colorGreenLight)}.greenRefactor[_ngcontent-%COMP%]{color:var(--colorGreenLightMed)}.outOfScope[_ngcontent-%COMP%]{color:var(--colorGrayLight)}.byAndDate[_ngcontent-%COMP%]{text-align:center}.noBulletinPoint[_ngcontent-%COMP%]{list-style:none}"]})}function Z4(n,e){if(1&n&&(d(0,"small"),l(1),h()),2&n){const t=Ne();C(1),Qe(" updated on ",t.updatedDateToString," ")}}class ql extends Si{constructor(){super(...arguments),this.test_1_red="// HealthTest.cs\n// inside nested class Constructor\n[Test]\npublic void IsDead_IsFalse()\n{\n\tvar health = new Health(12);\n\tAssert.That(health.IsDead, Is.False);\n}\n",this.impl_1_green="// Health.cs\npublic bool IsDead => false;\n",this.test_2_red="// HealthTest.cs\n// inside nested class TakeDamage\n[Test]\npublic void IsDead_AfterTwoInvocations()\n{\n\tvar health = new Health(12);\n\thealth.TakeDamage(11);\n\tAssert.That(health.IsDead, Is.False);\n\n\thealth.TakeDamage(1);\n\tAssert.That(health.IsDead, Is.True);\n}\n",this.impl_2_green="// Health.cs\npublic bool IsDead => CurrentPoints < 1;\n",this.test_3_red="// HealthTest.cs\n// inside nested class Constructor\n[TestCase(12)]\n[TestCase(1)]\npublic void FullPoints_HasStartingValue(int startingPoints)\n{\n\tvar health = new Health(startingPoints);\n\tAssert.That(health.FullPoints, Is.EqualTo(startingPoints));\n}\n",this.impl_3_green="// Health.cs\npublic class Health\n{\n\tpublic int CurrentPoints { get; private set; }\n\tpublic int FullPoints { get; private set; }\n\n\tpublic Health(int startingPoints)\n\t{\n\t\tValidatePoints(startingPoints, 1); // method not shown\n\t\tFullPoints = CurrentPoints = startingPoints;\n\t}\n}\n",this.test_4_red="// HealthTest.cs\n// inside nested class TakeDamage\n[TestCase(1, 4, 4)]\n[TestCase(1, 4, 5)]\n[TestCase(1, 4, 24)]\n[TestCase(-21, 4, 25)]\npublic void CurrentPoints_WhenStartingPoints_ThenDamagePoints(\n\tint currentPoints,\n\tint startingPoints,\n\tint damagePoints)\n{\n\tvar health = new Health(startingPoints);\n\thealth.TakeDamage(damagePoints);\n\tAssert.That(health.CurrentPoints, Is.EqualTo(currentPoints));\n}\n",this.impl_4_green="// Health.cs\npublic void TakeDamage(int damagePoints)\n{\n\tValidatePoints(damagePoints, 1); //method not shown\n\n\tif (CurrentPoints < FullPoints\n\t\t|| CurrentPoints > damagePoints\n\t\t|| damagePoints > CurrentPoints + 20)\n\t{\n\t\tCurrentPoints -= damagePoints;\n\t}\n\telse\n\t{\n\t\tCurrentPoints = 1;\n\t}\n}\n",this.impl_4_refactor="// Health.cs\npublic void TakeDamage(int damagePoints)\n{\n\tValidatePoints(damagePoints, 1); //method not shown\n\n\tif (CurrentPoints == FullPoints\n\t\t&& damagePoints >= FullPoints\n\t\t&& damagePoints <= FullPoints + 20)\n\t{\n\t\tCurrentPoints = 1;\n\t\treturn;\n\t}\n\n\tCurrentPoints -= damagePoints;\n}\n",this.impl_4_refactor_2="// Health.cs\npublic const int MaxNegativePointsForInstantKillProtection = -20;\n\npublic void TakeDamage(int damagePoints)\n{\n\tValidatePoints(damagePoints, 1); //method not shown\n\n\tif (CurrentPoints == FullPoints\n\t\t&& damagePoints >= FullPoints\n\t\t&& damagePoints <= FullPoints - MaxNegativePointsForInstantKillProtection)\n\t{\n\t\tCurrentPoints = 1;\n\t\treturn;\n\t}\n\n\tCurrentPoints -= damagePoints;\n}\n"}static#e=this.\u0275fac=function(){let e;return function(i){return(e||(e=ft(ql)))(i||ql)}}();static#t=this.\u0275cmp=kt({type:ql,selectors:[["app-post-tdd-5"]],features:[He],decls:338,vars:17,consts:[[1,"byAndDate"],[4,"ngIf"],[1,"list"],[3,"innerHTML"],[1,"redFail"],[3,"highlight"],[1,"greenPass"],["href","https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/statements-expressions-operators/expression-bodied-members"],["href","./blog/tdd-health/part1"],[1,"list","inline"],[1,"greenRefactor"]],template:function(t,i){1&t&&(d(0,"h1"),l(1),h(),d(2,"h2"),l(3),h(),d(4,"div",0)(5,"small"),l(6,"by Egill Antonsson"),m(7,"br"),l(8),m(9,"br"),h(),Le(10,Z4,2,1,"small",1),h(),d(11,"h2"),l(12,"The Dying requirements"),h(),d(13,"p"),l(14," Let's recap the rest of the "),d(15,"i"),l(16,"Taking Damage and Dying"),h(),l(17," requirements from the user perspective:\n"),h(),d(18,"ul",2)(19,"li"),l(20,"When Link loses all of his Hearts the game ends"),h(),d(21,"li"),l(22,"Link is protected from any damage that would instantly kill him as long as his Life Gauge is full"),m(23,"br"),l(24," and will instead be left alive with Hearth 1 fraction remaining"),h(),d(25,"ul")(26,"li"),l(27,"However, if the damage is more than 5 Hearts in addition to his full Life Gauge, he will still die"),h()()(),m(28,"div",3),d(29,"p"),l(30),h(),d(31,"ul",2)(32,"li"),l(33,"When Avatar loses all of his Health Points he dies (and game ends)"),h(),d(34,"li"),l(35,"The Avatar is protected from any damage that would instantly kill him as long as his Health Points are full"),m(36,"br"),l(37," and will instead be left alive with 1 Health Points remaining"),h(),d(38,"ul")(39,"li"),l(40,"However, if the damage is more than 20 points in addition to his full Health Points, he will still die"),h()()(),m(41,"div",3),d(42,"h2"),l(43,"Death cycling"),h(),d(44,"p"),l(45," I start cycling the first dying requirement."),m(46,"br"),l(47," The domain model focus will be a new property named "),d(48,"code"),l(49,"IsDead"),h(),l(50,".\n"),h(),d(51,"h3")(52,"span",4),l(53,"RED"),h()(),d(54,"p"),l(55," I write a new test case and it fails as "),d(56,"code"),l(57,"IsDead"),h(),l(58," is not defined.\n"),h(),d(59,"pre"),m(60,"code",5),h(),d(61,"h3")(62,"span",6),l(63,"GREEN"),h()(),d(64,"p"),l(65," I make "),d(66,"code"),l(67,"IsDead"),h(),l(68," simply return "),d(69,"code"),l(70,"false"),h(),l(71," to pass the test.\n"),h(),d(72,"pre"),m(73,"code",5),h(),d(74,"p"),l(75," I encapsulated the property into a 'getter' via "),d(76,"a",7),l(77,"Expression-Bodied Members syntax"),h(),l(78,"."),m(79,"br")(80,"br"),l(81," I know that simply returning "),d(82,"code"),l(83,"false"),h(),l(84," for "),d(85,"code"),l(86,"IsDead"),h(),l(87," will not hold as the generic solution that satisfies all cases,"),m(88,"br"),l(89," thus I'll now do a new cycle to achieve that."),m(90,"br"),h(),d(91,"h3")(92,"span",4),l(93,"RED"),h()(),d(94,"p"),l(95," Still Focusing on the first dying requirement, but also having the 'protected from instant kill' case in mind,"),m(96,"br"),l(97," I write a new test case that reduces the "),d(98,"code"),l(99,"CurrentPoints"),h(),l(100," to "),d(101,"code"),l(102,"0"),h(),l(103," after two "),d(104,"code"),l(105,"TakeDamage"),h(),l(106," invocations,"),m(107,"br"),l(108," as I know that that case should always kill the Avatar."),m(109,"br"),h(),d(110,"pre"),m(111,"code",5),h(),d(112,"p"),l(113," The "),d(114,"code"),l(115,"_After"),h(),l(116," in the name suits well for this scenario (better than "),d(117,"code"),l(118,"_When"),h(),l(119,")."),m(120,"br"),l(121," The test still checks only one exit point, although it asserts it twice."),m(122,"br"),l(123," As the test is readable, focused and meaningful,"),m(124,"br"),l(125," I'm still in line IMO with "),d(126,"i"),l(127,"What is a good Unit Test"),h(),l(128," section in "),d(129,"a",8),l(130,"Part 1"),h(),l(131,")."),m(132,"br")(133,"br"),l(134," The test fails as currently the Avatar is immortal!"),m(135,"br"),l(136," Of course that's no good, so let's fix that and make the test pass.\n"),h(),d(137,"h3")(138,"span",6),l(139,"GREEN"),h()(),d(140,"p"),l(141," I change the implementation of the "),d(142,"code"),l(143,"IsDead"),h(),l(144," property that makes the test (and the previous test) pass."),m(145,"br"),h(),d(146,"pre"),m(147,"code",5),h(),d(148,"p"),l(149," I'm confident that now I have the generic solution for this property,"),m(150,"br"),l(151," Thus I'll start a new cycle for the next requirement.\n"),h(),d(152,"h2"),l(153,"Protected from instant kill"),h(),d(154,"p"),l(155," Now focusing on the latter requirement (listed at start of this post),"),m(156,"br"),l(157," I now take further note of the concept 'full Health Points' in the requirement,"),m(158,"br"),l(159," and realize it is a definition with it's own simple requirement"),m(160,"br"),l(161," Let's cycle this, and then get back to the dying part.\n"),h(),d(162,"ul",9)(163,"li"),l(164,"Link starts with Full Health -> "),d(165,"code"),l(166,"FullPoints"),h(),l(167," start with same value as "),d(168,"code"),l(169,"startingPoints"),h()()(),d(170,"h2"),l(171,"Full Health Points cycle"),h(),d(172,"p"),l(173," The domain model focus will be a new property named "),d(174,"code"),l(175,"FullPoints"),h(),l(176,".\n"),h(),d(177,"h3")(178,"span",4),l(179,"RED"),h()(),d(180,"pre"),m(181,"code",5),h(),d(182,"p"),l(183," The test is very similar to the existing test for "),d(184,"i"),l(185,"exit point"),h(),d(186,"code"),l(187," CurrentPoints"),h(),m(188,"br"),l(189," but the key difference is that it's testing a different "),d(190,"i"),l(191,"exit point"),h(),l(192," (see "),d(193,"i"),l(194,"Good Unit Test definition"),h(),l(195," in "),d(196,"a",8),l(197,"part 1"),h(),l(198,").\n"),h(),d(199,"h3")(200,"span",6),l(201,"GREEN"),h()(),d(202,"pre"),m(203,"code",5),h(),d(204,"p"),l(205," I set "),d(206,"code"),l(207,"FullPoints"),h(),l(208," to the "),d(209,"code"),l(210,"startingPoints"),h(),l(211," parameter value (same as "),d(212,"code"),l(213,"CurrentPoints"),h(),l(214,")."),m(215,"br")(216,"br"),l(217," I also encapsulate "),d(218,"code"),l(219,"CurrentPoints"),h(),l(220," into a 'getter, private setter'."),m(221,"br")(222,"br"),l(223," This "),d(224,"code"),l(225,"FullPoints"),h(),l(226," implementation satisfies the current requirements,"),m(227,"br"),l(228," but likely will be extended on later with the Replenishing requirements."),m(229,"br"),l(230," Thus now I'll start a new cycle to fulfill the 'Protected from instant kill' requirement."),m(231,"br"),h(),d(232,"h2"),l(233,"Protected from instant kill cycling"),h(),d(234,"h3")(235,"span",4),l(236,"RED"),h()(),d(237,"pre"),m(238,"code",5),h(),d(239,"p"),l(240," I assert on the output "),d(241,"code"),l(242,"CurrentPoints"),h(),l(243," as the 'protected from instant kill' case should leave the value at "),d(244,"code"),l(245,"1"),h(),l(246,"."),m(247,"br"),l(248," The last "),d(249,"code"),l(250,"TestCase"),h(),l(251," tests the 'exception' case:"),m(252,"br"),l(253," when the damage is so much that it kills the Avatar regardless."),m(254,"br"),h(),d(255,"h3"),l(256,"Test code naming / structure convention"),h(),d(257,"p"),l(258," Elaborating further, the scenario starting with "),d(259,"code"),l(260,"_When"),h(),m(261,"br"),l(262," can continue with "),d(263,"code"),l(264,"_Then"),h(),l(265," as needed."),m(266,"br"),l(267," The whole scenario 'plays out' before the assertion / "),d(268,"i"),l(269,"exit point"),h(),l(270," check."),m(271,"br"),l(272," ("),d(273,"code"),l(274,"_Then"),h(),l(275," indicates occurring later in the internal scenario order).\n"),h(),d(276,"h2"),l(277,"Experience the value of TDD"),h(),d(278,"p"),l(279," Now the value of TDD starts to shine"),m(280,"br"),l(281," as my first attempts to make test pass failed and/or failed existing ones."),m(282,"br"),l(283," I suggest you try it out yourself before reading my "),d(284,"span",6),l(285,"GREEN"),h(),l(286," solution below.\n"),h(),d(287,"p"),l(288," Have you tried it out ?"),m(289,"br"),l(290," Great !"),m(291,"br"),l(292," Then you can compare with my solution below :)\n"),h(),d(293,"h3")(294,"span",6),l(295,"GREEN"),h()(),d(296,"pre"),m(297,"code",5),h(),d(298,"p"),l(299," I got all tests passing with this solution, but it could be cleaned up,"),m(300,"br"),l(301," thus onward to the refactoring step.\n"),h(),d(302,"h3")(303,"span",10),l(304,"REFACTOR"),h()(),d(305,"pre"),m(306,"code",5),h(),d(307,"p"),l(308," I 'flipped' the "),d(309,"code"),l(310,"if"),h(),l(311," check, which then checks for the 'protection' case,"),m(312,"br"),l(313," and returns early (instead of having "),d(314,"code"),l(315,"else"),h(),l(316,")."),m(317,"br"),l(318," This makes the code more readable and streamlined, IMO."),m(319,"br")(320,"br"),l(321," I don't like that the number "),d(322,"code"),l(323,"20"),h(),l(324," has no explanation to it ('magic' number),"),m(325,"br"),l(326," so I'll do an iteration on it.\n"),h(),d(327,"h3")(328,"span",10),l(329,"REFACTOR (2nd iteration)"),h()(),d(330,"pre"),m(331,"code",5),h(),d(332,"p"),l(333," I replaced the 'magic' number with a constant member"),m(334,"br"),l(335," and gave it a meaningful name that explains the number."),m(336,"br"),l(337," A negative value aligns with the naming of the const, so I 'flip' the value.\n"),h()),2&t&&(C(1),nt(i.post.seriesTitle),C(2),nt(i.post.title),C(5),Qe(" published on ",i.publishedDateToString,""),C(2),T("ngIf",i.hasUpdatedDate),C(18),T("innerHTML",i.completeRequirementListHtml,ye),C(2),Qe(" ",i.rewordRequirement,"\n"),C(11),T("innerHTML",i.aboutCodeHtml,ye),C(19),T("highlight",i.test_1_red),C(13),T("highlight",i.impl_1_green),C(38),T("highlight",i.test_2_red),C(36),T("highlight",i.impl_2_green),C(34),T("highlight",i.test_3_red),C(22),T("highlight",i.impl_3_green),C(35),T("highlight",i.test_4_red),C(59),T("highlight",i.impl_4_green),C(9),T("highlight",i.impl_4_refactor),C(25),T("highlight",i.impl_4_refactor_2))},dependencies:[Mn,Ns],styles:[".redFail[_ngcontent-%COMP%]{color:var(--colorRed)}.greenPass[_ngcontent-%COMP%]{color:var(--colorGreenLight)}.greenRefactor[_ngcontent-%COMP%]{color:var(--colorGreenLightMed)}.outOfScope[_ngcontent-%COMP%]{color:var(--colorGrayLight)}.byAndDate[_ngcontent-%COMP%]{text-align:center}.noBulletinPoint[_ngcontent-%COMP%]{list-style:none}"]})}function J4(n,e){if(1&n&&(d(0,"small"),l(1),h()),2&n){const t=Ne();C(1),Qe(" updated on ",t.updatedDateToString," ")}}class Kl extends Si{constructor(){super(...arguments),this.test_1_red="// HealthTest.cs\n// inside nested class Replenish\n[Test]\npublic void CurrentPoints_WhenFullHealth()\n{\n\tvar health = new Health(12);\n\thealth.Replenish(1);\n\tAssert.That(health.CurrentPoints, Is.EqualTo(12));\n}\n",this.impl_1_green="// Health.cs\npublic void Replenish(int replenishPoints) { }\n",this.test_2_red="// HealthTest.cs\n// inside nested class Replenish\n[Test]\npublic void CurrentPoints_WhenNotFullHealth()\n{\n\tvar health = new Health(12);\n\thealth.TakeDamage(2);\n\thealth.Replenish(1);\n\tAssert.That(health.CurrentPoints, Is.EqualTo(11));\n}\n",this.test_2_green="// Health.cs\npublic void Replenish(int replenishPoints)\n{\n\tCurrentPoints = Math.Min(replenishPoints + CurrentPoints, FullPoints);\n}\n",this.test_invalid_input_red='// HealthTest.cs\n// inside nested class Replenish\n[TestCase(0)]\n[TestCase(-1)]\npublic void ThrowsError_WhenReplenishPointsIsInvalid(int replenishPoints)\n{\n\tvar health = new Health(12);\n\tvar exception = Assert.Throws(Is.TypeOf<ArgumentOutOfRangeException>(),\n\t\tdelegate\n\t\t{\n\t\t\thealth.Replenish(replenishPoints);\n\t\t});\n\tAssert.That(exception.Message, Does.Match("invalid").IgnoreCase);\n}\n',this.test_invalid_input_green="// Health.cs\npublic void Replenish(int replenishPoints)\n{\n\tValidatePoints(replenishPoints, 1); // method not shown\n\tCurrentPoints = Math.Min(replenishPoints + CurrentPoints, FullPoints);\n}\n"}static#e=this.\u0275fac=function(){let e;return function(i){return(e||(e=ft(Kl)))(i||Kl)}}();static#t=this.\u0275cmp=kt({type:Kl,selectors:[["app-post-tdd-6"]],features:[He],decls:164,vars:13,consts:[[1,"byAndDate"],[4,"ngIf"],[1,"list"],[3,"innerHTML"],[1,"redFail"],[3,"highlight"],[1,"greenPass"],["src","../assets/images/blog/tdd/TestRunner_after-replenish-tests.PNG","alt","Unity Test Runner: after adding Replenish tests","title","Unity Test Runner: after adding Replenish tests",1,"imageSmallText"]],template:function(t,i){1&t&&(d(0,"h1"),l(1),h(),d(2,"h2"),l(3),h(),d(4,"div",0)(5,"small"),l(6,"by Egill Antonsson"),m(7,"br"),l(8),m(9,"br"),h(),Le(10,J4,2,1,"small",1),h(),d(11,"h2"),l(12,"The requirement"),h(),d(13,"p"),l(14," Let's recap it from the user perspective:\n"),h(),d(15,"ul",2)(16,"li"),l(17,"Link's Life Gauge can be replenished by consuming certain food"),h()(),m(18,"div",3),d(19,"p"),l(20),h(),d(21,"ul",2)(22,"li"),l(23,"Avatar Health / "),d(24,"code"),l(25,"CurrentPoints"),h(),l(26," can be replenished by consuming food"),h()(),m(27,"div",3),d(28,"h2"),l(29,"Replenish cycling"),h(),d(30,"p"),l(31," The domain model focus will be a new method named "),d(32,"code"),l(33,"Replenish"),h(),l(34,"."),m(35,"br"),h(),d(36,"h3")(37,"span",4),l(38,"RED"),h()(),d(39,"p"),l(40," One case is if the player decides to make the Avatar"),m(41,"br"),l(42," use an item that replenishes when Health is full,"),m(43,"br"),l(44," a complete waste of an item as "),d(45,"code"),l(46,"CurrentPoints"),h(),l(47," don't increase,"),m(48,"br"),l(49," but a valid case regardless.\n"),h(),d(50,"pre"),m(51,"code",5),h(),d(52,"h3")(53,"span",6),l(54,"GREEN"),h()(),d(55,"p"),l(56," I effortlessly pass the test by adding an empty "),d(57,"code"),l(58,"Replenish"),h(),l(59," method.\n"),h(),d(60,"pre"),m(61,"code",5),h(),d(62,"p"),l(63," Of course this will not hold for other cases,"),m(64,"br"),l(65," so I'll cycle in more test cases to drive the implementation.\n"),h(),d(66,"h3")(67,"span",4),l(68,"RED"),h()(),d(69,"p"),l(70," Let's do a test for a more sensible valid case,"),m(71,"br"),l(72," when replenish will actually increase the "),d(73,"code"),l(74,"CurrentPoints"),h(),l(75,".\n"),h(),d(76,"pre"),m(77,"code",5),h(),d(78,"p"),l(79," I use the existing method "),d(80,"code"),l(81,"TakeDamage"),h(),l(82," to decrease the "),d(83,"code"),l(84,"CurrentPoints"),h(),m(85,"br"),l(86," before the method "),d(87,"code"),l(88,"Replenish"),h(),l(89," is invoked (the "),d(90,"i"),l(91,"entry point"),h(),l(92," of this test)."),m(93,"br"),l(94," ("),d(95,"code"),l(96,"TakeDamage"),h(),l(97," has already been tested and thus will work as expected).\n"),h(),d(98,"h3")(99,"span",6),l(100,"GREEN"),h()(),d(101,"pre"),m(102,"code",5),h(),d(103,"p"),l(104," I'm confident that this is the generic solution for any valid input"),m(105,"br"),l(106," so don't add more tests cases."),m(107,"br")(108,"br"),l(109," But I have to handle invalid input, so let's do a cycle for those.\n"),h(),d(110,"h2"),l(111,"Handle invalid input values"),h(),d(112,"h3")(113,"span",4),l(114,"RED"),h()(),d(115,"p"),l(116," As this will be similar to the 'take damage' handling,"),m(117,"br"),l(118," I copy the existing 'take damage throws error' test"),m(119,"br"),l(120," and paste it under the nested "),d(121,"code"),l(122,"Replenish"),h(),l(123," class"),m(124,"br"),l(125," and change to 'replenish' appropriately.\n"),h(),d(126,"pre"),m(127,"code",5),h(),d(128,"p"),l(129," This test case 'copy / paste' is valid"),m(130,"br"),l(131," as it's tests the same handling for a different "),d(132,"i"),l(133,"entry point"),h(),l(134," and "),d(135,"i"),l(136,"input"),h(),l(137,".\n"),h(),d(138,"h3")(139,"span",6),l(140,"GREEN"),h()(),d(141,"p"),l(142," I invoke the existing "),d(143,"code"),l(144,"ValidatePoints"),h(),l(145," method"),m(146,"br"),l(147," passing in "),d(148,"code"),l(149,"replenishPoints"),h(),l(150," and "),d(151,"code"),l(152,"1"),h(),l(153," for "),d(154,"code"),l(155,"lowestValidValue"),h()(),d(156,"pre"),m(157,"code",5),h(),d(158,"p"),l(159," Now the Unity Test Runner looks like this:\n"),h(),d(160,"figure"),m(161,"img",7),d(162,"figcaption"),l(163," Unity Test Runner: after adding Replenish tests "),h()()),2&t&&(C(1),nt(i.post.seriesTitle),C(2),nt(i.post.title),C(5),Qe(" published on ",i.publishedDateToString,""),C(2),T("ngIf",i.hasUpdatedDate),C(8),T("innerHTML",i.completeRequirementListHtml,ye),C(2),Qe(" ",i.rewordRequirement,"\n"),C(7),T("innerHTML",i.aboutCodeHtml,ye),C(24),T("highlight",i.test_1_red),C(10),T("highlight",i.impl_1_green),C(16),T("highlight",i.test_2_red),C(25),T("highlight",i.test_2_green),C(25),T("highlight",i.test_invalid_input_red),C(30),T("highlight",i.test_invalid_input_green))},dependencies:[Mn,Ns],styles:[".redFail[_ngcontent-%COMP%]{color:var(--colorRed)}.greenPass[_ngcontent-%COMP%]{color:var(--colorGreenLight)}.greenRefactor[_ngcontent-%COMP%]{color:var(--colorGreenLightMed)}.outOfScope[_ngcontent-%COMP%]{color:var(--colorGrayLight)}.byAndDate[_ngcontent-%COMP%]{text-align:center}.noBulletinPoint[_ngcontent-%COMP%]{list-style:none}"]})}function Q4(n,e){if(1&n&&(d(0,"small"),l(1),h()),2&n){const t=Ne();C(1),Qe(" updated on ",t.updatedDateToString," ")}}class Yl extends Si{constructor(){super(...arguments),this.refactorHealth="// Health.cs\npublic const int PointsPerUnit = 4;\npublic const int MaxNegativeUnitsForInstantKillProtection = -5;\n\npublic Health(int startingUnits)\n{\n\tValidatePoints(startingUnits, 1);\n\tFullPoints = CurrentPoints = startingUnits * PointsPerUnit;\n}\n\n// PointsPerUnit also used in InstantKillProtection calculation,\n// which is not shown.\n",this.refactorHealthTest="// HealthTest.cs\n[TestCase(3)]\n[TestCase(1)]\npublic void CurrentPoints_HasStartingValue(int startingUnits)\n{\n\tvar health = new Health(startingUnits);\n\tAssert.That(health.CurrentPoints, Is.EqualTo(startingUnits * health.PointsPerUnit));\n}\n\n// other similar refactoring not shown.\n",this.red_increaseByUnit_fullPointsIncrease="// HealthTest.cs\n// inside nested class IncreaseByUnit\n[Test]\npublic void FullPoints_Increase()\n{\n\tvar health = new Health(3);\n\thealth.IncreaseByUnit();\n\tAssert.That(health.FullPoints, Is.EqualTo(16));\n}\n",this.green_increaseByUnit_fullPointsIncrease="// Health.cs\npublic void IncreaseByUnit()\n{\n\tFullPoints += PointsPerUnit;\n}\n",this.red_increaseByUnit_currentPointsIncrease="// HealthTest.cs\n// inside nested class IncreaseByUnit\n[Test]\npublic void CurrentPoints_Increase()\n{\n\tvar health = new Health(3);\n\thealth.IncreaseByUnit();\n\tAssert.That(health.CurrentPoints, Is.EqualTo(16));\n}\n",this.green_increaseByUnit_currentPointsIncrease="// Health.cs\npublic void IncreaseByUnit()\n{\n\tFullPoints += PointsPerUnit;\n\tCurrentPoints = FullPoints;\n}\n",this.red_IsMaxUnitsReached="// HealthTest.cs\n// inside nested class IsMaxUnitsReached\n[Test]\npublic void ReturnsTrue_WhenStartingUnitsAtMax()\n{\n\tint startingUnits = Health.MaxUnits;\n\tvar health = new Health(startingUnits);\n\tAssert.That(health.IsMaxUnitsReached, Is.True);\n}\n\n[Test]\npublic void ReturnsFalse_WhenStartingUnitsNotAtMax()\n{\n\tint startingUnits = Health.MaxUnits - 1;\n\tvar health = new Health(startingUnits);\n\tAssert.That(health.IsMaxUnitsReached, Is.False);\n}\n",this.green_IsMaxUnitsReached="// Health.cs\npublic const int MaxUnits = 30;\n\npublic bool IsMaxUnitsReached => MaxUnits == FullPoints / PointsPerUnit;\n",this.red_IncreaseByUnit_ThrowsError='// HealthTest.cs\n// inside nested class IncreaseByUnit\n[Test]\npublic void ThrowsError_WhenMaxUnitsReached()\n{\n\tint startingUnits = Health.MaxUnits;\n\tvar health = new Health(startingUnits);\n\tvar exception = Assert.Throws(Is.TypeOf<InvalidOperationException>(),\n\t\tdelegate\n\t\t{\n\t\t\thealth.IncreaseByUnit();\n\t\t});\n\tAssert.That(exception.Message, Does.Match("invalid").IgnoreCase);\n}\n',this.green_IncreaseByUnit_ThrowsError='// Health.cs\npublic void IncreaseByUnit()\n{\n\tif (IsMaxUnitsReached)\n\t{\n\t\tvar message = $"Method invocation is invalid as {nameof(IsMaxUnitsReached)} is true";\n\t\tthrow new InvalidOperationException(message);\n\t}\n\n\tFullPoints += PointsPerUnit;\n\tCurrentPoints = FullPoints;\n}\n'}static#e=this.\u0275fac=function(){let e;return function(i){return(e||(e=ft(Yl)))(i||Yl)}}();static#t=this.\u0275cmp=kt({type:Yl,selectors:[["app-post-tdd-7"]],features:[He],decls:440,vars:16,consts:[[1,"byAndDate"],[4,"ngIf"],[1,"list","inline"],[3,"innerHTML"],[1,"center"],[1,"greenRefactor"],[3,"highlight"],[1,"redFail"],[1,"greenPass"],["href","./blog/tdd-health/part1"],["href","https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/statements-expressions-operators/expression-bodied-members"],["src","../assets/images/blog/tdd/TestRunner_after-increase-tests.png","alt","Unity Test Runner: after Increase and Max requirements","title","Unity Test Runner: after Increase and Max requirements",1,"imageSmallText"]],template:function(t,i){1&t&&(d(0,"h1"),l(1),h(),d(2,"h2"),l(3),h(),d(4,"div",0)(5,"small"),l(6,"by Egill Antonsson"),m(7,"br"),l(8),m(9,"br"),h(),Le(10,Q4,2,1,"small",1),h(),d(11,"h2"),l(12,"The requirements"),h(),d(13,"p"),l(14," Let's recap this requirements from the user perspective:\n"),h(),d(15,"ul",2)(16,"li"),l(17,"The Life Gauge can be increased by 1 Heart at a time"),h(),d(18,"ul")(19,"li"),l(20,"Link's health will become full with the increase"),h()(),d(21,"li"),l(22,"The maximum of Hearts is 30"),h()(),d(23,"p"),l(24,"\nIncreasing the Health is a significant gameplay event In "),d(25,"i"),l(26,"Breath of the Wild"),h(),m(27,"br"),l(28,"\n(solving puzzles in shrines to get Spirit Orbs, then find and pray to a Goddess Statue),"),m(29,"br"),l(30,"\nand thus the increase is always 1 Heart each time, no more or less.\n"),h(),m(31,"div",3),d(32,"p"),l(33," Now it makes sense to define a new unit in "),d(34,"code"),l(35,"Health"),h(),l(36," that equals 4 "),d(37,"code"),l(38,"Points,"),h(),m(39,"br"),l(40,"\nthat is visually represented as a Heart (or something else),"),m(41,"br"),l(42," as the increase should always be in that unit."),m(43,"br"),h(),d(44,"h2"),l(45,"Domain / View mapping (revisited)"),h(),d(46,"p"),l(47," I add a new domain definition "),d(48,"i"),l(49,"Unit"),h(),l(50," that maps to the visualized "),d(51,"i"),l(52,"Heart"),h()(),d(53,"table")(54,"tr")(55,"th")(56,"b"),l(57,"Domain Model"),h()(),d(58,"th")(59,"b"),l(60,"View / GUI"),h()()(),d(61,"tr")(62,"td",4),l(63," (Avatar) Health "),h(),d(64,"td",4),l(65," Life Gauge "),h()(),d(66,"tr")(67,"td",4)(68,"b")(69,"i"),l(70,"Unit"),h()()(),d(71,"td",4),l(72," Heart (holds 4 Fractions) "),h()(),d(73,"tr")(74,"td",4),l(75," Points "),h(),d(76,"td",4),l(77," Heart Fractions "),h()()(),d(78,"p"),l(79,"\nWith "),d(80,"i"),l(81,"Unit"),h(),l(82," defined, I realize that it's beneficial to redefine some 'points' variables into 'unit':"),m(83,"br"),h(),d(84,"ul",2)(85,"li")(86,"code"),l(87,"startingPoints"),h(),l(88," -> "),d(89,"code"),l(90,"startingUnits"),h()(),d(91,"ul")(92,"li"),l(93,"In "),d(94,"i"),l(95,"Breath of the Wild"),h(),l(96," Link starts with 3 "),d(97,"code"),l(98,"Units"),h(),l(99,", thus fits the "),d(100,"code"),l(101,"Units"),h(),l(102," constraint"),h(),d(103,"li"),l(104,"This is also a very reasonable game-balance constraint, and will simplify the logic"),h(),d(105,"li"),l(106,"Note that for "),d(107,"code"),l(108,"FullPoints"),h(),l(109,", it makes sense to stay as points"),m(110,"br"),l(111," but will always be equivalent to a whole Unit/s, due to its requirements (via 'starting' and 'increasing')"),h()(),d(112,"li")(113,"code"),l(114,"MaxNegativePointsForInstantKillProtection"),h(),l(115," -> "),d(116,"code"),l(117,"MaxNegativeUnits..."),h()(),d(118,"ul")(119,"li"),l(120,"In "),d(121,"i"),l(122,"Breath of the Wild"),h(),l(123," it is 5 "),d(124,"code"),l(125,"Units"),h(),l(126,", thus fits the "),d(127,"code"),l(128,"Units"),h(),l(129," constraint"),h(),d(130,"li"),l(131,"This is also a very reasonable game-balance constraint, and will simplify the logic"),h()()(),d(132,"p"),l(133,"\nNow let's reword the requirements focusing on the domain model and using its updated terminology:\n"),h(),d(134,"ul",2)(135,"li")(136,"code"),l(137,"FullPoints"),h(),l(138," can be increased by 1 "),d(139,"code"),l(140,"Unit"),h(),l(141," at a time"),h(),d(142,"ul")(143,"li")(144,"code"),l(145,"CurrentPoints"),h(),l(146," get same value as "),d(147,"code"),l(148,"FullPoints"),h()()(),d(149,"li")(150,"code"),l(151,"MaxUnits"),h(),l(152," (hereby named) is 30"),h()(),m(153,"div",3),d(154,"h2"),l(155,"A wholistic refactoring"),h(),d(156,"p"),l(157,"\nWhen doing a wholistic refactoring with a clear goal,"),m(158,"br"),l(159,"it might make more sense to start with the production code, as is the case now.\n"),h(),d(160,"h3")(161,"span",5),l(162,"Refactor "),d(163,"code"),l(164,"Health"),h()()(),d(165,"p"),l(166,"\nI forsee that it will be beneficial to define a new constant "),d(167,"code"),l(168,"PointsPerUnits"),h(),l(169," in "),d(170,"code"),l(171,"Health"),h(),l(172," to make points <-> units conversation easy and readable."),m(173,"br"),l(174,"\nI then rename the variable names and convert the values using "),d(175,"code"),l(176,"PointsPerUnits"),h()(),d(177,"pre"),m(178,"code",6),h(),d(179,"h3")(180,"span",5),l(181,"Refactor "),d(182,"code"),l(183,"HealthTest"),h()()(),d(184,"p"),l(185,"\nNow obviously many tests "),d(186,"span",7),l(187,"fail"),h(),l(188," as the values need to converted to units."),m(189,"br"),l(190,"\nI rename accordingly and convert the values, using "),d(191,"code"),l(192,"PointsPerUnits"),h(),l(193," where appropriate."),m(194,"br"),h(),d(195,"pre"),m(196,"code",6),h(),d(197,"p"),l(198,"\nNow all the tests "),d(199,"span",5),l(200,"pass"),h(),l(201," again, and all is well in the universe.\n"),h(),d(202,"h2"),l(203,"TDD Cycling "),d(204,"code"),l(205,"IncreaseByUnit"),h()(),d(206,"p"),l(207," The domain model focus will be a new method named "),d(208,"code"),l(209,"IncreaseByUnit"),h(),l(210,"."),m(211,"br"),h(),d(212,"h3")(213,"span",7),l(214,"RED (exit point "),d(215,"code"),l(216,"FullPoints"),h(),l(217,")"),h()(),d(218,"p"),l(219," Focusing first on the "),d(220,"code"),l(221,"FullPoints"),h(),l(222," property.\n"),h(),d(223,"pre"),m(224,"code",6),h(),d(225,"h3")(226,"span",8),l(227,"GREEN"),h()(),d(228,"p"),l(229," I pass the test by using the defined constant "),d(230,"code"),l(231,"PointsPerUnit"),h()(),d(232,"pre"),m(233,"code",6),h(),d(234,"p"),l(235," Now I focus on the other "),d(236,"i"),l(237,"exit point"),h(),l(238,", the "),d(239,"code"),l(240,"CurrentPoints"),h(),l(241," property."),m(242,"br"),l(243," It ideally should be a new tests as it's about a different "),d(244,"i"),l(245,"exit point"),h(),m(246,"br"),l(247," (see Good Unit Test definition in "),d(248,"a",9),l(249,"part 1"),h(),l(250,").\n"),h(),d(251,"h3")(252,"span",7),l(253,"RED (exit point "),d(254,"code"),l(255,"CurrentPoints"),h(),l(256,")"),h()(),d(257,"pre"),m(258,"code",6),h(),d(259,"h3")(260,"span",8),l(261,"GREEN"),h()(),d(262,"pre"),m(263,"code",6),h(),d(264,"p"),l(265,"\nI simply add the line "),d(266,"code"),l(267,"CurrentPoints = FullPoints"),h(),l(268,","),m(269,"br"),l(270,"\nwhich is also the proper solution as the requirement is:"),m(271,"br"),l(272,"\n'"),d(273,"code"),l(274,"CurrentPoints"),h(),l(275," get same value as "),d(276,"code"),l(277,"FullPoints"),h(),l(278," (on increase)'.\n"),h(),d(279,"h2"),l(280,"Cycling the maximum"),h(),d(281,"p"),l(282,"\nAll that is left is the maximum requirement."),m(283,"br"),l(284,"\nThe game will only give the user the option to increase the health"),m(285,"br"),l(286,"\nif the "),d(287,"code"),l(288,"MaxUnits"),h(),l(289," has not been reached (and it costs 4 "),d(290,"i"),l(291,"Spirit Orbs"),h(),l(292,"),"),m(293,"br"),l(294,"\nThus the outside code should query "),d(295,"code"),l(296,"Health"),h(),l(297," if maximum has been reached,"),m(298,"br"),l(299,"\nand if not, only then invoke "),d(300,"code"),l(301,"IncreaseByUnit"),h(),l(302,"."),m(303,"br"),d(304,"code"),l(305,"IncreaseByUnit"),h(),l(306," should though also handle improper usage in this regard,"),m(307,"br"),l(308,"\nand I'll add this handling at the end of this post.\n"),h(),d(309,"h3")(310,"span",7),l(311,"RED"),h()(),d(312,"p"),l(313," The "),d(314,"i"),l(315,"entry point"),h(),l(316," will be a new property named "),d(317,"code"),l(318,"IsMaxUnitsReached"),h(),l(319,"."),m(320,"br"),h(),d(321,"pre"),m(322,"code",6),h(),d(323,"p"),l(324,"\nI added 2 test easily at the same time,"),m(325,"br"),l(326,"\nwhich should suffice to drive in the proper production implementation."),m(327,"br")(328,"br"),l(329,"\nHere I can concise the test names"),m(330,"br"),l(331,"\nas the "),d(332,"i"),l(333,"exit point"),h(),l(334," is the same as the "),d(335,"i"),l(336,"entry point"),h(),l(337,","),m(338,"br"),l(339,"\nthus I skip the "),d(340,"i"),l(341,"exit point"),h(),l(342," in the name (nested class already names it)."),m(343,"br")(344,"br"),l(345,"\nThere are compile errors as both"),m(346,"br"),d(347,"code"),l(348,"MaxFullPoints"),h(),l(349," and "),d(350,"code"),l(351,"IsMaxUnitsReached"),h(),l(352," are not defined.\n"),h(),d(353,"h3")(354,"span",8),l(355,"GREEN"),h()(),d(356,"pre"),m(357,"code",6),h(),d(358,"p"),l(359,"\nI define the constant and give it the proper value,"),m(360,"br"),l(361,"\nand I implement the read-only property as an "),d(362,"a",10),l(363,"Expression-Bodied Member"),h(),l(364,"."),m(365,"br"),h(),d(366,"h2"),l(367,"Handle improper usage of "),d(368,"code"),l(369,"IncreaseByUnit"),h()(),d(370,"p"),l(371,"\nIf the outside code invokes "),d(372,"code"),l(373,"IncreaseByUnit"),h(),l(374," when "),d(375,"code"),l(376,"IsMaxUnitsReached"),h(),l(377," is "),d(378,"code"),l(379,"true"),h(),l(380,","),m(381,"br"),l(382,"\nthe method should handle this improper usage.\n"),h(),d(383,"h3")(384,"span",7),l(385,"RED"),h()(),d(386,"pre"),m(387,"code",6),h(),d(388,"p"),l(389," I deem I can use existing "),d(390,"code"),l(391,"InvalidOperationException"),h(),l(392," from "),d(393,"code"),l(394,"System"),h(),l(395,","),m(396,"br"),l(397," if I include an informative message for my case."),m(398,"br")(399,"br"),l(400," I assert that the message contains string "),d(401,"i"),l(402,"invalid"),h(),l(403,", ignoring case."),m(404,"br"),l(405," I'm intentionally not being more specific"),m(406,"br"),l(407," to later minimize the chance the assert fails if the message is reworded."),m(408,"br"),l(409," This simple "),d(410,"i"),l(411,"Resistance to refactoring"),h(),l(412," makes this a better unit test."),m(413,"br"),l(414," (book "),d(415,"a",10),l(416,"Unit Testing Principles, Practices, and Patterns"),h(),l(417," by Vladimir Khorikov,"),m(418,"br"),l(419," lists "),d(420,"i"),l(421,"Resistance to refactoring"),h(),l(422," as one of the 4 pillars of good unit test).\n"),h(),d(423,"h3")(424,"span",8),l(425,"GREEN"),h()(),d(426,"pre"),m(427,"code",6),h(),d(428,"p"),l(429," I pass the test by adding the "),d(430,"i"),l(431,"if"),h(),l(432," condition at the start of the method."),m(433,"br")(434,"br"),l(435," Now the requirements hao been fulfilled and the Unity Test Runner looks like this:\n"),h(),d(436,"figure"),m(437,"img",11),d(438,"figcaption"),l(439," Unity Test Runner: after Increase and Max requirements "),h()()),2&t&&(C(1),nt(i.post.seriesTitle),C(2),nt(i.post.title),C(5),Qe(" published on ",i.publishedDateToString,""),C(2),T("ngIf",i.hasUpdatedDate),C(21),T("innerHTML",i.completeRequirementListHtml,ye),C(122),T("innerHTML",i.aboutCodeHtml,ye),C(25),T("highlight",i.refactorHealth),C(18),T("highlight",i.refactorHealthTest),C(28),T("highlight",i.red_increaseByUnit_fullPointsIncrease),C(9),T("highlight",i.green_increaseByUnit_fullPointsIncrease),C(25),T("highlight",i.red_increaseByUnit_currentPointsIncrease),C(5),T("highlight",i.green_increaseByUnit_currentPointsIncrease),C(59),T("highlight",i.red_IsMaxUnitsReached),C(35),T("highlight",i.green_IsMaxUnitsReached),C(30),T("highlight",i.red_IncreaseByUnit_ThrowsError),C(40),T("highlight",i.green_IncreaseByUnit_ThrowsError))},dependencies:[Mn,Ns],styles:[".redFail[_ngcontent-%COMP%]{color:var(--colorRed)}.greenPass[_ngcontent-%COMP%]{color:var(--colorGreenLight)}.greenRefactor[_ngcontent-%COMP%]{color:var(--colorGreenLightMed)}.outOfScope[_ngcontent-%COMP%]{color:var(--colorGrayLight)}.byAndDate[_ngcontent-%COMP%]{text-align:center}.noBulletinPoint[_ngcontent-%COMP%]{list-style:none}"]})}function X4(n,e){if(1&n&&(d(0,"small"),l(1),h()),2&n){const t=Ne();C(1),Qe(" updated on ",t.updatedDateToString," ")}}class Zl extends Si{constructor(){super(...arguments),this.gameConfigCs='// GameConfig.cs\nusing UnityEngine;\n\n[CreateAssetMenu(fileName = "GameConfigInstance",\nmenuName = "Avatar Health/Create GameConfig Instance",\norder = 1)]\npublic class GameConfig : ScriptableObject {\n\tpublic int StartingUnits = 3;\n\tpublic int PointsPerUnit = 4;\n\tpublic int MaxUnits = 30;\n\tpublic int MaxNegativeUnitsForInstantKillProtection = -5\n}\n',this.redValidationTest='// ValidationTest.cs\nusing NUnit.Framework;\n\n[TestFixture]\npublic class ValidationTest\n{\n\tpublic class Validate\n\t{\n\t\t[TestCase(12, 1)]\n\t\t[TestCase(1, 1)]\n\t\t[TestCase(4, 2)]\n\t\t[TestCase(2, 2)]\n\t\t[TestCase(-20, int.MinValue, -1)]\n\t\t[TestCase(-1, int.MinValue, -1)]\n\t\tpublic void Passes(int v, int lowestValidV, int highestValidV = int.MaxValue)\n\t\t{\n\t\t\t(bool, int, string) ret = Validation.Validate(v, lowestValidV, highestValidV);\n\t\t\tAssert.That(ret.Item1, Is.True);\n\t\t\tAssert.That(ret.Item2, Is.EqualTo(v));\n\t\t\tAssert.That(ret.Item3, Is.EqualTo(""));\n\t\t}\n\n\t\t[TestCase(0, 1)]\n\t\t[TestCase(-1, 0)]\n\t\tpublic void Fails_WhenValueLower(int v, int lowestValidV)\n\t\t{\n\t\t\t(bool, int, string) ret = Validation.Validate(v, lowestValidV, int.MaxValue);\n\t\t\tAssert.That(ret.Item1, Is.False);\n\t\t\tAssert.That(ret.Item2, Is.EqualTo(lowestValidV));\n\t\t\tAssert.That(ret.Item3, Does.Match("invalid").IgnoreCase);\n\t\t}\n\n\t\t[TestCase(0, int.MinValue, -1)]\n\t\t[TestCase(1, int.MinValue, 0)]\n\t\tpublic void Fails_WhenValueHigher(int v, int lowestValidV, int highestValidV)\n\t\t{\n\t\t\t(bool, int, string) ret = Validation.Validate(v, lowestValidV, highestValidV);\n\t\t\tAssert.That(ret.Item1, Is.False);\n\t\t\tAssert.That(ret.Item2, Is.EqualTo(highestValidV));\n\t\t\tAssert.That(ret.Item3, Does.Match("invalid").IgnoreCase);\n\t\t}\n\t}\n}\n',this.greenValidation='// Validation.cs\npublic static class Validation\n{\n\tpublic static (bool, int, string) Validate(int v, int lowestValidV, int highestValidV = int.MaxValue)\n\t{\n\t\tvar message = "";\n\t\tif (v >= lowestValidV && v <= highestValidV)\n\t\t{\n\t\t\treturn (true, v, message);\n\t\t}\n\n\t\tmessage = $"Value {v} is invalid, it should be within the range of {lowestValidV} and {highestValidV}";\n\t\tint retV = highestValidV == int.MaxValue ? lowestValidV : highestValidV;\n\n\t\treturn (false, retV, message);\n\t}\n}\n',this.hookValidationIntoConfig="// GameConfig.cs\nprivate void OnValidate()\n{\n\tvar v = Validation.Validate(StartingUnits, 1);\n\tStartingUnits = ProcessValidation(v, nameof(StartingUnits));\n\n\tv = Validation.Validate(PointsPerUnit, 2);\n\tPointsPerUnit = ProcessValidation(v, nameof(PointsPerUnit));\n\n\tv = Validation.Validate(MaxNegativeUnitsForInstantKillProtection, int.MinValue, -1);\n\tMaxNegativeUnitsForInstantKillProtection = ProcessValidation(v, nameof(MaxNegativeUnitsForInstantKillProtection));\n\n\tv = Validation.Validate(MaxUnits, StartingUnits);\n\tMaxUnits = ProcessValidation(v, nameof(MaxUnits));\n}\n\nprivate int ProcessValidation((bool IsValid, int Value, string FailMessage) validation, string fieldName)\n{\n\tif (!validation.IsValid)\n\t{\n\t\tDebug.LogWarning(validation.FailMessage + $\", for '{fieldName}'. Will set value to {validation.Value}.\");\n\t}\n\treturn validation.Value;\n}\n",this.validationReturn='/*success*/(bool IsValid = true, int Value, string failMessage = "")\n/*fail*/(bool IsValid = false, int Value /*corrected to valid edge*/, string failMessage)\n',this.healthRefactor="// Health.cs\nprivate readonly GameConfig config;\n\npublic Health(GameConfig gameConfig)\n{\n\tconfig = gameConfig;\n\tFullPoints = CurrentPoints = config.StartingUnits * config.PointsPerUnit;\n}\n",this.healthRefactor1="// Health.cs\npublic int PointsPerUnit => config.PointsPerUnit;\npublic int MaxUnits => config.MaxUnits;\npublic int MaxNegativeUnitsForInstantKillProtection => config.MaxNegativeUnitsForInstantKillProtection;\n",this.healthTestRefactor="// HealthTest.cs\npublic class HealthTest\n{\n\tpublic static Health MakeHealth(int startingUnits)\n\t{\n\t\t\tvar config = MakeConfig(startingUnits);\n\t\t\tvar health = new Health(config);\n\t\t\treturn health;\n\t}\n\n\tpublic static GameConfig MakeConfig(int startingUnits = 3)\n\t{\n\t\t\tvar config = ScriptableObject.CreateInstance<GameConfig>();\n\t\t\tconfig.StartingUnits = startingUnits;\n\t\t\tconfig.PointsPerUnit = 4;\n\t\t\tconfig.MaxUnits = 30;\n\t\t\treturn config;\n\t}\n",this.healthTestRefactorMostCases=" HealthTest.cs\n[Test]\npublic void IsDead_IsFalse()\n{\n\tvar health = MakeHealth(3);\n\tAssert.That(health.IsDead, Is.False);\n}\n",this.healthTestUseMakeConfig="// HealthTest.cs\n[Test]\npublic void ReturnsTrue_WhenStartingUnitsAtMax()\n{\n\tvar config = MakeConfig();\n\tconfig.StartingUnits = config.MaxUnits;\n\tvar health = new Health(config);\n\tAssert.That(health.IsMaxUnitsReached, Is.True);\n}\n",this.healthReuseValidation="// Health.cs\nprivate static void ValidatePoints(int points, int lowestValidValue)\n{\n\t(bool IsValid, int Value, string FailMessage) v = Validation.Validate(points, lowestValidValue);\n\tif (!v.IsValid)\n\t{\n\t\tthrow new ArgumentOutOfRangeException(nameof(points), v.FailMessage);\n\t}\n}\n"}static#e=this.\u0275fac=function(){let e;return function(i){return(e||(e=ft(Zl)))(i||Zl)}}();static#t=this.\u0275cmp=kt({type:Zl,selectors:[["app-post-tdd-8"]],features:[He],decls:453,vars:15,consts:[[1,"byAndDate"],[4,"ngIf"],["href","./blog/tdd-health/part1"],[1,"list","inline"],["href","https://docs.unity3d.com/Manual/class-ScriptableObject.html"],[3,"highlight"],["src","../assets/images/blog/tdd/MenuItem_GameConfigInstance.png","alt","Create Game Config Instance via menu item","title","Create Game Config Instance via menu item",1,"imageSmallText"],["src","../assets/images/blog/tdd/Inspector_GameConfigInstance.png","alt","Game Config Instance via the Inspector window","title","Game Config Instance via the Inspector window",1,"imageSmallText"],[1,"redFail"],[1,"greenPass"],["src","../assets/images/blog/tdd/Unity_config-validation.gif","alt","Unity: Config Validation in the Inspector and Console","title","Unity: Config Validation in the Inspector and Console",1,"imageSmallText"],["src","../assets/images/blog/tdd/Unity_MaxUnits-validation.gif","alt","Unity: MaxUnits Validation in the Inspector and Console","title","Unity: MaxUnits Validation in the Inspector and Console",1,"imageSmallText"],[1,"greenRefactor"],["src","../assets/images/blog/tdd/TestRunner_after-config-added.png","alt","Test Runner after config added and used","title","Test Runner after config added and used",1,"imageSmallText"]],template:function(t,i){1&t&&(d(0,"h1"),l(1),h(),d(2,"h2"),l(3),h(),d(4,"div",0)(5,"small"),l(6,"by Egill Antonsson"),m(7,"br"),l(8),m(9,"br"),h(),Le(10,X4,2,1,"small",1),h(),d(11,"h2"),l(12,"The game balancing config"),h(),d(13,"p"),l(14,"\nThe thought came early (in "),d(15,"a",2),l(16,"part 3"),h(),l(17,") that a game balance config for values like "),d(18,"code"),l(19,"StartingUnits"),h(),l(20,","),m(21,"br"),l(22,"\nwould be valuable to have for balancing out during the development period."),m(23,"br"),l(24,"\nThe config should be accessible and validate the values (ideally immediately when changed),"),m(25,"br"),l(26,"\nand then later at runtime be injected to the "),d(27,"code"),l(28,"Health"),h(),l(29," instance."),m(30,"br"),l(31,"\nThere are other values in "),d(32,"code"),l(33,"Health"),h(),l(34," that are suitable, thus the config will include:\n"),h(),d(35,"ul",3)(36,"li")(37,"code"),l(38,"StartingUnits"),h()(),d(39,"li")(40,"code"),l(41,"PointsPerUnit"),h()(),d(42,"li")(43,"code"),l(44,"MaxUnits"),h()(),d(45,"li")(46,"code"),l(47,"MaxNegativeUnitsForInstantKillProtection"),h()()(),d(48,"h2"),l(49,"Using "),d(50,"code"),l(51,"ScriptableObject"),h()(),d(52,"p"),l(53,"\nAssuming that the game designer can do basic work in Unity and the version control system,"),m(54,"br"),l(55,"\nwe can keep the config solution completely within Unity."),m(56,"br"),l(57,"\nI'll thus base it on Unity's "),d(58,"a",4),l(59,"ScriptableObject"),h(),l(60,","),m(61,"br"),l(62,"\na data container that can be used to save large amounts of data."),m(63,"br"),l(64,"\nI create folder "),d(65,"i"),l(66,"ScriptableObjects/"),h(),l(67," at "),d(68,"i"),l(69,"Assets/Scripts/Runtime/"),h(),l(70," and create script "),d(71,"code"),l(72,"GameConfig"),h(),l(73," within it.\n"),h(),d(74,"pre"),m(75,"code",5),h(),d(76,"p"),l(77,"\nI create another folder "),d(78,"i"),l(79,"ScriptableObjectsInstances/"),h(),l(80," at "),d(81,"i"),l(82,"Assets/"),h(),m(83,"br"),l(84,"\nand because of the code above I can now right click on the folder / click at "),d(85,"i"),l(86,"Assets"),h(),l(87," at top menu,"),m(88,"br"),l(89,"\nand select menu item "),d(90,"i"),l(91,"Create > Avatar Health > Create GameConfig Instance"),h(),l(92,"."),m(93,"br"),l(94,"\nAs the name applies this creates a scriptable object instance based on the "),d(95,"code"),l(96,"GameConfig"),h(),l(97," class 'template'."),m(98,"br"),l(99,"\nI use the given default filename "),d(100,"code"),l(101,"GameConfigInstance"),h(),l(102," (file ends with "),d(103,"i"),l(104,".asset"),h(),l(105,").\n"),h(),d(106,"figure"),m(107,"img",6),d(108,"figcaption"),l(109,"Create GameConfig Instance via menu item"),h()(),d(110,"p"),l(111," I can now view and edit the "),d(112,"i"),l(113,"Game Config Instance"),h(),l(114," via the Inspector window.\n"),h(),d(115,"figure"),m(116,"img",7),d(117,"figcaption"),l(118,"Game Config Instance via the Inspector window"),h()(),d(119,"p"),l(120," I can change the values as I see fit and the change will be saved on the instance."),m(121,"br"),l(122," But there is no domain validation for the values, so I TDD cycle it.\n"),h(),d(123,"h2"),l(124,"TDD-ing the validation"),h(),d(125,"p"),l(126," Unit testing logic in scriptable objects can quickly become complicated."),m(127,"br"),l(128," For this reason, and also for Reusability and Separation of Concern,"),m(129,"br"),l(130," I will implement the generic validation logic in a utility class which will be easy to TDD."),m(131,"br"),l(132," Then I'll make the config process the validation using the utility logic.\n"),h(),d(133,"h3")(134,"span",8),l(135,"RED"),h()(),d(136,"p"),l(137," I create the folder "),d(138,"i"),l(139,"Utils"),h(),l(140," in the test folder"),m(141,"br"),l(142," ("),d(143,"i"),l(144,"Assets/Scripts/Tests/EditMode/"),h(),l(145,") and create script "),d(146,"code"),l(147,"ValidationTest"),h(),l(148," within it."),m(149,"br"),l(150," I take into consideration the requirements for both the config"),m(151,"br"),l(152," and the other validations that "),d(153,"code"),l(154,"Health"),h(),l(155," does, and then write the tests. "),h(),d(156,"pre"),m(157,"code",5),h(),d(158,"p"),l(159,"\nI wrote tests for all meaningful cases based on the requirements in one step."),m(160,"br"),l(161,"\nThe validation logic returns a tuple:\n"),h(),d(162,"pre"),m(163,"code",5),h(),d(164,"p"),l(165,"\nThe using code should then decide what to do.\n"),h(),d(166,"h3")(167,"span",9),l(168,"GREEN"),h()(),d(169,"p"),l(170,"\nI mirror the location of the test, thus create the folder "),d(171,"i"),l(172,"Utils"),h(),l(173," in the production code folder ("),d(174,"i"),l(175,"Assets/Scripts/Runtime/"),h(),l(176,") and create script "),d(177,"code"),l(178,"Validation"),h(),l(179," within it."),m(180,"br"),l(181,"\nI implement it gradually until I get all the tests passing.\n"),h(),d(182,"pre"),m(183,"code",5),h(),d(184,"h2"),l(185,"Processing the validation in the config"),h(),d(186,"p"),l(187,"\nI want to make sure the validation can't be bypassed"),m(188,"br"),l(189,"\nthus I'll prevent the game designer from saving invalid values to the config,"),m(190,"br"),l(191,"\nand provide some message in the Unity editor when an invalid value is corrected.\n"),h(),d(192,"pre"),m(193,"code",5),h(),d(194,"p"),l(195,"\nI use "),d(196,"code"),l(197,"OnValidate"),h(),l(198,", a editor-only function that Unity calls when the script is loaded or a value changes in the Inspector"),m(199,"br"),l(200,"\n(part of the "),d(201,"a",4),l(202,"ScriptableObject"),h(),l(203,").\n"),h(),d(204,"h2"),l(205,"The validation at work"),h(),d(206,"figure"),m(207,"img",10),d(208,"figcaption"),l(209,"Unity: Config Validation in the Inspector and Console"),h()(),d(210,"p"),l(211," As the gif shows above, the logic accepts valid values (the first one)"),m(212,"br"),l(213," but prevents invalid values being set by reverting to the valid 'edge' value, and logging a message to the Console."),m(214,"br"),h(),d(215,"ul",3)(216,"li"),l(217,"reverts to "),d(218,"code"),l(219,"1"),h(),l(220," for "),d(221,"code"),l(222,"StartingUnits"),h()(),d(223,"li"),l(224,"reverts to "),d(225,"code"),l(226,"2"),h(),l(227," for "),d(228,"code"),l(229,"PointsPerUnit"),h()(),d(230,"li"),l(231,"reverts to "),d(232,"code"),l(233,"-1"),h(),l(234," for "),d(235,"code"),l(236,"MaxNegativePointsForInstantKillProtection"),h()()(),d(237,"p"),l(238," Below is the gif for the "),d(239,"code"),l(240,"MaxUnits"),h(),l(241," validation.\n"),h(),d(242,"figure"),m(243,"img",11),d(244,"figcaption"),l(245,"Unity: MaxUnits Validation in the Inspector and Console"),h()(),d(246,"p")(247,"code"),l(248,"MaxUnits"),h(),l(249," validation is based on the values of "),d(250,"code"),l(251,"StartingUnits"),h(),m(252,"br"),l(253," thus "),d(254,"code"),l(255,"MaxUnits"),h(),l(256," can become invalid when "),d(257,"code"),l(258,"StartingUnits"),h(),l(259," is set to a valid value,"),m(260,"br"),l(261," (as the latter half of the gif conveys)."),m(262,"br"),l(263," The logged message in the Console clarifies this occurrence.\n"),h(),d(264,"h2"),l(265,"Make "),d(266,"code"),l(267,"Health"),h(),l(268," use the config"),h(),d(269,"p"),l(270,"\nI want "),d(271,"code"),l(272,"Health"),h(),l(273," to use the config"),m(274,"br"),l(275,"\nand not provide another way to inject those values,"),m(276,"br"),l(277,"\nthus I don't need to validate those values again in "),d(278,"code"),l(279,"Health"),h(),l(280,"."),m(281,"br"),l(282,"\n(I have ownership of the config code and"),m(283,"br"),l(284,"\nI am confident that its validation will always work as expected)."),m(285,"br")(286,"br"),l(287,"\nI will refactor the health code in the steps presented below."),m(288,"br"),l(289,"\nThis is about a design change in the production code (wholistic refactoring),"),m(290,"br"),l(291,"\nand it this case it makes more sense to start with the production code.\n"),h(),d(292,"h3")(293,"span",12),l(294,"Refactor "),d(295,"code"),l(296,"Health"),h()()(),d(297,"pre"),m(298,"code",5),h(),d(299,"p"),l(300,"\nI inject the "),d(301,"code"),l(302,"GameConfig"),h(),l(303," instance into the constructor,"),m(304,"br"),l(305,"\nand store it in a member and then access the values from the member."),m(306,"br"),l(307,"\nThe member is "),d(308,"code"),l(309,"private readonly"),h(),l(310," and thus encapsulated and immutable within the class."),m(311,"br"),l(312,"\nI remove the old "),d(313,"code"),l(314,"startingUnits"),h(),l(315," validation (as the config is already validated)."),m(316,"br"),h(),d(317,"pre"),m(318,"code",5),h(),d(319,"p"),l(320,"\nI refactor these constants into read-only properties,"),m(321,"br"),l(322,"\ngetting the value from the config."),m(323,"br"),l(324,"\nThis way the config values can't be set via the "),d(325,"code"),l(326,"Health"),h(),l(327," instance (encapsulation).\n"),h(),d(328,"h3")(329,"span",12),l(330,"Refactor "),d(331,"code"),l(332,"HealthTest"),h()()(),d(333,"p"),l(334," Now many tests will "),d(335,"span",8),l(336,"fail"),h(),l(337,","),m(338,"br"),l(339," mainly because they are not injecting the config into the constructor."),m(340,"br"),l(341," Let's refactor and fix them.\n"),h(),d(342,"pre"),m(343,"code",5),h(),d(344,"p"),l(345,"\nI create these helper methods above."),m(346,"br")(347,"br"),d(348,"code"),l(349,"MakeConfig"),h(),l(350," creates the config"),m(351,"br"),l(352,"\nand sets the "),d(353,"code"),l(354,"startingUnits"),h(),l(355," via parameter."),m(356,"br"),l(357,"\nIt also sets the other values for better "),d(358,"i"),l(359,"Resistance to refactoring"),h(),m(360,"br"),l(361,"\n(the tests will still work if the default values are changed in the scriptable object)."),m(362,"br")(363,"br"),d(364,"code"),l(365,"MakeHealth"),h(),l(366," creates and return a "),d(367,"code"),l(368,"Health"),h(),l(369," instance (using "),d(370,"code"),l(371,"MakeConfig"),h(),l(372,")."),m(373,"br")(374,"br"),l(375,"\nFor most tests it is sufficient to swap the "),d(376,"code"),l(377,"MakeHeath"),h(),m(378,"br"),l(379,"\nfor the "),d(380,"code"),l(381,"new Health"),h(),l(382," construction, as shown below"),m(383,"br"),l(384,"\n(one command execution with the IDE).\n"),h(),d(385,"pre"),m(386,"code",5),h(),d(387,"p"),l(388,"\nThere are 3 tests that refer to "),d(389,"code"),l(390,"maxUnits"),h(),l(391," to set up "),d(392,"code"),l(393,"StartingUnits"),h(),l(394," the the test."),m(395,"br"),l(396,"\nThese tests use "),d(397,"code"),l(398,"MakeConfig"),h(),l(399," directly and then create the "),d(400,"code"),l(401,"Health"),h(),l(402," instance."),m(403,"br"),h(),d(404,"pre"),m(405,"code",5),h(),d(406,"p"),l(407,"\nNow only test "),d(408,"code"),l(409,"ThrowsError_WhenStartingPointsIsInvalid"),h(),d(410,"span",8),l(411," fails"),h(),l(412,"."),m(413,"br"),l(414,"\nI remove it as I'm no longer validating "),d(415,"code"),l(416,"StartingUnits"),h(),l(417," in "),d(418,"code"),l(419,"Health"),h(),l(420,"."),m(421,"br"),l(422,"\nNow all the tests "),d(423,"span",9),l(424,"pass"),h(),l(425," again.\n"),h(),d(426,"h2"),l(427,"Reuse the utility "),d(428,"code"),l(429,"Validation"),h()(),d(430,"p"),l(431," Since now I have a utility "),d(432,"code"),l(433,"Validation"),h(),l(434," class"),m(435,"br"),l(436," I want to reuse it in the "),d(437,"code"),l(438,"Health"),h(),l(439," methods,"),m(440,"br"),l(441," thus I refactor the "),d(442,"code"),l(443,"ValidatePoints"),h(),l(444," method:\n"),h(),d(445,"pre"),m(446,"code",5),h(),d(447,"p"),l(448,"Now the config has been added and used, the Unity Test Runner looks like this:"),h(),d(449,"figure"),m(450,"img",13),d(451,"figcaption"),l(452,"Test Runner after config added and used"),h()()),2&t&&(C(1),nt(i.post.seriesTitle),C(2),nt(i.post.title),C(5),Qe(" published on ",i.publishedDateToString,""),C(2),T("ngIf",i.hasUpdatedDate),C(65),T("highlight",i.gameConfigCs),C(82),T("highlight",i.redValidationTest),C(6),T("highlight",i.validationReturn),C(20),T("highlight",i.greenValidation),C(10),T("highlight",i.hookValidationIntoConfig),C(105),T("highlight",i.healthRefactor),C(20),T("highlight",i.healthRefactor1),C(25),T("highlight",i.healthTestRefactor),C(43),T("highlight",i.healthTestRefactorMostCases),C(19),T("highlight",i.healthTestUseMakeConfig),C(41),T("highlight",i.healthReuseValidation))},dependencies:[Mn,Ns],styles:[".redFail[_ngcontent-%COMP%]{color:var(--colorRed)}.greenPass[_ngcontent-%COMP%]{color:var(--colorGreenLight)}.greenRefactor[_ngcontent-%COMP%]{color:var(--colorGreenLightMed)}.outOfScope[_ngcontent-%COMP%]{color:var(--colorGrayLight)}.byAndDate[_ngcontent-%COMP%]{text-align:center}.noBulletinPoint[_ngcontent-%COMP%]{list-style:none}"]})}function eU(n,e){if(1&n&&(d(0,"small"),l(1),h()),2&n){const t=Ne();C(1),Qe(" updated on ",t.updatedDateToString," ")}}class Jl extends Si{constructor(){super(...arguments),this.gameConfigCs='// GameConfig.cs\nusing UnityEngine;\n\n[CreateAssetMenu(fileName = "GameConfigInstance",\nmenuName = "Avatar Health/Create GameConfig Instance",\norder = 1)]\npublic class GameConfig : ScriptableObject {\n\tpublic int StartingUnits = 3;\n\tpublic int PointsPerUnit = 4;\n\tpublic int MaxUnits = 30;\n\tpublic int MaxNegativeUnitsForInstantKillProtection = -5\n}\n',this.redValidationTest='// ValidationTest.cs\nusing NUnit.Framework;\nusing System;\n\n[TestFixture]\npublic class ValidationTest\n{\n\tpublic class Validate\n\t{\n\t\t[TestCase(12, 1)]\n\t\t[TestCase(1, 1)]\n\t\t[TestCase(4, 2)]\n\t\t[TestCase(2, 2)]\n\t\t[TestCase(-20, Int32.MinValue, -1)]\n\t\t[TestCase(-1, Int32.MinValue, -1)]\n\t\tpublic void Passes(int v, int lowestValidV, int highestValidV = Int32.MaxValue)\n\t\t{\n\t\t\t(bool, int, string) ret = Validation.Validate(v, lowestValidV, highestValidV);\n\t\t\tAssert.That(ret.Item1, Is.True);\n\t\t\tAssert.That(ret.Item2, Is.EqualTo(v));\n\t\t\tAssert.That(ret.Item3, Is.EqualTo(""));\n\t\t}\n\n\t\t[TestCase(0, 1)]\n\t\t[TestCase(-1, 0)]\n\t\tpublic void Fails_WhenValueLower(int v, int lowestValidV)\n\t\t{\n\t\t\t(bool, int, string) ret = Validation.Validate(v, lowestValidV, Int32.MaxValue);\n\t\t\tAssert.That(ret.Item1, Is.False);\n\t\t\tAssert.That(ret.Item2, Is.EqualTo(lowestValidV));\n\t\t\tAssert.That(ret.Item3, Does.Match("invalid").IgnoreCase);\n\t\t}\n\n\t\t[TestCase(0, Int32.MinValue, -1)]\n\t\t[TestCase(1, Int32.MinValue, 0)]\n\t\tpublic void Fails_WhenValueHigher(int v, int lowestValidV, int highestValidV)\n\t\t{\n\t\t\t(bool, int, string) ret = Validation.Validate(v, lowestValidV, highestValidV);\n\t\t\tAssert.That(ret.Item1, Is.False);\n\t\t\tAssert.That(ret.Item2, Is.EqualTo(highestValidV));\n\t\t\tAssert.That(ret.Item3, Does.Match("invalid").IgnoreCase);\n\t\t}\n\t}\n}\n',this.greenValidation='// Validation.cs\nusing System;\n\npublic static class Validation\n{\n\tpublic static (bool, int, string) Validate(int v, int lowestValidV, int highestValidV = Int32.MaxValue)\n\t{\n\t\tstring message = "";\n\t\tif (v >= lowestValidV && v <= highestValidV)\n\t\t{\n\t\t\treturn (true, v, message);\n\t\t}\n\n\t\tmessage = $"Value {v} is invalid, it should be within the range of {lowestValidV} and {highestValidV}";\n\t\tint retV = highestValidV == Int32.MaxValue ? lowestValidV : highestValidV;\n\t\t\treturn (false, retV, message);\n\t}\n}\n',this.hookValidationIntoConfig="// GameConfig.cs\nprivate void OnValidate()\n{\n\tvar validation = Validation.Validate(StartingPoints, 1);\n\tStartingPoints = ProcessValidation(validation, nameof(StartingPoints));\n\n\tvalidation = Validation.Validate(PointsPerUnit, 2);\n\tPointsPerUnit = ProcessValidation(validation, nameof(PointsPerUnit));\n\n\tvalidation = Validation.Validate(MaxNegativePointsForInstantKillProtection, Int32.MinValue, -1);\n\tMaxNegativePointsForInstantKillProtection = ProcessValidation(validation, nameof(MaxNegativePointsForInstantKillProtection));\n\n\tdouble lowestMaxUnits = Math.Ceiling((double)StartingPoints / (double)PointsPerUnit);\n\tvalidation = Validation.Validate(MaxUnits, (int)lowestMaxUnits);\n\tMaxUnits = ProcessValidation(validation, nameof(MaxUnits));\n}\n\nprivate int ProcessValidation((bool IsValid, int Value, string FailMessage) validation, string propertyName)\n{\n\tif (!validation.IsValid)\n\t\t{\n\t\t\tDebug.LogWarning(validation.FailMessage + $\", for '{propertyName}'. Will set value to {validation.Value}.\");\n\t\t}\n\t\treturn validation.Value;\n}\n",this.validationReturn='/*success*/(bool IsValid = true, int Value, string failMessage = "")\n/*fail*/(bool IsValid = false, int Value /*corrected to valid edge*/, string failMessage)\n',this.hookingValidationInConfig="// GameConfig.cs\nprivate void OnValidate()\n{\n\tvar v = Validation.Validate(StartingPoints, 1);\n\tStartingPoints = ProcessValidation(v, nameof(StartingPoints));\n\n\tv = Validation.Validate(PointsPerUnit, 2);\n\tPointsPerUnit = ProcessValidation(v, nameof(PointsPerUnit));\n\n\tv = Validation.Validate(MaxNegativePointsForInstantKillProtection, Int32.MinValue, -1);\n\tMaxNegativePointsForInstantKillProtection = ProcessValidation(v, nameof(MaxNegativePointsForInstantKillProtection));\n\n\tdouble lowestMaxUnits = Math.Ceiling((double)StartingPoints / (double)PointsPerUnit);\n\tv = Validation.Validate(MaxUnits, (int)lowestMaxUnits);\n\tMaxUnits = ProcessValidation(v, nameof(MaxUnits));\n}\n\nprivate int ProcessValidation((bool IsValid, int Value, string FailMessage) v, string fieldName)\n{\n\tif (!v.IsValid)\n\t\t{\n\t\t\tDebug.LogWarning(v.FailMessage + $\", for '{fieldName}'. Will set value to {v.Value}.\");\n\t\t}\n\t\treturn v.Value;\n}\n",this.healthRefactor="// Health.cs\npublic Health(GameConfig gameConfig)\n{\n\tconfig = gameConfig;\n\tFullPoints = CurrentPoints = config.StartingUnits * config.PointsPerUnit;\n}\n",this.healthRefactor1="// Health.cs\npublic int PointsPerUnit\n{\n\tget { return config.PointsPerUnit; }\n}\npublic int MaxUnits\n{\n\tget { return config.MaxUnits; }\n}\n\tpublic int MaxNegativeUnitsForInstantKillProtection\n{\n\tget { return config.MaxNegativeUnitsForInstantKillProtection; }\n}\n",this.healthTestRefactor="// HealthTest.cs\npublic class HealthTest\n{\n\tpublic static Health MakeHealth(int startingUnits)\n\t{\n\t\t\tvar config = MakeConfig(startingUnits);\n\t\t\tvar health = new Health(config);\n\t\t\treturn health;\n\t}\n\n\tpublic static GameConfig MakeConfig(int startingUnits = 3)\n\t{\n\t\t\tGameConfig config = ScriptableObject.CreateInstance<GameConfig>();\n\t\t\tconfig.StartingUnits = startingUnits;\n\t\t\tconfig.PointsPerUnit = 4;\n\t\t\tconfig.MaxUnits = 30;\n\t\t\treturn config;\n\t}\n",this.healthTestRefactorMostCases=" HealthTest.cs\n[Test]\npublic void IsDead_IsFalse()\n{\n\tvar health = MakeHealth(3);\n\tAssert.That(health.IsDead, Is.False);\n}\n",this.healthTestUseMakeConfig="// HealthTest.cs\n[Test]\npublic void ReturnsTrue_WhenStartingUnitsAtMax()\n{\n\tvar config = MakeConfig();\n\tconfig.StartingUnits = config.MaxUnits;\n\tvar health = new Health(config);\n\tAssert.That(health.IsMaxUnitsReached, Is.True);\n}\n",this.healthReuseValidation="// Health.cs\nprivate static void ValidatePoints(int points, int lowestValidValue)\n{\n\t(bool IsValid, int Value, string FailMessage) v = Validation.Validate(points, lowestValidValue);\n\tif (!v.IsValid)\n\t{\n\t\tthrow new ArgumentOutOfRangeException(nameof(points), v.FailMessage);\n\t}\n}\n"}static#e=this.\u0275fac=function(){let e;return function(i){return(e||(e=ft(Jl)))(i||Jl)}}();static#t=this.\u0275cmp=kt({type:Jl,selectors:[["app-post-tdd-9"]],features:[He],decls:13,vars:4,consts:[[1,"byAndDate"],[4,"ngIf"]],template:function(t,i){1&t&&(d(0,"h1"),l(1),h(),d(2,"h2"),l(3),h(),d(4,"div",0)(5,"small"),l(6,"by Egill Antonsson"),m(7,"br"),l(8),m(9,"br"),h(),Le(10,eU,2,1,"small",1),h(),d(11,"h2"),l(12,"SMU"),h()),2&t&&(C(1),nt(i.post.seriesTitle),C(2),nt(i.post.title),C(5),Qe(" published on ",i.publishedDateToString,""),C(2),T("ngIf",i.hasUpdatedDate))},dependencies:[Mn],styles:[".redFail[_ngcontent-%COMP%]{color:var(--colorRed)}.greenPass[_ngcontent-%COMP%]{color:var(--colorGreenLight)}.greenRefactor[_ngcontent-%COMP%]{color:var(--colorGreenLightMed)}.outOfScope[_ngcontent-%COMP%]{color:var(--colorGrayLight)}.byAndDate[_ngcontent-%COMP%]{text-align:center}.noBulletinPoint[_ngcontent-%COMP%]{list-style:none}"]})}const tU=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:dd},{path:"blog",component:gd,children:[{path:"tdd-health/part1",component:Gl},{path:"tdd-health/part2",component:$l},{path:xs.tddHealthPart3,component:zo},{path:xs.tddHealthPart3Cpp,component:zl},{path:"tdd-health/part4",component:Wl},{path:"tdd-health/part5",component:ql},{path:"tdd-health/part6",component:Kl},{path:"tdd-health/part7",component:Yl},{path:"tdd-health/part8",component:Zl},{path:"tdd-health/part9",component:Jl}]},{path:"music",component:jl},{path:"music/:trackName",component:jl},{path:"lifting",component:Od},{path:"**",component:Rd}];class Fd{static#e=this.\u0275fac=function(t){return new(t||Fd)};static#t=this.\u0275mod=vn({type:Fd});static#n=this.\u0275inj=an({imports:[HC.forRoot(tU,{enableTracing:!1}),HC]})}let vm;try{vm=typeof Intl<"u"&&Intl.v8BreakIterator}catch{vm=!1}let Ql=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Jw(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!vm)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(U(Ya))},n.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class dU{constructor(e){this.total=e}call(e,t){return t.subscribe(new hU(e,this.total))}}class hU extends Ae{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}function _m(n,e){return t=>t.lift(new fU(n,e))}class fU{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new pU(e,this.compare,this.keySelector))}}class pU extends Ae{constructor(e,t,i){super(e),this.keySelector=i,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:r}=this;t=r?r(e):e}catch(r){return this.destination.error(r)}let i=!1;if(this.hasKey)try{const{compare:r}=this;i=r(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;i||(this.key=t,this.destination.next(e))}}function EE(n){return e=>e.lift(new gU(n))}class gU{constructor(e){this.notifier=e}call(e,t){const i=new mU(e),r=mn(this.notifier,new At(i));return r&&!i.seenValue?(i.add(r),t.subscribe(i)):i}}class mU extends Wt{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function ME(n){return Array.isArray(n)?n:[n]}const TE=new ir(gm);class bU{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new _U(e,this.dueTime,this.scheduler))}}class _U extends Ae{constructor(e,t,i){super(e),this.dueTime=t,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(wU,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function wU(n){n.debouncedNext()}const SE=new Set;let Ko,CU=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):EU}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function DU(n){if(!SE.has(n))try{Ko||(Ko=document.createElement("style"),Ko.setAttribute("type","text/css"),document.head.appendChild(Ko)),Ko.sheet&&(Ko.sheet.insertRule(`@media ${n} {body{ }}`,0),SE.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(U(Ql))},n.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function EU(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let MU=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new K}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return IE(ME(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=rg(IE(ME(t)).map(o=>this._registerQuery(o).observable));return s=Gu(s.pipe(Ts(1)),s.pipe(function DE(n){return e=>e.lift(new dU(n))}(1),function yU(n,e=TE){return t=>t.lift(new bU(n,e))}(0))),s.pipe($(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:c,query:u})=>{a.matches=a.matches||c,a.breakpoints[u]=c}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),s={observable:new q(o=>{const a=c=>this._zone.run(()=>o.next(c));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(A0(i),$(({matches:o})=>({query:t,matches:o})),EE(this._destroySubject)),mql:i};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(U(CU),U(yt))},n.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function IE(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const LE="cdk-high-contrast-black-on-white",NE="cdk-high-contrast-white-on-black",wm="cdk-high-contrast-active";let UU=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=Ye(MU).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(wm,LE,NE),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(wm,LE):2===i&&t.add(wm,NE)}}}return n.\u0275fac=function(t){return new(t||n)(U(Ql),U(Rt))},n.\u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),FE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=an({}),n})();const $U=new Q("mat-sanity-checks",{providedIn:"root",factory:function GU(){return!0}});let Hd=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function sU(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(U(UU),U($U,8),U(Rt))},n.\u0275mod=vn({type:n}),n.\u0275inj=an({imports:[FE,FE]}),n})(),GE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=an({imports:[Hd,Hd]}),n})(),sH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=an({imports:[Hd,GE,Hd]}),n})();const KE={leading:!0,trailing:!1};function Bd(n,e=TE,t=KE){return i=>i.lift(new lH(n,e,t.leading,t.trailing))}class lH{constructor(e,t,i,r){this.duration=e,this.scheduler=t,this.leading=i,this.trailing=r}call(e,t){return t.subscribe(new cH(e,this.duration,this.scheduler,this.leading,this.trailing))}}class cH extends Ae{constructor(e,t,i,r,s){super(e),this.duration=t,this.scheduler=i,this.leading=r,this.trailing=s,this._hasTrailingValue=!1,this._trailingValue=null}_next(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(uH,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)}}function uH(n){const{subscriber:e}=n;e.clearThrottle()}var YE=$e(6202);const dH=["tooltipTemplate"],hH=["leftOuterSelectionBar"],fH=["rightOuterSelectionBar"],pH=["fullBar"],gH=["selectionBar"],mH=["minHandle"],vH=["maxHandle"],yH=["floorLabel"],bH=["ceilLabel"],_H=["minHandleLabel"],wH=["maxHandleLabel"],CH=["combinedLabel"],DH=["ticksElement"];function EH(n,e){if(1&n&&m(0,"ngx-slider-tooltip-wrapper",31),2&n){const t=Ne().$implicit;T("template",Ne().tooltipTemplate)("tooltip",t.valueTooltip)("placement",t.valueTooltipPlacement)("content",t.value)}}function MH(n,e){1&n&&m(0,"span",32),2&n&&T("innerHTML",Ne().$implicit.legend,ye)}const TH=function(n){return{"ngx-slider-selected":n}};function SH(n,e){if(1&n&&(d(0,"span",27),m(1,"ngx-slider-tooltip-wrapper",28),Le(2,EH,1,4,"ngx-slider-tooltip-wrapper",29),Le(3,MH,1,1,"span",30),h()),2&n){const t=e.$implicit,i=Ne();T("ngClass",Ur(7,TH,t.selected))("ngStyle",t.style),C(1),T("template",i.tooltipTemplate)("tooltip",t.tooltip)("placement",t.tooltipPlacement),C(1),T("ngIf",null!=t.value),C(1),T("ngIf",null!=t.legend)}}function IH(n,e){}function AH(n,e){1&n&&Le(0,IH,0,0,"ng-template")}const xH=function(n,e,t){return{tooltip:n,placement:e,content:t}};function kH(n,e){if(1&n&&(Pa(0),Le(1,AH,1,0,null,1),Oa()),2&n){const t=Ne();C(1),T("ngTemplateOutlet",t.template)("ngTemplateOutletContext",sp(2,xH,t.tooltip,t.placement,t.content))}}function PH(n,e){if(1&n&&(Pa(0),d(1,"div",2),l(2),h(),Oa()),2&n){const t=Ne();C(1),On("title",t.tooltip)("data-tooltip-placement",t.placement),C(1),Qe(" ",t.content," ")}}const fn={Low:0,High:1,Floor:2,Ceil:3,TickValue:4};fn[fn.Low]="Low",fn[fn.High]="High",fn[fn.Floor]="Floor",fn[fn.Ceil]="Ceil",fn[fn.TickValue]="TickValue";class jd{constructor(){this.floor=0,this.ceil=null,this.step=1,this.minRange=null,this.maxRange=null,this.pushRange=!1,this.minLimit=null,this.maxLimit=null,this.translate=null,this.combineLabels=null,this.getLegend=null,this.stepsArray=null,this.bindIndexForStepsArray=!1,this.draggableRange=!1,this.draggableRangeOnly=!1,this.showSelectionBar=!1,this.showSelectionBarEnd=!1,this.showSelectionBarFromValue=null,this.showOuterSelectionBars=!1,this.hidePointerLabels=!1,this.hideLimitLabels=!1,this.autoHideLimitLabels=!0,this.readOnly=!1,this.disabled=!1,this.mouseEventsInterval=50,this.touchEventsInterval=50,this.inputEventsInterval=100,this.outputEventsInterval=100,this.showTicks=!1,this.showTicksValues=!1,this.tickStep=null,this.tickValueStep=null,this.ticksArray=null,this.ticksTooltip=null,this.ticksValuesTooltip=null,this.vertical=!1,this.getSelectionBarColor=null,this.getTickColor=null,this.getPointerColor=null,this.keyboardSupport=!0,this.scale=1,this.enforceStep=!0,this.enforceRange=!0,this.enforceStepsArray=!0,this.noSwitching=!1,this.onlyBindHandles=!1,this.rightToLeft=!1,this.reversedControls=!1,this.boundPointerLabels=!0,this.logScale=!1,this.customValueToPosition=null,this.customPositionToValue=null,this.precisionLimit=12,this.selectionBarGradient=null,this.ariaLabel=null,this.ariaLabelledBy=null,this.ariaLabelHigh=null,this.ariaLabelledByHigh=null,this.handleDimension=null,this.barDimension=null,this.animate=!0,this.animateOnMove=!1}}const se={Min:0,Max:1};se[se.Min]="Min",se[se.Max]="Max";class OH{}class F{static isNullOrUndefined(e){return null==e}static areArraysEqual(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}static linearValueToPosition(e,t,i){return(e-t)/(i-t)}static logValueToPosition(e,t,i){return((e=Math.log(e))-(t=Math.log(t)))/((i=Math.log(i))-t)}static linearPositionToValue(e,t,i){return e*(i-t)+t}static logPositionToValue(e,t,i){return t=Math.log(t),i=Math.log(i),Math.exp(e*(i-t)+t)}static findStepIndex(e,t){const i=t.map(s=>Math.abs(e-s.value));let r=0;for(let s=0;s<t.length;s++)i[s]!==i[r]&&i[s]<i[r]&&(r=s);return r}}class ts{static isTouchEvent(e){return void 0!==window.TouchEvent?e instanceof TouchEvent:void 0!==e.touches}static isResizeObserverAvailable(){return void 0!==window.ResizeObserver}}class Yt{static roundToPrecisionLimit(e,t){return+e.toPrecision(t)}static isModuloWithinPrecisionLimit(e,t,i){const r=Math.pow(10,-i);return Math.abs(e%t)<=r||Math.abs(Math.abs(e%t)-t)<=r}static clampToRange(e,t,i){return Math.min(Math.max(e,t),i)}}class ZE{constructor(){this.eventName=null,this.events=null,this.eventsSubscription=null,this.teardownCallback=null}}class JE{constructor(e){this.renderer=e}attachPassiveEventListener(e,t,i,r){if(!0!==YE.Z.hasSupport)return this.attachEventListener(e,t,i,r);const s=new ZE;s.eventName=t,s.events=new K;const o=a=>{s.events.next(a)};return e.addEventListener(t,o,{passive:!0,capture:!1}),s.teardownCallback=()=>{e.removeEventListener(t,o,{passive:!0,capture:!1})},s.eventsSubscription=s.events.pipe(F.isNullOrUndefined(r)?Tt(()=>{}):Bd(r,void 0,{leading:!0,trailing:!0})).subscribe(a=>{i(a)}),s}detachEventListener(e){F.isNullOrUndefined(e.eventsSubscription)||(e.eventsSubscription.unsubscribe(),e.eventsSubscription=null),F.isNullOrUndefined(e.events)||(e.events.complete(),e.events=null),F.isNullOrUndefined(e.teardownCallback)||(e.teardownCallback(),e.teardownCallback=null)}attachEventListener(e,t,i,r){const s=new ZE;return s.eventName=t,s.events=new K,s.teardownCallback=this.renderer.listen(e,t,a=>{s.events.next(a)}),s.eventsSubscription=s.events.pipe(F.isNullOrUndefined(r)?Tt(()=>{}):Bd(r,void 0,{leading:!0,trailing:!0})).subscribe(a=>{i(a)}),s}}let ns=(()=>{class n{constructor(t,i,r){this.elemRef=t,this.renderer=i,this.changeDetectionRef=r,this._position=0,this._dimension=0,this._alwaysHide=!1,this._vertical=!1,this._scale=1,this.opacity=1,this.visibility="visible",this.left="",this.bottom="",this.height="",this.width="",this.eventListeners=[],this.eventListenerHelper=new JE(this.renderer)}get position(){return this._position}get dimension(){return this._dimension}get alwaysHide(){return this._alwaysHide}get vertical(){return this._vertical}get scale(){return this._scale}setAlwaysHide(t){this._alwaysHide=t,this.visibility=t?"hidden":"visible"}hide(){this.opacity=0}show(){this.alwaysHide||(this.opacity=1)}isVisible(){return!this.alwaysHide&&0!==this.opacity}setVertical(t){this._vertical=t,this._vertical?(this.left="",this.width=""):(this.bottom="",this.height="")}setScale(t){this._scale=t}setPosition(t){this._position!==t&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._position=t,this._vertical?this.bottom=Math.round(t)+"px":this.left=Math.round(t)+"px"}calculateDimension(){const t=this.getBoundingClientRect();this._dimension=this.vertical?(t.bottom-t.top)*this.scale:(t.right-t.left)*this.scale}setDimension(t){this._dimension!==t&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._dimension=t,this._vertical?this.height=Math.round(t)+"px":this.width=Math.round(t)+"px"}getBoundingClientRect(){return this.elemRef.nativeElement.getBoundingClientRect()}on(t,i,r){const s=this.eventListenerHelper.attachEventListener(this.elemRef.nativeElement,t,i,r);this.eventListeners.push(s)}onPassive(t,i,r){const s=this.eventListenerHelper.attachPassiveEventListener(this.elemRef.nativeElement,t,i,r);this.eventListeners.push(s)}off(t){let i,r;F.isNullOrUndefined(t)?(i=[],r=this.eventListeners):(i=this.eventListeners.filter(s=>s.eventName!==t),r=this.eventListeners.filter(s=>s.eventName===t));for(const s of r)this.eventListenerHelper.detachEventListener(s);this.eventListeners=i}isRefDestroyed(){return F.isNullOrUndefined(this.changeDetectionRef)||this.changeDetectionRef.destroyed}}return n.\u0275fac=function(t){return new(t||n)(x(jt),x(Xn),x(Hi))},n.\u0275dir=ve({type:n,selectors:[["","ngxSliderElement",""]],hostVars:12,hostBindings:function(t,i){2&t&&lu("opacity",i.opacity)("visibility",i.visibility)("left",i.left)("bottom",i.bottom)("height",i.height)("width",i.width)}}),n})(),Dm=(()=>{class n extends ns{constructor(t,i,r){super(t,i,r),this.active=!1,this.role="",this.tabindex="",this.ariaOrientation="",this.ariaLabel="",this.ariaLabelledBy="",this.ariaValueNow="",this.ariaValueText="",this.ariaValueMin="",this.ariaValueMax=""}focus(){this.elemRef.nativeElement.focus()}}return n.\u0275fac=function(t){return new(t||n)(x(jt),x(Xn),x(Hi))},n.\u0275dir=ve({type:n,selectors:[["","ngxSliderHandle",""]],hostVars:11,hostBindings:function(t,i){2&t&&(On("role",i.role)("tabindex",i.tabindex)("aria-orientation",i.ariaOrientation)("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledBy)("aria-valuenow",i.ariaValueNow)("aria-valuetext",i.ariaValueText)("aria-valuemin",i.ariaValueMin)("aria-valuemax",i.ariaValueMax),hi("ngx-slider-active",i.active))},features:[He]}),n})(),Zo=(()=>{class n extends ns{constructor(t,i,r){super(t,i,r),this._value=null}get value(){return this._value}setValue(t){let i=!1;!this.alwaysHide&&(F.isNullOrUndefined(this.value)||this.value.length!==t.length||this.value.length>0&&0===this.dimension)&&(i=!0),this._value=t,this.elemRef.nativeElement.innerHTML=t,i&&this.calculateDimension()}}return n.\u0275fac=function(t){return new(t||n)(x(jt),x(Xn),x(Hi))},n.\u0275dir=ve({type:n,selectors:[["","ngxSliderLabel",""]],features:[He]}),n})();class RH{constructor(){this.selected=!1,this.style={},this.tooltip=null,this.tooltipPlacement=null,this.value=null,this.valueTooltip=null,this.valueTooltipPlacement=null,this.legend=null}}class QE{constructor(){this.active=!1,this.value=0,this.difference=0,this.position=0,this.lowLimit=0,this.highLimit=0}}class Gd{static compare(e,t){return!(F.isNullOrUndefined(e)&&F.isNullOrUndefined(t)||F.isNullOrUndefined(e)!==F.isNullOrUndefined(t))&&e.value===t.value&&e.highValue===t.highValue}}class XE extends Gd{static compare(e,t){return!(F.isNullOrUndefined(e)&&F.isNullOrUndefined(t)||F.isNullOrUndefined(e)!==F.isNullOrUndefined(t))&&e.value===t.value&&e.highValue===t.highValue&&e.forceChange===t.forceChange}}const LH={provide:Ti,useExisting:ht(()=>eM),multi:!0};let eM=(()=>{class n{constructor(t,i,r,s){this.renderer=t,this.elementRef=i,this.changeDetectionRef=r,this.zone=s,this.value=null,this.valueChange=new et,this.highValue=null,this.highValueChange=new et,this.options=new jd,this.userChangeStart=new et,this.userChange=new et,this.userChangeEnd=new et,this.initHasRun=!1,this.inputModelChangeSubject=new K,this.inputModelChangeSubscription=null,this.outputModelChangeSubject=new K,this.outputModelChangeSubscription=null,this.viewLowValue=null,this.viewHighValue=null,this.viewOptions=new jd,this.handleHalfDimension=0,this.maxHandlePosition=0,this.currentTrackingPointer=null,this.currentFocusPointer=null,this.firstKeyDown=!1,this.touchId=null,this.dragging=new QE,this.sliderElementVerticalClass=!1,this.sliderElementAnimateClass=!1,this.sliderElementWithLegendClass=!1,this.sliderElementDisabledAttr=null,this.barStyle={},this.minPointerStyle={},this.maxPointerStyle={},this.fullBarTransparentClass=!1,this.selectionBarDraggableClass=!1,this.ticksUnderValuesClass=!1,this.intermediateTicks=!1,this.ticks=[],this.eventListenerHelper=null,this.onMoveEventListener=null,this.onEndEventListener=null,this.moving=!1,this.resizeObserver=null,this.onTouchedCallback=null,this.onChangeCallback=null,this.eventListenerHelper=new JE(this.renderer)}set manualRefresh(t){this.unsubscribeManualRefresh(),this.manualRefreshSubscription=t.subscribe(()=>{setTimeout(()=>this.calculateViewDimensionsAndDetectChanges())})}set triggerFocus(t){this.unsubscribeTriggerFocus(),this.triggerFocusSubscription=t.subscribe(i=>{this.focusPointer(i)})}get range(){return!F.isNullOrUndefined(this.value)&&!F.isNullOrUndefined(this.highValue)}get showTicks(){return this.viewOptions.showTicks}ngOnInit(){this.viewOptions=new jd,Object.assign(this.viewOptions,this.options),this.updateDisabledState(),this.updateVerticalState()}ngAfterViewInit(){this.applyOptions(),this.subscribeInputModelChangeSubject(this.viewOptions.inputEventsInterval),this.subscribeOutputModelChangeSubject(this.viewOptions.outputEventsInterval),this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.viewHighValue=this.range?this.modelValueToViewValue(this.highValue):null,this.updateVerticalState(),this.manageElementsStyle(),this.updateDisabledState(),this.calculateViewDimensions(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),this.initHandles(),this.manageEventsBindings(),this.subscribeResizeObserver(),this.initHasRun=!0,this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}ngOnChanges(t){F.isNullOrUndefined(t.options)||this.onChangeOptions(),(!F.isNullOrUndefined(t.value)||!F.isNullOrUndefined(t.highValue))&&this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}ngOnDestroy(){this.unbindEvents(),this.unsubscribeResizeObserver(),this.unsubscribeInputModelChangeSubject(),this.unsubscribeOutputModelChangeSubject(),this.unsubscribeManualRefresh(),this.unsubscribeTriggerFocus()}writeValue(t){t instanceof Array?(this.value=t[0],this.highValue=t[1]):this.value=t,this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}registerOnChange(t){this.onChangeCallback=t}registerOnTouched(t){this.onTouchedCallback=t}setDisabledState(t){this.viewOptions.disabled=t,this.updateDisabledState()}onResize(t){this.calculateViewDimensionsAndDetectChanges()}subscribeInputModelChangeSubject(t){this.inputModelChangeSubscription=this.inputModelChangeSubject.pipe(_m(XE.compare),$n(i=>!i.forceChange&&!i.internalChange),F.isNullOrUndefined(t)?Tt(()=>{}):Bd(t,void 0,{leading:!0,trailing:!0})).subscribe(i=>this.applyInputModelChange(i))}subscribeOutputModelChangeSubject(t){this.outputModelChangeSubscription=this.outputModelChangeSubject.pipe(_m(XE.compare),F.isNullOrUndefined(t)?Tt(()=>{}):Bd(t,void 0,{leading:!0,trailing:!0})).subscribe(i=>this.publishOutputModelChange(i))}subscribeResizeObserver(){ts.isResizeObserverAvailable()&&(this.resizeObserver=new ResizeObserver(()=>this.calculateViewDimensionsAndDetectChanges()),this.resizeObserver.observe(this.elementRef.nativeElement))}unsubscribeResizeObserver(){ts.isResizeObserverAvailable()&&null!==this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}unsubscribeOnMove(){F.isNullOrUndefined(this.onMoveEventListener)||(this.eventListenerHelper.detachEventListener(this.onMoveEventListener),this.onMoveEventListener=null)}unsubscribeOnEnd(){F.isNullOrUndefined(this.onEndEventListener)||(this.eventListenerHelper.detachEventListener(this.onEndEventListener),this.onEndEventListener=null)}unsubscribeInputModelChangeSubject(){F.isNullOrUndefined(this.inputModelChangeSubscription)||(this.inputModelChangeSubscription.unsubscribe(),this.inputModelChangeSubscription=null)}unsubscribeOutputModelChangeSubject(){F.isNullOrUndefined(this.outputModelChangeSubscription)||(this.outputModelChangeSubscription.unsubscribe(),this.outputModelChangeSubscription=null)}unsubscribeManualRefresh(){F.isNullOrUndefined(this.manualRefreshSubscription)||(this.manualRefreshSubscription.unsubscribe(),this.manualRefreshSubscription=null)}unsubscribeTriggerFocus(){F.isNullOrUndefined(this.triggerFocusSubscription)||(this.triggerFocusSubscription.unsubscribe(),this.triggerFocusSubscription=null)}getPointerElement(t){return t===se.Min?this.minHandleElement:t===se.Max?this.maxHandleElement:null}getCurrentTrackingValue(){return this.currentTrackingPointer===se.Min?this.viewLowValue:this.currentTrackingPointer===se.Max?this.viewHighValue:null}modelValueToViewValue(t){return F.isNullOrUndefined(t)?NaN:F.isNullOrUndefined(this.viewOptions.stepsArray)||this.viewOptions.bindIndexForStepsArray?+t:F.findStepIndex(+t,this.viewOptions.stepsArray)}viewValueToModelValue(t){return F.isNullOrUndefined(this.viewOptions.stepsArray)||this.viewOptions.bindIndexForStepsArray?t:this.getStepValue(t)}getStepValue(t){const i=this.viewOptions.stepsArray[t];return F.isNullOrUndefined(i)?NaN:i.value}applyViewChange(){this.value=this.viewValueToModelValue(this.viewLowValue),this.range&&(this.highValue=this.viewValueToModelValue(this.viewHighValue)),this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,userEventInitiated:!0,forceChange:!1}),this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!0})}applyInputModelChange(t){const i=this.normaliseModelValues(t),r=!Gd.compare(t,i);r&&(this.value=i.value,this.highValue=i.highValue),this.viewLowValue=this.modelValueToViewValue(i.value),this.viewHighValue=this.range?this.modelValueToViewValue(i.highValue):null,this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateAriaAttributes(),this.range&&this.updateCombinedLabel(),this.outputModelChangeSubject.next({value:i.value,highValue:i.highValue,forceChange:r,userEventInitiated:!1})}publishOutputModelChange(t){const i=()=>{this.valueChange.emit(t.value),this.range&&this.highValueChange.emit(t.highValue),F.isNullOrUndefined(this.onChangeCallback)||this.onChangeCallback(this.range?[t.value,t.highValue]:t.value),F.isNullOrUndefined(this.onTouchedCallback)||this.onTouchedCallback(this.range?[t.value,t.highValue]:t.value)};t.userEventInitiated?(i(),this.userChange.emit(this.getChangeContext())):setTimeout(()=>{i()})}normaliseModelValues(t){const i=new Gd;if(i.value=t.value,i.highValue=t.highValue,!F.isNullOrUndefined(this.viewOptions.stepsArray)){if(this.viewOptions.enforceStepsArray){const r=F.findStepIndex(i.value,this.viewOptions.stepsArray);if(i.value=this.viewOptions.stepsArray[r].value,this.range){const s=F.findStepIndex(i.highValue,this.viewOptions.stepsArray);i.highValue=this.viewOptions.stepsArray[s].value}}return i}if(this.viewOptions.enforceStep&&(i.value=this.roundStep(i.value),this.range&&(i.highValue=this.roundStep(i.highValue))),this.viewOptions.enforceRange&&(i.value=Yt.clampToRange(i.value,this.viewOptions.floor,this.viewOptions.ceil),this.range&&(i.highValue=Yt.clampToRange(i.highValue,this.viewOptions.floor,this.viewOptions.ceil)),this.range&&t.value>t.highValue))if(this.viewOptions.noSwitching)i.value=i.highValue;else{const r=t.value;i.value=t.highValue,i.highValue=r}return i}renormaliseModelValues(){const t={value:this.value,highValue:this.highValue},i=this.normaliseModelValues(t);Gd.compare(i,t)||(this.value=i.value,this.highValue=i.highValue,this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!0,userEventInitiated:!1}))}onChangeOptions(){if(!this.initHasRun)return;const t=this.viewOptions.inputEventsInterval,i=this.viewOptions.outputEventsInterval,r=this.getOptionsInfluencingEventBindings(this.viewOptions);this.applyOptions();const s=this.getOptionsInfluencingEventBindings(this.viewOptions),o=!F.areArraysEqual(r,s);t!==this.viewOptions.inputEventsInterval&&(this.unsubscribeInputModelChangeSubject(),this.subscribeInputModelChangeSubject(this.viewOptions.inputEventsInterval)),i!==this.viewOptions.outputEventsInterval&&(this.unsubscribeInputModelChangeSubject(),this.subscribeInputModelChangeSubject(this.viewOptions.outputEventsInterval)),this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.viewHighValue=this.range?this.modelValueToViewValue(this.highValue):null,this.resetSlider(o)}applyOptions(){if(this.viewOptions=new jd,Object.assign(this.viewOptions,this.options),this.viewOptions.draggableRange=this.range&&this.viewOptions.draggableRange,this.viewOptions.draggableRangeOnly=this.range&&this.viewOptions.draggableRangeOnly,this.viewOptions.draggableRangeOnly&&(this.viewOptions.draggableRange=!0),this.viewOptions.showTicks=this.viewOptions.showTicks||this.viewOptions.showTicksValues||!F.isNullOrUndefined(this.viewOptions.ticksArray),this.viewOptions.showTicks&&(!F.isNullOrUndefined(this.viewOptions.tickStep)||!F.isNullOrUndefined(this.viewOptions.ticksArray))&&(this.intermediateTicks=!0),this.viewOptions.showSelectionBar=this.viewOptions.showSelectionBar||this.viewOptions.showSelectionBarEnd||!F.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue),F.isNullOrUndefined(this.viewOptions.stepsArray)?this.applyFloorCeilOptions():this.applyStepsArrayOptions(),F.isNullOrUndefined(this.viewOptions.combineLabels)&&(this.viewOptions.combineLabels=(t,i)=>t+" - "+i),this.viewOptions.logScale&&0===this.viewOptions.floor)throw Error("Can't use floor=0 with logarithmic scale")}applyStepsArrayOptions(){this.viewOptions.floor=0,this.viewOptions.ceil=this.viewOptions.stepsArray.length-1,this.viewOptions.step=1,F.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=t=>String(this.viewOptions.bindIndexForStepsArray?this.getStepValue(t):t))}applyFloorCeilOptions(){if(F.isNullOrUndefined(this.viewOptions.step)?this.viewOptions.step=1:(this.viewOptions.step=+this.viewOptions.step,this.viewOptions.step<=0&&(this.viewOptions.step=1)),F.isNullOrUndefined(this.viewOptions.ceil)||F.isNullOrUndefined(this.viewOptions.floor))throw Error("floor and ceil options must be supplied");this.viewOptions.ceil=+this.viewOptions.ceil,this.viewOptions.floor=+this.viewOptions.floor,F.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=t=>String(t))}resetSlider(t=!0){this.manageElementsStyle(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),t&&(this.unbindEvents(),this.manageEventsBindings()),this.updateDisabledState(),this.calculateViewDimensions(),this.refocusPointerIfNeeded()}focusPointer(t){t!==se.Min&&t!==se.Max&&(t=se.Min),t===se.Min?this.minHandleElement.focus():this.range&&t===se.Max&&this.maxHandleElement.focus()}refocusPointerIfNeeded(){F.isNullOrUndefined(this.currentFocusPointer)||(this.onPointerFocus(this.currentFocusPointer),this.getPointerElement(this.currentFocusPointer).focus())}manageElementsStyle(){this.updateScale(),this.floorLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels),this.ceilLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels);const t=this.viewOptions.showTicksValues&&!this.intermediateTicks;this.minHandleLabelElement.setAlwaysHide(t||this.viewOptions.hidePointerLabels),this.maxHandleLabelElement.setAlwaysHide(t||!this.range||this.viewOptions.hidePointerLabels),this.combinedLabelElement.setAlwaysHide(t||!this.range||this.viewOptions.hidePointerLabels),this.selectionBarElement.setAlwaysHide(!this.range&&!this.viewOptions.showSelectionBar),this.leftOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.rightOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.fullBarTransparentClass=this.range&&this.viewOptions.showOuterSelectionBars,this.selectionBarDraggableClass=this.viewOptions.draggableRange&&!this.viewOptions.onlyBindHandles,this.ticksUnderValuesClass=this.intermediateTicks&&this.options.showTicksValues,this.sliderElementVerticalClass!==this.viewOptions.vertical&&(this.updateVerticalState(),setTimeout(()=>{this.resetSlider()})),this.sliderElementAnimateClass!==this.viewOptions.animate&&setTimeout(()=>{this.sliderElementAnimateClass=this.viewOptions.animate})}manageEventsBindings(){this.viewOptions.disabled||this.viewOptions.readOnly?this.unbindEvents():this.bindEvents()}updateDisabledState(){this.sliderElementDisabledAttr=this.viewOptions.disabled?"disabled":null}updateVerticalState(){this.sliderElementVerticalClass=this.viewOptions.vertical;for(const t of this.getAllSliderElements())F.isNullOrUndefined(t)||t.setVertical(this.viewOptions.vertical)}updateScale(){for(const t of this.getAllSliderElements())t.setScale(this.viewOptions.scale)}getAllSliderElements(){return[this.leftOuterSelectionBarElement,this.rightOuterSelectionBarElement,this.fullBarElement,this.selectionBarElement,this.minHandleElement,this.maxHandleElement,this.floorLabelElement,this.ceilLabelElement,this.minHandleLabelElement,this.maxHandleLabelElement,this.combinedLabelElement,this.ticksElement]}initHandles(){this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.range&&this.updateCombinedLabel(),this.updateTicksScale()}addAccessibility(){this.updateAriaAttributes(),this.minHandleElement.role="slider",this.minHandleElement.tabindex=!this.viewOptions.keyboardSupport||this.viewOptions.readOnly||this.viewOptions.disabled?"":"0",this.minHandleElement.ariaOrientation=this.viewOptions.vertical?"vertical":"horizontal",F.isNullOrUndefined(this.viewOptions.ariaLabel)?F.isNullOrUndefined(this.viewOptions.ariaLabelledBy)||(this.minHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledBy):this.minHandleElement.ariaLabel=this.viewOptions.ariaLabel,this.range&&(this.maxHandleElement.role="slider",this.maxHandleElement.tabindex=!this.viewOptions.keyboardSupport||this.viewOptions.readOnly||this.viewOptions.disabled?"":"0",this.maxHandleElement.ariaOrientation=this.viewOptions.vertical?"vertical":"horizontal",F.isNullOrUndefined(this.viewOptions.ariaLabelHigh)?F.isNullOrUndefined(this.viewOptions.ariaLabelledByHigh)||(this.maxHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledByHigh):this.maxHandleElement.ariaLabel=this.viewOptions.ariaLabelHigh)}updateAriaAttributes(){this.minHandleElement.ariaValueNow=(+this.value).toString(),this.minHandleElement.ariaValueText=this.viewOptions.translate(+this.value,fn.Low),this.minHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.minHandleElement.ariaValueMax=this.viewOptions.ceil.toString(),this.range&&(this.maxHandleElement.ariaValueNow=(+this.highValue).toString(),this.maxHandleElement.ariaValueText=this.viewOptions.translate(+this.highValue,fn.High),this.maxHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.maxHandleElement.ariaValueMax=this.viewOptions.ceil.toString())}calculateViewDimensions(){F.isNullOrUndefined(this.viewOptions.handleDimension)?this.minHandleElement.calculateDimension():this.minHandleElement.setDimension(this.viewOptions.handleDimension);const t=this.minHandleElement.dimension;this.handleHalfDimension=t/2,F.isNullOrUndefined(this.viewOptions.barDimension)?this.fullBarElement.calculateDimension():this.fullBarElement.setDimension(this.viewOptions.barDimension),this.maxHandlePosition=this.fullBarElement.dimension-t,this.initHasRun&&(this.updateFloorLabel(),this.updateCeilLabel(),this.initHandles())}calculateViewDimensionsAndDetectChanges(){this.calculateViewDimensions(),this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}isRefDestroyed(){return this.changeDetectionRef.destroyed}updateTicksScale(){if(!this.viewOptions.showTicks)return void setTimeout(()=>{this.sliderElementWithLegendClass=!1});const t=F.isNullOrUndefined(this.viewOptions.ticksArray)?this.getTicksArray():this.viewOptions.ticksArray,i=this.viewOptions.vertical?"translateY":"translateX";this.viewOptions.rightToLeft&&t.reverse();const r=F.isNullOrUndefined(this.viewOptions.tickValueStep)?F.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep:this.viewOptions.tickValueStep;let s=!1;const o=t.map(a=>{let c=this.valueToPosition(a);this.viewOptions.vertical&&(c=this.maxHandlePosition-c);const u=i+"("+Math.round(c)+"px)",f=new RH;f.selected=this.isTickSelected(a),f.style={"-webkit-transform":u,"-moz-transform":u,"-o-transform":u,"-ms-transform":u,transform:u},f.selected&&!F.isNullOrUndefined(this.viewOptions.getSelectionBarColor)&&(f.style["background-color"]=this.getSelectionBarColor()),!f.selected&&!F.isNullOrUndefined(this.viewOptions.getTickColor)&&(f.style["background-color"]=this.getTickColor(a)),F.isNullOrUndefined(this.viewOptions.ticksTooltip)||(f.tooltip=this.viewOptions.ticksTooltip(a),f.tooltipPlacement=this.viewOptions.vertical?"right":"top"),this.viewOptions.showTicksValues&&!F.isNullOrUndefined(r)&&Yt.isModuloWithinPrecisionLimit(a,r,this.viewOptions.precisionLimit)&&(f.value=this.getDisplayValue(a,fn.TickValue),F.isNullOrUndefined(this.viewOptions.ticksValuesTooltip)||(f.valueTooltip=this.viewOptions.ticksValuesTooltip(a),f.valueTooltipPlacement=this.viewOptions.vertical?"right":"top"));let p=null;if(F.isNullOrUndefined(this.viewOptions.stepsArray))F.isNullOrUndefined(this.viewOptions.getLegend)||(p=this.viewOptions.getLegend(a));else{const g=this.viewOptions.stepsArray[a];F.isNullOrUndefined(g)||(p=g.legend)}return F.isNullOrUndefined(p)||(f.legend=p,s=!0),f});if(setTimeout(()=>{this.sliderElementWithLegendClass=s}),F.isNullOrUndefined(this.ticks)||this.ticks.length!==o.length)this.ticks=o;else for(let a=0;a<o.length;++a)Object.assign(this.ticks[a],o[a]);this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}getTicksArray(){const t=F.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep,i=[],r=1+Math.floor(Yt.roundToPrecisionLimit(Math.abs(this.viewOptions.ceil-this.viewOptions.floor)/t,this.viewOptions.precisionLimit));for(let s=0;s<r;++s)i.push(Yt.roundToPrecisionLimit(this.viewOptions.floor+t*s,this.viewOptions.precisionLimit));return i}isTickSelected(t){if(!this.range)if(F.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)){if(this.viewOptions.showSelectionBarEnd){if(t>=this.viewLowValue)return!0}else if(this.viewOptions.showSelectionBar&&t<=this.viewLowValue)return!0}else{const i=this.viewOptions.showSelectionBarFromValue;if(this.viewLowValue>i&&t>=i&&t<=this.viewLowValue)return!0;if(this.viewLowValue<i&&t<=i&&t>=this.viewLowValue)return!0}return!!(this.range&&t>=this.viewLowValue&&t<=this.viewHighValue)}updateFloorLabel(){this.floorLabelElement.alwaysHide||(this.floorLabelElement.setValue(this.getDisplayValue(this.viewOptions.floor,fn.Floor)),this.floorLabelElement.calculateDimension(),this.floorLabelElement.setPosition(this.viewOptions.rightToLeft?this.fullBarElement.dimension-this.floorLabelElement.dimension:0))}updateCeilLabel(){this.ceilLabelElement.alwaysHide||(this.ceilLabelElement.setValue(this.getDisplayValue(this.viewOptions.ceil,fn.Ceil)),this.ceilLabelElement.calculateDimension(),this.ceilLabelElement.setPosition(this.viewOptions.rightToLeft?0:this.fullBarElement.dimension-this.ceilLabelElement.dimension))}updateHandles(t,i){t===se.Min?this.updateLowHandle(i):t===se.Max&&this.updateHighHandle(i),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCombinedLabel()}getHandleLabelPos(t,i){const r=t===se.Min?this.minHandleLabelElement.dimension:this.maxHandleLabelElement.dimension,s=i-r/2+this.handleHalfDimension,o=this.fullBarElement.dimension-r;return this.viewOptions.boundPointerLabels?this.viewOptions.rightToLeft&&t===se.Min||!this.viewOptions.rightToLeft&&t===se.Max?Math.min(s,o):Math.min(Math.max(s,0),o):s}updateLowHandle(t){this.minHandleElement.setPosition(t),this.minHandleLabelElement.setValue(this.getDisplayValue(this.viewLowValue,fn.Low)),this.minHandleLabelElement.setPosition(this.getHandleLabelPos(se.Min,t)),F.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.minPointerStyle={backgroundColor:this.getPointerColor(se.Min)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateHighHandle(t){this.maxHandleElement.setPosition(t),this.maxHandleLabelElement.setValue(this.getDisplayValue(this.viewHighValue,fn.High)),this.maxHandleLabelElement.setPosition(this.getHandleLabelPos(se.Max,t)),F.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.maxPointerStyle={backgroundColor:this.getPointerColor(se.Max)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateFloorAndCeilLabelsVisibility(){if(this.viewOptions.hidePointerLabels)return;let t=!1,i=!1;const r=this.isLabelBelowFloorLabel(this.minHandleLabelElement),s=this.isLabelAboveCeilLabel(this.minHandleLabelElement),o=this.isLabelAboveCeilLabel(this.maxHandleLabelElement),a=this.isLabelBelowFloorLabel(this.combinedLabelElement),c=this.isLabelAboveCeilLabel(this.combinedLabelElement);if(r?(t=!0,this.floorLabelElement.hide()):(t=!1,this.floorLabelElement.show()),s?(i=!0,this.ceilLabelElement.hide()):(i=!1,this.ceilLabelElement.show()),this.range){const u=this.combinedLabelElement.isVisible()?c:o,f=this.combinedLabelElement.isVisible()?a:r;u?this.ceilLabelElement.hide():i||this.ceilLabelElement.show(),f?this.floorLabelElement.hide():t||this.floorLabelElement.show()}}isLabelBelowFloorLabel(t){const i=t.position,s=this.floorLabelElement.position;return this.viewOptions.rightToLeft?i+t.dimension>=s-2:i<=s+this.floorLabelElement.dimension+2}isLabelAboveCeilLabel(t){const i=t.position,s=this.ceilLabelElement.position;return this.viewOptions.rightToLeft?i<=s+this.ceilLabelElement.dimension+2:i+t.dimension>=s-2}updateSelectionBar(){let t=0,i=0;const r=this.viewOptions.rightToLeft?!this.viewOptions.showSelectionBarEnd:this.viewOptions.showSelectionBarEnd,s=this.viewOptions.rightToLeft?this.maxHandleElement.position+this.handleHalfDimension:this.minHandleElement.position+this.handleHalfDimension;if(this.range)i=Math.abs(this.maxHandleElement.position-this.minHandleElement.position),t=s;else if(F.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue))r?(i=Math.ceil(Math.abs(this.maxHandlePosition-this.minHandleElement.position)+this.handleHalfDimension),t=Math.floor(this.minHandleElement.position+this.handleHalfDimension)):(i=this.minHandleElement.position+this.handleHalfDimension,t=0);else{const o=this.viewOptions.showSelectionBarFromValue,a=this.valueToPosition(o);(this.viewOptions.rightToLeft?this.viewLowValue<=o:this.viewLowValue>o)?(i=this.minHandleElement.position-a,t=a+this.handleHalfDimension):(i=a-this.minHandleElement.position,t=this.minHandleElement.position+this.handleHalfDimension)}if(this.selectionBarElement.setDimension(i),this.selectionBarElement.setPosition(t),this.range&&this.viewOptions.showOuterSelectionBars&&(this.viewOptions.rightToLeft?(this.rightOuterSelectionBarElement.setDimension(t),this.rightOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.leftOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(t+i)),this.leftOuterSelectionBarElement.setPosition(t+i)):(this.leftOuterSelectionBarElement.setDimension(t),this.leftOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.rightOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(t+i)),this.rightOuterSelectionBarElement.setPosition(t+i))),F.isNullOrUndefined(this.viewOptions.getSelectionBarColor)){if(!F.isNullOrUndefined(this.viewOptions.selectionBarGradient)){const o=F.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)?0:this.valueToPosition(this.viewOptions.showSelectionBarFromValue),a=o-t>0&&!r||o-t<=0&&r;this.barStyle={backgroundImage:"linear-gradient(to "+(this.viewOptions.vertical?a?"bottom":"top":a?"left":"right")+", "+this.viewOptions.selectionBarGradient.from+" 0%,"+this.viewOptions.selectionBarGradient.to+" 100%)"},this.viewOptions.vertical?(this.barStyle.backgroundPosition="center "+(o+i+t+(a?-this.handleHalfDimension:0))+"px",this.barStyle.backgroundSize="100% "+(this.fullBarElement.dimension-this.handleHalfDimension)+"px"):(this.barStyle.backgroundPosition=o-t+(a?this.handleHalfDimension:0)+"px center",this.barStyle.backgroundSize=this.fullBarElement.dimension-this.handleHalfDimension+"px 100%")}}else{const o=this.getSelectionBarColor();this.barStyle={backgroundColor:o}}}getSelectionBarColor(){return this.range?this.viewOptions.getSelectionBarColor(this.value,this.highValue):this.viewOptions.getSelectionBarColor(this.value)}getPointerColor(t){return this.viewOptions.getPointerColor(t===se.Max?this.highValue:this.value,t)}getTickColor(t){return this.viewOptions.getTickColor(t)}updateCombinedLabel(){let t=null;if(t=this.viewOptions.rightToLeft?this.minHandleLabelElement.position-this.minHandleLabelElement.dimension-10<=this.maxHandleLabelElement.position:this.minHandleLabelElement.position+this.minHandleLabelElement.dimension+10>=this.maxHandleLabelElement.position,t){const i=this.getDisplayValue(this.viewLowValue,fn.Low),r=this.getDisplayValue(this.viewHighValue,fn.High),s=this.viewOptions.rightToLeft?this.viewOptions.combineLabels(r,i):this.viewOptions.combineLabels(i,r);this.combinedLabelElement.setValue(s);const o=this.viewOptions.boundPointerLabels?Math.min(Math.max(this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2,0),this.fullBarElement.dimension-this.combinedLabelElement.dimension):this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2;this.combinedLabelElement.setPosition(o),this.minHandleLabelElement.hide(),this.maxHandleLabelElement.hide(),this.combinedLabelElement.show()}else this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.maxHandleLabelElement.show(),this.minHandleLabelElement.show(),this.combinedLabelElement.hide();this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}getDisplayValue(t,i){return!F.isNullOrUndefined(this.viewOptions.stepsArray)&&!this.viewOptions.bindIndexForStepsArray&&(t=this.getStepValue(t)),this.viewOptions.translate(t,i)}roundStep(t,i){const r=F.isNullOrUndefined(i)?this.viewOptions.step:i;let s=Yt.roundToPrecisionLimit((t-this.viewOptions.floor)/r,this.viewOptions.precisionLimit);return s=Math.round(s)*r,Yt.roundToPrecisionLimit(this.viewOptions.floor+s,this.viewOptions.precisionLimit)}valueToPosition(t){let i=F.linearValueToPosition;F.isNullOrUndefined(this.viewOptions.customValueToPosition)?this.viewOptions.logScale&&(i=F.logValueToPosition):i=this.viewOptions.customValueToPosition;let r=i(t=Yt.clampToRange(t,this.viewOptions.floor,this.viewOptions.ceil),this.viewOptions.floor,this.viewOptions.ceil);return F.isNullOrUndefined(r)&&(r=0),this.viewOptions.rightToLeft&&(r=1-r),r*this.maxHandlePosition}positionToValue(t){let i=t/this.maxHandlePosition;this.viewOptions.rightToLeft&&(i=1-i);let r=F.linearPositionToValue;F.isNullOrUndefined(this.viewOptions.customPositionToValue)?this.viewOptions.logScale&&(r=F.logPositionToValue):r=this.viewOptions.customPositionToValue;const s=r(i,this.viewOptions.floor,this.viewOptions.ceil);return F.isNullOrUndefined(s)?0:s}getEventXY(t,i){if(t instanceof MouseEvent)return this.viewOptions.vertical?t.clientY:t.clientX;let r=0;const s=t.touches;if(!F.isNullOrUndefined(i))for(let o=0;o<s.length;o++)if(s[o].identifier===i){r=o;break}return this.viewOptions.vertical?s[r].clientY:s[r].clientX}getEventPosition(t,i){const r=this.elementRef.nativeElement.getBoundingClientRect(),s=this.viewOptions.vertical?r.bottom:r.left;let o=0;return o=this.viewOptions.vertical?-this.getEventXY(t,i)+s:this.getEventXY(t,i)-s,o*this.viewOptions.scale-this.handleHalfDimension}getNearestHandle(t){if(!this.range)return se.Min;const i=this.getEventPosition(t),r=Math.abs(i-this.minHandleElement.position),s=Math.abs(i-this.maxHandleElement.position);return r<s?se.Min:r>s?se.Max:this.viewOptions.rightToLeft?i>this.minHandleElement.position?se.Min:se.Max:i<this.minHandleElement.position?se.Min:se.Max}bindEvents(){const t=this.viewOptions.draggableRange;this.viewOptions.onlyBindHandles||this.selectionBarElement.on("mousedown",i=>this.onBarStart(null,t,i,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.on("mousedown",i=>this.onBarStart(se.Min,t,i,!0,!0)),this.maxHandleElement.on("mousedown",i=>this.onBarStart(se.Max,t,i,!0,!0))):(this.minHandleElement.on("mousedown",i=>this.onStart(se.Min,i,!0,!0)),this.range&&this.maxHandleElement.on("mousedown",i=>this.onStart(se.Max,i,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.on("mousedown",i=>this.onStart(null,i,!0,!0,!0)),this.ticksElement.on("mousedown",i=>this.onStart(null,i,!0,!0,!0,!0)))),this.viewOptions.onlyBindHandles||this.selectionBarElement.onPassive("touchstart",i=>this.onBarStart(null,t,i,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.onPassive("touchstart",i=>this.onBarStart(se.Min,t,i,!0,!0)),this.maxHandleElement.onPassive("touchstart",i=>this.onBarStart(se.Max,t,i,!0,!0))):(this.minHandleElement.onPassive("touchstart",i=>this.onStart(se.Min,i,!0,!0)),this.range&&this.maxHandleElement.onPassive("touchstart",i=>this.onStart(se.Max,i,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.onPassive("touchstart",i=>this.onStart(null,i,!0,!0,!0)),this.ticksElement.onPassive("touchstart",i=>this.onStart(null,i,!1,!1,!0,!0)))),this.viewOptions.keyboardSupport&&(this.minHandleElement.on("focus",()=>this.onPointerFocus(se.Min)),this.range&&this.maxHandleElement.on("focus",()=>this.onPointerFocus(se.Max)))}getOptionsInfluencingEventBindings(t){return[t.disabled,t.readOnly,t.draggableRange,t.draggableRangeOnly,t.onlyBindHandles,t.keyboardSupport]}unbindEvents(){this.unsubscribeOnMove(),this.unsubscribeOnEnd();for(const t of this.getAllSliderElements())F.isNullOrUndefined(t)||t.off()}onBarStart(t,i,r,s,o,a,c){i?this.onDragStart(t,r,s,o):this.onStart(t,r,s,o,a,c)}onStart(t,i,r,s,o,a){i.stopPropagation(),(!ts.isTouchEvent(i)||!YE.Z.hasSupport)&&i.preventDefault(),this.moving=!1,this.calculateViewDimensions(),F.isNullOrUndefined(t)&&(t=this.getNearestHandle(i)),this.currentTrackingPointer=t;const c=this.getPointerElement(t);if(c.active=!0,this.viewOptions.keyboardSupport&&c.focus(),r){this.unsubscribeOnMove();const u=f=>this.dragging.active?this.onDragMove(f):this.onMove(f);this.onMoveEventListener=ts.isTouchEvent(i)?this.eventListenerHelper.attachPassiveEventListener(document,"touchmove",u,this.viewOptions.touchEventsInterval):this.eventListenerHelper.attachEventListener(document,"mousemove",u,this.viewOptions.mouseEventsInterval)}if(s){this.unsubscribeOnEnd();const u=f=>this.onEnd(f);this.onEndEventListener=ts.isTouchEvent(i)?this.eventListenerHelper.attachPassiveEventListener(document,"touchend",u):this.eventListenerHelper.attachEventListener(document,"mouseup",u)}this.userChangeStart.emit(this.getChangeContext()),ts.isTouchEvent(i)&&!F.isNullOrUndefined(i.changedTouches)&&F.isNullOrUndefined(this.touchId)&&(this.touchId=i.changedTouches[0].identifier),o&&this.onMove(i,!0),a&&this.onEnd(i)}onMove(t,i){let r=null;if(ts.isTouchEvent(t)){const u=t.changedTouches;for(let f=0;f<u.length;f++)if(u[f].identifier===this.touchId){r=u[f];break}if(F.isNullOrUndefined(r))return}this.viewOptions.animate&&!this.viewOptions.animateOnMove&&this.moving&&(this.sliderElementAnimateClass=!1),this.moving=!0;const s=F.isNullOrUndefined(r)?this.getEventPosition(t):this.getEventPosition(t,r.identifier);let o;s<=0?o=this.viewOptions.rightToLeft?this.viewOptions.ceil:this.viewOptions.floor:s>=this.maxHandlePosition?o=this.viewOptions.rightToLeft?this.viewOptions.floor:this.viewOptions.ceil:(o=this.positionToValue(s),o=i&&!F.isNullOrUndefined(this.viewOptions.tickStep)?this.roundStep(o,this.viewOptions.tickStep):this.roundStep(o)),this.positionTrackingHandle(o)}onEnd(t){ts.isTouchEvent(t)&&t.changedTouches[0].identifier!==this.touchId||(this.moving=!1,this.viewOptions.animate&&(this.sliderElementAnimateClass=!0),this.touchId=null,this.viewOptions.keyboardSupport||(this.minHandleElement.active=!1,this.maxHandleElement.active=!1,this.currentTrackingPointer=null),this.dragging.active=!1,this.unsubscribeOnMove(),this.unsubscribeOnEnd(),this.userChangeEnd.emit(this.getChangeContext()))}onPointerFocus(t){const i=this.getPointerElement(t);i.on("blur",()=>this.onPointerBlur(i)),i.on("keydown",r=>this.onKeyboardEvent(r)),i.on("keyup",()=>this.onKeyUp()),i.active=!0,this.currentTrackingPointer=t,this.currentFocusPointer=t,this.firstKeyDown=!0}onKeyUp(){this.firstKeyDown=!0,this.userChangeEnd.emit(this.getChangeContext())}onPointerBlur(t){t.off("blur"),t.off("keydown"),t.off("keyup"),t.active=!1,F.isNullOrUndefined(this.touchId)&&(this.currentTrackingPointer=null,this.currentFocusPointer=null)}getKeyActions(t){const i=this.viewOptions.ceil-this.viewOptions.floor;let r=t+this.viewOptions.step,s=t-this.viewOptions.step,o=t+i/10,a=t-i/10;this.viewOptions.reversedControls&&(r=t-this.viewOptions.step,s=t+this.viewOptions.step,o=t-i/10,a=t+i/10);const c={UP:r,DOWN:s,LEFT:s,RIGHT:r,PAGEUP:o,PAGEDOWN:a,HOME:this.viewOptions.reversedControls?this.viewOptions.ceil:this.viewOptions.floor,END:this.viewOptions.reversedControls?this.viewOptions.floor:this.viewOptions.ceil};return this.viewOptions.rightToLeft&&(c.LEFT=r,c.RIGHT=s,this.viewOptions.vertical&&(c.UP=s,c.DOWN=r)),c}onKeyboardEvent(t){const i=this.getCurrentTrackingValue(),r=F.isNullOrUndefined(t.keyCode)?t.which:t.keyCode,c=this.getKeyActions(i)[{38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",33:"PAGEUP",34:"PAGEDOWN",36:"HOME",35:"END"}[r]];if(F.isNullOrUndefined(c)||F.isNullOrUndefined(this.currentTrackingPointer))return;t.preventDefault(),this.firstKeyDown&&(this.firstKeyDown=!1,this.userChangeStart.emit(this.getChangeContext()));const u=Yt.clampToRange(c,this.viewOptions.floor,this.viewOptions.ceil),f=this.roundStep(u);if(this.viewOptions.draggableRangeOnly){const p=this.viewHighValue-this.viewLowValue;let g,v;this.currentTrackingPointer===se.Min?(g=f,v=f+p,v>this.viewOptions.ceil&&(v=this.viewOptions.ceil,g=v-p)):this.currentTrackingPointer===se.Max&&(v=f,g=f-p,g<this.viewOptions.floor&&(g=this.viewOptions.floor,v=g+p)),this.positionTrackingBar(g,v)}else this.positionTrackingHandle(f)}onDragStart(t,i,r,s){const o=this.getEventPosition(i);this.dragging=new QE,this.dragging.active=!0,this.dragging.value=this.positionToValue(o),this.dragging.difference=this.viewHighValue-this.viewLowValue,this.dragging.lowLimit=this.viewOptions.rightToLeft?this.minHandleElement.position-o:o-this.minHandleElement.position,this.dragging.highLimit=this.viewOptions.rightToLeft?o-this.maxHandleElement.position:this.maxHandleElement.position-o,this.onStart(t,i,r,s)}getMinValue(t,i,r){const s=this.viewOptions.rightToLeft;let o=null;return o=i?r?s?this.viewOptions.floor:this.viewOptions.ceil-this.dragging.difference:s?this.viewOptions.ceil-this.dragging.difference:this.viewOptions.floor:this.positionToValue(s?t+this.dragging.lowLimit:t-this.dragging.lowLimit),this.roundStep(o)}getMaxValue(t,i,r){const s=this.viewOptions.rightToLeft;let o=null;return o=i?r?s?this.viewOptions.floor+this.dragging.difference:this.viewOptions.ceil:s?this.viewOptions.ceil:this.viewOptions.floor+this.dragging.difference:s?this.positionToValue(t+this.dragging.lowLimit)+this.dragging.difference:this.positionToValue(t-this.dragging.lowLimit)+this.dragging.difference,this.roundStep(o)}onDragMove(t){const i=this.getEventPosition(t);let r,s,o,a;this.viewOptions.animate&&!this.viewOptions.animateOnMove&&this.moving&&(this.sliderElementAnimateClass=!1),this.moving=!0,this.viewOptions.rightToLeft?(r=this.dragging.lowLimit,s=this.dragging.highLimit,o=this.maxHandleElement,a=this.minHandleElement):(r=this.dragging.highLimit,s=this.dragging.lowLimit,o=this.minHandleElement,a=this.maxHandleElement);const u=i>=this.maxHandlePosition-r;let f,p;if(i<=s){if(0===o.position)return;f=this.getMinValue(i,!0,!1),p=this.getMaxValue(i,!0,!1)}else if(u){if(a.position===this.maxHandlePosition)return;p=this.getMaxValue(i,!0,!0),f=this.getMinValue(i,!0,!0)}else f=this.getMinValue(i,!1,!1),p=this.getMaxValue(i,!1,!1);this.positionTrackingBar(f,p)}positionTrackingBar(t,i){!F.isNullOrUndefined(this.viewOptions.minLimit)&&t<this.viewOptions.minLimit&&(i=Yt.roundToPrecisionLimit((t=this.viewOptions.minLimit)+this.dragging.difference,this.viewOptions.precisionLimit)),!F.isNullOrUndefined(this.viewOptions.maxLimit)&&i>this.viewOptions.maxLimit&&(t=Yt.roundToPrecisionLimit((i=this.viewOptions.maxLimit)-this.dragging.difference,this.viewOptions.precisionLimit)),this.viewLowValue=t,this.viewHighValue=i,this.applyViewChange(),this.updateHandles(se.Min,this.valueToPosition(t)),this.updateHandles(se.Max,this.valueToPosition(i))}positionTrackingHandle(t){t=this.applyMinMaxLimit(t),this.range&&(this.viewOptions.pushRange?t=this.applyPushRange(t):(this.viewOptions.noSwitching&&(this.currentTrackingPointer===se.Min&&t>this.viewHighValue?t=this.applyMinMaxRange(this.viewHighValue):this.currentTrackingPointer===se.Max&&t<this.viewLowValue&&(t=this.applyMinMaxRange(this.viewLowValue))),t=this.applyMinMaxRange(t),this.currentTrackingPointer===se.Min&&t>this.viewHighValue?(this.viewLowValue=this.viewHighValue,this.applyViewChange(),this.updateHandles(se.Min,this.maxHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=se.Max,this.minHandleElement.active=!1,this.maxHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.maxHandleElement.focus()):this.currentTrackingPointer===se.Max&&t<this.viewLowValue&&(this.viewHighValue=this.viewLowValue,this.applyViewChange(),this.updateHandles(se.Max,this.minHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=se.Min,this.maxHandleElement.active=!1,this.minHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.minHandleElement.focus()))),this.getCurrentTrackingValue()!==t&&(this.currentTrackingPointer===se.Min?(this.viewLowValue=t,this.applyViewChange()):this.currentTrackingPointer===se.Max&&(this.viewHighValue=t,this.applyViewChange()),this.updateHandles(this.currentTrackingPointer,this.valueToPosition(t)),this.updateAriaAttributes())}applyMinMaxLimit(t){return!F.isNullOrUndefined(this.viewOptions.minLimit)&&t<this.viewOptions.minLimit?this.viewOptions.minLimit:!F.isNullOrUndefined(this.viewOptions.maxLimit)&&t>this.viewOptions.maxLimit?this.viewOptions.maxLimit:t}applyMinMaxRange(t){const r=Math.abs(t-(this.currentTrackingPointer===se.Min?this.viewHighValue:this.viewLowValue));if(!F.isNullOrUndefined(this.viewOptions.minRange)&&r<this.viewOptions.minRange){if(this.currentTrackingPointer===se.Min)return Yt.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.minRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===se.Max)return Yt.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.minRange,this.viewOptions.precisionLimit)}if(!F.isNullOrUndefined(this.viewOptions.maxRange)&&r>this.viewOptions.maxRange){if(this.currentTrackingPointer===se.Min)return Yt.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.maxRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===se.Max)return Yt.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.maxRange,this.viewOptions.precisionLimit)}return t}applyPushRange(t){const i=this.currentTrackingPointer===se.Min?this.viewHighValue-t:t-this.viewLowValue,r=F.isNullOrUndefined(this.viewOptions.minRange)?this.viewOptions.step:this.viewOptions.minRange,s=this.viewOptions.maxRange;return i<r?(this.currentTrackingPointer===se.Min?(this.viewHighValue=Yt.roundToPrecisionLimit(Math.min(t+r,this.viewOptions.ceil),this.viewOptions.precisionLimit),t=Yt.roundToPrecisionLimit(this.viewHighValue-r,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(se.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===se.Max&&(this.viewLowValue=Yt.roundToPrecisionLimit(Math.max(t-r,this.viewOptions.floor),this.viewOptions.precisionLimit),t=Yt.roundToPrecisionLimit(this.viewLowValue+r,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(se.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()):!F.isNullOrUndefined(s)&&i>s&&(this.currentTrackingPointer===se.Min?(this.viewHighValue=Yt.roundToPrecisionLimit(t+s,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(se.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===se.Max&&(this.viewLowValue=Yt.roundToPrecisionLimit(t-s,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(se.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()),t}getChangeContext(){const t=new OH;return t.pointerType=this.currentTrackingPointer,t.value=+this.value,this.range&&(t.highValue=+this.highValue),t}}return n.\u0275fac=function(t){return new(t||n)(x(Xn),x(jt),x(Hi),x(yt))},n.\u0275cmp=kt({type:n,selectors:[["ngx-slider"]],contentQueries:function(t,i,r){if(1&t&&mu(r,dH,5),2&t){let s;Dt(s=Et())&&(i.tooltipTemplate=s.first)}},viewQuery:function(t,i){if(1&t&&(Ut(hH,5,ns),Ut(fH,5,ns),Ut(pH,5,ns),Ut(gH,5,ns),Ut(mH,5,Dm),Ut(vH,5,Dm),Ut(yH,5,Zo),Ut(bH,5,Zo),Ut(_H,5,Zo),Ut(wH,5,Zo),Ut(CH,5,Zo),Ut(DH,5,ns)),2&t){let r;Dt(r=Et())&&(i.leftOuterSelectionBarElement=r.first),Dt(r=Et())&&(i.rightOuterSelectionBarElement=r.first),Dt(r=Et())&&(i.fullBarElement=r.first),Dt(r=Et())&&(i.selectionBarElement=r.first),Dt(r=Et())&&(i.minHandleElement=r.first),Dt(r=Et())&&(i.maxHandleElement=r.first),Dt(r=Et())&&(i.floorLabelElement=r.first),Dt(r=Et())&&(i.ceilLabelElement=r.first),Dt(r=Et())&&(i.minHandleLabelElement=r.first),Dt(r=Et())&&(i.maxHandleLabelElement=r.first),Dt(r=Et())&&(i.combinedLabelElement=r.first),Dt(r=Et())&&(i.ticksElement=r.first)}},hostAttrs:[1,"ngx-slider"],hostVars:7,hostBindings:function(t,i){1&t&&ct("resize",function(s){return i.onResize(s)},0,gf),2&t&&(On("disabled",i.sliderElementDisabledAttr),hi("vertical",i.sliderElementVerticalClass)("animate",i.sliderElementAnimateClass)("with-legend",i.sliderElementWithLegendClass))},inputs:{value:"value",highValue:"highValue",options:"options",manualRefresh:"manualRefresh",triggerFocus:"triggerFocus"},outputs:{valueChange:"valueChange",highValueChange:"highValueChange",userChangeStart:"userChangeStart",userChange:"userChange",userChangeEnd:"userChangeEnd"},features:[vt([LH]),Jn],decls:29,vars:13,consts:[["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-left-out-selection"],["leftOuterSelectionBar",""],[1,"ngx-slider-span","ngx-slider-bar"],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-right-out-selection"],["rightOuterSelectionBar",""],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-full-bar"],["fullBar",""],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-selection-bar"],["selectionBar",""],[1,"ngx-slider-span","ngx-slider-bar","ngx-slider-selection",3,"ngStyle"],["ngxSliderHandle","",1,"ngx-slider-span","ngx-slider-pointer","ngx-slider-pointer-min",3,"ngStyle"],["minHandle",""],["ngxSliderHandle","",1,"ngx-slider-span","ngx-slider-pointer","ngx-slider-pointer-max",3,"ngStyle"],["maxHandle",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-limit","ngx-slider-floor"],["floorLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-limit","ngx-slider-ceil"],["ceilLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-model-value"],["minHandleLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-model-high"],["maxHandleLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-combined"],["combinedLabel",""],["ngxSliderElement","",1,"ngx-slider-ticks",3,"hidden"],["ticksElement",""],["class","ngx-slider-tick",3,"ngClass","ngStyle",4,"ngFor","ngForOf"],[1,"ngx-slider-tick",3,"ngClass","ngStyle"],[3,"template","tooltip","placement"],["class","ngx-slider-span ngx-slider-tick-value",3,"template","tooltip","placement","content",4,"ngIf"],["class","ngx-slider-span ngx-slider-tick-legend",3,"innerHTML",4,"ngIf"],[1,"ngx-slider-span","ngx-slider-tick-value",3,"template","tooltip","placement","content"],[1,"ngx-slider-span","ngx-slider-tick-legend",3,"innerHTML"]],template:function(t,i){1&t&&(d(0,"span",0,1),m(2,"span",2),h(),d(3,"span",3,4),m(5,"span",2),h(),d(6,"span",5,6),m(8,"span",2),h(),d(9,"span",7,8),m(11,"span",9),h(),m(12,"span",10,11)(14,"span",12,13)(16,"span",14,15)(18,"span",16,17)(20,"span",18,19)(22,"span",20,21)(24,"span",22,23),d(26,"span",24,25),Le(28,SH,4,9,"span",26),h()),2&t&&(C(6),hi("ngx-slider-transparent",i.fullBarTransparentClass),C(3),hi("ngx-slider-draggable",i.selectionBarDraggableClass),C(2),T("ngStyle",i.barStyle),C(1),T("ngStyle",i.minPointerStyle),C(2),lu("display",i.range?"inherit":"none"),T("ngStyle",i.maxPointerStyle),C(12),hi("ngx-slider-ticks-values-under",i.ticksUnderValuesClass),T("hidden",!i.showTicks),C(2),T("ngForOf",i.ticks))},dependencies:function(){return[el,tl,Mn,Ww,ns,Dm,Zo,NH]},styles:[".ngx-slider{display:inline-block;position:relative;height:4px;width:100%;margin:35px 0 15px;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;touch-action:pan-y}  .ngx-slider.with-legend{margin-bottom:40px}  .ngx-slider[disabled]{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-pointer{cursor:not-allowed;background-color:#d8e0f3}  .ngx-slider[disabled] .ngx-slider-draggable{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-selection{background:#8b91a2}  .ngx-slider[disabled] .ngx-slider-tick{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-tick.ngx-slider-selected{background:#8b91a2}  .ngx-slider .ngx-slider-span{white-space:nowrap;position:absolute;display:inline-block}  .ngx-slider .ngx-slider-base{width:100%;height:100%;padding:0}  .ngx-slider .ngx-slider-bar-wrapper{left:0;box-sizing:border-box;margin-top:-16px;padding-top:16px;width:100%;height:32px;z-index:1}  .ngx-slider .ngx-slider-draggable{cursor:move}  .ngx-slider .ngx-slider-bar{left:0;width:100%;height:4px;z-index:1;background:#d8e0f3;border-radius:2px}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-transparent .ngx-slider-bar{background:0 0}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-left-out-selection .ngx-slider-bar{background:#df002d}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-right-out-selection .ngx-slider-bar{background:#03a688}  .ngx-slider .ngx-slider-selection{z-index:2;background:#0db9f0;border-radius:2px}  .ngx-slider .ngx-slider-pointer{cursor:pointer;width:32px;height:32px;top:-14px;background-color:#0db9f0;z-index:3;border-radius:16px}  .ngx-slider .ngx-slider-pointer:after{content:'';width:8px;height:8px;position:absolute;top:12px;left:12px;border-radius:4px;background:#fff}  .ngx-slider .ngx-slider-pointer:hover:after{background-color:#fff}  .ngx-slider .ngx-slider-pointer.ngx-slider-active{z-index:4}  .ngx-slider .ngx-slider-pointer.ngx-slider-active:after{background-color:#451aff}  .ngx-slider .ngx-slider-bubble{cursor:default;bottom:16px;padding:1px 3px;color:#55637d;font-size:16px}  .ngx-slider .ngx-slider-bubble.ngx-slider-limit{color:#55637d}  .ngx-slider .ngx-slider-ticks{box-sizing:border-box;width:100%;height:0;position:absolute;left:0;top:-3px;margin:0;z-index:1;list-style:none}  .ngx-slider .ngx-slider-ticks-values-under .ngx-slider-tick-value{top:auto;bottom:-36px}  .ngx-slider .ngx-slider-tick{text-align:center;cursor:pointer;width:10px;height:10px;background:#d8e0f3;border-radius:50%;position:absolute;top:0;left:0;margin-left:11px}  .ngx-slider .ngx-slider-tick.ngx-slider-selected{background:#0db9f0}  .ngx-slider .ngx-slider-tick-value{position:absolute;top:-34px;-webkit-transform:translate(-50%,0);transform:translate(-50%,0)}  .ngx-slider .ngx-slider-tick-legend{position:absolute;top:24px;-webkit-transform:translate(-50%,0);transform:translate(-50%,0);max-width:50px;white-space:normal}  .ngx-slider.vertical{position:relative;width:4px;height:100%;margin:0 20px;padding:0;vertical-align:baseline;touch-action:pan-x}  .ngx-slider.vertical .ngx-slider-base{width:100%;height:100%;padding:0}  .ngx-slider.vertical .ngx-slider-bar-wrapper{top:auto;left:0;margin:0 0 0 -16px;padding:0 0 0 16px;height:100%;width:32px}  .ngx-slider.vertical .ngx-slider-bar{bottom:0;left:auto;width:4px;height:100%}  .ngx-slider.vertical .ngx-slider-pointer{left:-14px!important;top:auto;bottom:0}  .ngx-slider.vertical .ngx-slider-bubble{left:16px!important;bottom:0}  .ngx-slider.vertical .ngx-slider-ticks{height:100%;width:0;left:-3px;top:0;z-index:1}  .ngx-slider.vertical .ngx-slider-tick{vertical-align:middle;margin-left:auto;margin-top:11px}  .ngx-slider.vertical .ngx-slider-tick-value{left:24px;top:auto;-webkit-transform:translate(0,-28%);transform:translate(0,-28%)}  .ngx-slider.vertical .ngx-slider-tick-legend{top:auto;right:24px;-webkit-transform:translate(0,-28%);transform:translate(0,-28%);max-width:none;white-space:nowrap}  .ngx-slider.vertical .ngx-slider-ticks-values-under .ngx-slider-tick-value{bottom:auto;left:auto;right:24px}  .ngx-slider *{transition:none}  .ngx-slider.animate .ngx-slider-bar-wrapper{transition:.3s linear}  .ngx-slider.animate .ngx-slider-selection{transition:background-color .3s linear}  .ngx-slider.animate .ngx-slider-pointer{transition:.3s linear}  .ngx-slider.animate .ngx-slider-bubble{transition:.3s linear}  .ngx-slider.animate .ngx-slider-bubble.ngx-slider-limit{transition:opacity .3s linear}  .ngx-slider.animate .ngx-slider-bubble.ngx-slider-combined{transition:opacity .3s linear}  .ngx-slider.animate .ngx-slider-tick{transition:background-color .3s linear}"]}),n})(),NH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=kt({type:n,selectors:[["ngx-slider-tooltip-wrapper"]],inputs:{template:"template",tooltip:"tooltip",placement:"placement",content:"content"},decls:2,vars:2,consts:[[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ngx-slider-inner-tooltip"]],template:function(t,i){1&t&&(Le(0,kH,2,6,"ng-container",0),Le(1,PH,3,3,"ng-container",0)),2&t&&(T("ngIf",i.template),C(1),T("ngIf",!i.template))},dependencies:[Mn,qw],styles:[".ngx-slider-inner-tooltip[_ngcontent-%COMP%]{height:100%}"]}),n})(),FH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=an({imports:[Yw]}),n})();class VH extends kg.EventEmitter{constructor(e){super(),this._value=e}get value(){return this._value}set value(e){this._value=e}}const BH=new class HH extends ir{}(class UH extends gm{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return null!==i&&i>0||null===i&&this.delay>0?super.requestAsyncId(e,t,i):e.flush(this)}});class Ii{constructor(e,t,i){this.kind=e,this.value=t,this.error=i,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,i){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return i&&i()}}accept(e,t,i){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,i)}toObservable(){switch(this.kind){case"N":return me(this.value);case"E":return Gi(this.error);case"C":return $u()}throw new Error("unexpected notification kind value")}static createNext(e){return typeof e<"u"?new Ii("N",e):Ii.undefinedValueNotification}static createError(e){return new Ii("E",void 0,e)}static createComplete(){return Ii.completeNotification}}Ii.completeNotification=new Ii("C"),Ii.undefinedValueNotification=new Ii("N",void 0);class $d extends Ae{constructor(e,t,i=0){super(e),this.scheduler=t,this.delay=i}static dispatch(e){const{notification:t,destination:i}=e;t.observe(i),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule($d.dispatch,this.delay,new GH(e,this.destination)))}_next(e){this.scheduleMessage(Ii.createNext(e))}_error(e){this.scheduleMessage(Ii.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(Ii.createComplete()),this.unsubscribe()}}class GH{constructor(e,t){this.notification=e,this.destination=t}}class $H extends K{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,i){super(),this.scheduler=i,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new zH(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,i=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,s=i.length;let o;if(this.closed)throw new M;if(this.isStopped||this.hasError?o=H.EMPTY:(this.observers.push(e),o=new S(this,e)),r&&e.add(e=new $d(e,r)),t)for(let a=0;a<s&&!e.closed;a++)e.next(i[a]);else for(let a=0;a<s&&!e.closed;a++)e.next(i[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),o}_getNow(){return(this.scheduler||BH).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,i=this._windowTime,r=this._events,s=r.length;let o=0;for(;o<s&&!(e-r[o].time<i);)o++;return s>t&&(o=Math.max(o,s-t)),o>0&&r.splice(0,o),r}}class zH{constructor(e,t){this.time=e,this.value=t}}function Jo(){return window}function Em(){return Jo().YT}function tM(){return Em().Player}const ic={height:270,width:367};let Mm=(()=>{class n{constructor(t){this.zone=t,this.api=new $H(1),this.createApi()}loadPlayerApi(t){const i=Jo().document;if(!n.ytApiLoaded){n.ytApiLoaded=!0;const r=i.createElement("script");r.type="text/javascript",r.src=`${t.protocol}://www.youtube.com/iframe_api`,i.body.appendChild(r)}}setupPlayer(t,i,r,s="",o){this.api.subscribe(()=>{tM&&this.createPlayer(t,i,r,s,o)})}play(t){t.playVideo()}pause(t){t.pauseVideo()}playVideo(t,i){i.loadVideoById(t.id.videoId?t.id.videoId:t.id),this.play(i)}isPlaying(t){const i=t&&t.getPlayerState,r=i?t.getPlayerState():{};return!!i&&r!==Em().PlayerState.ENDED&&r!==Em().PlayerState.PAUSED}createPlayer(t,i,r,s="",o={}){const a={height:r.height||ic.height,width:r.width||ic.width};return new(tM())(t,Object.assign(Object.assign({},a),{events:{onReady:u=>{this.zone.run(()=>i.ready&&i.ready.next(u.target))},onStateChange:u=>{this.zone.run(()=>i.change&&i.change.next(u))}},playerVars:o,videoId:s}))}toggleFullScreen(t,i){let{height:r,width:s}=ic;i||(r=window.innerHeight,s=window.innerWidth),t.setSize(s,r)}generateUniqueId(){return Math.random().toString(35).substr(2,7)}createApi(){Jo().onYouTubeIframeAPIReady=()=>{Jo()&&(Jo().onYouTubeIframeAPIReadyCalled=!0,this.api.next())},Jo().onYouTubeIframeAPIReadyCalled&&this.api.next()}}return n.\u0275fac=function(t){return new(t||n)(U(yt))},n.ytApiLoaded=!1,n.\u0275prov=X({factory:function(){return new n(U(yt))},token:n,providedIn:"root"}),n})(),WH=(()=>{class n{constructor(t,i,r){this.playerService=t,this.elementRef=i,this.renderer=r,this.videoId="",this.height=ic.height,this.width=ic.width,this.protocol=this.getProtocol(),this.playerVars={},this.ready=new et,this.change=new et}ngAfterContentInit(){const t=this.playerService.generateUniqueId(),i={height:this.height,width:this.width},r=this.renderer.selectRootElement("#yt-player-ngx-component");this.renderer.setAttribute(r,"id",t),this.playerService.loadPlayerApi({protocol:this.protocol}),this.playerService.setupPlayer(t,{change:this.change,ready:this.ready},i,this.videoId,this.playerVars)}getProtocol(){return window&&window.location?window.location.protocol.replace(":",""):"http"}}return n.\u0275fac=function(t){return new(t||n)(x(Mm),x(jt),x(Xn))},n.\u0275cmp=kt({type:n,selectors:[["youtube-player"]],inputs:{videoId:"videoId",height:"height",width:"width",protocol:"protocol",playerVars:"playerVars"},outputs:{ready:"ready",change:"change"},decls:1,vars:0,consts:[["id","yt-player-ngx-component"]],template:function(t,i){1&t&&m(0,"div",0)},encapsulation:2,changeDetection:0}),n})(),qH=(()=>{class n{static forRoot(){return{ngModule:n,providers:[Mm]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=an({providers:[Mm]}),n})();const KH=["youtubePlayer"],nM=function(n){return{hide:n}},YH=function(n,e,t){return{playing:n,loading:e,stopped:t}},ZH=function(n,e){return{shuffleOn:n,shuffleOff:e}},JH=function(n,e,t,i){return{mute:n,unmute:e,muteDisabled:t,unmuteDisabled:i}};class zd{constructor(e,t,i){this.musicService=e,this.messageService=t,this.changeDetectorRef=i,this.label="MusicPlayer",this._gainsDisabled=new VH(!1),this.optionsMasterGain={floor:0,ceil:1,step:.01,showSelectionBar:!0,getSelectionBarColor:this.sliderColors,getPointerColor:this.sliderColors,hideLimitLabels:!0,hidePointerLabels:!0},this.enableGains=r=>{this.optionsMasterGain=Object.assign({},this.optionsMasterGain,r?{disabled:!0,getSelectionBarColor:this.sliderColorsDisabled,getPointerColor:this.sliderColorsDisabled}:{disabled:!1,getSelectionBarColor:this.masterMuted?this.sliderColorsMuted:this.sliderColors,getPointerColor:this.masterMuted?this.sliderColorsMuted:this.sliderColors})},this._gainsDisabled.on("Change",this.enableGains),this.musicService.playerUiInitialized(this._gainsDisabled),this.subscription=this.messageService.onMessage().subscribe(r=>{"YoutubeVolumeChange"===r.type&&this.updateMuteUI()}),this.musicService.addPlayStateChangeListener(()=>{this.changeDetectorRef.detectChanges()})}get selectedTrack(){return this.musicService.selectedTrack}get selectedTrackAsYoutubeTrack(){return this.musicService.selectedTrack}get playState(){return this.musicService.playState}get isShuffle(){return this.musicService.isShuffle}get masterGain(){return this.musicService.masterGain}set masterGain(e){this.musicService.masterGain=e}get masterMuted(){return this.musicService.masterMuted}get gainsDisabled(){return this._gainsDisabled.value}sliderColors(e){return e<=.2?"#394A00":e<=.4?"#596A06":e<=.6?"#798A0A":e<=.8?"#99AA2A":"#B9CA4A"}sliderColorsMuted(e){return e<=.2?"#5D0800":e<=.4?"#7D2800":e<=.6?"#9D4800":e<=.8?"#BD6800":"#DD8800"}sliderColorsDisabled(e){return"#8B91A2"}ngAfterViewInit(){this.musicService.initStreamers(),this.musicService.sendYoutubePlayerElement(this.youtubePlayerElement),this.musicService.onWindowInitSize(window.innerWidth,window.innerHeight)}ngOnDestroy(){this.subscription instanceof H&&this.subscription.unsubscribe()}onWindowResize(){this.musicService.onWindowResize(window.innerWidth,window.innerHeight)}onPlayerReady(e){this.musicService.onYoutubePlayerReady(e)}onPlayerStateChange(e){this.musicService.OnYoutubePlayerStateChange(e.data)}onPlayPauseBtn(){this.musicService.OnUiPlayOrPause()}onNextBtn(){this.musicService.onUiNextTrack()}onShuffleBtn(){this.musicService.toggleShuffle()}onMasterMuteBtn(){this._gainsDisabled.value||(this.musicService.masterMuted=!this.masterMuted)}updateMuteUI(){this.optionsMasterGain=Object.assign({},this.optionsMasterGain,{getSelectionBarColor:this.masterMuted?this.sliderColorsMuted:this.sliderColors,getPointerColor:this.masterMuted?this.sliderColorsMuted:this.sliderColors})}static#e=this.\u0275fac=function(t){return new(t||zd)(x(Os),x(ks),x(Hi))};static#t=this.\u0275cmp=kt({type:zd,selectors:[["app-music-player"]],viewQuery:function(t,i){if(1&t&&Ut(KH,5),2&t){let r;Dt(r=Et())&&(i.youtubePlayerElement=r.first)}},hostBindings:function(t,i){1&t&&ct("resize",function(s){return i.onWindowResize(s)},0,gf)},decls:25,vars:25,consts:[[1,"playerContainer"],[1,"youtubePlayer",3,"ngClass"],["youtubePlayer",""],[3,"videoId","ready","change"],["id","WebGLCanvas","width","800","height","600",2,"border","none","position","absolute"],["WebGLCanvas",""],[1,"myPlayer","noSelect",3,"ngClass"],[1,"playIconContainer",3,"click"],[3,"ngClass"],[1,"nextContainer",3,"click"],[1,"next_triangle"],[1,"next_line"],[1,"trackName"],[1,"playerRightButtonsContainer"],[1,"shuffleContainer",3,"click"],[1,"shuffle",3,"ngClass"],[1,"muteContainer",3,"click"],[1,"sliderContainer"],[1,"slider"],[3,"value","options","valueChange"],["id","scWidget","width","100%","height","10","scrolling","no","frameborder","no","allow","autoplay","src","https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/1255416709&color=%23ff5500&auto_play=false&hide_related=true&show_comments=false&show_user=false&show_reposts=false&show_teaser=false&buying=false&liking=false&download=false&sharing=false&show_artwork=false&show_playcount=false&start_track=0",1,"hide"]],template:function(t,i){1&t&&(d(0,"div",0)(1,"div",1,2)(3,"youtube-player",3),ct("ready",function(s){return i.onPlayerReady(s)})("change",function(s){return i.onPlayerStateChange(s)}),h()(),d(4,"div"),m(5,"canvas",4,5),h(),d(7,"div",6)(8,"span",7),ct("click",function(){return i.onPlayPauseBtn()}),m(9,"div",8),h(),d(10,"span",9),ct("click",function(){return i.onNextBtn()}),m(11,"div",10)(12,"div",11),h(),d(13,"span",12)(14,"span"),l(15),h()(),d(16,"span",13)(17,"span",14),ct("click",function(){return i.onShuffleBtn()}),m(18,"div",15),h(),d(19,"span",16),ct("click",function(){return i.onMasterMuteBtn()}),m(20,"div",8),h(),d(21,"span",17)(22,"span",18)(23,"ngx-slider",19),ct("valueChange",function(s){return i.masterGain=s}),h()()()()()(),m(24,"iframe",20)),2&t&&(C(1),T("ngClass",Ur(9,nM,"Youtube"!==i.selectedTrack.source||!1===i.selectedTrackAsYoutubeTrack.isGraphicsActive)),C(2),Xt("videoId",i.selectedTrackAsYoutubeTrack.youtubeId),C(4),T("ngClass",Ur(11,nM,null!==i.selectedTrackAsYoutubeTrack&&!0===i.selectedTrackAsYoutubeTrack.isGraphicsActive)),C(2),T("ngClass",sp(13,YH,"Playing"===i.playState,"Loading"===i.playState,"Paused"===i.playState||"Stopped"===i.playState)),C(6),nt(i.selectedTrack.name),C(3),T("ngClass",Ga(17,ZH,i.isShuffle,!i.isShuffle)),C(2),T("ngClass",function _1(n,e,t,i,r,s,o){return E1(V(),Un(),n,e,t,i,r,s,o)}(20,JH,i.masterMuted,!i.masterMuted,i.gainsDisabled&&i.masterMuted,i.gainsDisabled&&!i.masterMuted)),C(3),T("value",i.masterGain)("options",i.optionsMasterGain))},dependencies:[el,eM,WH],styles:['.playerContainer[_ngcontent-%COMP%]{position:fixed;z-index:1;transform:translateY(40px);width:90%}.myPlayer[_ngcontent-%COMP%]{cursor:pointer;border:1px solid var(--colorGrayLightMed);border-radius:1em;padding-top:9px;padding-bottom:7px;height:24px}.youtubePlayer[_ngcontent-%COMP%]{margin:0 0%}.trackName[_ngcontent-%COMP%]{position:fixed;margin-top:1.25px}.playIconContainer[_ngcontent-%COMP%]{float:left;transform:translateY(3px);padding-left:3.5%;width:6%;height:23px}.stopped[_ngcontent-%COMP%]{clip-path:polygon(50% 0%,0% 100%,100% 100%);background:var(--colorWhiteLightMed);width:23px;height:15px;transform:translate(-10%) translateY(10%) rotate(90deg);transition:all .2s}.loading[_ngcontent-%COMP%]{width:16px;height:16px;background-color:var(--colorWhiteLightMed);transform:translate(8%,4%);transition:all .2s;animation:_ngcontent-%COMP%_rotationFastReverse .5s infinite linear}@keyframes _ngcontent-%COMP%_rotationFastReverse{0%{transform:rotate(0)}to{transform:rotate(359deg)}}.playing[_ngcontent-%COMP%]{width:16px;height:16px;background-color:var(--colorWhiteLightMed);transform:translate(8%,4%);animation:_ngcontent-%COMP%_rotation 3s infinite linear;transition:all .2s}@keyframes _ngcontent-%COMP%_rotation{0%{transform:rotate(0)}to{transform:rotate(-359deg)}}.nextContainer[_ngcontent-%COMP%]{float:left;height:16px;width:10px;transform:translateY(5px);padding-right:5%}.next_triangle[_ngcontent-%COMP%]{clip-path:polygon(50% 0%,0% 100%,100% 100%);background:var(--colorWhiteLightMed);width:16px;height:10px;transform:translate(-10%) translateY(10%) rotate(90deg)}.next_line[_ngcontent-%COMP%]{width:10px;height:16px;border-right:3px solid var(--colorWhiteLightMed);transform:translateY(-12px)}.playerRightButtonsContainer[_ngcontent-%COMP%]{padding-right:0%;width:42%;height:24px;float:right}.shuffleContainer[_ngcontent-%COMP%]{float:left;height:16px;transform:scaleX(.8)}.shuffle[_ngcontent-%COMP%]{width:22px;height:22px;display:block;transform:translateY(-1px)}.youtubeButtonContainer[_ngcontent-%COMP%]{float:left;height:16px;width:25px}.youtubeButton[_ngcontent-%COMP%]{width:256px;height:256px;display:block;transform:translate(-116px) translateY(-116px) scale(.1);background:transparent url(https://upload.wikimedia.org/wikipedia/commons/5/55/YouTube_icon_%282013-2017%29.svg)}.shuffleOn[_ngcontent-%COMP%]{background:transparent url(/assets/images/music/shuffle-on.svg) center top no-repeat}.shuffleOff[_ngcontent-%COMP%]{background:transparent url(/assets/images/music/shuffle-off.svg) center top no-repeat}.timer[_ngcontent-%COMP%]{float:right;padding-right:2.5%;padding-top:1.5px}ul[_ngcontent-%COMP%]{list-style:none;cursor:pointer}.buttonRow[_ngcontent-%COMP%]{float:right;width:100%}.button[_ngcontent-%COMP%]{background:var(--colorGreyDark);color:#ccc;font-weight:700;font-family:Arial,Helvetica,sans-serif;height:2em;margin-right:5%;float:right;border:1px solid #999;border-radius:.5em;cursor:pointer;transition-duration:.4s}.button[_ngcontent-%COMP%]:hover{background:var(--colorPending);border-color:var(--colorPending);color:var(--colorBlackLight)}.button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{transition-duration:.4s}.button[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]{background:transparent url(/assets/soundcloud_black.png) center top no-repeat}.button[_ngcontent-%COMP%]:active{background:var(--colorActive);border-color:var(--colorActive)}.trackDescription[_ngcontent-%COMP%]{float:left}.byBio[_ngcontent-%COMP%]{float:right}.gainOuterContainer[_ngcontent-%COMP%]{height:71px;margin-top:1.3em}.muteAndSliderContainer[_ngcontent-%COMP%]{width:40%;height:24px}.muteContainer[_ngcontent-%COMP%]{transform:translateY(-8%);transform:translate(25px);display:block;padding-left:3.5%}.sliderContainer[_ngcontent-%COMP%]{width:65%;padding-right:3.5%;float:right;position:relative;transform:translateY(-49px)}.mute[_ngcontent-%COMP%]{width:24px;height:24px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAABS0lEQVRIie2UPU7DQBCFv9mkQBwgDVA5BYWpOAASFg0/1+AGEU5BoEssXwBuQcGPhGQKSiQqXIBkd1S5QrCHInLkBOR4IRJCyutmNPPe25nRwhL/BknAaTrgzbavWaco7XOOcmZvC0wtcvkZ+VyB35JDxYjmkad9HhFWtcF+u8MQIAlpmZwrVUaOz86UQDrgALgE1mpZE1aAbcmJkhAPQHIiVVzg6bsXXNQmB7TBoeREKK7kROMkLkKshqOirryD9brkAO0OwzxjF3hBcRk7fzXCXjGyWYGFQEZIOS4LvNsQJSEt0+AB2EKIEWJgM2tyn4S0vggoHNuISMZNaeaeGjyEGMWVjOuibrLkts8dsFHE885U4UPgWc3UmXqScauQTYxUuUz7nCAMyjnHr+6ZReWSnS4Bim9DaCWwCJFaZ+p0CVTogf13vcTf4xMPJ2kt0pqBpgAAAABJRU5ErkJggg==)}.unmute[_ngcontent-%COMP%]{width:24px;height:24px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAA5klEQVRIie2TQQ7BUBRFzxO7IJbByJjWQuxBgqQ2IfZBfHMD7dzEVCzDM1I/pe1/IhGJM2vTf3tu3n/w52fYZdHEZfHReq4ZFJ5GU1VJQr51abxXleuwt+4DNILCCQsHUJWriOr9Wazhg+7m6UzR2qe0gcW8aO2T27gsilBZAp2qsHuDKmufx5BVVkA7xLjO+vUPDOEAvrnfxnyLQvDblN4il8ZnoFUXZp1B3kBVxqCXd6yrKN2DbTpKBJ0W339sD4bd9UyRRZ0hBO5BGcUmrxr4mG+RpQmEz+bZLIvn7jA6mQ/++To3A0mcQN4dZgYAAAAASUVORK5CYII=)}.muteDisabled[_ngcontent-%COMP%]{width:24px;height:24px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAABVUlEQVRIie2UvUrDUBiGnxPSIF5AF3V3iJMXIBhc/LmE1k3oYLsYdPFntJypXaKj6Q04+ANCHRwFJzvo7tQ7MG39XJISK6Q5WBGhLxxCDuc875vv+whM9W+kGxeHuhG+mt6zc8JPQB0bpwKs34SPNfgpHDJKNA6uG+EDqFkcWfcr5S6ADsIiPS4R1fNrpZUvBrrZ2kDkHJjLGW4GZJmItg5CD4CINuAq5PH7F4icGcDBYTMBxk8AF+iIw1ZyLN2D+dxwwK+Uuz3VXxV4jsEu8CL2YC0p2ajBRFSIbJV+Txu8mYB0EBYLYt8rWAI68VrsW3Kng7D4zUBZsmNk8s41cc1x8HDwYhOXiKvk2LDJe7vbt8DCMOGYMRUlfYX1NDKmHpG6ET4Gw+BZIXWztY/IaXrPr5Uz74wqs8l+tVRHqQMToJHBJExyjalfLdVBjgDj3/VUf69PUIJ04GzYQ0wAAAAASUVORK5CYII=)}.unmuteDisabled[_ngcontent-%COMP%]{width:24px;height:24px;background:url\\(\\d\\a("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAA50lEQVRIie2TPQrCQBCFvxVvoXgTD+AhTGuZKo0QBe1cC6ON2JmcxSvY2IrHyNqYuIn52RFBBL9uw8zLe8wM/PkZVptkqqP4LO3ruhTp6BiCWbjVxicgDXxvCNBxE1dO4g9SwGQPJRUPfO+lp+zapjaB0HnBtU3uZr07jkyq9sCgSSlL0OTaJh+ySdUB6Ds6hgbXlT8QimM7t9OIt8gRO031FukovgK9NiXpDJ4JlJqAub3pupbaO9BRsgATlr9/7A4CfzwDtWxz+KD9DuooJ6lKUKwXbpEwCTjOpsJZMtfb+CJu/PN17hYIbgHrvkxYAAAAAElFTkSuQmCC")}@media screen and (max-width: 451px){.youtubePlayer[_ngcontent-%COMP%]{margin:0 0%}.playIconContainer[_ngcontent-%COMP%]{width:7%}.nextContainer[_ngcontent-%COMP%]{padding-right:2%}.sliderContainer[_ngcontent-%COMP%]{display:none}.playerRightButtonsContainer[_ngcontent-%COMP%]{float:right;padding-right:3.5%;width:50px}}@media screen and (min-width: 452px) and (max-width: 703px){.youtubePlayer[_ngcontent-%COMP%]{margin:0 10%}.myPlayer[_ngcontent-%COMP%]{margin:0 0%}.playIconContainer[_ngcontent-%COMP%]{width:6%}.nextContainer[_ngcontent-%COMP%]{padding-right:3%}.sliderContainer[_ngcontent-%COMP%]{display:none}.playerRightButtonsContainer[_ngcontent-%COMP%]{float:right;padding-right:3.5%;width:50px}}@media screen and (min-width: 704px) and (max-width: 1053px){.youtubePlayer[_ngcontent-%COMP%]{margin:0 20%}.myPlayer[_ngcontent-%COMP%]{margin:0 5%;width:80%}.playIconContainer[_ngcontent-%COMP%]{width:5%}.nextContainer[_ngcontent-%COMP%]{padding-right:4%}.buttonRow[_ngcontent-%COMP%]{margin-right:5%}}@media screen and (min-width: 1054px) and (max-width: 1403px){.youtubePlayer[_ngcontent-%COMP%]{margin:0 30%}.myPlayer[_ngcontent-%COMP%]{margin:0 10%;width:70%}}@media screen and (min-width: 1404px) and (max-width: 2000px){.youtubePlayer[_ngcontent-%COMP%]{margin:0 35%}.myPlayer[_ngcontent-%COMP%]{margin:0 15%;width:60%}}@media screen and (min-width: 2001px){.youtubePlayer[_ngcontent-%COMP%]{margin:0 37%}.myPlayer[_ngcontent-%COMP%]{margin:0 20%;width:50%}}']})}const QH=["headerContainer"],XH=["headerBackground"];function e5(n,e){1&n&&(d(0,"div")(1,"label"),l(2,"Has to be a valid email address"),h()())}function t5(n,e){if(1&n&&(d(0,"div",23),Le(1,e5,3,0,"div",20),h()),2&n){const t=Ne(3);C(1),T("ngIf",null==t.emailControl.errors?null:t.emailControl.errors.pattern)}}function n5(n,e){if(1&n&&(d(0,"div")(1,"label"),l(2,"* Your Email:"),h(),m(3,"br")(4,"input",19),Le(5,t5,2,1,"div",22),m(6,"br")(7,"br"),h()),2&n){const t=Ne(2);C(4),Xt("placeholder",t.placeholderEmail),Xt("formControlName",t.emailName),Xt("name",t.emailName),C(1),T("ngIf",t.emailControl.invalid)}}function i5(n,e){if(1&n){const t=Vr();d(0,"div",15)(1,"form",16),m(2,"input",17),d(3,"label"),l(4),h(),m(5,"br")(6,"textarea",18)(7,"br")(8,"br"),d(9,"label"),l(10,"* Your Name / Handle:"),h(),m(11,"br")(12,"input",19)(13,"br")(14,"br"),Le(15,n5,8,4,"div",20),d(16,"button",21),ct("click",function(){return Pr(t),Or(Ne().onSendClick())}),l(17,"Send"),h()()()}if(2&n){const t=Ne();C(1),Xt("name",t.formName),T("formGroup",t.messageForm),C(1),Xt("value",t.formName),C(2),nt(t.messageLabel),C(2),Xt("placeholder",t.placeholderText),Xt("formControlName",t.messageName),Xt("name",t.messageName),T("maxlength",300),C(6),Xt("placeholder",t.placeholderHandle),Xt("formControlName",t.handleName),Xt("name",t.handleName),C(3),T("ngIf","/home"===t.urlEnd),C(1),T("disabled",t.messageForm.invalid)}}class Wd{constructor(e,t,i,r,s){this.fb=e,this.http=t,this.router=i,this.logService=r,this.htmlService=s,this.placeholderComment="This is a required field.\nAfter you press 'Send' button:\n* your comment will pend for moderation\n* this Comment-form will become hidden\nAfter approval I will publish your comment,\nI might also include a short response.",this.placeholderMessage="This is a required field.\nAfter you press 'Send' button\nthis Contact form will become hidden.\nI have your email as a means to get back to you,\nI'll never give it to 3rd party or display it publicly.",this.placeholderText="",this.placeholderHandle="This is a required field",this.placeholderEmail="Required field, I will never give to 3rd party",this.showCommentForm=!0,this.headerText="",this.formName="MessageForm",this.netlifyFormName="form-name",this.messageName="Message",this.messageLabel="",this.handleName="Handle",this.emailName="Email",this.honeyLabel="Do not, fill this field out if you are human",this.honeyValue="Do not, fill this field out if you are human",this.emailRegex=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,this.urlEndName="UrlEnd",this.urlEnd="",this.formType="Contact",this.router.events.pipe($n(o=>o instanceof br)).subscribe(o=>{this.showCommentForm=!0,this.urlEnd=o.urlAfterRedirects,this.formType="/home"===this.urlEnd?"Contact":"Comment",this.logService.log("Info","urlEnd:",this.urlEnd),"Contact"===this.formType?(this.headerText="Contact",this.messageLabel="* Your Message:",this.placeholderText=this.placeholderMessage,this.emailControl.addValidators(Xr.required)):(this.headerText="Write a Comment",this.messageLabel="* Your Comment:",this.placeholderText=this.placeholderComment,this.emailControl.removeValidators(Xr.required)),this.messageForm.reset()}),this.messageForm=this.fb.group({[this.messageName]:["",[Xr.required]],[this.handleName]:["",[Xr.required]],[this.emailName]:["",[Xr.pattern(this.emailRegex)]]}),this.emailControl=this.messageForm.controls[this.emailName]}ngAfterViewInit(){this.htmlService.set("headerBackground",this.headerBackgroundElement),this.htmlService.set("headerContainer",this.headerContainerElement)}onSendClick(){let e=(new Mr).set(this.netlifyFormName,this.formName).append(this.messageName,this.messageForm.value[this.messageName]).append(this.handleName,this.messageForm.value[this.handleName]).append(this.urlEndName,this.urlEnd);e=e.append(this.emailName,"Contact"===this.formType?this.messageForm.value[this.emailName]:"notusedforcomment@gmail.com"),this.logService.log("Info","form send clicked and doing http post with:"),this.logService.log("Info","messageForm:"),this.logService.log("Info",this.messageForm),this.logService.log("Info","body:",e),this.http.post("/",e.toString(),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).subscribe(t=>{this.logService.log("Info","result handler:",t),this.showCommentForm=!1,this.headerText="Thank you for sending :)"},t=>{this.showCommentForm=!1,t instanceof ErrorEvent?(this.logService.log("Error","Client side error: Something went wrong when sending your comment:",t.error),this.headerText="Something went wrong with sending"):200===t.status?(this.headerText="Thank you for sending :)",this.logService.log("Info","Your comment has been successfully sent (status == 200)")):(this.headerText="Something went wrong with sending",this.logService.log("Error","Backend side error: Something went wrong when sending your comment:"),this.logService.log("Error","Error status:",t.status),this.logService.log("Error","Error body:",t.error))}),this.messageForm.reset()}static#e=this.\u0275fac=function(t){return new(t||Wd)(x(rE),x(fm),x(bn),x(Mi),x(Ps))};static#t=this.\u0275cmp=kt({type:Wd,selectors:[["app-root"]],viewQuery:function(t,i){if(1&t&&(Ut(QH,5),Ut(XH,5)),2&t){let r;Dt(r=Et())&&(i.headerContainerElement=r.first),Dt(r=Et())&&(i.headerBackgroundElement=r.first)}},decls:31,vars:2,consts:[[1,"headerContainer"],["headerContainer",""],[1,"headerBackground"],["headerBackground",""],[1,"noSelect"],["routerLink","/home","routerLinkActive","active"],["routerLink","/music","routerLinkActive","active"],["routerLink","/blog","routerLinkActive","active"],["routerLink","/lifting","routerLinkActive","active"],[1,"footer"],[1,"horizontalLine"],["class","messageForm",4,"ngIf"],[1,"tribute"],["href","https://icons8.com/icon/102034/mute"],["href","https://icons8.com/icon/108731/sound"],[1,"messageForm"],["method","POST",3,"formGroup","name"],["type","hidden","name","form-name",3,"value"],["type","text","rows","6",1,"formTextFields",3,"placeholder","formControlName","name","maxlength"],["type","text","maxlength","32",1,"formTextFields",3,"placeholder","formControlName","name"],[4,"ngIf"],["type","submit",3,"disabled","click"],["class","alert",4,"ngIf"],[1,"alert"]],template:function(t,i){1&t&&(d(0,"div",0,1),m(2,"div",2,3),d(4,"nav",4)(5,"li")(6,"a",5),l(7,"Home"),h()(),d(8,"li")(9,"a",6),l(10,"Music"),h()(),d(11,"li")(12,"a",7),l(13,"Blog"),h()(),d(14,"li")(15,"a",8),l(16,"Lifting"),h()()(),m(17,"app-music-player"),h(),m(18,"router-outlet"),d(19,"div",9),m(20,"div",10),d(21,"h2"),l(22),h(),Le(23,i5,18,13,"div",11),d(24,"div",12)(25,"small")(26,"a",13),l(27,"Mute icon by Icons8"),h(),m(28,"br"),d(29,"a",14),l(30,"Sound icon by Icons8"),h()()()()),2&t&&(C(22),nt(i.headerText),C(1),T("ngIf",i.showCommentForm))},dependencies:[nd,ud,PC,Mn,em,xl,Bg,jg,Id,Vl,Sd,zd],encapsulation:2})}class qd{static#e=this.\u0275fac=function(t){return new(t||qd)};static#t=this.\u0275mod=vn({type:qd,bootstrap:[Wd]});static#n=this.\u0275inj=an({providers:[{provide:XC,useExisting:Al},{provide:Ld,useValue:{coreLibraryLoader:()=>$e.e(358).then($e.bind($e,9358)),languages:{csharp:()=>$e.e(285).then($e.bind($e,5285)),cpp:()=>$e.e(739).then($e.bind($e,3739))}}}],imports:[Fd,tL,c4,GE,FH,sH,lm,W4,qH.forRoot()]})}eL().bootstrapModule(qd)},305:wn=>{"use strict";wn.exports=JSON.parse('[{"name":"Gold dragon","kg":580600,"url":"http://forgottenrealms.wikia.com/wiki/Gold_dragon"},{"name":"Silver dragon","kg":580599,"url":"https://forgottenrealms.fandom.com/wiki/Silver_dragon"},{"name":"Bronze dragon","kg":72575,"url":"https://forgottenrealms.fandom.com/wiki/Bronze_dragon"},{"name":"Copper dragon","kg":72574,"url":"https://forgottenrealms.fandom.com/wiki/Copper_dragon"},{"kg":27216,"name":"Brass dragon","url":"https://forgottenrealms.fandom.com/wiki/Brass_dragon"},{"name":"Blue whale","kg":136000},{"name":"Tarrasque","kg":130000,"url":"http://forgottenrealms.wikia.com/wiki/Tarrasque"},{"kg":100000,"name":"Bowhead (whale)"},{"kg":96400,"name":"Argentinosaurus huinculensis (dinosaur)"},{"kg":80000,"name":"\'Antarctosaurus\' giganteus (dinosaur)"},{"kg":75900,"name":"Notocolossus gonzalezparejasi (dinosaur)"},{"kg":75000,"name":"Mamenchisaurus sinocanadorum (dinosaur)"},{"kg":72600,"name":"Apatosaurus ajax (dinosaur)"},{"kg":70000,"name":"Fin whale"},{"kg":69000,"name":"Patagotitan mayorum (dinosaur)"},{"kg":60000,"name":"Sauroposeidon proteles (dinosaur)"},{"kg":59300,"name":"Dreadnoughtus schrani (dinosaur)"},{"kg":59000,"name":"Paralititan stromeri (dinosaur)"},{"kg":45000,"name":"Southern right whale"},{"kg":30000,"name":"Humpback whale"},{"kg":28500,"name":"Gray whale"},{"name":"Northen right whale","kg":23000,"url":"https://en.wikipedia.org/wiki/North_Atlantic_right_whale"},{"kg":20900,"name":"Spinosaurus aegyptiacus (dinosaur)"},{"kg":20000,"name":"Sei whale"},{"kg":18500,"name":"Tyrannosaurus rex (dinosaur)"},{"kg":16000,"name":"Bryde\'s whale"},{"kg":15100,"name":"Carcharodontosaurus saharicus (dinosaur)"},{"kg":13800,"name":"Giganotosaurus carolinii (dinosaur)"},{"kg":11380,"name":"Baird\'s beaked whale"},{"kg":7500,"name":"Minke whale"},{"kg":7300,"name":"Acrocanthosaurus atokensis (dinosaur)"},{"kg":7000,"name":"Oxalaia quilombensis (dinosaur)"},{"kg":6999,"name":"Tyrannotitan chubutensis (dinosaur)"},{"kg":6500,"name":"Northen bottlenose whale"},{"kg":6400,"name":"Deinocheirus mirificus (dinosaur)"},{"kg":6000,"name":"Chilantaisaurus tashuikouensis (dinosaur)"},{"kg":5600,"name":"Gervais\'s beaked whale"},{"kg":5200,"name":"Suchomimus tenerensis (dinosaur)"},{"kg":4800,"name":"African elephant"},{"kg":3988,"name":"Killer whale"},{"kg":3750,"name":"Hippopotamus"},{"kg":7500,"name":"Asian elephant"},{"kg":2701,"name":"Cuvier\'s beaked whale"},{"kg":2200,"name":"Short-finned pilot whale"},{"kg":2175,"name":"White rhinoceros"},{"name":"Javan rhinoceros","kg":1750,"url":"https://en.wikipedia.org/wiki/Javan_rhinoceros"},{"kg":1602,"name":"Indian rhinoceros"},{"kg":1600,"name":"Northen elephant seal"},{"kg":1430,"name":"Beluga"},{"kg":1400,"name":"Southern elephant seal"},{"kg":1260,"name":"Sumatran rhinoceros"},{"kg":1250,"name":"Narwhal"},{"kg":1100,"name":"Black rhinoceros"},{"kg":1088,"name":"Blainville\'s beaked whale"},{"kg":1060,"name":"Long-finned pilot whale"},{"kg":1013,"name":"Walrus"},{"kg":825,"name":"Gaur"},{"kg":800,"name":"Giraffe"},{"kg":748,"name":"False killer whale"},{"kg":725,"name":"Water buffalo"},{"kg":700,"name":"African buffalo"},{"kg":667,"name":"Yak"},{"kg":630,"name":"American bison"},{"kg":610,"name":"European bison"},{"kg":480,"name":"Amazonian manatee"},{"kg":475,"name":"Polar bear"},{"kg":475,"name":"Bactrian camel"},{"kg":425,"name":"Risso\'s dolphin"},{"kg":415,"name":"Northen sea lion"},{"kg":405,"name":"Hooded seal"},{"kg":386,"name":"Moose"},{"kg":425,"name":"Grevy\'s zebra"},{"kg":373,"name":"Bearded seal"},{"kg":368,"name":"Leopard seal"},{"kg":360,"name":"Dugong"},{"kg":322,"name":"Caribbean manatee"},{"kg":315,"name":"Muskox"},{"kg":308,"name":"Bongo"},{"kg":300,"name":"Baird\'s tapir"},{"kg":296,"name":"Mountain zebra"},{"name":"Indo-Pacific humpbacked dolphin","kg":280,"url":"https://en.wikipedia.org/wiki/Indian_Ocean_humpback_dolphin"},{"kg":278,"name":"grizzly bear"},{"kg":275,"name":"Kiang"},{"kg":268,"name":"Gray seal"},{"kg":250,"name":"Malayan tapir"},{"kg":240,"name":"Tamaraw"},{"kg":230,"name":"Kulan"},{"kg":225,"name":"Roan antelope"},{"kg":223,"name":"Hawaiian monk seal"},{"kg":218,"name":"Greater kudu"},{"kg":215,"name":"Pygmy hippopotamus"},{"kg":208,"name":"Southern sea lion"},{"kg":206,"name":"Melon-headed whale"},{"kg":203,"name":"Giant forest hog"},{"kg":200,"name":"Red deer"},{"kg":190,"name":"Australian sea lion"},{"kg":188,"name":"New Zealand sea lion"},{"kg":187,"name":"Pere David\'s deer"},{"kg":185,"name":"Sambar"},{"kg":180,"name":"Wild boar"},{"kg":178,"name":"Scimitar-horned oryx"},{"kg":177,"name":"Ross seal"},{"kg":175,"name":"Lion"},{"kg":170,"name":"Gemsbok"},{"kg":166,"name":"Northern fur seal"},{"kg":165,"name":"Blue wildebeest"},{"kg":164,"name":"Fraser\'s dolphin"},{"kg":160,"name":"Argali"},{"kg":159,"name":"Hartebeest"},{"kg":155,"name":"Anoa"},{"kg":154,"name":"American black bear"},{"kg":150,"name":"Mountain anoa"},{"kg":149,"name":"Mountain tapir"},{"kg":140,"name":"Gorilla"},{"kg":135,"name":"Thorold\'s deer"},{"kg":132,"name":"Black wildebeest"},{"kg":128,"name":"South African fur seal"},{"kg":123,"name":"Eld\'s deer"},{"kg":121,"name":"Arabian oryx"},{"kg":120,"name":"Tiger"},{"kg":118,"name":"Giant panda"},{"kg":115,"name":"Harbor seal"},{"kg":114,"name":"Rough-toothed dolphin"},{"kg":113,"name":"Striped dolphin"},{"kg":110,"name":"Topi"},{"kg":109,"name":"Spectacled bear"},{"kg":105,"name":"Kob"},{"kg":104,"name":"Asiatic black bear"},{"kg":103,"name":"Bearded pig"},{"kg":101,"name":"Reindeer"},{"kg":100,"name":"Sloth bear"},{"kg":95,"name":"Lechwe"},{"kg":93,"name":"Addax"},{"kg":90,"name":"Mountain goat"},{"kg":88,"name":"Bushpig"},{"kg":87,"name":"White-tailed deer"},{"kg":86,"name":"Caspian seal"},{"kg":85,"name":"Spotted seal"},{"kg":84,"name":"Amazon dolphin"},{"kg":83,"name":"Ibex"},{"kg":81,"name":"Jaguar"},{"kg":80,"name":"Short-beaked saddleback dolphin"},{"kg":76,"name":"Javan pig"},{"kg":75,"name":"Nilgiri tahr"},{"kg":73,"name":"Dall\'s sheep"},{"kg":72,"name":"Babirusa"},{"kg":70,"name":"Bighorn sheep"},{"kg":67,"name":"Grant\'s gazelle"},{"kg":64,"name":"Orangutan"},{"kg":63,"name":"Cougar"},{"kg":62,"name":"Yellow-backed duiker"},{"kg":60,"name":"Aardvark"},{"kg":58,"name":"Southern reedbuck"},{"kg":57,"name":"Mule deer"},{"kg":56,"name":"Hector\'s dolphin"},{"kg":55,"name":"Red kangaroo"},{"kg":54,"name":"Leopard"},{"kg":53,"name":"Harbor porpoise"},{"kg":50,"name":"Snow leopard"},{"kg":49,"name":"Rhim gazelle"},{"kg":47,"name":"River dolphin"},{"kg":46,"name":"Sun bear"},{"kg":45,"name":"Chimpanzee"},{"kg":44,"name":"Gerenuk"},{"kg":42,"name":"Brown hyena"},{"kg":41,"name":"Calamian deer"},{"kg":40,"name":"Bonono"},{"kg":39,"name":"Eastern roe deer"},{"kg":38,"name":"Blackbuck"},{"kg":36,"name":"Chital"},{"kg":35,"name":"Himalayan tahr"},{"kg":34,"name":"Tufted deer"},{"kg":33,"name":"Giant armadillo"},{"kg":32,"name":"Goral"},{"kg":31,"name":"Northern hairy-nosed wombat"},{"kg":30,"name":"Mongolian gazelle"},{"kg":29,"name":"Giant anteater"},{"kg":28,"name":"Western gray kangaroo"},{"kg":27,"name":"Gray wolf"},{"kg":26,"name":"Hairy-nosed wobat"},{"kg":25,"name":"European beaver"},{"kg":24,"name":"Giant otter"},{"kg":23,"name":"Lynx"},{"kg":22,"name":"Maned wolf"},{"kg":21,"name":"Indian muntjac"},{"kg":20,"name":"Clouded leopard"},{"kg":19,"name":"Four-horned antelope"},{"kg":18,"name":"Hamadryas baboon"},{"kg":17,"name":"Whiptail wallaby"},{"kg":16,"name":"Wolverine"},{"kg":15,"name":"Proboscis monkey"},{"kg":14,"name":"Asiatic golden cat"},{"kg":13,"name":"Coyote"},{"kg":12,"name":"Chinese water deer"},{"kg":11,"name":"Grizzled tree kangaroo"},{"kg":10,"name":"Doria\'s tree kangaroo"},{"kg":9,"name":"Bobcat"},{"kg":8,"name":"Black spider monkey"},{"kg":7,"name":"Tasmanian devil"},{"name":"Common raccon","kg":6,"url":"https://en.wikipedia.org/wiki/Raccoon"},{"kg":5,"name":"Gray fox"},{"kg":4,"name":"Striped skunk"},{"kg":3,"name":"Large bamboo rat"},{"kg":2,"name":"Red giant flying squirrel"},{"kg":1,"name":"Guinea pig"},{"kg":0.5,"name":"African hedgehog"}]')}},wn=>{wn(wn.s=5633)}]);